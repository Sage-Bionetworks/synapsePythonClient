
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python client for Sage Bionetworks' Synapse, a collaborative, open-source research platform that allows teams to share data, track analyses, and collaborate. The Python client can be used as a library for development of software that communicates with Synapse or as a command-line utility.">
      
      
        <meta name="author" content="Bryan Fauble">
      
      
      
        <link rel="prev" href="../../guides/validate_annotations/">
      
      
        <link rel="next" href="../synapse_utils/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>Client - Synapse Python/Command Line Client Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
      <link rel="stylesheet" href="../../termynal.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#client" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Synapse Python/Command Line Client Documentation" class="md-header__button md-logo" aria-label="Synapse Python/Command Line Client Documentation" data-md-component="logo">
      
  <img src="../../assets/synapse_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Synapse Python/Command Line Client Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Client
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Sage-Bionetworks/synapsePythonClient" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    synapsePythonClient
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/home/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/home/" class="md-tabs__link">
          
  
  How-To Guides

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../explanations/home/" class="md-tabs__link">
          
  
  Further Reading

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../news/" class="md-tabs__link">
          
  
  News

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Synapse Python/Command Line Client Documentation" class="md-nav__button md-logo" aria-label="Synapse Python/Command Line Client Documentation" data-md-component="logo">
      
  <img src="../../assets/synapse_logo.png" alt="logo">

    </a>
    Synapse Python/Command Line Client Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Sage-Bionetworks/synapsePythonClient" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    synapsePythonClient
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Working with the Python client
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Working with the Python client
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/python_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/python/project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/python/folder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/python/file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/python/annotation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/python/upload_data_in_bulk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upload data in bulk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/python/download_data_in_bulk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Download data in bulk
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/command_line_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with the Command Line Client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/file_versioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with file versioning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/reticulate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synapseclient with R through reticulate
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-To Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Entity Views
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/data_storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/accessing_the_rest_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Access the REST API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Expermental Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Expermental Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/validate_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validating Annotations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Client
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Client
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#synapseclient.Synapse" class="md-nav__link">
    <span class="md-ellipsis">
      Synapse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Synapse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.login" class="md-nav__link">
    <span class="md-ellipsis">
      login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.logout" class="md-nav__link">
    <span class="md-ellipsis">
      logout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.store" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.move" class="md-nav__link">
    <span class="md-ellipsis">
      move
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.delete" class="md-nav__link">
    <span class="md-ellipsis">
      delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      get_annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.set_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      set_annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.tableQuery" class="md-nav__link">
    <span class="md-ellipsis">
      tableQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.createColumns" class="md-nav__link">
    <span class="md-ellipsis">
      createColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getColumn" class="md-nav__link">
    <span class="md-ellipsis">
      getColumn
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getColumns" class="md-nav__link">
    <span class="md-ellipsis">
      getColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getTableColumns" class="md-nav__link">
    <span class="md-ellipsis">
      getTableColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.downloadTableColumns" class="md-nav__link">
    <span class="md-ellipsis">
      downloadTableColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_acl" class="md-nav__link">
    <span class="md-ellipsis">
      get_acl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      get_permissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getPermissions" class="md-nav__link">
    <span class="md-ellipsis">
      getPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setPermissions" class="md-nav__link">
    <span class="md-ellipsis">
      setPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getProvenance" class="md-nav__link">
    <span class="md-ellipsis">
      getProvenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setProvenance" class="md-nav__link">
    <span class="md-ellipsis">
      setProvenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.deleteProvenance" class="md-nav__link">
    <span class="md-ellipsis">
      deleteProvenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.updateActivity" class="md-nav__link">
    <span class="md-ellipsis">
      updateActivity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.findEntityId" class="md-nav__link">
    <span class="md-ellipsis">
      findEntityId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getChildren" class="md-nav__link">
    <span class="md-ellipsis">
      getChildren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getTeam" class="md-nav__link">
    <span class="md-ellipsis">
      getTeam
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getTeamMembers" class="md-nav__link">
    <span class="md-ellipsis">
      getTeamMembers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.invite_to_team" class="md-nav__link">
    <span class="md-ellipsis">
      invite_to_team
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_membership_status" class="md-nav__link">
    <span class="md-ellipsis">
      get_membership_status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_team_open_invitations" class="md-nav__link">
    <span class="md-ellipsis">
      get_team_open_invitations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.send_membership_invitation" class="md-nav__link">
    <span class="md-ellipsis">
      send_membership_invitation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.submit" class="md-nav__link">
    <span class="md-ellipsis">
      submit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getConfigFile" class="md-nav__link">
    <span class="md-ellipsis">
      getConfigFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setEndpoints" class="md-nav__link">
    <span class="md-ellipsis">
      setEndpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.invalidateAPIKey" class="md-nav__link">
    <span class="md-ellipsis">
      invalidateAPIKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_user_profile_by_username" class="md-nav__link">
    <span class="md-ellipsis">
      get_user_profile_by_username
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_user_profile_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_user_profile_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getUserProfile" class="md-nav__link">
    <span class="md-ellipsis">
      getUserProfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.is_certified" class="md-nav__link">
    <span class="md-ellipsis">
      is_certified
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.is_synapse_id" class="md-nav__link">
    <span class="md-ellipsis">
      is_synapse_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.onweb" class="md-nav__link">
    <span class="md-ellipsis">
      onweb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.printEntity" class="md-nav__link">
    <span class="md-ellipsis">
      printEntity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_available_services" class="md-nav__link">
    <span class="md-ellipsis">
      get_available_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.service" class="md-nav__link">
    <span class="md-ellipsis">
      service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.clear_download_list" class="md-nav__link">
    <span class="md-ellipsis">
      clear_download_list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_external_s3_file_handle" class="md-nav__link">
    <span class="md-ellipsis">
      create_external_s3_file_handle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getMyStorageLocationSetting" class="md-nav__link">
    <span class="md-ellipsis">
      getMyStorageLocationSetting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.createStorageLocationSetting" class="md-nav__link">
    <span class="md-ellipsis">
      createStorageLocationSetting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_s3_storage_location" class="md-nav__link">
    <span class="md-ellipsis">
      create_s3_storage_location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setStorageLocation" class="md-nav__link">
    <span class="md-ellipsis">
      setStorageLocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_sts_storage_token" class="md-nav__link">
    <span class="md-ellipsis">
      get_sts_storage_token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_snapshot_version" class="md-nav__link">
    <span class="md-ellipsis">
      create_snapshot_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getConfigFile" class="md-nav__link">
    <span class="md-ellipsis">
      getConfigFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getEvaluation" class="md-nav__link">
    <span class="md-ellipsis">
      getEvaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getEvaluationByContentSource" class="md-nav__link">
    <span class="md-ellipsis">
      getEvaluationByContentSource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getEvaluationByName" class="md-nav__link">
    <span class="md-ellipsis">
      getEvaluationByName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_team" class="md-nav__link">
    <span class="md-ellipsis">
      create_team
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.delete_team" class="md-nav__link">
    <span class="md-ellipsis">
      delete_team
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getProjectSetting" class="md-nav__link">
    <span class="md-ellipsis">
      getProjectSetting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmission" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmissions" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmissionBundles" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmissionBundles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmissionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmissionStatus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getWiki" class="md-nav__link">
    <span class="md-ellipsis">
      getWiki
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getWikiAttachments" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiAttachments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getWikiHeaders" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiHeaders
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_download_list" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_download_list_manifest" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_list_manifest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.remove_from_download_list" class="md-nav__link">
    <span class="md-ellipsis">
      remove_from_download_list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.md5Query" class="md-nav__link">
    <span class="md-ellipsis">
      md5Query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.sendMessage" class="md-nav__link">
    <span class="md-ellipsis">
      sendMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.uploadFileHandle" class="md-nav__link">
    <span class="md-ellipsis">
      uploadFileHandle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restGET" class="md-nav__link">
    <span class="md-ellipsis">
      restGET
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restPOST" class="md-nav__link">
    <span class="md-ellipsis">
      restPOST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restPUT" class="md-nav__link">
    <span class="md-ellipsis">
      restPUT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restDELETE" class="md-nav__link">
    <span class="md-ellipsis">
      restDELETE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_get_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_get_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_post_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_post_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_put_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_put_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_delete_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_delete_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-information" class="md-nav__link">
    <span class="md-ellipsis">
      More information
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../synapse_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synapse Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../folder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../table_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Table Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../view_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entity View Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity/Provenance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Teams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wiki/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wiki
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Link
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker_repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DockerRepository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permissions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rest_apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST Apis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_22" >
        
          
          <label class="md-nav__link" for="__nav_4_22" id="__nav_4_22_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_22">
            <span class="md-nav__icon md-icon"></span>
            Experimental
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oop/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Object-Orientated Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oop/models_async/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async Object-Orientated Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Further Reading
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Further Reading
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/domain_models_of_synapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Domain Models of Synapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/access_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Access Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/properties_vs_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Properties vs Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/manifest_tsv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manifest TSV
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/benchmarking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmarking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/structuring_your_project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Structuring Your Project
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    News
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            News
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#synapseclient.Synapse" class="md-nav__link">
    <span class="md-ellipsis">
      Synapse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Synapse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.login" class="md-nav__link">
    <span class="md-ellipsis">
      login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.logout" class="md-nav__link">
    <span class="md-ellipsis">
      logout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.store" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.move" class="md-nav__link">
    <span class="md-ellipsis">
      move
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.delete" class="md-nav__link">
    <span class="md-ellipsis">
      delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      get_annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.set_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      set_annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.tableQuery" class="md-nav__link">
    <span class="md-ellipsis">
      tableQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.createColumns" class="md-nav__link">
    <span class="md-ellipsis">
      createColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getColumn" class="md-nav__link">
    <span class="md-ellipsis">
      getColumn
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getColumns" class="md-nav__link">
    <span class="md-ellipsis">
      getColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getTableColumns" class="md-nav__link">
    <span class="md-ellipsis">
      getTableColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.downloadTableColumns" class="md-nav__link">
    <span class="md-ellipsis">
      downloadTableColumns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_acl" class="md-nav__link">
    <span class="md-ellipsis">
      get_acl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      get_permissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getPermissions" class="md-nav__link">
    <span class="md-ellipsis">
      getPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setPermissions" class="md-nav__link">
    <span class="md-ellipsis">
      setPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getProvenance" class="md-nav__link">
    <span class="md-ellipsis">
      getProvenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setProvenance" class="md-nav__link">
    <span class="md-ellipsis">
      setProvenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.deleteProvenance" class="md-nav__link">
    <span class="md-ellipsis">
      deleteProvenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.updateActivity" class="md-nav__link">
    <span class="md-ellipsis">
      updateActivity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.findEntityId" class="md-nav__link">
    <span class="md-ellipsis">
      findEntityId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getChildren" class="md-nav__link">
    <span class="md-ellipsis">
      getChildren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getTeam" class="md-nav__link">
    <span class="md-ellipsis">
      getTeam
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getTeamMembers" class="md-nav__link">
    <span class="md-ellipsis">
      getTeamMembers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.invite_to_team" class="md-nav__link">
    <span class="md-ellipsis">
      invite_to_team
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_membership_status" class="md-nav__link">
    <span class="md-ellipsis">
      get_membership_status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_team_open_invitations" class="md-nav__link">
    <span class="md-ellipsis">
      get_team_open_invitations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.send_membership_invitation" class="md-nav__link">
    <span class="md-ellipsis">
      send_membership_invitation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.submit" class="md-nav__link">
    <span class="md-ellipsis">
      submit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getConfigFile" class="md-nav__link">
    <span class="md-ellipsis">
      getConfigFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setEndpoints" class="md-nav__link">
    <span class="md-ellipsis">
      setEndpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.invalidateAPIKey" class="md-nav__link">
    <span class="md-ellipsis">
      invalidateAPIKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_user_profile_by_username" class="md-nav__link">
    <span class="md-ellipsis">
      get_user_profile_by_username
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_user_profile_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_user_profile_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getUserProfile" class="md-nav__link">
    <span class="md-ellipsis">
      getUserProfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.is_certified" class="md-nav__link">
    <span class="md-ellipsis">
      is_certified
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.is_synapse_id" class="md-nav__link">
    <span class="md-ellipsis">
      is_synapse_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.onweb" class="md-nav__link">
    <span class="md-ellipsis">
      onweb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.printEntity" class="md-nav__link">
    <span class="md-ellipsis">
      printEntity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_available_services" class="md-nav__link">
    <span class="md-ellipsis">
      get_available_services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.service" class="md-nav__link">
    <span class="md-ellipsis">
      service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.clear_download_list" class="md-nav__link">
    <span class="md-ellipsis">
      clear_download_list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_external_s3_file_handle" class="md-nav__link">
    <span class="md-ellipsis">
      create_external_s3_file_handle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getMyStorageLocationSetting" class="md-nav__link">
    <span class="md-ellipsis">
      getMyStorageLocationSetting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.createStorageLocationSetting" class="md-nav__link">
    <span class="md-ellipsis">
      createStorageLocationSetting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_s3_storage_location" class="md-nav__link">
    <span class="md-ellipsis">
      create_s3_storage_location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.setStorageLocation" class="md-nav__link">
    <span class="md-ellipsis">
      setStorageLocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_sts_storage_token" class="md-nav__link">
    <span class="md-ellipsis">
      get_sts_storage_token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_snapshot_version" class="md-nav__link">
    <span class="md-ellipsis">
      create_snapshot_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getConfigFile" class="md-nav__link">
    <span class="md-ellipsis">
      getConfigFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getEvaluation" class="md-nav__link">
    <span class="md-ellipsis">
      getEvaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getEvaluationByContentSource" class="md-nav__link">
    <span class="md-ellipsis">
      getEvaluationByContentSource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getEvaluationByName" class="md-nav__link">
    <span class="md-ellipsis">
      getEvaluationByName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.create_team" class="md-nav__link">
    <span class="md-ellipsis">
      create_team
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.delete_team" class="md-nav__link">
    <span class="md-ellipsis">
      delete_team
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getProjectSetting" class="md-nav__link">
    <span class="md-ellipsis">
      getProjectSetting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmission" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmissions" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmissionBundles" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmissionBundles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getSubmissionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      getSubmissionStatus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getWiki" class="md-nav__link">
    <span class="md-ellipsis">
      getWiki
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getWikiAttachments" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiAttachments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.getWikiHeaders" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiHeaders
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_download_list" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.get_download_list_manifest" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_list_manifest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.remove_from_download_list" class="md-nav__link">
    <span class="md-ellipsis">
      remove_from_download_list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.md5Query" class="md-nav__link">
    <span class="md-ellipsis">
      md5Query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.sendMessage" class="md-nav__link">
    <span class="md-ellipsis">
      sendMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.uploadFileHandle" class="md-nav__link">
    <span class="md-ellipsis">
      uploadFileHandle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restGET" class="md-nav__link">
    <span class="md-ellipsis">
      restGET
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restPOST" class="md-nav__link">
    <span class="md-ellipsis">
      restPOST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restPUT" class="md-nav__link">
    <span class="md-ellipsis">
      restPUT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.restDELETE" class="md-nav__link">
    <span class="md-ellipsis">
      restDELETE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_get_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_get_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_post_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_post_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_put_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_put_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.Synapse.rest_delete_async" class="md-nav__link">
    <span class="md-ellipsis">
      rest_delete_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-information" class="md-nav__link">
    <span class="md-ellipsis">
      More information
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="client">Client<a class="headerlink" href="#client" title="Permanent link">&para;</a></h1>
<!-- We are manually defining the members here in this case to control the ordering of
those memebrs. We are roughly grouping these for similar functionality. -->


<div class="doc doc-object doc-class">



<h2 id="synapseclient.Synapse" class="doc doc-heading">
            <code>synapseclient.Synapse</code>


<a href="#synapseclient.Synapse" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>Constructs a Python client object for the Synapse repository service</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.repoEndpoint">repoEndpoint</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Location of Synapse repository</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.authEndpoint">authEndpoint</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Location of authentication service</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.fileHandleEndpoint">fileHandleEndpoint</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Location of file service</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.portalEndpoint">portalEndpoint</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Location of the website</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.serviceTimeoutSeconds">serviceTimeoutSeconds</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Wait time before timeout (currently unused)</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.debug">debug</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Print debugging messages if True</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.skip_checks">skip_checks</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Skip version and endpoint checks</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.configPath">configPath</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Path to config File with setting for Synapse. Defaults to ~/.synapseConfig</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.requests_session">requests_session</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>A custom <a href="https://requests.readthedocs.io/en/latest/user/advanced/">requests.Session object</a> that this Synapse instance will use
                   when making http requests.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.cache_root_dir">cache_root_dir</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Root directory for storing cache data</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="synapseclient.Synapse.silent">silent</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Defaults to False.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Getting started</summary>
  <p>Logging in to Synapse using an authToken</p>
<pre><code>import synapseclient
syn = synapseclient.login(authToken="authtoken")
</code></pre>
<p>Using environment variable or <code>.synapseConfig</code></p>
<pre><code>import synapseclient
syn = synapseclient.login()
</code></pre>
</details>
              <details class="quote">
                <summary>Source code in <code>synapseclient/client.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span>
<span class="normal">2146</span>
<span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span>
<span class="normal">2180</span>
<span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span>
<span class="normal">2184</span>
<span class="normal">2185</span>
<span class="normal">2186</span>
<span class="normal">2187</span>
<span class="normal">2188</span>
<span class="normal">2189</span>
<span class="normal">2190</span>
<span class="normal">2191</span>
<span class="normal">2192</span>
<span class="normal">2193</span>
<span class="normal">2194</span>
<span class="normal">2195</span>
<span class="normal">2196</span>
<span class="normal">2197</span>
<span class="normal">2198</span>
<span class="normal">2199</span>
<span class="normal">2200</span>
<span class="normal">2201</span>
<span class="normal">2202</span>
<span class="normal">2203</span>
<span class="normal">2204</span>
<span class="normal">2205</span>
<span class="normal">2206</span>
<span class="normal">2207</span>
<span class="normal">2208</span>
<span class="normal">2209</span>
<span class="normal">2210</span>
<span class="normal">2211</span>
<span class="normal">2212</span>
<span class="normal">2213</span>
<span class="normal">2214</span>
<span class="normal">2215</span>
<span class="normal">2216</span>
<span class="normal">2217</span>
<span class="normal">2218</span>
<span class="normal">2219</span>
<span class="normal">2220</span>
<span class="normal">2221</span>
<span class="normal">2222</span>
<span class="normal">2223</span>
<span class="normal">2224</span>
<span class="normal">2225</span>
<span class="normal">2226</span>
<span class="normal">2227</span>
<span class="normal">2228</span>
<span class="normal">2229</span>
<span class="normal">2230</span>
<span class="normal">2231</span>
<span class="normal">2232</span>
<span class="normal">2233</span>
<span class="normal">2234</span>
<span class="normal">2235</span>
<span class="normal">2236</span>
<span class="normal">2237</span>
<span class="normal">2238</span>
<span class="normal">2239</span>
<span class="normal">2240</span>
<span class="normal">2241</span>
<span class="normal">2242</span>
<span class="normal">2243</span>
<span class="normal">2244</span>
<span class="normal">2245</span>
<span class="normal">2246</span>
<span class="normal">2247</span>
<span class="normal">2248</span>
<span class="normal">2249</span>
<span class="normal">2250</span>
<span class="normal">2251</span>
<span class="normal">2252</span>
<span class="normal">2253</span>
<span class="normal">2254</span>
<span class="normal">2255</span>
<span class="normal">2256</span>
<span class="normal">2257</span>
<span class="normal">2258</span>
<span class="normal">2259</span>
<span class="normal">2260</span>
<span class="normal">2261</span>
<span class="normal">2262</span>
<span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span>
<span class="normal">2285</span>
<span class="normal">2286</span>
<span class="normal">2287</span>
<span class="normal">2288</span>
<span class="normal">2289</span>
<span class="normal">2290</span>
<span class="normal">2291</span>
<span class="normal">2292</span>
<span class="normal">2293</span>
<span class="normal">2294</span>
<span class="normal">2295</span>
<span class="normal">2296</span>
<span class="normal">2297</span>
<span class="normal">2298</span>
<span class="normal">2299</span>
<span class="normal">2300</span>
<span class="normal">2301</span>
<span class="normal">2302</span>
<span class="normal">2303</span>
<span class="normal">2304</span>
<span class="normal">2305</span>
<span class="normal">2306</span>
<span class="normal">2307</span>
<span class="normal">2308</span>
<span class="normal">2309</span>
<span class="normal">2310</span>
<span class="normal">2311</span>
<span class="normal">2312</span>
<span class="normal">2313</span>
<span class="normal">2314</span>
<span class="normal">2315</span>
<span class="normal">2316</span>
<span class="normal">2317</span>
<span class="normal">2318</span>
<span class="normal">2319</span>
<span class="normal">2320</span>
<span class="normal">2321</span>
<span class="normal">2322</span>
<span class="normal">2323</span>
<span class="normal">2324</span>
<span class="normal">2325</span>
<span class="normal">2326</span>
<span class="normal">2327</span>
<span class="normal">2328</span>
<span class="normal">2329</span>
<span class="normal">2330</span>
<span class="normal">2331</span>
<span class="normal">2332</span>
<span class="normal">2333</span>
<span class="normal">2334</span>
<span class="normal">2335</span>
<span class="normal">2336</span>
<span class="normal">2337</span>
<span class="normal">2338</span>
<span class="normal">2339</span>
<span class="normal">2340</span>
<span class="normal">2341</span>
<span class="normal">2342</span>
<span class="normal">2343</span>
<span class="normal">2344</span>
<span class="normal">2345</span>
<span class="normal">2346</span>
<span class="normal">2347</span>
<span class="normal">2348</span>
<span class="normal">2349</span>
<span class="normal">2350</span>
<span class="normal">2351</span>
<span class="normal">2352</span>
<span class="normal">2353</span>
<span class="normal">2354</span>
<span class="normal">2355</span>
<span class="normal">2356</span>
<span class="normal">2357</span>
<span class="normal">2358</span>
<span class="normal">2359</span>
<span class="normal">2360</span>
<span class="normal">2361</span>
<span class="normal">2362</span>
<span class="normal">2363</span>
<span class="normal">2364</span>
<span class="normal">2365</span>
<span class="normal">2366</span>
<span class="normal">2367</span>
<span class="normal">2368</span>
<span class="normal">2369</span>
<span class="normal">2370</span>
<span class="normal">2371</span>
<span class="normal">2372</span>
<span class="normal">2373</span>
<span class="normal">2374</span>
<span class="normal">2375</span>
<span class="normal">2376</span>
<span class="normal">2377</span>
<span class="normal">2378</span>
<span class="normal">2379</span>
<span class="normal">2380</span>
<span class="normal">2381</span>
<span class="normal">2382</span>
<span class="normal">2383</span>
<span class="normal">2384</span>
<span class="normal">2385</span>
<span class="normal">2386</span>
<span class="normal">2387</span>
<span class="normal">2388</span>
<span class="normal">2389</span>
<span class="normal">2390</span>
<span class="normal">2391</span>
<span class="normal">2392</span>
<span class="normal">2393</span>
<span class="normal">2394</span>
<span class="normal">2395</span>
<span class="normal">2396</span>
<span class="normal">2397</span>
<span class="normal">2398</span>
<span class="normal">2399</span>
<span class="normal">2400</span>
<span class="normal">2401</span>
<span class="normal">2402</span>
<span class="normal">2403</span>
<span class="normal">2404</span>
<span class="normal">2405</span>
<span class="normal">2406</span>
<span class="normal">2407</span>
<span class="normal">2408</span>
<span class="normal">2409</span>
<span class="normal">2410</span>
<span class="normal">2411</span>
<span class="normal">2412</span>
<span class="normal">2413</span>
<span class="normal">2414</span>
<span class="normal">2415</span>
<span class="normal">2416</span>
<span class="normal">2417</span>
<span class="normal">2418</span>
<span class="normal">2419</span>
<span class="normal">2420</span>
<span class="normal">2421</span>
<span class="normal">2422</span>
<span class="normal">2423</span>
<span class="normal">2424</span>
<span class="normal">2425</span>
<span class="normal">2426</span>
<span class="normal">2427</span>
<span class="normal">2428</span>
<span class="normal">2429</span>
<span class="normal">2430</span>
<span class="normal">2431</span>
<span class="normal">2432</span>
<span class="normal">2433</span>
<span class="normal">2434</span>
<span class="normal">2435</span>
<span class="normal">2436</span>
<span class="normal">2437</span>
<span class="normal">2438</span>
<span class="normal">2439</span>
<span class="normal">2440</span>
<span class="normal">2441</span>
<span class="normal">2442</span>
<span class="normal">2443</span>
<span class="normal">2444</span>
<span class="normal">2445</span>
<span class="normal">2446</span>
<span class="normal">2447</span>
<span class="normal">2448</span>
<span class="normal">2449</span>
<span class="normal">2450</span>
<span class="normal">2451</span>
<span class="normal">2452</span>
<span class="normal">2453</span>
<span class="normal">2454</span>
<span class="normal">2455</span>
<span class="normal">2456</span>
<span class="normal">2457</span>
<span class="normal">2458</span>
<span class="normal">2459</span>
<span class="normal">2460</span>
<span class="normal">2461</span>
<span class="normal">2462</span>
<span class="normal">2463</span>
<span class="normal">2464</span>
<span class="normal">2465</span>
<span class="normal">2466</span>
<span class="normal">2467</span>
<span class="normal">2468</span>
<span class="normal">2469</span>
<span class="normal">2470</span>
<span class="normal">2471</span>
<span class="normal">2472</span>
<span class="normal">2473</span>
<span class="normal">2474</span>
<span class="normal">2475</span>
<span class="normal">2476</span>
<span class="normal">2477</span>
<span class="normal">2478</span>
<span class="normal">2479</span>
<span class="normal">2480</span>
<span class="normal">2481</span>
<span class="normal">2482</span>
<span class="normal">2483</span>
<span class="normal">2484</span>
<span class="normal">2485</span>
<span class="normal">2486</span>
<span class="normal">2487</span>
<span class="normal">2488</span>
<span class="normal">2489</span>
<span class="normal">2490</span>
<span class="normal">2491</span>
<span class="normal">2492</span>
<span class="normal">2493</span>
<span class="normal">2494</span>
<span class="normal">2495</span>
<span class="normal">2496</span>
<span class="normal">2497</span>
<span class="normal">2498</span>
<span class="normal">2499</span>
<span class="normal">2500</span>
<span class="normal">2501</span>
<span class="normal">2502</span>
<span class="normal">2503</span>
<span class="normal">2504</span>
<span class="normal">2505</span>
<span class="normal">2506</span>
<span class="normal">2507</span>
<span class="normal">2508</span>
<span class="normal">2509</span>
<span class="normal">2510</span>
<span class="normal">2511</span>
<span class="normal">2512</span>
<span class="normal">2513</span>
<span class="normal">2514</span>
<span class="normal">2515</span>
<span class="normal">2516</span>
<span class="normal">2517</span>
<span class="normal">2518</span>
<span class="normal">2519</span>
<span class="normal">2520</span>
<span class="normal">2521</span>
<span class="normal">2522</span>
<span class="normal">2523</span>
<span class="normal">2524</span>
<span class="normal">2525</span>
<span class="normal">2526</span>
<span class="normal">2527</span>
<span class="normal">2528</span>
<span class="normal">2529</span>
<span class="normal">2530</span>
<span class="normal">2531</span>
<span class="normal">2532</span>
<span class="normal">2533</span>
<span class="normal">2534</span>
<span class="normal">2535</span>
<span class="normal">2536</span>
<span class="normal">2537</span>
<span class="normal">2538</span>
<span class="normal">2539</span>
<span class="normal">2540</span>
<span class="normal">2541</span>
<span class="normal">2542</span>
<span class="normal">2543</span>
<span class="normal">2544</span>
<span class="normal">2545</span>
<span class="normal">2546</span>
<span class="normal">2547</span>
<span class="normal">2548</span>
<span class="normal">2549</span>
<span class="normal">2550</span>
<span class="normal">2551</span>
<span class="normal">2552</span>
<span class="normal">2553</span>
<span class="normal">2554</span>
<span class="normal">2555</span>
<span class="normal">2556</span>
<span class="normal">2557</span>
<span class="normal">2558</span>
<span class="normal">2559</span>
<span class="normal">2560</span>
<span class="normal">2561</span>
<span class="normal">2562</span>
<span class="normal">2563</span>
<span class="normal">2564</span>
<span class="normal">2565</span>
<span class="normal">2566</span>
<span class="normal">2567</span>
<span class="normal">2568</span>
<span class="normal">2569</span>
<span class="normal">2570</span>
<span class="normal">2571</span>
<span class="normal">2572</span>
<span class="normal">2573</span>
<span class="normal">2574</span>
<span class="normal">2575</span>
<span class="normal">2576</span>
<span class="normal">2577</span>
<span class="normal">2578</span>
<span class="normal">2579</span>
<span class="normal">2580</span>
<span class="normal">2581</span>
<span class="normal">2582</span>
<span class="normal">2583</span>
<span class="normal">2584</span>
<span class="normal">2585</span>
<span class="normal">2586</span>
<span class="normal">2587</span>
<span class="normal">2588</span>
<span class="normal">2589</span>
<span class="normal">2590</span>
<span class="normal">2591</span>
<span class="normal">2592</span>
<span class="normal">2593</span>
<span class="normal">2594</span>
<span class="normal">2595</span>
<span class="normal">2596</span>
<span class="normal">2597</span>
<span class="normal">2598</span>
<span class="normal">2599</span>
<span class="normal">2600</span>
<span class="normal">2601</span>
<span class="normal">2602</span>
<span class="normal">2603</span>
<span class="normal">2604</span>
<span class="normal">2605</span>
<span class="normal">2606</span>
<span class="normal">2607</span>
<span class="normal">2608</span>
<span class="normal">2609</span>
<span class="normal">2610</span>
<span class="normal">2611</span>
<span class="normal">2612</span>
<span class="normal">2613</span>
<span class="normal">2614</span>
<span class="normal">2615</span>
<span class="normal">2616</span>
<span class="normal">2617</span>
<span class="normal">2618</span>
<span class="normal">2619</span>
<span class="normal">2620</span>
<span class="normal">2621</span>
<span class="normal">2622</span>
<span class="normal">2623</span>
<span class="normal">2624</span>
<span class="normal">2625</span>
<span class="normal">2626</span>
<span class="normal">2627</span>
<span class="normal">2628</span>
<span class="normal">2629</span>
<span class="normal">2630</span>
<span class="normal">2631</span>
<span class="normal">2632</span>
<span class="normal">2633</span>
<span class="normal">2634</span>
<span class="normal">2635</span>
<span class="normal">2636</span>
<span class="normal">2637</span>
<span class="normal">2638</span>
<span class="normal">2639</span>
<span class="normal">2640</span>
<span class="normal">2641</span>
<span class="normal">2642</span>
<span class="normal">2643</span>
<span class="normal">2644</span>
<span class="normal">2645</span>
<span class="normal">2646</span>
<span class="normal">2647</span>
<span class="normal">2648</span>
<span class="normal">2649</span>
<span class="normal">2650</span>
<span class="normal">2651</span>
<span class="normal">2652</span>
<span class="normal">2653</span>
<span class="normal">2654</span>
<span class="normal">2655</span>
<span class="normal">2656</span>
<span class="normal">2657</span>
<span class="normal">2658</span>
<span class="normal">2659</span>
<span class="normal">2660</span>
<span class="normal">2661</span>
<span class="normal">2662</span>
<span class="normal">2663</span>
<span class="normal">2664</span>
<span class="normal">2665</span>
<span class="normal">2666</span>
<span class="normal">2667</span>
<span class="normal">2668</span>
<span class="normal">2669</span>
<span class="normal">2670</span>
<span class="normal">2671</span>
<span class="normal">2672</span>
<span class="normal">2673</span>
<span class="normal">2674</span>
<span class="normal">2675</span>
<span class="normal">2676</span>
<span class="normal">2677</span>
<span class="normal">2678</span>
<span class="normal">2679</span>
<span class="normal">2680</span>
<span class="normal">2681</span>
<span class="normal">2682</span>
<span class="normal">2683</span>
<span class="normal">2684</span>
<span class="normal">2685</span>
<span class="normal">2686</span>
<span class="normal">2687</span>
<span class="normal">2688</span>
<span class="normal">2689</span>
<span class="normal">2690</span>
<span class="normal">2691</span>
<span class="normal">2692</span>
<span class="normal">2693</span>
<span class="normal">2694</span>
<span class="normal">2695</span>
<span class="normal">2696</span>
<span class="normal">2697</span>
<span class="normal">2698</span>
<span class="normal">2699</span>
<span class="normal">2700</span>
<span class="normal">2701</span>
<span class="normal">2702</span>
<span class="normal">2703</span>
<span class="normal">2704</span>
<span class="normal">2705</span>
<span class="normal">2706</span>
<span class="normal">2707</span>
<span class="normal">2708</span>
<span class="normal">2709</span>
<span class="normal">2710</span>
<span class="normal">2711</span>
<span class="normal">2712</span>
<span class="normal">2713</span>
<span class="normal">2714</span>
<span class="normal">2715</span>
<span class="normal">2716</span>
<span class="normal">2717</span>
<span class="normal">2718</span>
<span class="normal">2719</span>
<span class="normal">2720</span>
<span class="normal">2721</span>
<span class="normal">2722</span>
<span class="normal">2723</span>
<span class="normal">2724</span>
<span class="normal">2725</span>
<span class="normal">2726</span>
<span class="normal">2727</span>
<span class="normal">2728</span>
<span class="normal">2729</span>
<span class="normal">2730</span>
<span class="normal">2731</span>
<span class="normal">2732</span>
<span class="normal">2733</span>
<span class="normal">2734</span>
<span class="normal">2735</span>
<span class="normal">2736</span>
<span class="normal">2737</span>
<span class="normal">2738</span>
<span class="normal">2739</span>
<span class="normal">2740</span>
<span class="normal">2741</span>
<span class="normal">2742</span>
<span class="normal">2743</span>
<span class="normal">2744</span>
<span class="normal">2745</span>
<span class="normal">2746</span>
<span class="normal">2747</span>
<span class="normal">2748</span>
<span class="normal">2749</span>
<span class="normal">2750</span>
<span class="normal">2751</span>
<span class="normal">2752</span>
<span class="normal">2753</span>
<span class="normal">2754</span>
<span class="normal">2755</span>
<span class="normal">2756</span>
<span class="normal">2757</span>
<span class="normal">2758</span>
<span class="normal">2759</span>
<span class="normal">2760</span>
<span class="normal">2761</span>
<span class="normal">2762</span>
<span class="normal">2763</span>
<span class="normal">2764</span>
<span class="normal">2765</span>
<span class="normal">2766</span>
<span class="normal">2767</span>
<span class="normal">2768</span>
<span class="normal">2769</span>
<span class="normal">2770</span>
<span class="normal">2771</span>
<span class="normal">2772</span>
<span class="normal">2773</span>
<span class="normal">2774</span>
<span class="normal">2775</span>
<span class="normal">2776</span>
<span class="normal">2777</span>
<span class="normal">2778</span>
<span class="normal">2779</span>
<span class="normal">2780</span>
<span class="normal">2781</span>
<span class="normal">2782</span>
<span class="normal">2783</span>
<span class="normal">2784</span>
<span class="normal">2785</span>
<span class="normal">2786</span>
<span class="normal">2787</span>
<span class="normal">2788</span>
<span class="normal">2789</span>
<span class="normal">2790</span>
<span class="normal">2791</span>
<span class="normal">2792</span>
<span class="normal">2793</span>
<span class="normal">2794</span>
<span class="normal">2795</span>
<span class="normal">2796</span>
<span class="normal">2797</span>
<span class="normal">2798</span>
<span class="normal">2799</span>
<span class="normal">2800</span>
<span class="normal">2801</span>
<span class="normal">2802</span>
<span class="normal">2803</span>
<span class="normal">2804</span>
<span class="normal">2805</span>
<span class="normal">2806</span>
<span class="normal">2807</span>
<span class="normal">2808</span>
<span class="normal">2809</span>
<span class="normal">2810</span>
<span class="normal">2811</span>
<span class="normal">2812</span>
<span class="normal">2813</span>
<span class="normal">2814</span>
<span class="normal">2815</span>
<span class="normal">2816</span>
<span class="normal">2817</span>
<span class="normal">2818</span>
<span class="normal">2819</span>
<span class="normal">2820</span>
<span class="normal">2821</span>
<span class="normal">2822</span>
<span class="normal">2823</span>
<span class="normal">2824</span>
<span class="normal">2825</span>
<span class="normal">2826</span>
<span class="normal">2827</span>
<span class="normal">2828</span>
<span class="normal">2829</span>
<span class="normal">2830</span>
<span class="normal">2831</span>
<span class="normal">2832</span>
<span class="normal">2833</span>
<span class="normal">2834</span>
<span class="normal">2835</span>
<span class="normal">2836</span>
<span class="normal">2837</span>
<span class="normal">2838</span>
<span class="normal">2839</span>
<span class="normal">2840</span>
<span class="normal">2841</span>
<span class="normal">2842</span>
<span class="normal">2843</span>
<span class="normal">2844</span>
<span class="normal">2845</span>
<span class="normal">2846</span>
<span class="normal">2847</span>
<span class="normal">2848</span>
<span class="normal">2849</span>
<span class="normal">2850</span>
<span class="normal">2851</span>
<span class="normal">2852</span>
<span class="normal">2853</span>
<span class="normal">2854</span>
<span class="normal">2855</span>
<span class="normal">2856</span>
<span class="normal">2857</span>
<span class="normal">2858</span>
<span class="normal">2859</span>
<span class="normal">2860</span>
<span class="normal">2861</span>
<span class="normal">2862</span>
<span class="normal">2863</span>
<span class="normal">2864</span>
<span class="normal">2865</span>
<span class="normal">2866</span>
<span class="normal">2867</span>
<span class="normal">2868</span>
<span class="normal">2869</span>
<span class="normal">2870</span>
<span class="normal">2871</span>
<span class="normal">2872</span>
<span class="normal">2873</span>
<span class="normal">2874</span>
<span class="normal">2875</span>
<span class="normal">2876</span>
<span class="normal">2877</span>
<span class="normal">2878</span>
<span class="normal">2879</span>
<span class="normal">2880</span>
<span class="normal">2881</span>
<span class="normal">2882</span>
<span class="normal">2883</span>
<span class="normal">2884</span>
<span class="normal">2885</span>
<span class="normal">2886</span>
<span class="normal">2887</span>
<span class="normal">2888</span>
<span class="normal">2889</span>
<span class="normal">2890</span>
<span class="normal">2891</span>
<span class="normal">2892</span>
<span class="normal">2893</span>
<span class="normal">2894</span>
<span class="normal">2895</span>
<span class="normal">2896</span>
<span class="normal">2897</span>
<span class="normal">2898</span>
<span class="normal">2899</span>
<span class="normal">2900</span>
<span class="normal">2901</span>
<span class="normal">2902</span>
<span class="normal">2903</span>
<span class="normal">2904</span>
<span class="normal">2905</span>
<span class="normal">2906</span>
<span class="normal">2907</span>
<span class="normal">2908</span>
<span class="normal">2909</span>
<span class="normal">2910</span>
<span class="normal">2911</span>
<span class="normal">2912</span>
<span class="normal">2913</span>
<span class="normal">2914</span>
<span class="normal">2915</span>
<span class="normal">2916</span>
<span class="normal">2917</span>
<span class="normal">2918</span>
<span class="normal">2919</span>
<span class="normal">2920</span>
<span class="normal">2921</span>
<span class="normal">2922</span>
<span class="normal">2923</span>
<span class="normal">2924</span>
<span class="normal">2925</span>
<span class="normal">2926</span>
<span class="normal">2927</span>
<span class="normal">2928</span>
<span class="normal">2929</span>
<span class="normal">2930</span>
<span class="normal">2931</span>
<span class="normal">2932</span>
<span class="normal">2933</span>
<span class="normal">2934</span>
<span class="normal">2935</span>
<span class="normal">2936</span>
<span class="normal">2937</span>
<span class="normal">2938</span>
<span class="normal">2939</span>
<span class="normal">2940</span>
<span class="normal">2941</span>
<span class="normal">2942</span>
<span class="normal">2943</span>
<span class="normal">2944</span>
<span class="normal">2945</span>
<span class="normal">2946</span>
<span class="normal">2947</span>
<span class="normal">2948</span>
<span class="normal">2949</span>
<span class="normal">2950</span>
<span class="normal">2951</span>
<span class="normal">2952</span>
<span class="normal">2953</span>
<span class="normal">2954</span>
<span class="normal">2955</span>
<span class="normal">2956</span>
<span class="normal">2957</span>
<span class="normal">2958</span>
<span class="normal">2959</span>
<span class="normal">2960</span>
<span class="normal">2961</span>
<span class="normal">2962</span>
<span class="normal">2963</span>
<span class="normal">2964</span>
<span class="normal">2965</span>
<span class="normal">2966</span>
<span class="normal">2967</span>
<span class="normal">2968</span>
<span class="normal">2969</span>
<span class="normal">2970</span>
<span class="normal">2971</span>
<span class="normal">2972</span>
<span class="normal">2973</span>
<span class="normal">2974</span>
<span class="normal">2975</span>
<span class="normal">2976</span>
<span class="normal">2977</span>
<span class="normal">2978</span>
<span class="normal">2979</span>
<span class="normal">2980</span>
<span class="normal">2981</span>
<span class="normal">2982</span>
<span class="normal">2983</span>
<span class="normal">2984</span>
<span class="normal">2985</span>
<span class="normal">2986</span>
<span class="normal">2987</span>
<span class="normal">2988</span>
<span class="normal">2989</span>
<span class="normal">2990</span>
<span class="normal">2991</span>
<span class="normal">2992</span>
<span class="normal">2993</span>
<span class="normal">2994</span>
<span class="normal">2995</span>
<span class="normal">2996</span>
<span class="normal">2997</span>
<span class="normal">2998</span>
<span class="normal">2999</span>
<span class="normal">3000</span>
<span class="normal">3001</span>
<span class="normal">3002</span>
<span class="normal">3003</span>
<span class="normal">3004</span>
<span class="normal">3005</span>
<span class="normal">3006</span>
<span class="normal">3007</span>
<span class="normal">3008</span>
<span class="normal">3009</span>
<span class="normal">3010</span>
<span class="normal">3011</span>
<span class="normal">3012</span>
<span class="normal">3013</span>
<span class="normal">3014</span>
<span class="normal">3015</span>
<span class="normal">3016</span>
<span class="normal">3017</span>
<span class="normal">3018</span>
<span class="normal">3019</span>
<span class="normal">3020</span>
<span class="normal">3021</span>
<span class="normal">3022</span>
<span class="normal">3023</span>
<span class="normal">3024</span>
<span class="normal">3025</span>
<span class="normal">3026</span>
<span class="normal">3027</span>
<span class="normal">3028</span>
<span class="normal">3029</span>
<span class="normal">3030</span>
<span class="normal">3031</span>
<span class="normal">3032</span>
<span class="normal">3033</span>
<span class="normal">3034</span>
<span class="normal">3035</span>
<span class="normal">3036</span>
<span class="normal">3037</span>
<span class="normal">3038</span>
<span class="normal">3039</span>
<span class="normal">3040</span>
<span class="normal">3041</span>
<span class="normal">3042</span>
<span class="normal">3043</span>
<span class="normal">3044</span>
<span class="normal">3045</span>
<span class="normal">3046</span>
<span class="normal">3047</span>
<span class="normal">3048</span>
<span class="normal">3049</span>
<span class="normal">3050</span>
<span class="normal">3051</span>
<span class="normal">3052</span>
<span class="normal">3053</span>
<span class="normal">3054</span>
<span class="normal">3055</span>
<span class="normal">3056</span>
<span class="normal">3057</span>
<span class="normal">3058</span>
<span class="normal">3059</span>
<span class="normal">3060</span>
<span class="normal">3061</span>
<span class="normal">3062</span>
<span class="normal">3063</span>
<span class="normal">3064</span>
<span class="normal">3065</span>
<span class="normal">3066</span>
<span class="normal">3067</span>
<span class="normal">3068</span>
<span class="normal">3069</span>
<span class="normal">3070</span>
<span class="normal">3071</span>
<span class="normal">3072</span>
<span class="normal">3073</span>
<span class="normal">3074</span>
<span class="normal">3075</span>
<span class="normal">3076</span>
<span class="normal">3077</span>
<span class="normal">3078</span>
<span class="normal">3079</span>
<span class="normal">3080</span>
<span class="normal">3081</span>
<span class="normal">3082</span>
<span class="normal">3083</span>
<span class="normal">3084</span>
<span class="normal">3085</span>
<span class="normal">3086</span>
<span class="normal">3087</span>
<span class="normal">3088</span>
<span class="normal">3089</span>
<span class="normal">3090</span>
<span class="normal">3091</span>
<span class="normal">3092</span>
<span class="normal">3093</span>
<span class="normal">3094</span>
<span class="normal">3095</span>
<span class="normal">3096</span>
<span class="normal">3097</span>
<span class="normal">3098</span>
<span class="normal">3099</span>
<span class="normal">3100</span>
<span class="normal">3101</span>
<span class="normal">3102</span>
<span class="normal">3103</span>
<span class="normal">3104</span>
<span class="normal">3105</span>
<span class="normal">3106</span>
<span class="normal">3107</span>
<span class="normal">3108</span>
<span class="normal">3109</span>
<span class="normal">3110</span>
<span class="normal">3111</span>
<span class="normal">3112</span>
<span class="normal">3113</span>
<span class="normal">3114</span>
<span class="normal">3115</span>
<span class="normal">3116</span>
<span class="normal">3117</span>
<span class="normal">3118</span>
<span class="normal">3119</span>
<span class="normal">3120</span>
<span class="normal">3121</span>
<span class="normal">3122</span>
<span class="normal">3123</span>
<span class="normal">3124</span>
<span class="normal">3125</span>
<span class="normal">3126</span>
<span class="normal">3127</span>
<span class="normal">3128</span>
<span class="normal">3129</span>
<span class="normal">3130</span>
<span class="normal">3131</span>
<span class="normal">3132</span>
<span class="normal">3133</span>
<span class="normal">3134</span>
<span class="normal">3135</span>
<span class="normal">3136</span>
<span class="normal">3137</span>
<span class="normal">3138</span>
<span class="normal">3139</span>
<span class="normal">3140</span>
<span class="normal">3141</span>
<span class="normal">3142</span>
<span class="normal">3143</span>
<span class="normal">3144</span>
<span class="normal">3145</span>
<span class="normal">3146</span>
<span class="normal">3147</span>
<span class="normal">3148</span>
<span class="normal">3149</span>
<span class="normal">3150</span>
<span class="normal">3151</span>
<span class="normal">3152</span>
<span class="normal">3153</span>
<span class="normal">3154</span>
<span class="normal">3155</span>
<span class="normal">3156</span>
<span class="normal">3157</span>
<span class="normal">3158</span>
<span class="normal">3159</span>
<span class="normal">3160</span>
<span class="normal">3161</span>
<span class="normal">3162</span>
<span class="normal">3163</span>
<span class="normal">3164</span>
<span class="normal">3165</span>
<span class="normal">3166</span>
<span class="normal">3167</span>
<span class="normal">3168</span>
<span class="normal">3169</span>
<span class="normal">3170</span>
<span class="normal">3171</span>
<span class="normal">3172</span>
<span class="normal">3173</span>
<span class="normal">3174</span>
<span class="normal">3175</span>
<span class="normal">3176</span>
<span class="normal">3177</span>
<span class="normal">3178</span>
<span class="normal">3179</span>
<span class="normal">3180</span>
<span class="normal">3181</span>
<span class="normal">3182</span>
<span class="normal">3183</span>
<span class="normal">3184</span>
<span class="normal">3185</span>
<span class="normal">3186</span>
<span class="normal">3187</span>
<span class="normal">3188</span>
<span class="normal">3189</span>
<span class="normal">3190</span>
<span class="normal">3191</span>
<span class="normal">3192</span>
<span class="normal">3193</span>
<span class="normal">3194</span>
<span class="normal">3195</span>
<span class="normal">3196</span>
<span class="normal">3197</span>
<span class="normal">3198</span>
<span class="normal">3199</span>
<span class="normal">3200</span>
<span class="normal">3201</span>
<span class="normal">3202</span>
<span class="normal">3203</span>
<span class="normal">3204</span>
<span class="normal">3205</span>
<span class="normal">3206</span>
<span class="normal">3207</span>
<span class="normal">3208</span>
<span class="normal">3209</span>
<span class="normal">3210</span>
<span class="normal">3211</span>
<span class="normal">3212</span>
<span class="normal">3213</span>
<span class="normal">3214</span>
<span class="normal">3215</span>
<span class="normal">3216</span>
<span class="normal">3217</span>
<span class="normal">3218</span>
<span class="normal">3219</span>
<span class="normal">3220</span>
<span class="normal">3221</span>
<span class="normal">3222</span>
<span class="normal">3223</span>
<span class="normal">3224</span>
<span class="normal">3225</span>
<span class="normal">3226</span>
<span class="normal">3227</span>
<span class="normal">3228</span>
<span class="normal">3229</span>
<span class="normal">3230</span>
<span class="normal">3231</span>
<span class="normal">3232</span>
<span class="normal">3233</span>
<span class="normal">3234</span>
<span class="normal">3235</span>
<span class="normal">3236</span>
<span class="normal">3237</span>
<span class="normal">3238</span>
<span class="normal">3239</span>
<span class="normal">3240</span>
<span class="normal">3241</span>
<span class="normal">3242</span>
<span class="normal">3243</span>
<span class="normal">3244</span>
<span class="normal">3245</span>
<span class="normal">3246</span>
<span class="normal">3247</span>
<span class="normal">3248</span>
<span class="normal">3249</span>
<span class="normal">3250</span>
<span class="normal">3251</span>
<span class="normal">3252</span>
<span class="normal">3253</span>
<span class="normal">3254</span>
<span class="normal">3255</span>
<span class="normal">3256</span>
<span class="normal">3257</span>
<span class="normal">3258</span>
<span class="normal">3259</span>
<span class="normal">3260</span>
<span class="normal">3261</span>
<span class="normal">3262</span>
<span class="normal">3263</span>
<span class="normal">3264</span>
<span class="normal">3265</span>
<span class="normal">3266</span>
<span class="normal">3267</span>
<span class="normal">3268</span>
<span class="normal">3269</span>
<span class="normal">3270</span>
<span class="normal">3271</span>
<span class="normal">3272</span>
<span class="normal">3273</span>
<span class="normal">3274</span>
<span class="normal">3275</span>
<span class="normal">3276</span>
<span class="normal">3277</span>
<span class="normal">3278</span>
<span class="normal">3279</span>
<span class="normal">3280</span>
<span class="normal">3281</span>
<span class="normal">3282</span>
<span class="normal">3283</span>
<span class="normal">3284</span>
<span class="normal">3285</span>
<span class="normal">3286</span>
<span class="normal">3287</span>
<span class="normal">3288</span>
<span class="normal">3289</span>
<span class="normal">3290</span>
<span class="normal">3291</span>
<span class="normal">3292</span>
<span class="normal">3293</span>
<span class="normal">3294</span>
<span class="normal">3295</span>
<span class="normal">3296</span>
<span class="normal">3297</span>
<span class="normal">3298</span>
<span class="normal">3299</span>
<span class="normal">3300</span>
<span class="normal">3301</span>
<span class="normal">3302</span>
<span class="normal">3303</span>
<span class="normal">3304</span>
<span class="normal">3305</span>
<span class="normal">3306</span>
<span class="normal">3307</span>
<span class="normal">3308</span>
<span class="normal">3309</span>
<span class="normal">3310</span>
<span class="normal">3311</span>
<span class="normal">3312</span>
<span class="normal">3313</span>
<span class="normal">3314</span>
<span class="normal">3315</span>
<span class="normal">3316</span>
<span class="normal">3317</span>
<span class="normal">3318</span>
<span class="normal">3319</span>
<span class="normal">3320</span>
<span class="normal">3321</span>
<span class="normal">3322</span>
<span class="normal">3323</span>
<span class="normal">3324</span>
<span class="normal">3325</span>
<span class="normal">3326</span>
<span class="normal">3327</span>
<span class="normal">3328</span>
<span class="normal">3329</span>
<span class="normal">3330</span>
<span class="normal">3331</span>
<span class="normal">3332</span>
<span class="normal">3333</span>
<span class="normal">3334</span>
<span class="normal">3335</span>
<span class="normal">3336</span>
<span class="normal">3337</span>
<span class="normal">3338</span>
<span class="normal">3339</span>
<span class="normal">3340</span>
<span class="normal">3341</span>
<span class="normal">3342</span>
<span class="normal">3343</span>
<span class="normal">3344</span>
<span class="normal">3345</span>
<span class="normal">3346</span>
<span class="normal">3347</span>
<span class="normal">3348</span>
<span class="normal">3349</span>
<span class="normal">3350</span>
<span class="normal">3351</span>
<span class="normal">3352</span>
<span class="normal">3353</span>
<span class="normal">3354</span>
<span class="normal">3355</span>
<span class="normal">3356</span>
<span class="normal">3357</span>
<span class="normal">3358</span>
<span class="normal">3359</span>
<span class="normal">3360</span>
<span class="normal">3361</span>
<span class="normal">3362</span>
<span class="normal">3363</span>
<span class="normal">3364</span>
<span class="normal">3365</span>
<span class="normal">3366</span>
<span class="normal">3367</span>
<span class="normal">3368</span>
<span class="normal">3369</span>
<span class="normal">3370</span>
<span class="normal">3371</span>
<span class="normal">3372</span>
<span class="normal">3373</span>
<span class="normal">3374</span>
<span class="normal">3375</span>
<span class="normal">3376</span>
<span class="normal">3377</span>
<span class="normal">3378</span>
<span class="normal">3379</span>
<span class="normal">3380</span>
<span class="normal">3381</span>
<span class="normal">3382</span>
<span class="normal">3383</span>
<span class="normal">3384</span>
<span class="normal">3385</span>
<span class="normal">3386</span>
<span class="normal">3387</span>
<span class="normal">3388</span>
<span class="normal">3389</span>
<span class="normal">3390</span>
<span class="normal">3391</span>
<span class="normal">3392</span>
<span class="normal">3393</span>
<span class="normal">3394</span>
<span class="normal">3395</span>
<span class="normal">3396</span>
<span class="normal">3397</span>
<span class="normal">3398</span>
<span class="normal">3399</span>
<span class="normal">3400</span>
<span class="normal">3401</span>
<span class="normal">3402</span>
<span class="normal">3403</span>
<span class="normal">3404</span>
<span class="normal">3405</span>
<span class="normal">3406</span>
<span class="normal">3407</span>
<span class="normal">3408</span>
<span class="normal">3409</span>
<span class="normal">3410</span>
<span class="normal">3411</span>
<span class="normal">3412</span>
<span class="normal">3413</span>
<span class="normal">3414</span>
<span class="normal">3415</span>
<span class="normal">3416</span>
<span class="normal">3417</span>
<span class="normal">3418</span>
<span class="normal">3419</span>
<span class="normal">3420</span>
<span class="normal">3421</span>
<span class="normal">3422</span>
<span class="normal">3423</span>
<span class="normal">3424</span>
<span class="normal">3425</span>
<span class="normal">3426</span>
<span class="normal">3427</span>
<span class="normal">3428</span>
<span class="normal">3429</span>
<span class="normal">3430</span>
<span class="normal">3431</span>
<span class="normal">3432</span>
<span class="normal">3433</span>
<span class="normal">3434</span>
<span class="normal">3435</span>
<span class="normal">3436</span>
<span class="normal">3437</span>
<span class="normal">3438</span>
<span class="normal">3439</span>
<span class="normal">3440</span>
<span class="normal">3441</span>
<span class="normal">3442</span>
<span class="normal">3443</span>
<span class="normal">3444</span>
<span class="normal">3445</span>
<span class="normal">3446</span>
<span class="normal">3447</span>
<span class="normal">3448</span>
<span class="normal">3449</span>
<span class="normal">3450</span>
<span class="normal">3451</span>
<span class="normal">3452</span>
<span class="normal">3453</span>
<span class="normal">3454</span>
<span class="normal">3455</span>
<span class="normal">3456</span>
<span class="normal">3457</span>
<span class="normal">3458</span>
<span class="normal">3459</span>
<span class="normal">3460</span>
<span class="normal">3461</span>
<span class="normal">3462</span>
<span class="normal">3463</span>
<span class="normal">3464</span>
<span class="normal">3465</span>
<span class="normal">3466</span>
<span class="normal">3467</span>
<span class="normal">3468</span>
<span class="normal">3469</span>
<span class="normal">3470</span>
<span class="normal">3471</span>
<span class="normal">3472</span>
<span class="normal">3473</span>
<span class="normal">3474</span>
<span class="normal">3475</span>
<span class="normal">3476</span>
<span class="normal">3477</span>
<span class="normal">3478</span>
<span class="normal">3479</span>
<span class="normal">3480</span>
<span class="normal">3481</span>
<span class="normal">3482</span>
<span class="normal">3483</span>
<span class="normal">3484</span>
<span class="normal">3485</span>
<span class="normal">3486</span>
<span class="normal">3487</span>
<span class="normal">3488</span>
<span class="normal">3489</span>
<span class="normal">3490</span>
<span class="normal">3491</span>
<span class="normal">3492</span>
<span class="normal">3493</span>
<span class="normal">3494</span>
<span class="normal">3495</span>
<span class="normal">3496</span>
<span class="normal">3497</span>
<span class="normal">3498</span>
<span class="normal">3499</span>
<span class="normal">3500</span>
<span class="normal">3501</span>
<span class="normal">3502</span>
<span class="normal">3503</span>
<span class="normal">3504</span>
<span class="normal">3505</span>
<span class="normal">3506</span>
<span class="normal">3507</span>
<span class="normal">3508</span>
<span class="normal">3509</span>
<span class="normal">3510</span>
<span class="normal">3511</span>
<span class="normal">3512</span>
<span class="normal">3513</span>
<span class="normal">3514</span>
<span class="normal">3515</span>
<span class="normal">3516</span>
<span class="normal">3517</span>
<span class="normal">3518</span>
<span class="normal">3519</span>
<span class="normal">3520</span>
<span class="normal">3521</span>
<span class="normal">3522</span>
<span class="normal">3523</span>
<span class="normal">3524</span>
<span class="normal">3525</span>
<span class="normal">3526</span>
<span class="normal">3527</span>
<span class="normal">3528</span>
<span class="normal">3529</span>
<span class="normal">3530</span>
<span class="normal">3531</span>
<span class="normal">3532</span>
<span class="normal">3533</span>
<span class="normal">3534</span>
<span class="normal">3535</span>
<span class="normal">3536</span>
<span class="normal">3537</span>
<span class="normal">3538</span>
<span class="normal">3539</span>
<span class="normal">3540</span>
<span class="normal">3541</span>
<span class="normal">3542</span>
<span class="normal">3543</span>
<span class="normal">3544</span>
<span class="normal">3545</span>
<span class="normal">3546</span>
<span class="normal">3547</span>
<span class="normal">3548</span>
<span class="normal">3549</span>
<span class="normal">3550</span>
<span class="normal">3551</span>
<span class="normal">3552</span>
<span class="normal">3553</span>
<span class="normal">3554</span>
<span class="normal">3555</span>
<span class="normal">3556</span>
<span class="normal">3557</span>
<span class="normal">3558</span>
<span class="normal">3559</span>
<span class="normal">3560</span>
<span class="normal">3561</span>
<span class="normal">3562</span>
<span class="normal">3563</span>
<span class="normal">3564</span>
<span class="normal">3565</span>
<span class="normal">3566</span>
<span class="normal">3567</span>
<span class="normal">3568</span>
<span class="normal">3569</span>
<span class="normal">3570</span>
<span class="normal">3571</span>
<span class="normal">3572</span>
<span class="normal">3573</span>
<span class="normal">3574</span>
<span class="normal">3575</span>
<span class="normal">3576</span>
<span class="normal">3577</span>
<span class="normal">3578</span>
<span class="normal">3579</span>
<span class="normal">3580</span>
<span class="normal">3581</span>
<span class="normal">3582</span>
<span class="normal">3583</span>
<span class="normal">3584</span>
<span class="normal">3585</span>
<span class="normal">3586</span>
<span class="normal">3587</span>
<span class="normal">3588</span>
<span class="normal">3589</span>
<span class="normal">3590</span>
<span class="normal">3591</span>
<span class="normal">3592</span>
<span class="normal">3593</span>
<span class="normal">3594</span>
<span class="normal">3595</span>
<span class="normal">3596</span>
<span class="normal">3597</span>
<span class="normal">3598</span>
<span class="normal">3599</span>
<span class="normal">3600</span>
<span class="normal">3601</span>
<span class="normal">3602</span>
<span class="normal">3603</span>
<span class="normal">3604</span>
<span class="normal">3605</span>
<span class="normal">3606</span>
<span class="normal">3607</span>
<span class="normal">3608</span>
<span class="normal">3609</span>
<span class="normal">3610</span>
<span class="normal">3611</span>
<span class="normal">3612</span>
<span class="normal">3613</span>
<span class="normal">3614</span>
<span class="normal">3615</span>
<span class="normal">3616</span>
<span class="normal">3617</span>
<span class="normal">3618</span>
<span class="normal">3619</span>
<span class="normal">3620</span>
<span class="normal">3621</span>
<span class="normal">3622</span>
<span class="normal">3623</span>
<span class="normal">3624</span>
<span class="normal">3625</span>
<span class="normal">3626</span>
<span class="normal">3627</span>
<span class="normal">3628</span>
<span class="normal">3629</span>
<span class="normal">3630</span>
<span class="normal">3631</span>
<span class="normal">3632</span>
<span class="normal">3633</span>
<span class="normal">3634</span>
<span class="normal">3635</span>
<span class="normal">3636</span>
<span class="normal">3637</span>
<span class="normal">3638</span>
<span class="normal">3639</span>
<span class="normal">3640</span>
<span class="normal">3641</span>
<span class="normal">3642</span>
<span class="normal">3643</span>
<span class="normal">3644</span>
<span class="normal">3645</span>
<span class="normal">3646</span>
<span class="normal">3647</span>
<span class="normal">3648</span>
<span class="normal">3649</span>
<span class="normal">3650</span>
<span class="normal">3651</span>
<span class="normal">3652</span>
<span class="normal">3653</span>
<span class="normal">3654</span>
<span class="normal">3655</span>
<span class="normal">3656</span>
<span class="normal">3657</span>
<span class="normal">3658</span>
<span class="normal">3659</span>
<span class="normal">3660</span>
<span class="normal">3661</span>
<span class="normal">3662</span>
<span class="normal">3663</span>
<span class="normal">3664</span>
<span class="normal">3665</span>
<span class="normal">3666</span>
<span class="normal">3667</span>
<span class="normal">3668</span>
<span class="normal">3669</span>
<span class="normal">3670</span>
<span class="normal">3671</span>
<span class="normal">3672</span>
<span class="normal">3673</span>
<span class="normal">3674</span>
<span class="normal">3675</span>
<span class="normal">3676</span>
<span class="normal">3677</span>
<span class="normal">3678</span>
<span class="normal">3679</span>
<span class="normal">3680</span>
<span class="normal">3681</span>
<span class="normal">3682</span>
<span class="normal">3683</span>
<span class="normal">3684</span>
<span class="normal">3685</span>
<span class="normal">3686</span>
<span class="normal">3687</span>
<span class="normal">3688</span>
<span class="normal">3689</span>
<span class="normal">3690</span>
<span class="normal">3691</span>
<span class="normal">3692</span>
<span class="normal">3693</span>
<span class="normal">3694</span>
<span class="normal">3695</span>
<span class="normal">3696</span>
<span class="normal">3697</span>
<span class="normal">3698</span>
<span class="normal">3699</span>
<span class="normal">3700</span>
<span class="normal">3701</span>
<span class="normal">3702</span>
<span class="normal">3703</span>
<span class="normal">3704</span>
<span class="normal">3705</span>
<span class="normal">3706</span>
<span class="normal">3707</span>
<span class="normal">3708</span>
<span class="normal">3709</span>
<span class="normal">3710</span>
<span class="normal">3711</span>
<span class="normal">3712</span>
<span class="normal">3713</span>
<span class="normal">3714</span>
<span class="normal">3715</span>
<span class="normal">3716</span>
<span class="normal">3717</span>
<span class="normal">3718</span>
<span class="normal">3719</span>
<span class="normal">3720</span>
<span class="normal">3721</span>
<span class="normal">3722</span>
<span class="normal">3723</span>
<span class="normal">3724</span>
<span class="normal">3725</span>
<span class="normal">3726</span>
<span class="normal">3727</span>
<span class="normal">3728</span>
<span class="normal">3729</span>
<span class="normal">3730</span>
<span class="normal">3731</span>
<span class="normal">3732</span>
<span class="normal">3733</span>
<span class="normal">3734</span>
<span class="normal">3735</span>
<span class="normal">3736</span>
<span class="normal">3737</span>
<span class="normal">3738</span>
<span class="normal">3739</span>
<span class="normal">3740</span>
<span class="normal">3741</span>
<span class="normal">3742</span>
<span class="normal">3743</span>
<span class="normal">3744</span>
<span class="normal">3745</span>
<span class="normal">3746</span>
<span class="normal">3747</span>
<span class="normal">3748</span>
<span class="normal">3749</span>
<span class="normal">3750</span>
<span class="normal">3751</span>
<span class="normal">3752</span>
<span class="normal">3753</span>
<span class="normal">3754</span>
<span class="normal">3755</span>
<span class="normal">3756</span>
<span class="normal">3757</span>
<span class="normal">3758</span>
<span class="normal">3759</span>
<span class="normal">3760</span>
<span class="normal">3761</span>
<span class="normal">3762</span>
<span class="normal">3763</span>
<span class="normal">3764</span>
<span class="normal">3765</span>
<span class="normal">3766</span>
<span class="normal">3767</span>
<span class="normal">3768</span>
<span class="normal">3769</span>
<span class="normal">3770</span>
<span class="normal">3771</span>
<span class="normal">3772</span>
<span class="normal">3773</span>
<span class="normal">3774</span>
<span class="normal">3775</span>
<span class="normal">3776</span>
<span class="normal">3777</span>
<span class="normal">3778</span>
<span class="normal">3779</span>
<span class="normal">3780</span>
<span class="normal">3781</span>
<span class="normal">3782</span>
<span class="normal">3783</span>
<span class="normal">3784</span>
<span class="normal">3785</span>
<span class="normal">3786</span>
<span class="normal">3787</span>
<span class="normal">3788</span>
<span class="normal">3789</span>
<span class="normal">3790</span>
<span class="normal">3791</span>
<span class="normal">3792</span>
<span class="normal">3793</span>
<span class="normal">3794</span>
<span class="normal">3795</span>
<span class="normal">3796</span>
<span class="normal">3797</span>
<span class="normal">3798</span>
<span class="normal">3799</span>
<span class="normal">3800</span>
<span class="normal">3801</span>
<span class="normal">3802</span>
<span class="normal">3803</span>
<span class="normal">3804</span>
<span class="normal">3805</span>
<span class="normal">3806</span>
<span class="normal">3807</span>
<span class="normal">3808</span>
<span class="normal">3809</span>
<span class="normal">3810</span>
<span class="normal">3811</span>
<span class="normal">3812</span>
<span class="normal">3813</span>
<span class="normal">3814</span>
<span class="normal">3815</span>
<span class="normal">3816</span>
<span class="normal">3817</span>
<span class="normal">3818</span>
<span class="normal">3819</span>
<span class="normal">3820</span>
<span class="normal">3821</span>
<span class="normal">3822</span>
<span class="normal">3823</span>
<span class="normal">3824</span>
<span class="normal">3825</span>
<span class="normal">3826</span>
<span class="normal">3827</span>
<span class="normal">3828</span>
<span class="normal">3829</span>
<span class="normal">3830</span>
<span class="normal">3831</span>
<span class="normal">3832</span>
<span class="normal">3833</span>
<span class="normal">3834</span>
<span class="normal">3835</span>
<span class="normal">3836</span>
<span class="normal">3837</span>
<span class="normal">3838</span>
<span class="normal">3839</span>
<span class="normal">3840</span>
<span class="normal">3841</span>
<span class="normal">3842</span>
<span class="normal">3843</span>
<span class="normal">3844</span>
<span class="normal">3845</span>
<span class="normal">3846</span>
<span class="normal">3847</span>
<span class="normal">3848</span>
<span class="normal">3849</span>
<span class="normal">3850</span>
<span class="normal">3851</span>
<span class="normal">3852</span>
<span class="normal">3853</span>
<span class="normal">3854</span>
<span class="normal">3855</span>
<span class="normal">3856</span>
<span class="normal">3857</span>
<span class="normal">3858</span>
<span class="normal">3859</span>
<span class="normal">3860</span>
<span class="normal">3861</span>
<span class="normal">3862</span>
<span class="normal">3863</span>
<span class="normal">3864</span>
<span class="normal">3865</span>
<span class="normal">3866</span>
<span class="normal">3867</span>
<span class="normal">3868</span>
<span class="normal">3869</span>
<span class="normal">3870</span>
<span class="normal">3871</span>
<span class="normal">3872</span>
<span class="normal">3873</span>
<span class="normal">3874</span>
<span class="normal">3875</span>
<span class="normal">3876</span>
<span class="normal">3877</span>
<span class="normal">3878</span>
<span class="normal">3879</span>
<span class="normal">3880</span>
<span class="normal">3881</span>
<span class="normal">3882</span>
<span class="normal">3883</span>
<span class="normal">3884</span>
<span class="normal">3885</span>
<span class="normal">3886</span>
<span class="normal">3887</span>
<span class="normal">3888</span>
<span class="normal">3889</span>
<span class="normal">3890</span>
<span class="normal">3891</span>
<span class="normal">3892</span>
<span class="normal">3893</span>
<span class="normal">3894</span>
<span class="normal">3895</span>
<span class="normal">3896</span>
<span class="normal">3897</span>
<span class="normal">3898</span>
<span class="normal">3899</span>
<span class="normal">3900</span>
<span class="normal">3901</span>
<span class="normal">3902</span>
<span class="normal">3903</span>
<span class="normal">3904</span>
<span class="normal">3905</span>
<span class="normal">3906</span>
<span class="normal">3907</span>
<span class="normal">3908</span>
<span class="normal">3909</span>
<span class="normal">3910</span>
<span class="normal">3911</span>
<span class="normal">3912</span>
<span class="normal">3913</span>
<span class="normal">3914</span>
<span class="normal">3915</span>
<span class="normal">3916</span>
<span class="normal">3917</span>
<span class="normal">3918</span>
<span class="normal">3919</span>
<span class="normal">3920</span>
<span class="normal">3921</span>
<span class="normal">3922</span>
<span class="normal">3923</span>
<span class="normal">3924</span>
<span class="normal">3925</span>
<span class="normal">3926</span>
<span class="normal">3927</span>
<span class="normal">3928</span>
<span class="normal">3929</span>
<span class="normal">3930</span>
<span class="normal">3931</span>
<span class="normal">3932</span>
<span class="normal">3933</span>
<span class="normal">3934</span>
<span class="normal">3935</span>
<span class="normal">3936</span>
<span class="normal">3937</span>
<span class="normal">3938</span>
<span class="normal">3939</span>
<span class="normal">3940</span>
<span class="normal">3941</span>
<span class="normal">3942</span>
<span class="normal">3943</span>
<span class="normal">3944</span>
<span class="normal">3945</span>
<span class="normal">3946</span>
<span class="normal">3947</span>
<span class="normal">3948</span>
<span class="normal">3949</span>
<span class="normal">3950</span>
<span class="normal">3951</span>
<span class="normal">3952</span>
<span class="normal">3953</span>
<span class="normal">3954</span>
<span class="normal">3955</span>
<span class="normal">3956</span>
<span class="normal">3957</span>
<span class="normal">3958</span>
<span class="normal">3959</span>
<span class="normal">3960</span>
<span class="normal">3961</span>
<span class="normal">3962</span>
<span class="normal">3963</span>
<span class="normal">3964</span>
<span class="normal">3965</span>
<span class="normal">3966</span>
<span class="normal">3967</span>
<span class="normal">3968</span>
<span class="normal">3969</span>
<span class="normal">3970</span>
<span class="normal">3971</span>
<span class="normal">3972</span>
<span class="normal">3973</span>
<span class="normal">3974</span>
<span class="normal">3975</span>
<span class="normal">3976</span>
<span class="normal">3977</span>
<span class="normal">3978</span>
<span class="normal">3979</span>
<span class="normal">3980</span>
<span class="normal">3981</span>
<span class="normal">3982</span>
<span class="normal">3983</span>
<span class="normal">3984</span>
<span class="normal">3985</span>
<span class="normal">3986</span>
<span class="normal">3987</span>
<span class="normal">3988</span>
<span class="normal">3989</span>
<span class="normal">3990</span>
<span class="normal">3991</span>
<span class="normal">3992</span>
<span class="normal">3993</span>
<span class="normal">3994</span>
<span class="normal">3995</span>
<span class="normal">3996</span>
<span class="normal">3997</span>
<span class="normal">3998</span>
<span class="normal">3999</span>
<span class="normal">4000</span>
<span class="normal">4001</span>
<span class="normal">4002</span>
<span class="normal">4003</span>
<span class="normal">4004</span>
<span class="normal">4005</span>
<span class="normal">4006</span>
<span class="normal">4007</span>
<span class="normal">4008</span>
<span class="normal">4009</span>
<span class="normal">4010</span>
<span class="normal">4011</span>
<span class="normal">4012</span>
<span class="normal">4013</span>
<span class="normal">4014</span>
<span class="normal">4015</span>
<span class="normal">4016</span>
<span class="normal">4017</span>
<span class="normal">4018</span>
<span class="normal">4019</span>
<span class="normal">4020</span>
<span class="normal">4021</span>
<span class="normal">4022</span>
<span class="normal">4023</span>
<span class="normal">4024</span>
<span class="normal">4025</span>
<span class="normal">4026</span>
<span class="normal">4027</span>
<span class="normal">4028</span>
<span class="normal">4029</span>
<span class="normal">4030</span>
<span class="normal">4031</span>
<span class="normal">4032</span>
<span class="normal">4033</span>
<span class="normal">4034</span>
<span class="normal">4035</span>
<span class="normal">4036</span>
<span class="normal">4037</span>
<span class="normal">4038</span>
<span class="normal">4039</span>
<span class="normal">4040</span>
<span class="normal">4041</span>
<span class="normal">4042</span>
<span class="normal">4043</span>
<span class="normal">4044</span>
<span class="normal">4045</span>
<span class="normal">4046</span>
<span class="normal">4047</span>
<span class="normal">4048</span>
<span class="normal">4049</span>
<span class="normal">4050</span>
<span class="normal">4051</span>
<span class="normal">4052</span>
<span class="normal">4053</span>
<span class="normal">4054</span>
<span class="normal">4055</span>
<span class="normal">4056</span>
<span class="normal">4057</span>
<span class="normal">4058</span>
<span class="normal">4059</span>
<span class="normal">4060</span>
<span class="normal">4061</span>
<span class="normal">4062</span>
<span class="normal">4063</span>
<span class="normal">4064</span>
<span class="normal">4065</span>
<span class="normal">4066</span>
<span class="normal">4067</span>
<span class="normal">4068</span>
<span class="normal">4069</span>
<span class="normal">4070</span>
<span class="normal">4071</span>
<span class="normal">4072</span>
<span class="normal">4073</span>
<span class="normal">4074</span>
<span class="normal">4075</span>
<span class="normal">4076</span>
<span class="normal">4077</span>
<span class="normal">4078</span>
<span class="normal">4079</span>
<span class="normal">4080</span>
<span class="normal">4081</span>
<span class="normal">4082</span>
<span class="normal">4083</span>
<span class="normal">4084</span>
<span class="normal">4085</span>
<span class="normal">4086</span>
<span class="normal">4087</span>
<span class="normal">4088</span>
<span class="normal">4089</span>
<span class="normal">4090</span>
<span class="normal">4091</span>
<span class="normal">4092</span>
<span class="normal">4093</span>
<span class="normal">4094</span>
<span class="normal">4095</span>
<span class="normal">4096</span>
<span class="normal">4097</span>
<span class="normal">4098</span>
<span class="normal">4099</span>
<span class="normal">4100</span>
<span class="normal">4101</span>
<span class="normal">4102</span>
<span class="normal">4103</span>
<span class="normal">4104</span>
<span class="normal">4105</span>
<span class="normal">4106</span>
<span class="normal">4107</span>
<span class="normal">4108</span>
<span class="normal">4109</span>
<span class="normal">4110</span>
<span class="normal">4111</span>
<span class="normal">4112</span>
<span class="normal">4113</span>
<span class="normal">4114</span>
<span class="normal">4115</span>
<span class="normal">4116</span>
<span class="normal">4117</span>
<span class="normal">4118</span>
<span class="normal">4119</span>
<span class="normal">4120</span>
<span class="normal">4121</span>
<span class="normal">4122</span>
<span class="normal">4123</span>
<span class="normal">4124</span>
<span class="normal">4125</span>
<span class="normal">4126</span>
<span class="normal">4127</span>
<span class="normal">4128</span>
<span class="normal">4129</span>
<span class="normal">4130</span>
<span class="normal">4131</span>
<span class="normal">4132</span>
<span class="normal">4133</span>
<span class="normal">4134</span>
<span class="normal">4135</span>
<span class="normal">4136</span>
<span class="normal">4137</span>
<span class="normal">4138</span>
<span class="normal">4139</span>
<span class="normal">4140</span>
<span class="normal">4141</span>
<span class="normal">4142</span>
<span class="normal">4143</span>
<span class="normal">4144</span>
<span class="normal">4145</span>
<span class="normal">4146</span>
<span class="normal">4147</span>
<span class="normal">4148</span>
<span class="normal">4149</span>
<span class="normal">4150</span>
<span class="normal">4151</span>
<span class="normal">4152</span>
<span class="normal">4153</span>
<span class="normal">4154</span>
<span class="normal">4155</span>
<span class="normal">4156</span>
<span class="normal">4157</span>
<span class="normal">4158</span>
<span class="normal">4159</span>
<span class="normal">4160</span>
<span class="normal">4161</span>
<span class="normal">4162</span>
<span class="normal">4163</span>
<span class="normal">4164</span>
<span class="normal">4165</span>
<span class="normal">4166</span>
<span class="normal">4167</span>
<span class="normal">4168</span>
<span class="normal">4169</span>
<span class="normal">4170</span>
<span class="normal">4171</span>
<span class="normal">4172</span>
<span class="normal">4173</span>
<span class="normal">4174</span>
<span class="normal">4175</span>
<span class="normal">4176</span>
<span class="normal">4177</span>
<span class="normal">4178</span>
<span class="normal">4179</span>
<span class="normal">4180</span>
<span class="normal">4181</span>
<span class="normal">4182</span>
<span class="normal">4183</span>
<span class="normal">4184</span>
<span class="normal">4185</span>
<span class="normal">4186</span>
<span class="normal">4187</span>
<span class="normal">4188</span>
<span class="normal">4189</span>
<span class="normal">4190</span>
<span class="normal">4191</span>
<span class="normal">4192</span>
<span class="normal">4193</span>
<span class="normal">4194</span>
<span class="normal">4195</span>
<span class="normal">4196</span>
<span class="normal">4197</span>
<span class="normal">4198</span>
<span class="normal">4199</span>
<span class="normal">4200</span>
<span class="normal">4201</span>
<span class="normal">4202</span>
<span class="normal">4203</span>
<span class="normal">4204</span>
<span class="normal">4205</span>
<span class="normal">4206</span>
<span class="normal">4207</span>
<span class="normal">4208</span>
<span class="normal">4209</span>
<span class="normal">4210</span>
<span class="normal">4211</span>
<span class="normal">4212</span>
<span class="normal">4213</span>
<span class="normal">4214</span>
<span class="normal">4215</span>
<span class="normal">4216</span>
<span class="normal">4217</span>
<span class="normal">4218</span>
<span class="normal">4219</span>
<span class="normal">4220</span>
<span class="normal">4221</span>
<span class="normal">4222</span>
<span class="normal">4223</span>
<span class="normal">4224</span>
<span class="normal">4225</span>
<span class="normal">4226</span>
<span class="normal">4227</span>
<span class="normal">4228</span>
<span class="normal">4229</span>
<span class="normal">4230</span>
<span class="normal">4231</span>
<span class="normal">4232</span>
<span class="normal">4233</span>
<span class="normal">4234</span>
<span class="normal">4235</span>
<span class="normal">4236</span>
<span class="normal">4237</span>
<span class="normal">4238</span>
<span class="normal">4239</span>
<span class="normal">4240</span>
<span class="normal">4241</span>
<span class="normal">4242</span>
<span class="normal">4243</span>
<span class="normal">4244</span>
<span class="normal">4245</span>
<span class="normal">4246</span>
<span class="normal">4247</span>
<span class="normal">4248</span>
<span class="normal">4249</span>
<span class="normal">4250</span>
<span class="normal">4251</span>
<span class="normal">4252</span>
<span class="normal">4253</span>
<span class="normal">4254</span>
<span class="normal">4255</span>
<span class="normal">4256</span>
<span class="normal">4257</span>
<span class="normal">4258</span>
<span class="normal">4259</span>
<span class="normal">4260</span>
<span class="normal">4261</span>
<span class="normal">4262</span>
<span class="normal">4263</span>
<span class="normal">4264</span>
<span class="normal">4265</span>
<span class="normal">4266</span>
<span class="normal">4267</span>
<span class="normal">4268</span>
<span class="normal">4269</span>
<span class="normal">4270</span>
<span class="normal">4271</span>
<span class="normal">4272</span>
<span class="normal">4273</span>
<span class="normal">4274</span>
<span class="normal">4275</span>
<span class="normal">4276</span>
<span class="normal">4277</span>
<span class="normal">4278</span>
<span class="normal">4279</span>
<span class="normal">4280</span>
<span class="normal">4281</span>
<span class="normal">4282</span>
<span class="normal">4283</span>
<span class="normal">4284</span>
<span class="normal">4285</span>
<span class="normal">4286</span>
<span class="normal">4287</span>
<span class="normal">4288</span>
<span class="normal">4289</span>
<span class="normal">4290</span>
<span class="normal">4291</span>
<span class="normal">4292</span>
<span class="normal">4293</span>
<span class="normal">4294</span>
<span class="normal">4295</span>
<span class="normal">4296</span>
<span class="normal">4297</span>
<span class="normal">4298</span>
<span class="normal">4299</span>
<span class="normal">4300</span>
<span class="normal">4301</span>
<span class="normal">4302</span>
<span class="normal">4303</span>
<span class="normal">4304</span>
<span class="normal">4305</span>
<span class="normal">4306</span>
<span class="normal">4307</span>
<span class="normal">4308</span>
<span class="normal">4309</span>
<span class="normal">4310</span>
<span class="normal">4311</span>
<span class="normal">4312</span>
<span class="normal">4313</span>
<span class="normal">4314</span>
<span class="normal">4315</span>
<span class="normal">4316</span>
<span class="normal">4317</span>
<span class="normal">4318</span>
<span class="normal">4319</span>
<span class="normal">4320</span>
<span class="normal">4321</span>
<span class="normal">4322</span>
<span class="normal">4323</span>
<span class="normal">4324</span>
<span class="normal">4325</span>
<span class="normal">4326</span>
<span class="normal">4327</span>
<span class="normal">4328</span>
<span class="normal">4329</span>
<span class="normal">4330</span>
<span class="normal">4331</span>
<span class="normal">4332</span>
<span class="normal">4333</span>
<span class="normal">4334</span>
<span class="normal">4335</span>
<span class="normal">4336</span>
<span class="normal">4337</span>
<span class="normal">4338</span>
<span class="normal">4339</span>
<span class="normal">4340</span>
<span class="normal">4341</span>
<span class="normal">4342</span>
<span class="normal">4343</span>
<span class="normal">4344</span>
<span class="normal">4345</span>
<span class="normal">4346</span>
<span class="normal">4347</span>
<span class="normal">4348</span>
<span class="normal">4349</span>
<span class="normal">4350</span>
<span class="normal">4351</span>
<span class="normal">4352</span>
<span class="normal">4353</span>
<span class="normal">4354</span>
<span class="normal">4355</span>
<span class="normal">4356</span>
<span class="normal">4357</span>
<span class="normal">4358</span>
<span class="normal">4359</span>
<span class="normal">4360</span>
<span class="normal">4361</span>
<span class="normal">4362</span>
<span class="normal">4363</span>
<span class="normal">4364</span>
<span class="normal">4365</span>
<span class="normal">4366</span>
<span class="normal">4367</span>
<span class="normal">4368</span>
<span class="normal">4369</span>
<span class="normal">4370</span>
<span class="normal">4371</span>
<span class="normal">4372</span>
<span class="normal">4373</span>
<span class="normal">4374</span>
<span class="normal">4375</span>
<span class="normal">4376</span>
<span class="normal">4377</span>
<span class="normal">4378</span>
<span class="normal">4379</span>
<span class="normal">4380</span>
<span class="normal">4381</span>
<span class="normal">4382</span>
<span class="normal">4383</span>
<span class="normal">4384</span>
<span class="normal">4385</span>
<span class="normal">4386</span>
<span class="normal">4387</span>
<span class="normal">4388</span>
<span class="normal">4389</span>
<span class="normal">4390</span>
<span class="normal">4391</span>
<span class="normal">4392</span>
<span class="normal">4393</span>
<span class="normal">4394</span>
<span class="normal">4395</span>
<span class="normal">4396</span>
<span class="normal">4397</span>
<span class="normal">4398</span>
<span class="normal">4399</span>
<span class="normal">4400</span>
<span class="normal">4401</span>
<span class="normal">4402</span>
<span class="normal">4403</span>
<span class="normal">4404</span>
<span class="normal">4405</span>
<span class="normal">4406</span>
<span class="normal">4407</span>
<span class="normal">4408</span>
<span class="normal">4409</span>
<span class="normal">4410</span>
<span class="normal">4411</span>
<span class="normal">4412</span>
<span class="normal">4413</span>
<span class="normal">4414</span>
<span class="normal">4415</span>
<span class="normal">4416</span>
<span class="normal">4417</span>
<span class="normal">4418</span>
<span class="normal">4419</span>
<span class="normal">4420</span>
<span class="normal">4421</span>
<span class="normal">4422</span>
<span class="normal">4423</span>
<span class="normal">4424</span>
<span class="normal">4425</span>
<span class="normal">4426</span>
<span class="normal">4427</span>
<span class="normal">4428</span>
<span class="normal">4429</span>
<span class="normal">4430</span>
<span class="normal">4431</span>
<span class="normal">4432</span>
<span class="normal">4433</span>
<span class="normal">4434</span>
<span class="normal">4435</span>
<span class="normal">4436</span>
<span class="normal">4437</span>
<span class="normal">4438</span>
<span class="normal">4439</span>
<span class="normal">4440</span>
<span class="normal">4441</span>
<span class="normal">4442</span>
<span class="normal">4443</span>
<span class="normal">4444</span>
<span class="normal">4445</span>
<span class="normal">4446</span>
<span class="normal">4447</span>
<span class="normal">4448</span>
<span class="normal">4449</span>
<span class="normal">4450</span>
<span class="normal">4451</span>
<span class="normal">4452</span>
<span class="normal">4453</span>
<span class="normal">4454</span>
<span class="normal">4455</span>
<span class="normal">4456</span>
<span class="normal">4457</span>
<span class="normal">4458</span>
<span class="normal">4459</span>
<span class="normal">4460</span>
<span class="normal">4461</span>
<span class="normal">4462</span>
<span class="normal">4463</span>
<span class="normal">4464</span>
<span class="normal">4465</span>
<span class="normal">4466</span>
<span class="normal">4467</span>
<span class="normal">4468</span>
<span class="normal">4469</span>
<span class="normal">4470</span>
<span class="normal">4471</span>
<span class="normal">4472</span>
<span class="normal">4473</span>
<span class="normal">4474</span>
<span class="normal">4475</span>
<span class="normal">4476</span>
<span class="normal">4477</span>
<span class="normal">4478</span>
<span class="normal">4479</span>
<span class="normal">4480</span>
<span class="normal">4481</span>
<span class="normal">4482</span>
<span class="normal">4483</span>
<span class="normal">4484</span>
<span class="normal">4485</span>
<span class="normal">4486</span>
<span class="normal">4487</span>
<span class="normal">4488</span>
<span class="normal">4489</span>
<span class="normal">4490</span>
<span class="normal">4491</span>
<span class="normal">4492</span>
<span class="normal">4493</span>
<span class="normal">4494</span>
<span class="normal">4495</span>
<span class="normal">4496</span>
<span class="normal">4497</span>
<span class="normal">4498</span>
<span class="normal">4499</span>
<span class="normal">4500</span>
<span class="normal">4501</span>
<span class="normal">4502</span>
<span class="normal">4503</span>
<span class="normal">4504</span>
<span class="normal">4505</span>
<span class="normal">4506</span>
<span class="normal">4507</span>
<span class="normal">4508</span>
<span class="normal">4509</span>
<span class="normal">4510</span>
<span class="normal">4511</span>
<span class="normal">4512</span>
<span class="normal">4513</span>
<span class="normal">4514</span>
<span class="normal">4515</span>
<span class="normal">4516</span>
<span class="normal">4517</span>
<span class="normal">4518</span>
<span class="normal">4519</span>
<span class="normal">4520</span>
<span class="normal">4521</span>
<span class="normal">4522</span>
<span class="normal">4523</span>
<span class="normal">4524</span>
<span class="normal">4525</span>
<span class="normal">4526</span>
<span class="normal">4527</span>
<span class="normal">4528</span>
<span class="normal">4529</span>
<span class="normal">4530</span>
<span class="normal">4531</span>
<span class="normal">4532</span>
<span class="normal">4533</span>
<span class="normal">4534</span>
<span class="normal">4535</span>
<span class="normal">4536</span>
<span class="normal">4537</span>
<span class="normal">4538</span>
<span class="normal">4539</span>
<span class="normal">4540</span>
<span class="normal">4541</span>
<span class="normal">4542</span>
<span class="normal">4543</span>
<span class="normal">4544</span>
<span class="normal">4545</span>
<span class="normal">4546</span>
<span class="normal">4547</span>
<span class="normal">4548</span>
<span class="normal">4549</span>
<span class="normal">4550</span>
<span class="normal">4551</span>
<span class="normal">4552</span>
<span class="normal">4553</span>
<span class="normal">4554</span>
<span class="normal">4555</span>
<span class="normal">4556</span>
<span class="normal">4557</span>
<span class="normal">4558</span>
<span class="normal">4559</span>
<span class="normal">4560</span>
<span class="normal">4561</span>
<span class="normal">4562</span>
<span class="normal">4563</span>
<span class="normal">4564</span>
<span class="normal">4565</span>
<span class="normal">4566</span>
<span class="normal">4567</span>
<span class="normal">4568</span>
<span class="normal">4569</span>
<span class="normal">4570</span>
<span class="normal">4571</span>
<span class="normal">4572</span>
<span class="normal">4573</span>
<span class="normal">4574</span>
<span class="normal">4575</span>
<span class="normal">4576</span>
<span class="normal">4577</span>
<span class="normal">4578</span>
<span class="normal">4579</span>
<span class="normal">4580</span>
<span class="normal">4581</span>
<span class="normal">4582</span>
<span class="normal">4583</span>
<span class="normal">4584</span>
<span class="normal">4585</span>
<span class="normal">4586</span>
<span class="normal">4587</span>
<span class="normal">4588</span>
<span class="normal">4589</span>
<span class="normal">4590</span>
<span class="normal">4591</span>
<span class="normal">4592</span>
<span class="normal">4593</span>
<span class="normal">4594</span>
<span class="normal">4595</span>
<span class="normal">4596</span>
<span class="normal">4597</span>
<span class="normal">4598</span>
<span class="normal">4599</span>
<span class="normal">4600</span>
<span class="normal">4601</span>
<span class="normal">4602</span>
<span class="normal">4603</span>
<span class="normal">4604</span>
<span class="normal">4605</span>
<span class="normal">4606</span>
<span class="normal">4607</span>
<span class="normal">4608</span>
<span class="normal">4609</span>
<span class="normal">4610</span>
<span class="normal">4611</span>
<span class="normal">4612</span>
<span class="normal">4613</span>
<span class="normal">4614</span>
<span class="normal">4615</span>
<span class="normal">4616</span>
<span class="normal">4617</span>
<span class="normal">4618</span>
<span class="normal">4619</span>
<span class="normal">4620</span>
<span class="normal">4621</span>
<span class="normal">4622</span>
<span class="normal">4623</span>
<span class="normal">4624</span>
<span class="normal">4625</span>
<span class="normal">4626</span>
<span class="normal">4627</span>
<span class="normal">4628</span>
<span class="normal">4629</span>
<span class="normal">4630</span>
<span class="normal">4631</span>
<span class="normal">4632</span>
<span class="normal">4633</span>
<span class="normal">4634</span>
<span class="normal">4635</span>
<span class="normal">4636</span>
<span class="normal">4637</span>
<span class="normal">4638</span>
<span class="normal">4639</span>
<span class="normal">4640</span>
<span class="normal">4641</span>
<span class="normal">4642</span>
<span class="normal">4643</span>
<span class="normal">4644</span>
<span class="normal">4645</span>
<span class="normal">4646</span>
<span class="normal">4647</span>
<span class="normal">4648</span>
<span class="normal">4649</span>
<span class="normal">4650</span>
<span class="normal">4651</span>
<span class="normal">4652</span>
<span class="normal">4653</span>
<span class="normal">4654</span>
<span class="normal">4655</span>
<span class="normal">4656</span>
<span class="normal">4657</span>
<span class="normal">4658</span>
<span class="normal">4659</span>
<span class="normal">4660</span>
<span class="normal">4661</span>
<span class="normal">4662</span>
<span class="normal">4663</span>
<span class="normal">4664</span>
<span class="normal">4665</span>
<span class="normal">4666</span>
<span class="normal">4667</span>
<span class="normal">4668</span>
<span class="normal">4669</span>
<span class="normal">4670</span>
<span class="normal">4671</span>
<span class="normal">4672</span>
<span class="normal">4673</span>
<span class="normal">4674</span>
<span class="normal">4675</span>
<span class="normal">4676</span>
<span class="normal">4677</span>
<span class="normal">4678</span>
<span class="normal">4679</span>
<span class="normal">4680</span>
<span class="normal">4681</span>
<span class="normal">4682</span>
<span class="normal">4683</span>
<span class="normal">4684</span>
<span class="normal">4685</span>
<span class="normal">4686</span>
<span class="normal">4687</span>
<span class="normal">4688</span>
<span class="normal">4689</span>
<span class="normal">4690</span>
<span class="normal">4691</span>
<span class="normal">4692</span>
<span class="normal">4693</span>
<span class="normal">4694</span>
<span class="normal">4695</span>
<span class="normal">4696</span>
<span class="normal">4697</span>
<span class="normal">4698</span>
<span class="normal">4699</span>
<span class="normal">4700</span>
<span class="normal">4701</span>
<span class="normal">4702</span>
<span class="normal">4703</span>
<span class="normal">4704</span>
<span class="normal">4705</span>
<span class="normal">4706</span>
<span class="normal">4707</span>
<span class="normal">4708</span>
<span class="normal">4709</span>
<span class="normal">4710</span>
<span class="normal">4711</span>
<span class="normal">4712</span>
<span class="normal">4713</span>
<span class="normal">4714</span>
<span class="normal">4715</span>
<span class="normal">4716</span>
<span class="normal">4717</span>
<span class="normal">4718</span>
<span class="normal">4719</span>
<span class="normal">4720</span>
<span class="normal">4721</span>
<span class="normal">4722</span>
<span class="normal">4723</span>
<span class="normal">4724</span>
<span class="normal">4725</span>
<span class="normal">4726</span>
<span class="normal">4727</span>
<span class="normal">4728</span>
<span class="normal">4729</span>
<span class="normal">4730</span>
<span class="normal">4731</span>
<span class="normal">4732</span>
<span class="normal">4733</span>
<span class="normal">4734</span>
<span class="normal">4735</span>
<span class="normal">4736</span>
<span class="normal">4737</span>
<span class="normal">4738</span>
<span class="normal">4739</span>
<span class="normal">4740</span>
<span class="normal">4741</span>
<span class="normal">4742</span>
<span class="normal">4743</span>
<span class="normal">4744</span>
<span class="normal">4745</span>
<span class="normal">4746</span>
<span class="normal">4747</span>
<span class="normal">4748</span>
<span class="normal">4749</span>
<span class="normal">4750</span>
<span class="normal">4751</span>
<span class="normal">4752</span>
<span class="normal">4753</span>
<span class="normal">4754</span>
<span class="normal">4755</span>
<span class="normal">4756</span>
<span class="normal">4757</span>
<span class="normal">4758</span>
<span class="normal">4759</span>
<span class="normal">4760</span>
<span class="normal">4761</span>
<span class="normal">4762</span>
<span class="normal">4763</span>
<span class="normal">4764</span>
<span class="normal">4765</span>
<span class="normal">4766</span>
<span class="normal">4767</span>
<span class="normal">4768</span>
<span class="normal">4769</span>
<span class="normal">4770</span>
<span class="normal">4771</span>
<span class="normal">4772</span>
<span class="normal">4773</span>
<span class="normal">4774</span>
<span class="normal">4775</span>
<span class="normal">4776</span>
<span class="normal">4777</span>
<span class="normal">4778</span>
<span class="normal">4779</span>
<span class="normal">4780</span>
<span class="normal">4781</span>
<span class="normal">4782</span>
<span class="normal">4783</span>
<span class="normal">4784</span>
<span class="normal">4785</span>
<span class="normal">4786</span>
<span class="normal">4787</span>
<span class="normal">4788</span>
<span class="normal">4789</span>
<span class="normal">4790</span>
<span class="normal">4791</span>
<span class="normal">4792</span>
<span class="normal">4793</span>
<span class="normal">4794</span>
<span class="normal">4795</span>
<span class="normal">4796</span>
<span class="normal">4797</span>
<span class="normal">4798</span>
<span class="normal">4799</span>
<span class="normal">4800</span>
<span class="normal">4801</span>
<span class="normal">4802</span>
<span class="normal">4803</span>
<span class="normal">4804</span>
<span class="normal">4805</span>
<span class="normal">4806</span>
<span class="normal">4807</span>
<span class="normal">4808</span>
<span class="normal">4809</span>
<span class="normal">4810</span>
<span class="normal">4811</span>
<span class="normal">4812</span>
<span class="normal">4813</span>
<span class="normal">4814</span>
<span class="normal">4815</span>
<span class="normal">4816</span>
<span class="normal">4817</span>
<span class="normal">4818</span>
<span class="normal">4819</span>
<span class="normal">4820</span>
<span class="normal">4821</span>
<span class="normal">4822</span>
<span class="normal">4823</span>
<span class="normal">4824</span>
<span class="normal">4825</span>
<span class="normal">4826</span>
<span class="normal">4827</span>
<span class="normal">4828</span>
<span class="normal">4829</span>
<span class="normal">4830</span>
<span class="normal">4831</span>
<span class="normal">4832</span>
<span class="normal">4833</span>
<span class="normal">4834</span>
<span class="normal">4835</span>
<span class="normal">4836</span>
<span class="normal">4837</span>
<span class="normal">4838</span>
<span class="normal">4839</span>
<span class="normal">4840</span>
<span class="normal">4841</span>
<span class="normal">4842</span>
<span class="normal">4843</span>
<span class="normal">4844</span>
<span class="normal">4845</span>
<span class="normal">4846</span>
<span class="normal">4847</span>
<span class="normal">4848</span>
<span class="normal">4849</span>
<span class="normal">4850</span>
<span class="normal">4851</span>
<span class="normal">4852</span>
<span class="normal">4853</span>
<span class="normal">4854</span>
<span class="normal">4855</span>
<span class="normal">4856</span>
<span class="normal">4857</span>
<span class="normal">4858</span>
<span class="normal">4859</span>
<span class="normal">4860</span>
<span class="normal">4861</span>
<span class="normal">4862</span>
<span class="normal">4863</span>
<span class="normal">4864</span>
<span class="normal">4865</span>
<span class="normal">4866</span>
<span class="normal">4867</span>
<span class="normal">4868</span>
<span class="normal">4869</span>
<span class="normal">4870</span>
<span class="normal">4871</span>
<span class="normal">4872</span>
<span class="normal">4873</span>
<span class="normal">4874</span>
<span class="normal">4875</span>
<span class="normal">4876</span>
<span class="normal">4877</span>
<span class="normal">4878</span>
<span class="normal">4879</span>
<span class="normal">4880</span>
<span class="normal">4881</span>
<span class="normal">4882</span>
<span class="normal">4883</span>
<span class="normal">4884</span>
<span class="normal">4885</span>
<span class="normal">4886</span>
<span class="normal">4887</span>
<span class="normal">4888</span>
<span class="normal">4889</span>
<span class="normal">4890</span>
<span class="normal">4891</span>
<span class="normal">4892</span>
<span class="normal">4893</span>
<span class="normal">4894</span>
<span class="normal">4895</span>
<span class="normal">4896</span>
<span class="normal">4897</span>
<span class="normal">4898</span>
<span class="normal">4899</span>
<span class="normal">4900</span>
<span class="normal">4901</span>
<span class="normal">4902</span>
<span class="normal">4903</span>
<span class="normal">4904</span>
<span class="normal">4905</span>
<span class="normal">4906</span>
<span class="normal">4907</span>
<span class="normal">4908</span>
<span class="normal">4909</span>
<span class="normal">4910</span>
<span class="normal">4911</span>
<span class="normal">4912</span>
<span class="normal">4913</span>
<span class="normal">4914</span>
<span class="normal">4915</span>
<span class="normal">4916</span>
<span class="normal">4917</span>
<span class="normal">4918</span>
<span class="normal">4919</span>
<span class="normal">4920</span>
<span class="normal">4921</span>
<span class="normal">4922</span>
<span class="normal">4923</span>
<span class="normal">4924</span>
<span class="normal">4925</span>
<span class="normal">4926</span>
<span class="normal">4927</span>
<span class="normal">4928</span>
<span class="normal">4929</span>
<span class="normal">4930</span>
<span class="normal">4931</span>
<span class="normal">4932</span>
<span class="normal">4933</span>
<span class="normal">4934</span>
<span class="normal">4935</span>
<span class="normal">4936</span>
<span class="normal">4937</span>
<span class="normal">4938</span>
<span class="normal">4939</span>
<span class="normal">4940</span>
<span class="normal">4941</span>
<span class="normal">4942</span>
<span class="normal">4943</span>
<span class="normal">4944</span>
<span class="normal">4945</span>
<span class="normal">4946</span>
<span class="normal">4947</span>
<span class="normal">4948</span>
<span class="normal">4949</span>
<span class="normal">4950</span>
<span class="normal">4951</span>
<span class="normal">4952</span>
<span class="normal">4953</span>
<span class="normal">4954</span>
<span class="normal">4955</span>
<span class="normal">4956</span>
<span class="normal">4957</span>
<span class="normal">4958</span>
<span class="normal">4959</span>
<span class="normal">4960</span>
<span class="normal">4961</span>
<span class="normal">4962</span>
<span class="normal">4963</span>
<span class="normal">4964</span>
<span class="normal">4965</span>
<span class="normal">4966</span>
<span class="normal">4967</span>
<span class="normal">4968</span>
<span class="normal">4969</span>
<span class="normal">4970</span>
<span class="normal">4971</span>
<span class="normal">4972</span>
<span class="normal">4973</span>
<span class="normal">4974</span>
<span class="normal">4975</span>
<span class="normal">4976</span>
<span class="normal">4977</span>
<span class="normal">4978</span>
<span class="normal">4979</span>
<span class="normal">4980</span>
<span class="normal">4981</span>
<span class="normal">4982</span>
<span class="normal">4983</span>
<span class="normal">4984</span>
<span class="normal">4985</span>
<span class="normal">4986</span>
<span class="normal">4987</span>
<span class="normal">4988</span>
<span class="normal">4989</span>
<span class="normal">4990</span>
<span class="normal">4991</span>
<span class="normal">4992</span>
<span class="normal">4993</span>
<span class="normal">4994</span>
<span class="normal">4995</span>
<span class="normal">4996</span>
<span class="normal">4997</span>
<span class="normal">4998</span>
<span class="normal">4999</span>
<span class="normal">5000</span>
<span class="normal">5001</span>
<span class="normal">5002</span>
<span class="normal">5003</span>
<span class="normal">5004</span>
<span class="normal">5005</span>
<span class="normal">5006</span>
<span class="normal">5007</span>
<span class="normal">5008</span>
<span class="normal">5009</span>
<span class="normal">5010</span>
<span class="normal">5011</span>
<span class="normal">5012</span>
<span class="normal">5013</span>
<span class="normal">5014</span>
<span class="normal">5015</span>
<span class="normal">5016</span>
<span class="normal">5017</span>
<span class="normal">5018</span>
<span class="normal">5019</span>
<span class="normal">5020</span>
<span class="normal">5021</span>
<span class="normal">5022</span>
<span class="normal">5023</span>
<span class="normal">5024</span>
<span class="normal">5025</span>
<span class="normal">5026</span>
<span class="normal">5027</span>
<span class="normal">5028</span>
<span class="normal">5029</span>
<span class="normal">5030</span>
<span class="normal">5031</span>
<span class="normal">5032</span>
<span class="normal">5033</span>
<span class="normal">5034</span>
<span class="normal">5035</span>
<span class="normal">5036</span>
<span class="normal">5037</span>
<span class="normal">5038</span>
<span class="normal">5039</span>
<span class="normal">5040</span>
<span class="normal">5041</span>
<span class="normal">5042</span>
<span class="normal">5043</span>
<span class="normal">5044</span>
<span class="normal">5045</span>
<span class="normal">5046</span>
<span class="normal">5047</span>
<span class="normal">5048</span>
<span class="normal">5049</span>
<span class="normal">5050</span>
<span class="normal">5051</span>
<span class="normal">5052</span>
<span class="normal">5053</span>
<span class="normal">5054</span>
<span class="normal">5055</span>
<span class="normal">5056</span>
<span class="normal">5057</span>
<span class="normal">5058</span>
<span class="normal">5059</span>
<span class="normal">5060</span>
<span class="normal">5061</span>
<span class="normal">5062</span>
<span class="normal">5063</span>
<span class="normal">5064</span>
<span class="normal">5065</span>
<span class="normal">5066</span>
<span class="normal">5067</span>
<span class="normal">5068</span>
<span class="normal">5069</span>
<span class="normal">5070</span>
<span class="normal">5071</span>
<span class="normal">5072</span>
<span class="normal">5073</span>
<span class="normal">5074</span>
<span class="normal">5075</span>
<span class="normal">5076</span>
<span class="normal">5077</span>
<span class="normal">5078</span>
<span class="normal">5079</span>
<span class="normal">5080</span>
<span class="normal">5081</span>
<span class="normal">5082</span>
<span class="normal">5083</span>
<span class="normal">5084</span>
<span class="normal">5085</span>
<span class="normal">5086</span>
<span class="normal">5087</span>
<span class="normal">5088</span>
<span class="normal">5089</span>
<span class="normal">5090</span>
<span class="normal">5091</span>
<span class="normal">5092</span>
<span class="normal">5093</span>
<span class="normal">5094</span>
<span class="normal">5095</span>
<span class="normal">5096</span>
<span class="normal">5097</span>
<span class="normal">5098</span>
<span class="normal">5099</span>
<span class="normal">5100</span>
<span class="normal">5101</span>
<span class="normal">5102</span>
<span class="normal">5103</span>
<span class="normal">5104</span>
<span class="normal">5105</span>
<span class="normal">5106</span>
<span class="normal">5107</span>
<span class="normal">5108</span>
<span class="normal">5109</span>
<span class="normal">5110</span>
<span class="normal">5111</span>
<span class="normal">5112</span>
<span class="normal">5113</span>
<span class="normal">5114</span>
<span class="normal">5115</span>
<span class="normal">5116</span>
<span class="normal">5117</span>
<span class="normal">5118</span>
<span class="normal">5119</span>
<span class="normal">5120</span>
<span class="normal">5121</span>
<span class="normal">5122</span>
<span class="normal">5123</span>
<span class="normal">5124</span>
<span class="normal">5125</span>
<span class="normal">5126</span>
<span class="normal">5127</span>
<span class="normal">5128</span>
<span class="normal">5129</span>
<span class="normal">5130</span>
<span class="normal">5131</span>
<span class="normal">5132</span>
<span class="normal">5133</span>
<span class="normal">5134</span>
<span class="normal">5135</span>
<span class="normal">5136</span>
<span class="normal">5137</span>
<span class="normal">5138</span>
<span class="normal">5139</span>
<span class="normal">5140</span>
<span class="normal">5141</span>
<span class="normal">5142</span>
<span class="normal">5143</span>
<span class="normal">5144</span>
<span class="normal">5145</span>
<span class="normal">5146</span>
<span class="normal">5147</span>
<span class="normal">5148</span>
<span class="normal">5149</span>
<span class="normal">5150</span>
<span class="normal">5151</span>
<span class="normal">5152</span>
<span class="normal">5153</span>
<span class="normal">5154</span>
<span class="normal">5155</span>
<span class="normal">5156</span>
<span class="normal">5157</span>
<span class="normal">5158</span>
<span class="normal">5159</span>
<span class="normal">5160</span>
<span class="normal">5161</span>
<span class="normal">5162</span>
<span class="normal">5163</span>
<span class="normal">5164</span>
<span class="normal">5165</span>
<span class="normal">5166</span>
<span class="normal">5167</span>
<span class="normal">5168</span>
<span class="normal">5169</span>
<span class="normal">5170</span>
<span class="normal">5171</span>
<span class="normal">5172</span>
<span class="normal">5173</span>
<span class="normal">5174</span>
<span class="normal">5175</span>
<span class="normal">5176</span>
<span class="normal">5177</span>
<span class="normal">5178</span>
<span class="normal">5179</span>
<span class="normal">5180</span>
<span class="normal">5181</span>
<span class="normal">5182</span>
<span class="normal">5183</span>
<span class="normal">5184</span>
<span class="normal">5185</span>
<span class="normal">5186</span>
<span class="normal">5187</span>
<span class="normal">5188</span>
<span class="normal">5189</span>
<span class="normal">5190</span>
<span class="normal">5191</span>
<span class="normal">5192</span>
<span class="normal">5193</span>
<span class="normal">5194</span>
<span class="normal">5195</span>
<span class="normal">5196</span>
<span class="normal">5197</span>
<span class="normal">5198</span>
<span class="normal">5199</span>
<span class="normal">5200</span>
<span class="normal">5201</span>
<span class="normal">5202</span>
<span class="normal">5203</span>
<span class="normal">5204</span>
<span class="normal">5205</span>
<span class="normal">5206</span>
<span class="normal">5207</span>
<span class="normal">5208</span>
<span class="normal">5209</span>
<span class="normal">5210</span>
<span class="normal">5211</span>
<span class="normal">5212</span>
<span class="normal">5213</span>
<span class="normal">5214</span>
<span class="normal">5215</span>
<span class="normal">5216</span>
<span class="normal">5217</span>
<span class="normal">5218</span>
<span class="normal">5219</span>
<span class="normal">5220</span>
<span class="normal">5221</span>
<span class="normal">5222</span>
<span class="normal">5223</span>
<span class="normal">5224</span>
<span class="normal">5225</span>
<span class="normal">5226</span>
<span class="normal">5227</span>
<span class="normal">5228</span>
<span class="normal">5229</span>
<span class="normal">5230</span>
<span class="normal">5231</span>
<span class="normal">5232</span>
<span class="normal">5233</span>
<span class="normal">5234</span>
<span class="normal">5235</span>
<span class="normal">5236</span>
<span class="normal">5237</span>
<span class="normal">5238</span>
<span class="normal">5239</span>
<span class="normal">5240</span>
<span class="normal">5241</span>
<span class="normal">5242</span>
<span class="normal">5243</span>
<span class="normal">5244</span>
<span class="normal">5245</span>
<span class="normal">5246</span>
<span class="normal">5247</span>
<span class="normal">5248</span>
<span class="normal">5249</span>
<span class="normal">5250</span>
<span class="normal">5251</span>
<span class="normal">5252</span>
<span class="normal">5253</span>
<span class="normal">5254</span>
<span class="normal">5255</span>
<span class="normal">5256</span>
<span class="normal">5257</span>
<span class="normal">5258</span>
<span class="normal">5259</span>
<span class="normal">5260</span>
<span class="normal">5261</span>
<span class="normal">5262</span>
<span class="normal">5263</span>
<span class="normal">5264</span>
<span class="normal">5265</span>
<span class="normal">5266</span>
<span class="normal">5267</span>
<span class="normal">5268</span>
<span class="normal">5269</span>
<span class="normal">5270</span>
<span class="normal">5271</span>
<span class="normal">5272</span>
<span class="normal">5273</span>
<span class="normal">5274</span>
<span class="normal">5275</span>
<span class="normal">5276</span>
<span class="normal">5277</span>
<span class="normal">5278</span>
<span class="normal">5279</span>
<span class="normal">5280</span>
<span class="normal">5281</span>
<span class="normal">5282</span>
<span class="normal">5283</span>
<span class="normal">5284</span>
<span class="normal">5285</span>
<span class="normal">5286</span>
<span class="normal">5287</span>
<span class="normal">5288</span>
<span class="normal">5289</span>
<span class="normal">5290</span>
<span class="normal">5291</span>
<span class="normal">5292</span>
<span class="normal">5293</span>
<span class="normal">5294</span>
<span class="normal">5295</span>
<span class="normal">5296</span>
<span class="normal">5297</span>
<span class="normal">5298</span>
<span class="normal">5299</span>
<span class="normal">5300</span>
<span class="normal">5301</span>
<span class="normal">5302</span>
<span class="normal">5303</span>
<span class="normal">5304</span>
<span class="normal">5305</span>
<span class="normal">5306</span>
<span class="normal">5307</span>
<span class="normal">5308</span>
<span class="normal">5309</span>
<span class="normal">5310</span>
<span class="normal">5311</span>
<span class="normal">5312</span>
<span class="normal">5313</span>
<span class="normal">5314</span>
<span class="normal">5315</span>
<span class="normal">5316</span>
<span class="normal">5317</span>
<span class="normal">5318</span>
<span class="normal">5319</span>
<span class="normal">5320</span>
<span class="normal">5321</span>
<span class="normal">5322</span>
<span class="normal">5323</span>
<span class="normal">5324</span>
<span class="normal">5325</span>
<span class="normal">5326</span>
<span class="normal">5327</span>
<span class="normal">5328</span>
<span class="normal">5329</span>
<span class="normal">5330</span>
<span class="normal">5331</span>
<span class="normal">5332</span>
<span class="normal">5333</span>
<span class="normal">5334</span>
<span class="normal">5335</span>
<span class="normal">5336</span>
<span class="normal">5337</span>
<span class="normal">5338</span>
<span class="normal">5339</span>
<span class="normal">5340</span>
<span class="normal">5341</span>
<span class="normal">5342</span>
<span class="normal">5343</span>
<span class="normal">5344</span>
<span class="normal">5345</span>
<span class="normal">5346</span>
<span class="normal">5347</span>
<span class="normal">5348</span>
<span class="normal">5349</span>
<span class="normal">5350</span>
<span class="normal">5351</span>
<span class="normal">5352</span>
<span class="normal">5353</span>
<span class="normal">5354</span>
<span class="normal">5355</span>
<span class="normal">5356</span>
<span class="normal">5357</span>
<span class="normal">5358</span>
<span class="normal">5359</span>
<span class="normal">5360</span>
<span class="normal">5361</span>
<span class="normal">5362</span>
<span class="normal">5363</span>
<span class="normal">5364</span>
<span class="normal">5365</span>
<span class="normal">5366</span>
<span class="normal">5367</span>
<span class="normal">5368</span>
<span class="normal">5369</span>
<span class="normal">5370</span>
<span class="normal">5371</span>
<span class="normal">5372</span>
<span class="normal">5373</span>
<span class="normal">5374</span>
<span class="normal">5375</span>
<span class="normal">5376</span>
<span class="normal">5377</span>
<span class="normal">5378</span>
<span class="normal">5379</span>
<span class="normal">5380</span>
<span class="normal">5381</span>
<span class="normal">5382</span>
<span class="normal">5383</span>
<span class="normal">5384</span>
<span class="normal">5385</span>
<span class="normal">5386</span>
<span class="normal">5387</span>
<span class="normal">5388</span>
<span class="normal">5389</span>
<span class="normal">5390</span>
<span class="normal">5391</span>
<span class="normal">5392</span>
<span class="normal">5393</span>
<span class="normal">5394</span>
<span class="normal">5395</span>
<span class="normal">5396</span>
<span class="normal">5397</span>
<span class="normal">5398</span>
<span class="normal">5399</span>
<span class="normal">5400</span>
<span class="normal">5401</span>
<span class="normal">5402</span>
<span class="normal">5403</span>
<span class="normal">5404</span>
<span class="normal">5405</span>
<span class="normal">5406</span>
<span class="normal">5407</span>
<span class="normal">5408</span>
<span class="normal">5409</span>
<span class="normal">5410</span>
<span class="normal">5411</span>
<span class="normal">5412</span>
<span class="normal">5413</span>
<span class="normal">5414</span>
<span class="normal">5415</span>
<span class="normal">5416</span>
<span class="normal">5417</span>
<span class="normal">5418</span>
<span class="normal">5419</span>
<span class="normal">5420</span>
<span class="normal">5421</span>
<span class="normal">5422</span>
<span class="normal">5423</span>
<span class="normal">5424</span>
<span class="normal">5425</span>
<span class="normal">5426</span>
<span class="normal">5427</span>
<span class="normal">5428</span>
<span class="normal">5429</span>
<span class="normal">5430</span>
<span class="normal">5431</span>
<span class="normal">5432</span>
<span class="normal">5433</span>
<span class="normal">5434</span>
<span class="normal">5435</span>
<span class="normal">5436</span>
<span class="normal">5437</span>
<span class="normal">5438</span>
<span class="normal">5439</span>
<span class="normal">5440</span>
<span class="normal">5441</span>
<span class="normal">5442</span>
<span class="normal">5443</span>
<span class="normal">5444</span>
<span class="normal">5445</span>
<span class="normal">5446</span>
<span class="normal">5447</span>
<span class="normal">5448</span>
<span class="normal">5449</span>
<span class="normal">5450</span>
<span class="normal">5451</span>
<span class="normal">5452</span>
<span class="normal">5453</span>
<span class="normal">5454</span>
<span class="normal">5455</span>
<span class="normal">5456</span>
<span class="normal">5457</span>
<span class="normal">5458</span>
<span class="normal">5459</span>
<span class="normal">5460</span>
<span class="normal">5461</span>
<span class="normal">5462</span>
<span class="normal">5463</span>
<span class="normal">5464</span>
<span class="normal">5465</span>
<span class="normal">5466</span>
<span class="normal">5467</span>
<span class="normal">5468</span>
<span class="normal">5469</span>
<span class="normal">5470</span>
<span class="normal">5471</span>
<span class="normal">5472</span>
<span class="normal">5473</span>
<span class="normal">5474</span>
<span class="normal">5475</span>
<span class="normal">5476</span>
<span class="normal">5477</span>
<span class="normal">5478</span>
<span class="normal">5479</span>
<span class="normal">5480</span>
<span class="normal">5481</span>
<span class="normal">5482</span>
<span class="normal">5483</span>
<span class="normal">5484</span>
<span class="normal">5485</span>
<span class="normal">5486</span>
<span class="normal">5487</span>
<span class="normal">5488</span>
<span class="normal">5489</span>
<span class="normal">5490</span>
<span class="normal">5491</span>
<span class="normal">5492</span>
<span class="normal">5493</span>
<span class="normal">5494</span>
<span class="normal">5495</span>
<span class="normal">5496</span>
<span class="normal">5497</span>
<span class="normal">5498</span>
<span class="normal">5499</span>
<span class="normal">5500</span>
<span class="normal">5501</span>
<span class="normal">5502</span>
<span class="normal">5503</span>
<span class="normal">5504</span>
<span class="normal">5505</span>
<span class="normal">5506</span>
<span class="normal">5507</span>
<span class="normal">5508</span>
<span class="normal">5509</span>
<span class="normal">5510</span>
<span class="normal">5511</span>
<span class="normal">5512</span>
<span class="normal">5513</span>
<span class="normal">5514</span>
<span class="normal">5515</span>
<span class="normal">5516</span>
<span class="normal">5517</span>
<span class="normal">5518</span>
<span class="normal">5519</span>
<span class="normal">5520</span>
<span class="normal">5521</span>
<span class="normal">5522</span>
<span class="normal">5523</span>
<span class="normal">5524</span>
<span class="normal">5525</span>
<span class="normal">5526</span>
<span class="normal">5527</span>
<span class="normal">5528</span>
<span class="normal">5529</span>
<span class="normal">5530</span>
<span class="normal">5531</span>
<span class="normal">5532</span>
<span class="normal">5533</span>
<span class="normal">5534</span>
<span class="normal">5535</span>
<span class="normal">5536</span>
<span class="normal">5537</span>
<span class="normal">5538</span>
<span class="normal">5539</span>
<span class="normal">5540</span>
<span class="normal">5541</span>
<span class="normal">5542</span>
<span class="normal">5543</span>
<span class="normal">5544</span>
<span class="normal">5545</span>
<span class="normal">5546</span>
<span class="normal">5547</span>
<span class="normal">5548</span>
<span class="normal">5549</span>
<span class="normal">5550</span>
<span class="normal">5551</span>
<span class="normal">5552</span>
<span class="normal">5553</span>
<span class="normal">5554</span>
<span class="normal">5555</span>
<span class="normal">5556</span>
<span class="normal">5557</span>
<span class="normal">5558</span>
<span class="normal">5559</span>
<span class="normal">5560</span>
<span class="normal">5561</span>
<span class="normal">5562</span>
<span class="normal">5563</span>
<span class="normal">5564</span>
<span class="normal">5565</span>
<span class="normal">5566</span>
<span class="normal">5567</span>
<span class="normal">5568</span>
<span class="normal">5569</span>
<span class="normal">5570</span>
<span class="normal">5571</span>
<span class="normal">5572</span>
<span class="normal">5573</span>
<span class="normal">5574</span>
<span class="normal">5575</span>
<span class="normal">5576</span>
<span class="normal">5577</span>
<span class="normal">5578</span>
<span class="normal">5579</span>
<span class="normal">5580</span>
<span class="normal">5581</span>
<span class="normal">5582</span>
<span class="normal">5583</span>
<span class="normal">5584</span>
<span class="normal">5585</span>
<span class="normal">5586</span>
<span class="normal">5587</span>
<span class="normal">5588</span>
<span class="normal">5589</span>
<span class="normal">5590</span>
<span class="normal">5591</span>
<span class="normal">5592</span>
<span class="normal">5593</span>
<span class="normal">5594</span>
<span class="normal">5595</span>
<span class="normal">5596</span>
<span class="normal">5597</span>
<span class="normal">5598</span>
<span class="normal">5599</span>
<span class="normal">5600</span>
<span class="normal">5601</span>
<span class="normal">5602</span>
<span class="normal">5603</span>
<span class="normal">5604</span>
<span class="normal">5605</span>
<span class="normal">5606</span>
<span class="normal">5607</span>
<span class="normal">5608</span>
<span class="normal">5609</span>
<span class="normal">5610</span>
<span class="normal">5611</span>
<span class="normal">5612</span>
<span class="normal">5613</span>
<span class="normal">5614</span>
<span class="normal">5615</span>
<span class="normal">5616</span>
<span class="normal">5617</span>
<span class="normal">5618</span>
<span class="normal">5619</span>
<span class="normal">5620</span>
<span class="normal">5621</span>
<span class="normal">5622</span>
<span class="normal">5623</span>
<span class="normal">5624</span>
<span class="normal">5625</span>
<span class="normal">5626</span>
<span class="normal">5627</span>
<span class="normal">5628</span>
<span class="normal">5629</span>
<span class="normal">5630</span>
<span class="normal">5631</span>
<span class="normal">5632</span>
<span class="normal">5633</span>
<span class="normal">5634</span>
<span class="normal">5635</span>
<span class="normal">5636</span>
<span class="normal">5637</span>
<span class="normal">5638</span>
<span class="normal">5639</span>
<span class="normal">5640</span>
<span class="normal">5641</span>
<span class="normal">5642</span>
<span class="normal">5643</span>
<span class="normal">5644</span>
<span class="normal">5645</span>
<span class="normal">5646</span>
<span class="normal">5647</span>
<span class="normal">5648</span>
<span class="normal">5649</span>
<span class="normal">5650</span>
<span class="normal">5651</span>
<span class="normal">5652</span>
<span class="normal">5653</span>
<span class="normal">5654</span>
<span class="normal">5655</span>
<span class="normal">5656</span>
<span class="normal">5657</span>
<span class="normal">5658</span>
<span class="normal">5659</span>
<span class="normal">5660</span>
<span class="normal">5661</span>
<span class="normal">5662</span>
<span class="normal">5663</span>
<span class="normal">5664</span>
<span class="normal">5665</span>
<span class="normal">5666</span>
<span class="normal">5667</span>
<span class="normal">5668</span>
<span class="normal">5669</span>
<span class="normal">5670</span>
<span class="normal">5671</span>
<span class="normal">5672</span>
<span class="normal">5673</span>
<span class="normal">5674</span>
<span class="normal">5675</span>
<span class="normal">5676</span>
<span class="normal">5677</span>
<span class="normal">5678</span>
<span class="normal">5679</span>
<span class="normal">5680</span>
<span class="normal">5681</span>
<span class="normal">5682</span>
<span class="normal">5683</span>
<span class="normal">5684</span>
<span class="normal">5685</span>
<span class="normal">5686</span>
<span class="normal">5687</span>
<span class="normal">5688</span>
<span class="normal">5689</span>
<span class="normal">5690</span>
<span class="normal">5691</span>
<span class="normal">5692</span>
<span class="normal">5693</span>
<span class="normal">5694</span>
<span class="normal">5695</span>
<span class="normal">5696</span>
<span class="normal">5697</span>
<span class="normal">5698</span>
<span class="normal">5699</span>
<span class="normal">5700</span>
<span class="normal">5701</span>
<span class="normal">5702</span>
<span class="normal">5703</span>
<span class="normal">5704</span>
<span class="normal">5705</span>
<span class="normal">5706</span>
<span class="normal">5707</span>
<span class="normal">5708</span>
<span class="normal">5709</span>
<span class="normal">5710</span>
<span class="normal">5711</span>
<span class="normal">5712</span>
<span class="normal">5713</span>
<span class="normal">5714</span>
<span class="normal">5715</span>
<span class="normal">5716</span>
<span class="normal">5717</span>
<span class="normal">5718</span>
<span class="normal">5719</span>
<span class="normal">5720</span>
<span class="normal">5721</span>
<span class="normal">5722</span>
<span class="normal">5723</span>
<span class="normal">5724</span>
<span class="normal">5725</span>
<span class="normal">5726</span>
<span class="normal">5727</span>
<span class="normal">5728</span>
<span class="normal">5729</span>
<span class="normal">5730</span>
<span class="normal">5731</span>
<span class="normal">5732</span>
<span class="normal">5733</span>
<span class="normal">5734</span>
<span class="normal">5735</span>
<span class="normal">5736</span>
<span class="normal">5737</span>
<span class="normal">5738</span>
<span class="normal">5739</span>
<span class="normal">5740</span>
<span class="normal">5741</span>
<span class="normal">5742</span>
<span class="normal">5743</span>
<span class="normal">5744</span>
<span class="normal">5745</span>
<span class="normal">5746</span>
<span class="normal">5747</span>
<span class="normal">5748</span>
<span class="normal">5749</span>
<span class="normal">5750</span>
<span class="normal">5751</span>
<span class="normal">5752</span>
<span class="normal">5753</span>
<span class="normal">5754</span>
<span class="normal">5755</span>
<span class="normal">5756</span>
<span class="normal">5757</span>
<span class="normal">5758</span>
<span class="normal">5759</span>
<span class="normal">5760</span>
<span class="normal">5761</span>
<span class="normal">5762</span>
<span class="normal">5763</span>
<span class="normal">5764</span>
<span class="normal">5765</span>
<span class="normal">5766</span>
<span class="normal">5767</span>
<span class="normal">5768</span>
<span class="normal">5769</span>
<span class="normal">5770</span>
<span class="normal">5771</span>
<span class="normal">5772</span>
<span class="normal">5773</span>
<span class="normal">5774</span>
<span class="normal">5775</span>
<span class="normal">5776</span>
<span class="normal">5777</span>
<span class="normal">5778</span>
<span class="normal">5779</span>
<span class="normal">5780</span>
<span class="normal">5781</span>
<span class="normal">5782</span>
<span class="normal">5783</span>
<span class="normal">5784</span>
<span class="normal">5785</span>
<span class="normal">5786</span>
<span class="normal">5787</span>
<span class="normal">5788</span>
<span class="normal">5789</span>
<span class="normal">5790</span>
<span class="normal">5791</span>
<span class="normal">5792</span>
<span class="normal">5793</span>
<span class="normal">5794</span>
<span class="normal">5795</span>
<span class="normal">5796</span>
<span class="normal">5797</span>
<span class="normal">5798</span>
<span class="normal">5799</span>
<span class="normal">5800</span>
<span class="normal">5801</span>
<span class="normal">5802</span>
<span class="normal">5803</span>
<span class="normal">5804</span>
<span class="normal">5805</span>
<span class="normal">5806</span>
<span class="normal">5807</span>
<span class="normal">5808</span>
<span class="normal">5809</span>
<span class="normal">5810</span>
<span class="normal">5811</span>
<span class="normal">5812</span>
<span class="normal">5813</span>
<span class="normal">5814</span>
<span class="normal">5815</span>
<span class="normal">5816</span>
<span class="normal">5817</span>
<span class="normal">5818</span>
<span class="normal">5819</span>
<span class="normal">5820</span>
<span class="normal">5821</span>
<span class="normal">5822</span>
<span class="normal">5823</span>
<span class="normal">5824</span>
<span class="normal">5825</span>
<span class="normal">5826</span>
<span class="normal">5827</span>
<span class="normal">5828</span>
<span class="normal">5829</span>
<span class="normal">5830</span>
<span class="normal">5831</span>
<span class="normal">5832</span>
<span class="normal">5833</span>
<span class="normal">5834</span>
<span class="normal">5835</span>
<span class="normal">5836</span>
<span class="normal">5837</span>
<span class="normal">5838</span>
<span class="normal">5839</span>
<span class="normal">5840</span>
<span class="normal">5841</span>
<span class="normal">5842</span>
<span class="normal">5843</span>
<span class="normal">5844</span>
<span class="normal">5845</span>
<span class="normal">5846</span>
<span class="normal">5847</span>
<span class="normal">5848</span>
<span class="normal">5849</span>
<span class="normal">5850</span>
<span class="normal">5851</span>
<span class="normal">5852</span>
<span class="normal">5853</span>
<span class="normal">5854</span>
<span class="normal">5855</span>
<span class="normal">5856</span>
<span class="normal">5857</span>
<span class="normal">5858</span>
<span class="normal">5859</span>
<span class="normal">5860</span>
<span class="normal">5861</span>
<span class="normal">5862</span>
<span class="normal">5863</span>
<span class="normal">5864</span>
<span class="normal">5865</span>
<span class="normal">5866</span>
<span class="normal">5867</span>
<span class="normal">5868</span>
<span class="normal">5869</span>
<span class="normal">5870</span>
<span class="normal">5871</span>
<span class="normal">5872</span>
<span class="normal">5873</span>
<span class="normal">5874</span>
<span class="normal">5875</span>
<span class="normal">5876</span>
<span class="normal">5877</span>
<span class="normal">5878</span>
<span class="normal">5879</span>
<span class="normal">5880</span>
<span class="normal">5881</span>
<span class="normal">5882</span>
<span class="normal">5883</span>
<span class="normal">5884</span>
<span class="normal">5885</span>
<span class="normal">5886</span>
<span class="normal">5887</span>
<span class="normal">5888</span>
<span class="normal">5889</span>
<span class="normal">5890</span>
<span class="normal">5891</span>
<span class="normal">5892</span>
<span class="normal">5893</span>
<span class="normal">5894</span>
<span class="normal">5895</span>
<span class="normal">5896</span>
<span class="normal">5897</span>
<span class="normal">5898</span>
<span class="normal">5899</span>
<span class="normal">5900</span>
<span class="normal">5901</span>
<span class="normal">5902</span>
<span class="normal">5903</span>
<span class="normal">5904</span>
<span class="normal">5905</span>
<span class="normal">5906</span>
<span class="normal">5907</span>
<span class="normal">5908</span>
<span class="normal">5909</span>
<span class="normal">5910</span>
<span class="normal">5911</span>
<span class="normal">5912</span>
<span class="normal">5913</span>
<span class="normal">5914</span>
<span class="normal">5915</span>
<span class="normal">5916</span>
<span class="normal">5917</span>
<span class="normal">5918</span>
<span class="normal">5919</span>
<span class="normal">5920</span>
<span class="normal">5921</span>
<span class="normal">5922</span>
<span class="normal">5923</span>
<span class="normal">5924</span>
<span class="normal">5925</span>
<span class="normal">5926</span>
<span class="normal">5927</span>
<span class="normal">5928</span>
<span class="normal">5929</span>
<span class="normal">5930</span>
<span class="normal">5931</span>
<span class="normal">5932</span>
<span class="normal">5933</span>
<span class="normal">5934</span>
<span class="normal">5935</span>
<span class="normal">5936</span>
<span class="normal">5937</span>
<span class="normal">5938</span>
<span class="normal">5939</span>
<span class="normal">5940</span>
<span class="normal">5941</span>
<span class="normal">5942</span>
<span class="normal">5943</span>
<span class="normal">5944</span>
<span class="normal">5945</span>
<span class="normal">5946</span>
<span class="normal">5947</span>
<span class="normal">5948</span>
<span class="normal">5949</span>
<span class="normal">5950</span>
<span class="normal">5951</span>
<span class="normal">5952</span>
<span class="normal">5953</span>
<span class="normal">5954</span>
<span class="normal">5955</span>
<span class="normal">5956</span>
<span class="normal">5957</span>
<span class="normal">5958</span>
<span class="normal">5959</span>
<span class="normal">5960</span>
<span class="normal">5961</span>
<span class="normal">5962</span>
<span class="normal">5963</span>
<span class="normal">5964</span>
<span class="normal">5965</span>
<span class="normal">5966</span>
<span class="normal">5967</span>
<span class="normal">5968</span>
<span class="normal">5969</span>
<span class="normal">5970</span>
<span class="normal">5971</span>
<span class="normal">5972</span>
<span class="normal">5973</span>
<span class="normal">5974</span>
<span class="normal">5975</span>
<span class="normal">5976</span>
<span class="normal">5977</span>
<span class="normal">5978</span>
<span class="normal">5979</span>
<span class="normal">5980</span>
<span class="normal">5981</span>
<span class="normal">5982</span>
<span class="normal">5983</span>
<span class="normal">5984</span>
<span class="normal">5985</span>
<span class="normal">5986</span>
<span class="normal">5987</span>
<span class="normal">5988</span>
<span class="normal">5989</span>
<span class="normal">5990</span>
<span class="normal">5991</span>
<span class="normal">5992</span>
<span class="normal">5993</span>
<span class="normal">5994</span>
<span class="normal">5995</span>
<span class="normal">5996</span>
<span class="normal">5997</span>
<span class="normal">5998</span>
<span class="normal">5999</span>
<span class="normal">6000</span>
<span class="normal">6001</span>
<span class="normal">6002</span>
<span class="normal">6003</span>
<span class="normal">6004</span>
<span class="normal">6005</span>
<span class="normal">6006</span>
<span class="normal">6007</span>
<span class="normal">6008</span>
<span class="normal">6009</span>
<span class="normal">6010</span>
<span class="normal">6011</span>
<span class="normal">6012</span>
<span class="normal">6013</span>
<span class="normal">6014</span>
<span class="normal">6015</span>
<span class="normal">6016</span>
<span class="normal">6017</span>
<span class="normal">6018</span>
<span class="normal">6019</span>
<span class="normal">6020</span>
<span class="normal">6021</span>
<span class="normal">6022</span>
<span class="normal">6023</span>
<span class="normal">6024</span>
<span class="normal">6025</span>
<span class="normal">6026</span>
<span class="normal">6027</span>
<span class="normal">6028</span>
<span class="normal">6029</span>
<span class="normal">6030</span>
<span class="normal">6031</span>
<span class="normal">6032</span>
<span class="normal">6033</span>
<span class="normal">6034</span>
<span class="normal">6035</span>
<span class="normal">6036</span>
<span class="normal">6037</span>
<span class="normal">6038</span>
<span class="normal">6039</span>
<span class="normal">6040</span>
<span class="normal">6041</span>
<span class="normal">6042</span>
<span class="normal">6043</span>
<span class="normal">6044</span>
<span class="normal">6045</span>
<span class="normal">6046</span>
<span class="normal">6047</span>
<span class="normal">6048</span>
<span class="normal">6049</span>
<span class="normal">6050</span>
<span class="normal">6051</span>
<span class="normal">6052</span>
<span class="normal">6053</span>
<span class="normal">6054</span>
<span class="normal">6055</span>
<span class="normal">6056</span>
<span class="normal">6057</span>
<span class="normal">6058</span>
<span class="normal">6059</span>
<span class="normal">6060</span>
<span class="normal">6061</span>
<span class="normal">6062</span>
<span class="normal">6063</span>
<span class="normal">6064</span>
<span class="normal">6065</span>
<span class="normal">6066</span>
<span class="normal">6067</span>
<span class="normal">6068</span>
<span class="normal">6069</span>
<span class="normal">6070</span>
<span class="normal">6071</span>
<span class="normal">6072</span>
<span class="normal">6073</span>
<span class="normal">6074</span>
<span class="normal">6075</span>
<span class="normal">6076</span>
<span class="normal">6077</span>
<span class="normal">6078</span>
<span class="normal">6079</span>
<span class="normal">6080</span>
<span class="normal">6081</span>
<span class="normal">6082</span>
<span class="normal">6083</span>
<span class="normal">6084</span>
<span class="normal">6085</span>
<span class="normal">6086</span>
<span class="normal">6087</span>
<span class="normal">6088</span>
<span class="normal">6089</span>
<span class="normal">6090</span>
<span class="normal">6091</span>
<span class="normal">6092</span>
<span class="normal">6093</span>
<span class="normal">6094</span>
<span class="normal">6095</span>
<span class="normal">6096</span>
<span class="normal">6097</span>
<span class="normal">6098</span>
<span class="normal">6099</span>
<span class="normal">6100</span>
<span class="normal">6101</span>
<span class="normal">6102</span>
<span class="normal">6103</span>
<span class="normal">6104</span>
<span class="normal">6105</span>
<span class="normal">6106</span>
<span class="normal">6107</span>
<span class="normal">6108</span>
<span class="normal">6109</span>
<span class="normal">6110</span>
<span class="normal">6111</span>
<span class="normal">6112</span>
<span class="normal">6113</span>
<span class="normal">6114</span>
<span class="normal">6115</span>
<span class="normal">6116</span>
<span class="normal">6117</span>
<span class="normal">6118</span>
<span class="normal">6119</span>
<span class="normal">6120</span>
<span class="normal">6121</span>
<span class="normal">6122</span>
<span class="normal">6123</span>
<span class="normal">6124</span>
<span class="normal">6125</span>
<span class="normal">6126</span>
<span class="normal">6127</span>
<span class="normal">6128</span>
<span class="normal">6129</span>
<span class="normal">6130</span>
<span class="normal">6131</span>
<span class="normal">6132</span>
<span class="normal">6133</span>
<span class="normal">6134</span>
<span class="normal">6135</span>
<span class="normal">6136</span>
<span class="normal">6137</span>
<span class="normal">6138</span>
<span class="normal">6139</span>
<span class="normal">6140</span>
<span class="normal">6141</span>
<span class="normal">6142</span>
<span class="normal">6143</span>
<span class="normal">6144</span>
<span class="normal">6145</span>
<span class="normal">6146</span>
<span class="normal">6147</span>
<span class="normal">6148</span>
<span class="normal">6149</span>
<span class="normal">6150</span>
<span class="normal">6151</span>
<span class="normal">6152</span>
<span class="normal">6153</span>
<span class="normal">6154</span>
<span class="normal">6155</span>
<span class="normal">6156</span>
<span class="normal">6157</span>
<span class="normal">6158</span>
<span class="normal">6159</span>
<span class="normal">6160</span>
<span class="normal">6161</span>
<span class="normal">6162</span>
<span class="normal">6163</span>
<span class="normal">6164</span>
<span class="normal">6165</span>
<span class="normal">6166</span>
<span class="normal">6167</span>
<span class="normal">6168</span>
<span class="normal">6169</span>
<span class="normal">6170</span>
<span class="normal">6171</span>
<span class="normal">6172</span>
<span class="normal">6173</span>
<span class="normal">6174</span>
<span class="normal">6175</span>
<span class="normal">6176</span>
<span class="normal">6177</span>
<span class="normal">6178</span>
<span class="normal">6179</span>
<span class="normal">6180</span>
<span class="normal">6181</span>
<span class="normal">6182</span>
<span class="normal">6183</span>
<span class="normal">6184</span>
<span class="normal">6185</span>
<span class="normal">6186</span>
<span class="normal">6187</span>
<span class="normal">6188</span>
<span class="normal">6189</span>
<span class="normal">6190</span>
<span class="normal">6191</span>
<span class="normal">6192</span>
<span class="normal">6193</span>
<span class="normal">6194</span>
<span class="normal">6195</span>
<span class="normal">6196</span>
<span class="normal">6197</span>
<span class="normal">6198</span>
<span class="normal">6199</span>
<span class="normal">6200</span>
<span class="normal">6201</span>
<span class="normal">6202</span>
<span class="normal">6203</span>
<span class="normal">6204</span>
<span class="normal">6205</span>
<span class="normal">6206</span>
<span class="normal">6207</span>
<span class="normal">6208</span>
<span class="normal">6209</span>
<span class="normal">6210</span>
<span class="normal">6211</span>
<span class="normal">6212</span>
<span class="normal">6213</span>
<span class="normal">6214</span>
<span class="normal">6215</span>
<span class="normal">6216</span>
<span class="normal">6217</span>
<span class="normal">6218</span>
<span class="normal">6219</span>
<span class="normal">6220</span>
<span class="normal">6221</span>
<span class="normal">6222</span>
<span class="normal">6223</span>
<span class="normal">6224</span>
<span class="normal">6225</span>
<span class="normal">6226</span>
<span class="normal">6227</span>
<span class="normal">6228</span>
<span class="normal">6229</span>
<span class="normal">6230</span>
<span class="normal">6231</span>
<span class="normal">6232</span>
<span class="normal">6233</span>
<span class="normal">6234</span>
<span class="normal">6235</span>
<span class="normal">6236</span>
<span class="normal">6237</span>
<span class="normal">6238</span>
<span class="normal">6239</span>
<span class="normal">6240</span>
<span class="normal">6241</span>
<span class="normal">6242</span>
<span class="normal">6243</span>
<span class="normal">6244</span>
<span class="normal">6245</span>
<span class="normal">6246</span>
<span class="normal">6247</span>
<span class="normal">6248</span>
<span class="normal">6249</span>
<span class="normal">6250</span>
<span class="normal">6251</span>
<span class="normal">6252</span>
<span class="normal">6253</span>
<span class="normal">6254</span>
<span class="normal">6255</span>
<span class="normal">6256</span>
<span class="normal">6257</span>
<span class="normal">6258</span>
<span class="normal">6259</span>
<span class="normal">6260</span>
<span class="normal">6261</span>
<span class="normal">6262</span>
<span class="normal">6263</span>
<span class="normal">6264</span>
<span class="normal">6265</span>
<span class="normal">6266</span>
<span class="normal">6267</span>
<span class="normal">6268</span>
<span class="normal">6269</span>
<span class="normal">6270</span>
<span class="normal">6271</span>
<span class="normal">6272</span>
<span class="normal">6273</span>
<span class="normal">6274</span>
<span class="normal">6275</span>
<span class="normal">6276</span>
<span class="normal">6277</span>
<span class="normal">6278</span>
<span class="normal">6279</span>
<span class="normal">6280</span>
<span class="normal">6281</span>
<span class="normal">6282</span>
<span class="normal">6283</span>
<span class="normal">6284</span>
<span class="normal">6285</span>
<span class="normal">6286</span>
<span class="normal">6287</span>
<span class="normal">6288</span>
<span class="normal">6289</span>
<span class="normal">6290</span>
<span class="normal">6291</span>
<span class="normal">6292</span>
<span class="normal">6293</span>
<span class="normal">6294</span>
<span class="normal">6295</span>
<span class="normal">6296</span>
<span class="normal">6297</span>
<span class="normal">6298</span>
<span class="normal">6299</span>
<span class="normal">6300</span>
<span class="normal">6301</span>
<span class="normal">6302</span>
<span class="normal">6303</span>
<span class="normal">6304</span>
<span class="normal">6305</span>
<span class="normal">6306</span>
<span class="normal">6307</span>
<span class="normal">6308</span>
<span class="normal">6309</span>
<span class="normal">6310</span>
<span class="normal">6311</span>
<span class="normal">6312</span>
<span class="normal">6313</span>
<span class="normal">6314</span>
<span class="normal">6315</span>
<span class="normal">6316</span>
<span class="normal">6317</span>
<span class="normal">6318</span>
<span class="normal">6319</span>
<span class="normal">6320</span>
<span class="normal">6321</span>
<span class="normal">6322</span>
<span class="normal">6323</span>
<span class="normal">6324</span>
<span class="normal">6325</span>
<span class="normal">6326</span>
<span class="normal">6327</span>
<span class="normal">6328</span>
<span class="normal">6329</span>
<span class="normal">6330</span>
<span class="normal">6331</span>
<span class="normal">6332</span>
<span class="normal">6333</span>
<span class="normal">6334</span>
<span class="normal">6335</span>
<span class="normal">6336</span>
<span class="normal">6337</span>
<span class="normal">6338</span>
<span class="normal">6339</span>
<span class="normal">6340</span>
<span class="normal">6341</span>
<span class="normal">6342</span>
<span class="normal">6343</span>
<span class="normal">6344</span>
<span class="normal">6345</span>
<span class="normal">6346</span>
<span class="normal">6347</span>
<span class="normal">6348</span>
<span class="normal">6349</span>
<span class="normal">6350</span>
<span class="normal">6351</span>
<span class="normal">6352</span>
<span class="normal">6353</span>
<span class="normal">6354</span>
<span class="normal">6355</span>
<span class="normal">6356</span>
<span class="normal">6357</span>
<span class="normal">6358</span>
<span class="normal">6359</span>
<span class="normal">6360</span>
<span class="normal">6361</span>
<span class="normal">6362</span>
<span class="normal">6363</span>
<span class="normal">6364</span>
<span class="normal">6365</span>
<span class="normal">6366</span>
<span class="normal">6367</span>
<span class="normal">6368</span>
<span class="normal">6369</span>
<span class="normal">6370</span>
<span class="normal">6371</span>
<span class="normal">6372</span>
<span class="normal">6373</span>
<span class="normal">6374</span>
<span class="normal">6375</span>
<span class="normal">6376</span>
<span class="normal">6377</span>
<span class="normal">6378</span>
<span class="normal">6379</span>
<span class="normal">6380</span>
<span class="normal">6381</span>
<span class="normal">6382</span>
<span class="normal">6383</span>
<span class="normal">6384</span>
<span class="normal">6385</span>
<span class="normal">6386</span>
<span class="normal">6387</span>
<span class="normal">6388</span>
<span class="normal">6389</span>
<span class="normal">6390</span>
<span class="normal">6391</span>
<span class="normal">6392</span>
<span class="normal">6393</span>
<span class="normal">6394</span>
<span class="normal">6395</span>
<span class="normal">6396</span>
<span class="normal">6397</span>
<span class="normal">6398</span>
<span class="normal">6399</span>
<span class="normal">6400</span>
<span class="normal">6401</span>
<span class="normal">6402</span>
<span class="normal">6403</span>
<span class="normal">6404</span>
<span class="normal">6405</span>
<span class="normal">6406</span>
<span class="normal">6407</span>
<span class="normal">6408</span>
<span class="normal">6409</span>
<span class="normal">6410</span>
<span class="normal">6411</span>
<span class="normal">6412</span>
<span class="normal">6413</span>
<span class="normal">6414</span>
<span class="normal">6415</span>
<span class="normal">6416</span>
<span class="normal">6417</span>
<span class="normal">6418</span>
<span class="normal">6419</span>
<span class="normal">6420</span>
<span class="normal">6421</span>
<span class="normal">6422</span>
<span class="normal">6423</span>
<span class="normal">6424</span>
<span class="normal">6425</span>
<span class="normal">6426</span>
<span class="normal">6427</span>
<span class="normal">6428</span>
<span class="normal">6429</span>
<span class="normal">6430</span>
<span class="normal">6431</span>
<span class="normal">6432</span>
<span class="normal">6433</span>
<span class="normal">6434</span>
<span class="normal">6435</span>
<span class="normal">6436</span>
<span class="normal">6437</span>
<span class="normal">6438</span>
<span class="normal">6439</span>
<span class="normal">6440</span>
<span class="normal">6441</span>
<span class="normal">6442</span>
<span class="normal">6443</span>
<span class="normal">6444</span>
<span class="normal">6445</span>
<span class="normal">6446</span>
<span class="normal">6447</span>
<span class="normal">6448</span>
<span class="normal">6449</span>
<span class="normal">6450</span>
<span class="normal">6451</span>
<span class="normal">6452</span>
<span class="normal">6453</span>
<span class="normal">6454</span>
<span class="normal">6455</span>
<span class="normal">6456</span>
<span class="normal">6457</span>
<span class="normal">6458</span>
<span class="normal">6459</span>
<span class="normal">6460</span>
<span class="normal">6461</span>
<span class="normal">6462</span>
<span class="normal">6463</span>
<span class="normal">6464</span>
<span class="normal">6465</span>
<span class="normal">6466</span>
<span class="normal">6467</span>
<span class="normal">6468</span>
<span class="normal">6469</span>
<span class="normal">6470</span>
<span class="normal">6471</span>
<span class="normal">6472</span>
<span class="normal">6473</span>
<span class="normal">6474</span>
<span class="normal">6475</span>
<span class="normal">6476</span>
<span class="normal">6477</span>
<span class="normal">6478</span>
<span class="normal">6479</span>
<span class="normal">6480</span>
<span class="normal">6481</span>
<span class="normal">6482</span>
<span class="normal">6483</span>
<span class="normal">6484</span>
<span class="normal">6485</span>
<span class="normal">6486</span>
<span class="normal">6487</span>
<span class="normal">6488</span>
<span class="normal">6489</span>
<span class="normal">6490</span>
<span class="normal">6491</span>
<span class="normal">6492</span>
<span class="normal">6493</span>
<span class="normal">6494</span>
<span class="normal">6495</span>
<span class="normal">6496</span>
<span class="normal">6497</span>
<span class="normal">6498</span>
<span class="normal">6499</span>
<span class="normal">6500</span>
<span class="normal">6501</span>
<span class="normal">6502</span>
<span class="normal">6503</span>
<span class="normal">6504</span>
<span class="normal">6505</span>
<span class="normal">6506</span>
<span class="normal">6507</span>
<span class="normal">6508</span>
<span class="normal">6509</span>
<span class="normal">6510</span>
<span class="normal">6511</span>
<span class="normal">6512</span>
<span class="normal">6513</span>
<span class="normal">6514</span>
<span class="normal">6515</span>
<span class="normal">6516</span>
<span class="normal">6517</span>
<span class="normal">6518</span>
<span class="normal">6519</span>
<span class="normal">6520</span>
<span class="normal">6521</span>
<span class="normal">6522</span>
<span class="normal">6523</span>
<span class="normal">6524</span>
<span class="normal">6525</span>
<span class="normal">6526</span>
<span class="normal">6527</span>
<span class="normal">6528</span>
<span class="normal">6529</span>
<span class="normal">6530</span>
<span class="normal">6531</span>
<span class="normal">6532</span>
<span class="normal">6533</span>
<span class="normal">6534</span>
<span class="normal">6535</span>
<span class="normal">6536</span>
<span class="normal">6537</span>
<span class="normal">6538</span>
<span class="normal">6539</span>
<span class="normal">6540</span>
<span class="normal">6541</span>
<span class="normal">6542</span>
<span class="normal">6543</span>
<span class="normal">6544</span>
<span class="normal">6545</span>
<span class="normal">6546</span>
<span class="normal">6547</span>
<span class="normal">6548</span>
<span class="normal">6549</span>
<span class="normal">6550</span>
<span class="normal">6551</span>
<span class="normal">6552</span>
<span class="normal">6553</span>
<span class="normal">6554</span>
<span class="normal">6555</span>
<span class="normal">6556</span>
<span class="normal">6557</span>
<span class="normal">6558</span>
<span class="normal">6559</span>
<span class="normal">6560</span>
<span class="normal">6561</span>
<span class="normal">6562</span>
<span class="normal">6563</span>
<span class="normal">6564</span>
<span class="normal">6565</span>
<span class="normal">6566</span>
<span class="normal">6567</span>
<span class="normal">6568</span>
<span class="normal">6569</span>
<span class="normal">6570</span>
<span class="normal">6571</span>
<span class="normal">6572</span>
<span class="normal">6573</span>
<span class="normal">6574</span>
<span class="normal">6575</span>
<span class="normal">6576</span>
<span class="normal">6577</span>
<span class="normal">6578</span>
<span class="normal">6579</span>
<span class="normal">6580</span>
<span class="normal">6581</span>
<span class="normal">6582</span>
<span class="normal">6583</span>
<span class="normal">6584</span>
<span class="normal">6585</span>
<span class="normal">6586</span>
<span class="normal">6587</span>
<span class="normal">6588</span>
<span class="normal">6589</span>
<span class="normal">6590</span>
<span class="normal">6591</span>
<span class="normal">6592</span>
<span class="normal">6593</span>
<span class="normal">6594</span>
<span class="normal">6595</span>
<span class="normal">6596</span>
<span class="normal">6597</span>
<span class="normal">6598</span>
<span class="normal">6599</span>
<span class="normal">6600</span>
<span class="normal">6601</span>
<span class="normal">6602</span>
<span class="normal">6603</span>
<span class="normal">6604</span>
<span class="normal">6605</span>
<span class="normal">6606</span>
<span class="normal">6607</span>
<span class="normal">6608</span>
<span class="normal">6609</span>
<span class="normal">6610</span>
<span class="normal">6611</span>
<span class="normal">6612</span>
<span class="normal">6613</span>
<span class="normal">6614</span>
<span class="normal">6615</span>
<span class="normal">6616</span>
<span class="normal">6617</span>
<span class="normal">6618</span>
<span class="normal">6619</span>
<span class="normal">6620</span>
<span class="normal">6621</span>
<span class="normal">6622</span>
<span class="normal">6623</span>
<span class="normal">6624</span>
<span class="normal">6625</span>
<span class="normal">6626</span>
<span class="normal">6627</span>
<span class="normal">6628</span>
<span class="normal">6629</span>
<span class="normal">6630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Synapse</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs a Python client object for the Synapse repository service</span>

<span class="sd">    Attributes:</span>
<span class="sd">        repoEndpoint:          Location of Synapse repository</span>
<span class="sd">        authEndpoint:          Location of authentication service</span>
<span class="sd">        fileHandleEndpoint:    Location of file service</span>
<span class="sd">        portalEndpoint:        Location of the website</span>
<span class="sd">        serviceTimeoutSeconds: Wait time before timeout (currently unused)</span>
<span class="sd">        debug:                 Print debugging messages if True</span>
<span class="sd">        skip_checks:           Skip version and endpoint checks</span>
<span class="sd">        configPath:            Path to config File with setting for Synapse. Defaults to ~/.synapseConfig</span>
<span class="sd">        requests_session:      A custom [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) that this Synapse instance will use</span>
<span class="sd">                               when making http requests.</span>
<span class="sd">        cache_root_dir:        Root directory for storing cache data</span>
<span class="sd">        silent:                Defaults to False.</span>

<span class="sd">    Example: Getting started</span>
<span class="sd">        Logging in to Synapse using an authToken</span>

<span class="sd">            import synapseclient</span>
<span class="sd">            syn = synapseclient.login(authToken=&quot;authtoken&quot;)</span>

<span class="sd">        Using environment variable or `.synapseConfig`</span>

<span class="sd">            import synapseclient</span>
<span class="sd">            syn = synapseclient.login()</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_synapse_client</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># TODO: add additional boolean for write to disk?</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">repoEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">authEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fileHandleEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">portalEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">skip_checks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">configPath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">CONFIG_FILE</span><span class="p">,</span>
        <span class="n">requests_session</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cache_root_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">silent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">requests_session_storage</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Client</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Synapse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Synapse object</span>

<span class="sd">        Arguments:</span>
<span class="sd">            repoEndpoint:       Location of Synapse repository.</span>
<span class="sd">            authEndpoint:       Location of authentication service.</span>
<span class="sd">            fileHandleEndpoint: Location of file service.</span>
<span class="sd">            portalEndpoint:     Location of the website.</span>
<span class="sd">            debug:              Print debugging messages if True.</span>
<span class="sd">            skip_checks:        Skip version and endpoint checks.</span>
<span class="sd">            configPath:         Path to config File with setting for Synapse.</span>
<span class="sd">            requests_session:   A custom [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) that this Synapse instance will use</span>
<span class="sd">                                when making http requests.</span>
<span class="sd">            cache_root_dir:     Root directory for storing cache data.</span>
<span class="sd">            silent:             Suppresses message.</span>
<span class="sd">            requests_session_async_synapse: The HTTPX Async client for interacting with</span>
<span class="sd">                Synapse services.</span>
<span class="sd">            requests_session_storage: The HTTPX client for interacting with</span>
<span class="sd">                storage providers like AWS S3 and Google Cloud.</span>
<span class="sd">            asyncio_event_loop: The event loop that is going to be used while executing</span>
<span class="sd">                this code. This is optional and only used when you are manually</span>
<span class="sd">                specifying an async HTTPX client.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Warn for non-boolean debug value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span> <span class="o">=</span> <span class="n">requests_session</span> <span class="ow">or</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>

        <span class="c1"># `requests_session_async_synapse` and the thread pools are being stored in</span>
        <span class="c1"># a dict based on the current running event loop. This is to ensure that the</span>
        <span class="c1"># connection pooling is maintained within the same event loop. This is to</span>
        <span class="c1"># prevent the connection pooling from being shared across different event loops.</span>
        <span class="k">if</span> <span class="n">requests_session_async_synapse</span> <span class="ow">and</span> <span class="n">asyncio_event_loop</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">requests_session_async_synapse</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">span_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">httpx</span><span class="o">.</span><span class="n">Request</span><span class="p">,</span> <span class="n">trace</span><span class="o">.</span><span class="n">Span</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">def</span> <span class="nf">log_request</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Log the HTTPX request to an otel span.</span>

<span class="sd">            Arguments:</span>
<span class="sd">                request: The HTTPX request object.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Don&#39;t log the query string as it will contain tokens</span>
            <span class="n">url_without_query_string</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">URL</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">copy_with</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">current_span</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">current_span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">():</span>
                <span class="n">span</span> <span class="o">=</span> <span class="n">tracer</span><span class="o">.</span><span class="n">start_span</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">url_without_query_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">SpanKind</span><span class="o">.</span><span class="n">CLIENT</span>
                <span class="p">)</span>
                <span class="n">span</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url_without_query_string</span><span class="p">),</span>
                        <span class="s2">&quot;http.method&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">)</span>
                <span class="n">span_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">request</span><span class="p">:</span> <span class="n">span</span><span class="p">})</span>

        <span class="k">def</span> <span class="nf">log_response</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Log the HTTPX response to an otel span.</span>

<span class="sd">            Arguments:</span>
<span class="sd">                response: The HTTPX response object.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">span</span> <span class="o">=</span> <span class="n">span_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">span</span> <span class="ow">and</span> <span class="n">span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">():</span>
                <span class="n">span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s2">&quot;http.response.status_code&quot;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
                <span class="n">span</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>

        <span class="n">event_hooks</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">log_request</span><span class="p">],</span> <span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">log_response</span><span class="p">]}</span>
        <span class="n">httpx_timeout</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Timeout</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_storage</span> <span class="o">=</span> <span class="n">requests_session_storage</span> <span class="ow">or</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">httpx_timeout</span><span class="p">,</span> <span class="n">event_hooks</span><span class="o">=</span><span class="n">event_hooks</span>
        <span class="p">)</span>

        <span class="n">cache_root_dir</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">cache</span><span class="o">.</span><span class="n">CACHE_ROOT_DIR</span> <span class="k">if</span> <span class="n">cache_root_dir</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">cache_root_dir</span>
        <span class="p">)</span>

        <span class="n">config_debug</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Check for a config file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configPath</span> <span class="o">=</span> <span class="n">configPath</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">configPath</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">get_config_file</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="s2">&quot;cache&quot;</span><span class="p">,</span> <span class="s2">&quot;location&quot;</span><span class="p">):</span>
                <span class="n">cache_root_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cache&quot;</span><span class="p">,</span> <span class="s2">&quot;location&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="s2">&quot;debug&quot;</span><span class="p">):</span>
                <span class="n">config_debug</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">debug</span> <span class="o">=</span> <span class="n">config_debug</span> <span class="k">if</span> <span class="n">config_debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">DEBUG_DEFAULT</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">Cache</span><span class="p">(</span><span class="n">cache_root_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sts_token_store</span> <span class="o">=</span> <span class="n">sts_transfer</span><span class="o">.</span><span class="n">StsTokenStore</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setEndpoints</span><span class="p">(</span>
            <span class="n">repoEndpoint</span><span class="p">,</span> <span class="n">authEndpoint</span><span class="p">,</span> <span class="n">fileHandleEndpoint</span><span class="p">,</span> <span class="n">portalEndpoint</span><span class="p">,</span> <span class="n">skip_checks</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json; charset=UTF-8&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json; charset=UTF-8&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">debug</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;debug must be set to a bool (either True or False)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">silent</span> <span class="o">=</span> <span class="n">silent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_logger</span><span class="p">()</span>  <span class="c1"># initializes self.logger</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">skip_checks</span> <span class="o">=</span> <span class="n">skip_checks</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table_query_sleep</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_query_backoff</span> <span class="o">=</span> <span class="mf">1.1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_query_max_sleep</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_query_timeout</span> <span class="o">=</span> <span class="mi">600</span>  <span class="c1"># in seconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multi_threaded</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># if set to True, multi threaded download will be used for http and https URLs</span>

        <span class="n">transfer_config</span> <span class="o">=</span> <span class="n">get_transfer_config</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_threads</span> <span class="o">=</span> <span class="n">transfer_config</span><span class="p">[</span><span class="s2">&quot;max_threads&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_process_executor</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parallel_file_transfer_semaphore</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md5_semaphore</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_boto_sts_transfers</span> <span class="o">=</span> <span class="n">transfer_config</span><span class="p">[</span><span class="s2">&quot;use_boto_sts&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parts_transfered_counter</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_get_requests_session_async_synapse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        httpx.AsyncClient can only use connection pooling within the same event loop.</span>
<span class="sd">        As a result an `atexit` handler is used to close the connection when the event</span>
<span class="sd">        loop is closed. It will also delete the attribute from the object to prevent</span>
<span class="sd">        it from being reused in the future.</span>

<span class="sd">        Further documentation can be found here:</span>
<span class="sd">        &lt;https://github.com/encode/httpx/discussions/2959&gt;</span>


<span class="sd">        As a result of this issue: It is recommended to use the same event loop for all</span>
<span class="sd">        requests. This means to enter into an event loop before making any requests.</span>

<span class="sd">        This is expected to be called from within an AsyncIO loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_requests_session_async_synapse&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">asyncio_event_loop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

        <span class="k">async</span> <span class="k">def</span> <span class="nf">close_connection</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Close connection when event loop exits&quot;&quot;&quot;</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span><span class="o">.</span><span class="n">aclose</span><span class="p">()</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

        <span class="n">httpx_timeout</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Timeout</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">span_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">httpx</span><span class="o">.</span><span class="n">Request</span><span class="p">,</span> <span class="n">trace</span><span class="o">.</span><span class="n">Span</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">async</span> <span class="k">def</span> <span class="nf">log_request</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Log the HTTPX request to an otel span.</span>

<span class="sd">            Arguments:</span>
<span class="sd">                request: The HTTPX request object.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">current_span</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">current_span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">():</span>
                <span class="n">span</span> <span class="o">=</span> <span class="n">tracer</span><span class="o">.</span><span class="n">start_span</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">SpanKind</span><span class="o">.</span><span class="n">CLIENT</span>
                <span class="p">)</span>
                <span class="n">span</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
                    <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;http.method&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">}</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_attach_rest_data_to_otel</span><span class="p">(</span>
                    <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">span</span>
                <span class="p">)</span>
                <span class="n">span_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">request</span><span class="p">:</span> <span class="n">span</span><span class="p">})</span>

        <span class="k">async</span> <span class="k">def</span> <span class="nf">log_response</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Log the HTTPX response to an otel span.</span>

<span class="sd">            Arguments:</span>
<span class="sd">                response: The HTTPX response object.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">span</span> <span class="o">=</span> <span class="n">span_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">span</span> <span class="ow">and</span> <span class="n">span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">():</span>
                <span class="n">span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s2">&quot;http.response.status_code&quot;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
                <span class="n">span</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>

        <span class="n">event_hooks</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">log_request</span><span class="p">],</span> <span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">log_response</span><span class="p">]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">(</span>
                    <span class="n">limits</span><span class="o">=</span><span class="n">httpx</span><span class="o">.</span><span class="n">Limits</span><span class="p">(</span><span class="n">max_connections</span><span class="o">=</span><span class="mi">25</span><span class="p">),</span>
                    <span class="n">timeout</span><span class="o">=</span><span class="n">httpx_timeout</span><span class="p">,</span>
                    <span class="n">event_hooks</span><span class="o">=</span><span class="n">event_hooks</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="n">asyncio_atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">close_connection</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session_async_synapse</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_thread_pool_executor</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ThreadPoolExecutor</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the thread pool executor for the Synapse client. Or create a new one if</span>
<span class="sd">        it does not exist. This executor is used for concurrent uploads of data to</span>
<span class="sd">        storage providers like AWS S3 and Google Cloud Storage.</span>

<span class="sd">        This is expected to be called from within an AsyncIO loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_thread_executor&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">asyncio_event_loop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">close_pool</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Close pool when event loop exits&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span><span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">get_executor</span><span class="p">(</span><span class="n">thread_count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_threads</span><span class="p">)}</span>
        <span class="p">)</span>

        <span class="n">asyncio_atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">close_pool</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_process_pool_executor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the process pool executor for the Synapse client. Or create a new one</span>
<span class="sd">        if it does not exist. This executor is used for parallel processing of data.</span>

<span class="sd">        This is expected to be called from within an AsyncIO loop.</span>

<span class="sd">        Note: Within Windows a ProcessPoolExecutor requires that the initial entry point</span>
<span class="sd">        into the code be within a `if __name__ == &quot;__main__&quot;:` block. This is not</span>
<span class="sd">        possible within the current codebase as it would require everyone using this</span>
<span class="sd">        library to have this as their entry point. As a result, the ProcessPoolExecutor</span>
<span class="sd">        will not work within Windows.</span>

<span class="sd">        To get around this Windows limitation this is using this package:</span>
<span class="sd">        https://github.com/joblib/loky</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_process_executor&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">asyncio_event_loop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_executor</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_process_executor</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">get_reusable_executor</span><span class="p">(</span><span class="mi">1</span><span class="p">)})</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_executor</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_md5_semaphore</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Semaphore</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the semaphore for the Synapse client. Or create a new one if it does not</span>
<span class="sd">        exist. This semaphore is used to ensure that only one process is calculating the</span>
<span class="sd">        MD5 hash at a time. This is to prevent the custom process pool executor from</span>
<span class="sd">        thrashing or handling the waiting. We should let asyncio handle the waiting.</span>

<span class="sd">        This is expected to be called from within an AsyncIO loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_md5_semaphore&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">asyncio_event_loop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_md5_semaphore</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_md5_semaphore</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_md5_semaphore</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_md5_semaphore</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="mi">1</span><span class="p">)})</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_md5_semaphore</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_parallel_file_transfer_semaphore</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Semaphore</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the semaphore for the Synapse client. Or create a new one if it does</span>
<span class="sd">        not exist. This semaphore is used to limit the number of files that can actively</span>
<span class="sd">        enter the uploading/downloading process.</span>

<span class="sd">        This is expected to be called from within an AsyncIO loop.</span>

<span class="sd">        By default the number of files that can enter the &quot;uploading&quot; state will be</span>
<span class="sd">        limited to 2 * max_threads. This is to ensure that the files that are entering</span>
<span class="sd">        into the &quot;uploading&quot; state will have priority to finish. Additionally, it means</span>
<span class="sd">        that there should be a good spread of files getting up to the &quot;uploading&quot;</span>
<span class="sd">        state, entering the &quot;uploading&quot; state, and finishing the &quot;uploading&quot; state.</span>

<span class="sd">        If we break these states down into large components they would look like:</span>
<span class="sd">        - Before &quot;uploading&quot; state: HTTP rest calls to retrieve what data Synapse has</span>
<span class="sd">        - Entering &quot;uploading&quot; state: MD5 calculation and HTTP rest calls to determine</span>
<span class="sd">          how/where to upload a file to.</span>
<span class="sd">        - During &quot;uploading&quot; state: Uploading the file to a storage provider.</span>
<span class="sd">        - After &quot;uploading&quot; state: HTTP rest calls to finalize the upload.</span>

<span class="sd">        This has not yet been applied to parallel file downloads. That will take place</span>
<span class="sd">        later on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_parallel_file_transfer_semaphore&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">asyncio_event_loop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parallel_file_transfer_semaphore</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parallel_file_transfer_semaphore</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parallel_file_transfer_semaphore</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parallel_file_transfer_semaphore</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span><span class="n">asyncio_event_loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_threads</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))}</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parallel_file_transfer_semaphore</span><span class="p">[</span><span class="n">asyncio_event_loop</span><span class="p">]</span>

    <span class="c1"># initialize logging</span>
    <span class="k">def</span> <span class="nf">_init_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize logging</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">SILENT_LOGGER_NAME</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">silent</span>
            <span class="k">else</span> <span class="n">DEBUG_LOGGER_NAME</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span>
            <span class="k">else</span> <span class="n">DEFAULT_LOGGER_NAME</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger_name</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;py.warnings&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">handlers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">handlers</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_client</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Synapse&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Synapse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convience function to get an instance of &#39;Synapse&#39;. The latest instance created</span>
<span class="sd">        by &#39;login()&#39; or set via `set_client` will be returned.</span>

<span class="sd">        When &#39;logout()&#39; is called it will delete the instance.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            synapse_client: An instance of &#39;Synapse&#39; or None. This is used to simplify logical checks</span>
<span class="sd">                    in cases where synapse is passed into them.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An instance of &#39;Synapse&#39;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            SynapseError: No instance has been created - Please use login() first</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">synapse_client</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">synapse_client</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_synapse_client</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                <span class="s2">&quot;No instance has been created - Please use login() first&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_synapse_client</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">set_client</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_synapse_client</span> <span class="o">=</span> <span class="n">synapse_client</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_threads</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_threads</span>

    <span class="nd">@max_threads</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">max_threads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_threads</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">MAX_THREADS_CAP</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">username</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="c1"># for backwards compatability when username was a part of the Synapse object and not in credentials</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">username</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/api/configuration_services.py::get_config_file&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">getConfigFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configPath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">configparser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the client configuration information.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            configPath:  Path to configuration file on local file system</span>

<span class="sd">        Returns:</span>
<span class="sd">            A RawConfigParser populated with properties from the user&#39;s configuration file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span>  <span class="c1"># Does not fail if the file does not exist</span>
            <span class="k">return</span> <span class="n">config</span>
        <span class="k">except</span> <span class="n">configparser</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Error parsing Synapse config file: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>

    <span class="k">def</span> <span class="nf">setEndpoints</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">repoEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">authEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fileHandleEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">portalEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">skip_checks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the locations for each of the Synapse services (mostly useful for testing).</span>

<span class="sd">        Arguments:</span>
<span class="sd">            repoEndpoint:          Location of synapse repository</span>
<span class="sd">            authEndpoint:          Location of authentication service</span>
<span class="sd">            fileHandleEndpoint:    Location of file service</span>
<span class="sd">            portalEndpoint:        Location of the website</span>
<span class="sd">            skip_checks:           Skip version and endpoint checks</span>

<span class="sd">        Example: Switching endpoints</span>
<span class="sd">            To switch between staging and production endpoints</span>

<span class="sd">                syn.setEndpoints(**synapseclient.client.STAGING_ENDPOINTS)</span>
<span class="sd">                syn.setEndpoints(**synapseclient.client.PRODUCTION_ENDPOINTS)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">endpoints</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;repoEndpoint&quot;</span><span class="p">:</span> <span class="n">repoEndpoint</span><span class="p">,</span>
            <span class="s2">&quot;authEndpoint&quot;</span><span class="p">:</span> <span class="n">authEndpoint</span><span class="p">,</span>
            <span class="s2">&quot;fileHandleEndpoint&quot;</span><span class="p">:</span> <span class="n">fileHandleEndpoint</span><span class="p">,</span>
            <span class="s2">&quot;portalEndpoint&quot;</span><span class="p">:</span> <span class="n">portalEndpoint</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># For unspecified endpoints, first look in the config file</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">get_config_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="s2">&quot;endpoints&quot;</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
                <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;endpoints&quot;</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>

        <span class="c1"># Endpoints default to production</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">=</span> <span class="n">PRODUCTION_ENDPOINTS</span><span class="p">[</span><span class="n">point</span><span class="p">]</span>

            <span class="c1"># Update endpoints if we get redirected</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_checks</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">],</span>
                    <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">headers</span><span class="o">=</span><span class="n">synapseclient</span><span class="o">.</span><span class="n">USER_AGENT</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">301</span><span class="p">:</span>
                    <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">repoEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;repoEndpoint&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;authEndpoint&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;fileHandleEndpoint&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">portalEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;portalEndpoint&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">silent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">authToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cache_client</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Valid combinations of login() arguments:</span>

<span class="sd">        - authToken</span>

<span class="sd">        If no login arguments are provided or only username is provided, login() will attempt to log in using</span>
<span class="sd">         information from these sources (in order of preference):</span>

<span class="sd">        1. .synapseConfig file (in user home folder unless configured otherwise)</span>
<span class="sd">        2. User defined arguments during a CLI session</span>
<span class="sd">        3. User&#39;s Personal Access Token (aka: Synapse Auth Token)</span>
<span class="sd">            from the environment variable: SYNAPSE_AUTH_TOKEN</span>
<span class="sd">        4. Retrieves user&#39;s authentication token from AWS SSM Parameter store (if configured)</span>

<span class="sd">        Arguments:</span>
<span class="sd">            email:        Synapse user name (or an email address associated with a Synapse account)</span>
<span class="sd">            authToken:    A bearer authorization token, e.g. a</span>
<span class="sd">                [personal access token](https://python-docs.synapse.org/tutorials/authentication/).</span>
<span class="sd">            silent:       Defaults to False.  Suppresses the &quot;Welcome ...!&quot; message.</span>
<span class="sd">            cache_client: Whether to cache the Synapse client object in the Synapse module. Defaults to True.</span>
<span class="sd">                             When set to True anywhere a `Synapse` object is optional you do not need to pass an</span>
<span class="sd">                             instance of `Synapse` to that function, method, or class.</span>

<span class="sd">        Example: Logging in</span>
<span class="sd">            Using an auth token:</span>

<span class="sd">                syn.login(authToken=&quot;authtoken&quot;)</span>
<span class="sd">                &gt; Welcome, Me!</span>

<span class="sd">            Using an auth token and username. The username is optional but verified</span>
<span class="sd">            against the username in the auth token:</span>

<span class="sd">                syn.login(email=&quot;my-username&quot;, authToken=&quot;authtoken&quot;)</span>
<span class="sd">                &gt; Welcome, Me!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Note: the order of the logic below reflects the ordering in the docstring above.</span>

        <span class="c1"># Check version before logging in</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">skip_checks</span><span class="p">:</span>
            <span class="n">version_check</span><span class="p">()</span>

        <span class="c1"># Make sure to invalidate the existing session</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>

        <span class="n">credential_provider_chain</span> <span class="o">=</span> <span class="n">get_default_credential_chain</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="o">=</span> <span class="n">credential_provider_chain</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">(</span>
            <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">user_login_args</span><span class="o">=</span><span class="n">UserLoginArgs</span><span class="p">(</span>
                <span class="n">email</span><span class="p">,</span>
                <span class="n">authToken</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="c1"># Final check on login success</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseNoCredentialsError</span><span class="p">(</span><span class="s2">&quot;No credentials provided.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">silent</span><span class="p">:</span>
            <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">()</span>
            <span class="n">display_name</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">profile</span><span class="p">[</span><span class="s2">&quot;displayName&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s2">&quot;displayName&quot;</span> <span class="ow">in</span> <span class="n">profile</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">username</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Welcome, </span><span class="si">{</span><span class="n">display_name</span><span class="si">}</span><span class="s2">!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cache_client</span><span class="p">:</span>
            <span class="n">Synapse</span><span class="o">.</span><span class="n">set_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/api/configuration_services.py::get_config_section_dict&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_config_section_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a profile section in the configuration file with the section name.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            section_name: The name of the profile section in the configuration file</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary containing the configuration profile section content</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">get_config_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section_name</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">configparser</span><span class="o">.</span><span class="n">NoSectionError</span><span class="p">:</span>
            <span class="c1"># section not present</span>
            <span class="k">return</span> <span class="p">{}</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/api/configuration_services.py::get_config_authentication&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_config_authentication</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the authentication section of the configuration file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The authentication section of the configuration file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">get_config_section_dict</span><span class="p">(</span>
            <span class="n">section_name</span><span class="o">=</span><span class="n">config_file_constants</span><span class="o">.</span><span class="n">AUTHENTICATION_SECTION_NAME</span><span class="p">,</span>
            <span class="n">config_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/api/configuration_services.py::get_client_authenticated_s3_profile&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_client_authenticated_s3_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bucket</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the authenticated S3 profile from the configuration file.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            endpoint: The location of the target service</span>
<span class="sd">            bucket:   AWS S3 bucket name</span>

<span class="sd">        Returns:</span>
<span class="sd">            The authenticated S3 profile</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config_section</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">bucket</span>
        <span class="k">return</span> <span class="n">get_config_section_dict</span><span class="p">(</span>
            <span class="n">section_name</span><span class="o">=</span><span class="n">config_section</span><span class="p">,</span> <span class="n">config_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;profile_name&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/api/configuration_services.py::get_transfer_config&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_transfer_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transfer profile from the configuration file.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Invalid max_threads value. Should be equal or less than 16.</span>
<span class="sd">            ValueError: Invalid use_boto_sts value. Should be true or false.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The transfer profile</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># defaults</span>
        <span class="n">transfer_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;max_threads&quot;</span><span class="p">:</span> <span class="n">DEFAULT_NUM_THREADS</span><span class="p">,</span> <span class="s2">&quot;use_boto_sts&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">get_config_section_dict</span><span class="p">(</span>
            <span class="n">section_name</span><span class="o">=</span><span class="s2">&quot;transfer&quot;</span><span class="p">,</span> <span class="n">config_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span>
        <span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;max_threads&quot;</span> <span class="ow">and</span> <span class="n">v</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">transfer_config</span><span class="p">[</span><span class="s2">&quot;max_threads&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">cause</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Invalid transfer.max_threads config setting </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span> <span class="kn">from</span> <span class="nn">cause</span>

                <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;use_boto_sts&quot;</span><span class="p">:</span>
                    <span class="n">lower_v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">lower_v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Invalid transfer.use_boto_sts config setting </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

                    <span class="n">transfer_config</span><span class="p">[</span><span class="s2">&quot;use_boto_sts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span> <span class="o">==</span> <span class="n">lower_v</span>

        <span class="k">return</span> <span class="n">transfer_config</span>

    <span class="k">def</span> <span class="nf">_is_logged_in</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test whether the user is logged in to Synapse.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Boolean value indicating current user&#39;s login status</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># This is a quick sanity check to see if credentials have been</span>
        <span class="c1"># configured on the client</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># The public can query this command so there is no need to try catch.</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/userProfile&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;userName&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;anonymous&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes authentication information from the Synapse client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.0.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;deprecated with no replacement. The client does not support API keys for &quot;</span>
        <span class="s2">&quot;authentication. Please use a personal access token instead. This method will &quot;</span>
        <span class="s2">&quot;be removed in a future release.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">invalidateAPIKey</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Deprecated with no replacement.** The client does not support API keys for</span>
<span class="sd">        authentication. Please use a</span>
<span class="sd">        [personal access token](https://python-docs.synapse.org/tutorials/authentication/)</span>
<span class="sd">        instead. This method will be removed in a future release.</span>


<span class="sd">        Invalidates authentication across all clients.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Logout globally</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="s2">&quot;/secretKey&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authEndpoint</span><span class="p">)</span>

    <span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_user_profile_by_username</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sessionToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserProfile</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the details about a Synapse user.</span>
<span class="sd">        Retrieves information on the current user if &#39;id&#39; is omitted or is empty string.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            username:     The userName of a user</span>
<span class="sd">            sessionToken: The session token to use to find the user profile</span>

<span class="sd">        Returns:</span>
<span class="sd">            The user profile for the user of interest.</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Getting your own profile</span>

<span class="sd">                my_profile = syn.get_user_profile_by_username()</span>

<span class="sd">            Getting another user&#39;s profile</span>

<span class="sd">                freds_profile = syn.get_user_profile_by_username(&#39;fredcommo&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_none</span> <span class="o">=</span> <span class="n">username</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="n">is_str</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_str</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_none</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;username must be string or None&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_str</span><span class="p">:</span>
            <span class="n">principals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findPrincipals</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">principal</span> <span class="ow">in</span> <span class="n">principals</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">principal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;userName&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">username</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="nb">id</span> <span class="o">=</span> <span class="n">principal</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find user &#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/userProfile/</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">UserProfile</span><span class="p">(</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
                <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sessionToken&quot;</span><span class="p">:</span> <span class="n">sessionToken</span><span class="p">}</span> <span class="k">if</span> <span class="n">sessionToken</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_user_profile_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sessionToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserProfile</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the details about a Synapse user.</span>
<span class="sd">        Retrieves information on the current user if &#39;id&#39; is omitted.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            id:           The ownerId of a user</span>
<span class="sd">            sessionToken: The session token to use to find the user profile</span>

<span class="sd">        Returns:</span>
<span class="sd">            The user profile for the user of interest.</span>


<span class="sd">        Example: Using this function</span>
<span class="sd">            Getting your own profile</span>

<span class="sd">                my_profile = syn.get_user_profile_by_id()</span>

<span class="sd">            Getting another user&#39;s profile</span>

<span class="sd">                freds_profile = syn.get_user_profile_by_id(1234567)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">id</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;id must be an &#39;ownerId&#39; integer&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/userProfile/</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">UserProfile</span><span class="p">(</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
                <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sessionToken&quot;</span><span class="p">:</span> <span class="n">sessionToken</span><span class="p">}</span> <span class="k">if</span> <span class="n">sessionToken</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">getUserProfile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">UserProfile</span><span class="p">,</span> <span class="n">TeamMember</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sessionToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserProfile</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the details about a Synapse user.</span>
<span class="sd">        Retrieves information on the current user if &#39;id&#39; is omitted.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            id:           The &#39;userId&#39; (aka &#39;ownerId&#39;) of a user or the userName</span>
<span class="sd">            sessionToken: The session token to use to find the user profile</span>

<span class="sd">        Returns:</span>
<span class="sd">            The user profile for the user of interest.</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Getting your own profile</span>

<span class="sd">                my_profile = syn.getUserProfile()</span>

<span class="sd">            Getting another user&#39;s profile</span>

<span class="sd">                freds_profile = syn.getUserProfile(&#39;fredcommo&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># if id is unset or a userID, this will succeed</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;ownerId&quot;</span> <span class="ow">in</span> <span class="nb">id</span><span class="p">:</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="o">.</span><span class="n">ownerId</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">TeamMember</span><span class="p">):</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="o">.</span><span class="n">member</span><span class="o">.</span><span class="n">ownerId</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">principals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findPrincipals</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">principals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="nb">id</span> <span class="o">=</span> <span class="n">principals</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">principal</span> <span class="ow">in</span> <span class="n">principals</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">principal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;userName&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="nb">id</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                            <span class="nb">id</span> <span class="o">=</span> <span class="n">principal</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
                            <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># no break</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t find user &quot;</span><span class="si">%s</span><span class="s1">&quot;: &#39;</span> <span class="o">%</span> <span class="nb">id</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/userProfile/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">id</span>
        <span class="k">return</span> <span class="n">UserProfile</span><span class="p">(</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
                <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sessionToken&quot;</span><span class="p">:</span> <span class="n">sessionToken</span><span class="p">}</span> <span class="k">if</span> <span class="n">sessionToken</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_findPrincipals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">UserGroupHeader</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find users or groups by name or email.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of userGroupHeader objects with fields displayName, email, firstName, lastName, isIndividual, ownerId</span>


<span class="sd">        Example: Using this function</span>
<span class="sd">            Find userGroupHeader objects for test user</span>

<span class="sd">                syn._findPrincipals(&#39;test&#39;)</span>

<span class="sd">                [{u&#39;displayName&#39;: u&#39;Synapse Test&#39;,</span>
<span class="sd">                u&#39;email&#39;: u&#39;syn...t@sagebase.org&#39;,</span>
<span class="sd">                u&#39;firstName&#39;: u&#39;Synapse&#39;,</span>
<span class="sd">                u&#39;isIndividual&#39;: True,</span>
<span class="sd">                u&#39;lastName&#39;: u&#39;Test&#39;,</span>
<span class="sd">                u&#39;ownerId&#39;: u&#39;1560002&#39;},</span>
<span class="sd">                {u&#39;displayName&#39;: ... }]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/userGroupHeaders?prefix=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">urllib_urlparse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">query_string</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">UserGroupHeader</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_get_certified_passing_record</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the Passing Record on the User Certification test for the given user.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            userid: Synapse user Id</span>

<span class="sd">        Returns:</span>
<span class="sd">            Synapse Passing Record. A record of whether a given user passed a given test.</span>
<span class="sd">            &lt;https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/quiz/PassingRecord.html&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/user/</span><span class="si">{</span><span class="n">userid</span><span class="si">}</span><span class="s2">/certifiedUserPassingRecord&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">_get_user_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the user bundle for the given user.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            userid: Synapse user Id</span>
<span class="sd">            mask:   Bit field indicating which components to include in the bundle.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [Synapse User Bundle](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/UserBundle.html)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/user/</span><span class="si">{</span><span class="n">userid</span><span class="si">}</span><span class="s2">/bundle?mask=</span><span class="si">{</span><span class="n">mask</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">is_certified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determines whether a Synapse user is a certified user.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            user: Synapse username or Id</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the Synapse user is certified</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if userid or username exists</span>
        <span class="n">syn_user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="c1"># Get passing record</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">certification_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_certified_passing_record</span><span class="p">(</span>
                <span class="n">syn_user</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">certification_status</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="c1"># user hasn&#39;t taken the quiz</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">is_synapse_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">syn_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if given synID is valid (attached to actual entity?)</span>

<span class="sd">        Arguments:</span>
<span class="sd">            syn_id: A Synapse ID</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the Synapse ID is valid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">syn_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">syn_id</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">SynapseFileNotFoundError</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">except</span> <span class="p">(</span>
                <span class="n">SynapseHTTPError</span><span class="p">,</span>
                <span class="n">SynapseAuthenticationError</span><span class="p">,</span>
            <span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="n">status</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">err</span><span class="o">.</span><span class="n">__context__</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">or</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">404</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="c1"># Valid ID but user lacks permission or is not logged in</span>
                <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;synID must be a string&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">onweb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">subpageId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Opens up a browser window to the entity page or wiki-subpage.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:    Either an Entity or a Synapse ID</span>
<span class="sd">            subpageId: (Optional) ID of one of the wiki&#39;s sub-pages</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">synId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subpageId</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">#!Synapse:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">portalEndpoint</span><span class="p">,</span> <span class="n">synId</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">#!Wiki:</span><span class="si">%s</span><span class="s2">/ENTITY/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">portalEndpoint</span><span class="p">,</span> <span class="n">synId</span><span class="p">,</span> <span class="n">subpageId</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">printEntity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pretty prints an Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: The entity to be printed.</span>
<span class="sd">            ensure_ascii: If True, escapes all non-ASCII characters</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_synapse_id_str</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
            <span class="n">synid</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_synid_and_version</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntity</span><span class="p">(</span><span class="n">synid</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="n">ensure_ascii</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_print_transfer_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checking synapse if the mode is silent mode.</span>
<span class="sd">        If self.silent is True, no need to print out transfer progress.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">silent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">cumulative_transfer_progress</span><span class="o">.</span><span class="n">printTransferProgress</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                      Service methods                     #</span>
    <span class="c1">############################################################</span>

    <span class="n">_services</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;json_schema&quot;</span><span class="p">:</span> <span class="s2">&quot;JsonSchemaService&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_available_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get available Synapse services</span>
<span class="sd">        This is a beta feature and is subject to change</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of available services</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">services</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_services</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">services</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get available Synapse services</span>
<span class="sd">        This is a beta feature and is subject to change</span>

<span class="sd">        Arguments:</span>
<span class="sd">            service_name: name of the service</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># This is to avoid circular imports</span>
        <span class="c1"># TODO: revisit the import order and method https://stackoverflow.com/a/37126790</span>
        <span class="c1"># To move this to the top</span>
        <span class="kn">import</span> <span class="nn">synapseclient.services</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">service_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">service_name</span> <span class="o">=</span> <span class="n">service_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">service_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_services</span><span class="p">,</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unrecognized service (</span><span class="si">{</span><span class="n">service_name</span><span class="si">}</span><span class="s2">). Run the &#39;get_available_&quot;</span>
            <span class="s2">&quot;services()&#39; method to get a list of available services.&quot;</span>
        <span class="p">)</span>
        <span class="n">service_attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_services</span><span class="p">[</span><span class="n">service_name</span><span class="p">]</span>
        <span class="n">service_cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">synapseclient</span><span class="o">.</span><span class="n">services</span><span class="p">,</span> <span class="n">service_attr</span><span class="p">)</span>
        <span class="n">service</span> <span class="o">=</span> <span class="n">service_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">service</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                   Get / Store methods                    #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets a Synapse entity from the repository service.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:           A Synapse ID (e.g. syn123 or syn123.1, with .1 denoting version), a Synapse Entity object,</span>
<span class="sd">                              a plain dictionary in which &#39;id&#39; maps to a Synapse ID or a local file that is stored in</span>
<span class="sd">                              Synapse (found by the file MD5)</span>
<span class="sd">            version:          The specific version to get.</span>
<span class="sd">                                Defaults to the most recent version. If not denoted in the entity input.</span>
<span class="sd">            downloadFile:     Whether associated files(s) should be downloaded.</span>
<span class="sd">                                Defaults to True.</span>
<span class="sd">            downloadLocation: Directory where to download the Synapse File Entity.</span>
<span class="sd">                                Defaults to the local cache.</span>
<span class="sd">            followLink:       Whether the link returns the target Entity.</span>
<span class="sd">                                Defaults to False.</span>
<span class="sd">            ifcollision:      Determines how to handle file collisions.</span>
<span class="sd">                                May be &quot;overwrite.local&quot;, &quot;keep.local&quot;, or &quot;keep.both&quot;.</span>
<span class="sd">                                Defaults to &quot;keep.both&quot;.</span>
<span class="sd">            limitSearch:      A Synanpse ID used to limit the search in Synapse if entity is specified as a local</span>
<span class="sd">                                file.  That is, if the file is stored in multiple locations in Synapse only the ones</span>
<span class="sd">                                in the specified folder/project will be returned.</span>
<span class="sd">            md5: The MD5 checksum for the file, if known. Otherwise if the file is a</span>
<span class="sd">                local file, it will be calculated automatically.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new Synapse Entity object of the appropriate type.</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Download file into cache</span>

<span class="sd">                entity = syn.get(&#39;syn1906479&#39;)</span>
<span class="sd">                print(entity.name)</span>
<span class="sd">                print(entity.path)</span>

<span class="sd">            Download file into current working directory</span>

<span class="sd">                entity = syn.get(&#39;syn1906479&#39;, downloadLocation=&#39;.&#39;)</span>
<span class="sd">                print(entity.name)</span>
<span class="sd">                print(entity.path)</span>

<span class="sd">            Determine the provenance of a locally stored file as indicated in Synapse</span>

<span class="sd">                entity = syn.get(&#39;/path/to/file.txt&#39;, limitSearch=&#39;syn12312&#39;)</span>
<span class="sd">                print(syn.getProvenance(entity))</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If entity is a local file determine the corresponding synapse entity</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getFromFile</span><span class="p">(</span>
                <span class="n">entity</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;limitSearch&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">md5</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;md5&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;downloadFile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_synapse_id_str</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SynapseFileNotFoundError</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="s2">&quot;The parameter </span><span class="si">%s</span><span class="s2"> is neither a local file path &quot;</span>
                    <span class="s2">&quot; or a valid entity id&quot;</span> <span class="o">%</span> <span class="n">entity</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># have not been saved entities</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">Entity</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot retrieve entity that has not been saved.&quot;</span>
                <span class="s2">&quot; Please use syn.store() to save your entity and try again.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_version</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">synid_and_version</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_synid_and_version</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="n">version</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">input_version</span> <span class="k">if</span> <span class="n">input_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">synid_and_version</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="c1"># If ``version`` is None, the arg will be ignored</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span><span class="n">synid_and_version</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">version</span><span class="p">)</span>

        <span class="c1"># Check and warn for unmet access requirements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_entity_restrictions</span><span class="p">(</span>
            <span class="n">bundle</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;downloadFile&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">return_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getWithEntityBundle</span><span class="p">(</span>
            <span class="n">entityBundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">return_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;synapse.concrete_type&quot;</span><span class="p">:</span> <span class="n">return_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;concreteType&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">return_data</span>

    <span class="k">def</span> <span class="nf">_check_entity_restrictions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">downloadFile</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check and warn for unmet access requirements.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            bundle: A Synapse entityBundle</span>
<span class="sd">            entity: A Synapse ID, a Synapse Entity object, a plain dictionary in which &#39;id&#39; maps to a</span>
<span class="sd">                    Synapse ID or a local file that is stored in Synapse (found by the file MD5)</span>
<span class="sd">            downloadFile: Whether associated files(s) should be downloaded.</span>

<span class="sd">        Raises:</span>
<span class="sd">            SynapseUnmetAccessRestrictions: Warning for unmet access requirements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">restrictionInformation</span> <span class="o">=</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;restrictionInformation&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">restrictionInformation</span><span class="p">[</span><span class="s2">&quot;hasUnmetAccessRequirement&quot;</span><span class="p">]:</span>
            <span class="n">warning_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">This entity has access restrictions. Please visit the web page for this entity &quot;</span>
                <span class="sa">f</span><span class="s1">&#39;(syn.onweb(&quot;</span><span class="si">{</span><span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span><span class="si">}</span><span class="s1">&quot;)). Look for the &quot;Access&quot; label and the lock icon underneath &#39;</span>
                <span class="s1">&#39;the file name. Click &quot;Request Access&quot;, and then review and fulfill the file &#39;</span>
                <span class="s2">&quot;download requirement(s).</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">downloadFile</span> <span class="ow">and</span> <span class="n">bundle</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityType&quot;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;project&quot;</span><span class="p">,</span> <span class="s2">&quot;folder&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">SynapseUnmetAccessRestrictions</span><span class="p">(</span><span class="n">warning_message</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">warning_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getFromFile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limitSearch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">md5</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets a Synapse entityBundle based on the md5 of a local file.</span>
<span class="sd">        See [get][synapseclient.Synapse.get].</span>

<span class="sd">        Arguments:</span>
<span class="sd">            filepath:    The path to local file</span>
<span class="sd">            limitSearch: Limits the places in Synapse where the file is searched for.</span>
<span class="sd">            md5: The MD5 checksum for the file, if known. Otherwise if the file is a</span>
<span class="sd">                local file, it will be calculated automatically.</span>


<span class="sd">        Raises:</span>
<span class="sd">            SynapseFileNotFoundError: If the file is not in Synapse.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Synapse entityBundle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="s2">&quot;/entity/md5/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">md5</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">())</span>
        <span class="p">)[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">limitSearch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Go through and find the path of every entity found</span>
            <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/path&quot;</span> <span class="o">%</span> <span class="n">ent</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
            <span class="c1"># Filter out all entities whose path does not contain limitSearch</span>
            <span class="n">results</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ent</span>
                <span class="k">for</span> <span class="n">ent</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">paths</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_in_path</span><span class="p">(</span><span class="n">limitSearch</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># None found</span>
            <span class="k">raise</span> <span class="n">SynapseFileNotFoundError</span><span class="p">(</span><span class="s2">&quot;File </span><span class="si">%s</span><span class="s2"> not found in Synapse&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filepath</span><span class="p">,))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">id_txts</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The file </span><span class="si">%s</span><span class="s2"> is associated with many files in Synapse:</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;You can limit to files in specific project or folder by setting the limitSearch to the&quot;</span>
                <span class="s2">&quot; synapse Id of the project or folder.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;Will use the first one returned: </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> version </span><span class="si">%i</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">id_txts</span><span class="p">,</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">entity</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">],</span> <span class="n">filepath</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bundle</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">new_parent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move a Synapse entity to a new container.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:     A Synapse ID, a Synapse Entity object, or a local file that is stored in Synapse</span>
<span class="sd">            new_parent: The new parent container (Folder or Project) to which the entity should be moved.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Synapse Entity object that has been moved.</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Move a Synapse Entity object to a new parent container</span>

<span class="sd">                entity = syn.move(&#39;syn456&#39;, &#39;syn123&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">parentId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">new_parent</span><span class="p">)</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">forceVersion</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;synapse.parent_id&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parentId&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">entity</span>

    <span class="k">def</span> <span class="nf">_getWithEntityBundle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entityBundle</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Entity</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Entity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a [Entity][synapseclient.Entity] from an entity bundle returned by Synapse.</span>
<span class="sd">        An existing Entity can be supplied in case we want to refresh a stale Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entityBundle: Uses the given dictionary as the meta information of the Entity to get</span>
<span class="sd">            entity:       Optional, entity whose local state will be copied into the returned entity</span>
<span class="sd">            submission:   Optional, access associated files through a submission rather than through an entity.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new Synapse Entity</span>

<span class="sd">        Also see:</span>
<span class="sd">        - See [get][synapseclient.Synapse.get].</span>
<span class="sd">        - See [_getEntityBundle][synapseclient.Synapse._getEntityBundle].</span>
<span class="sd">        - See [Entity][synapseclient.Entity].</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Note: This version overrides the version of &#39;entity&#39; (if the object is Mappable)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">downloadFile</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;downloadFile&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">downloadLocation</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;downloadLocation&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">ifcollision</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;ifcollision&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">submission</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;submission&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">followLink</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;followLink&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># If Link, get target ID entity bundle</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">entityBundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>
            <span class="o">==</span> <span class="s2">&quot;org.sagebionetworks.repo.model.Link&quot;</span>
            <span class="ow">and</span> <span class="n">followLink</span>
        <span class="p">):</span>
            <span class="n">targetId</span> <span class="o">=</span> <span class="n">entityBundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;linksTo&quot;</span><span class="p">][</span><span class="s2">&quot;targetId&quot;</span><span class="p">]</span>
            <span class="n">targetVersion</span> <span class="o">=</span> <span class="n">entityBundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;linksTo&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targetVersionNumber&quot;</span><span class="p">)</span>
            <span class="n">entityBundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span><span class="n">targetId</span><span class="p">,</span> <span class="n">targetVersion</span><span class="p">)</span>

        <span class="c1"># TODO is it an error to specify both downloadFile=False and downloadLocation?</span>
        <span class="c1"># TODO this matters if we want to return already cached files when downloadFile=False</span>

        <span class="c1"># Make a fresh copy of the Entity</span>
        <span class="n">local_state</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">local_state</span><span class="p">()</span> <span class="k">if</span> <span class="n">entity</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">Entity</span><span class="p">)</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="n">entityBundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">]</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="n">from_synapse_annotations</span><span class="p">(</span><span class="n">entityBundle</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">])</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">local_state</span><span class="p">)</span>

        <span class="c1"># Handle download of fileEntities</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">File</span><span class="p">):</span>
            <span class="c1"># update the entity with FileHandle metadata</span>
            <span class="n">file_handle</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">handle</span>
                    <span class="k">for</span> <span class="n">handle</span> <span class="ow">in</span> <span class="n">entityBundle</span><span class="p">[</span><span class="s2">&quot;fileHandles&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">handle</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entity</span><span class="o">.</span><span class="n">dataFileHandleId</span>
                <span class="p">),</span>
                <span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">_update_file_handle</span><span class="p">(</span><span class="n">file_handle</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">downloadFile</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">file_handle</span><span class="p">:</span>
                    <span class="n">wrap_async_to_sync</span><span class="p">(</span>
                        <span class="n">coroutine</span><span class="o">=</span><span class="n">download_file_entity</span><span class="p">(</span>
                            <span class="n">download_location</span><span class="o">=</span><span class="n">downloadLocation</span><span class="p">,</span>
                            <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
                            <span class="n">if_collision</span><span class="o">=</span><span class="n">ifcollision</span><span class="p">,</span>
                            <span class="n">submission</span><span class="o">=</span><span class="n">submission</span><span class="p">,</span>
                            <span class="n">synapse_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># no filehandle means that we do not have DOWNLOAD permission</span>
                    <span class="n">warning_message</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;WARNING: You have READ permission on this file entity but not DOWNLOAD &quot;</span>
                        <span class="s2">&quot;permission. The file has NOT been downloaded.&quot;</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="s2">&quot;!&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">warning_message</span><span class="p">)</span>
                        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="n">warning_message</span>
                        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="s2">&quot;!&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">warning_message</span><span class="p">)</span>
                        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
        <span class="k">return</span> <span class="n">entity</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::ensure_download_location_is_directory&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_ensure_download_location_is_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the download location is a directory</span>

<span class="sd">        Arguments:</span>
<span class="sd">            downloadLocation: The download location</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the downloadLocation is not a directory</span>

<span class="sd">        Returns:</span>
<span class="sd">            The download location</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">download_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">downloadLocation</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">download_dir</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Parameter &#39;downloadLocation&#39; should be a directory, not a file.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">download_dir</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::download_file_entity&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_download_file_entity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">downloadLocation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">Entity</span><span class="p">,</span>
        <span class="n">ifcollision</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">submission</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Download file entity</span>

<span class="sd">        Arguments:</span>
<span class="sd">            downloadLocation: The download location</span>
<span class="sd">            entity:           The Synapse Entity object</span>
<span class="sd">            ifcollision:      Determines how to handle file collisions.</span>
<span class="sd">                              May be</span>

<span class="sd">                - `overwrite.local`</span>
<span class="sd">                - `keep.local`</span>
<span class="sd">                - `keep.both`</span>

<span class="sd">            submission:       Access associated files through a submission rather than through an entity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set the initial local state</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">cacheDir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># check to see if an UNMODIFIED version of the file (since it was last downloaded) already exists</span>
        <span class="c1"># this location could be either in .synapseCache or a user specified location to which the user previously</span>
        <span class="c1"># downloaded the file</span>
        <span class="n">cached_file_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">dataFileHandleId</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="p">)</span>

        <span class="c1"># location in .synapseCache where the file would be corresponding to its FileHandleId</span>
        <span class="n">synapseCache_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get_cache_dir</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">dataFileHandleId</span><span class="p">)</span>

        <span class="n">file_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">_file_handle</span><span class="o">.</span><span class="n">fileName</span>
            <span class="k">if</span> <span class="n">cached_file_path</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">cached_file_path</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Decide the best download location for the file</span>
        <span class="k">if</span> <span class="n">downloadLocation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Make sure the specified download location is a fully resolved directory</span>
            <span class="n">downloadLocation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_download_location_is_directory</span><span class="p">(</span>
                <span class="n">downloadLocation</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">cached_file_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># file already cached so use that as the download location</span>
            <span class="n">downloadLocation</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">cached_file_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># file not cached and no user-specified location so default to .synapseCache</span>
            <span class="n">downloadLocation</span> <span class="o">=</span> <span class="n">synapseCache_location</span>

        <span class="c1"># resolve file path collisions by either overwriting, renaming, or not downloading, depending on the</span>
        <span class="c1"># ifcollision value</span>
        <span class="n">downloadPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_download_path_collisions</span><span class="p">(</span>
            <span class="n">downloadLocation</span><span class="p">,</span>
            <span class="n">file_name</span><span class="p">,</span>
            <span class="n">ifcollision</span><span class="p">,</span>
            <span class="n">synapseCache_location</span><span class="p">,</span>
            <span class="n">cached_file_path</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">downloadPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">cached_file_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># copy from cache</span>
            <span class="k">if</span> <span class="n">downloadPath</span> <span class="o">!=</span> <span class="n">cached_file_path</span><span class="p">:</span>
                <span class="c1"># create the foider if it does not exist already</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">downloadLocation</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">downloadLocation</span><span class="p">)</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cached_file_path</span><span class="p">,</span> <span class="n">downloadPath</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># download the file from URL (could be a local file)</span>
            <span class="n">objectType</span> <span class="o">=</span> <span class="s2">&quot;FileEntity&quot;</span> <span class="k">if</span> <span class="n">submission</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;SubmissionAttachment&quot;</span>
            <span class="n">objectId</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">submission</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">submission</span>

            <span class="c1"># reassign downloadPath because if url points to local file (e.g. file://~/someLocalFile.txt)</span>
            <span class="c1"># it won&#39;t be &quot;downloaded&quot; and, instead, downloadPath will just point to &#39;~/someLocalFile.txt&#39;</span>
            <span class="c1"># _downloadFileHandle may also return None to indicate that the download failed</span>
            <span class="n">downloadPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_downloadFileHandle</span><span class="p">(</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">dataFileHandleId</span><span class="p">,</span> <span class="n">objectId</span><span class="p">,</span> <span class="n">objectType</span><span class="p">,</span> <span class="n">downloadPath</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">downloadPath</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">downloadPath</span><span class="p">):</span>
                <span class="k">return</span>

        <span class="c1"># converts the path format from forward slashes back to backward slashes on Windows</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">downloadPath</span><span class="p">)</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">downloadPath</span><span class="p">)]</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">cacheDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">downloadPath</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::resolve_download_path_collisions&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_resolve_download_path_collisions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">downloadLocation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">ifcollision</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">synapseCache_location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">cached_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resolve file path collisions</span>

<span class="sd">        Arguments:</span>
<span class="sd">            downloadLocation:      The download location</span>
<span class="sd">            file_name:             The file name</span>
<span class="sd">            ifcollision:           Determines how to handle file collisions.</span>
<span class="sd">                                   May be &quot;overwrite.local&quot;, &quot;keep.local&quot;, or &quot;keep.both&quot;.</span>
<span class="sd">            synapseCache_location: The location in .synapseCache where the file would be</span>
<span class="sd">                                   corresponding to its FileHandleId.</span>
<span class="sd">            cached_file_path:      The file path of the cached copy</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Invalid ifcollision. Should be &quot;overwrite.local&quot;, &quot;keep.local&quot;, or &quot;keep.both&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The download file path with collisions resolved</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># always overwrite if we are downloading to .synapseCache</span>
        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">normalize_path</span><span class="p">(</span><span class="n">downloadLocation</span><span class="p">)</span> <span class="o">==</span> <span class="n">synapseCache_location</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ifcollision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ifcollision</span> <span class="o">!=</span> <span class="s2">&quot;overwrite.local&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;!&quot;</span> <span class="o">*</span> <span class="mi">50</span>
                    <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ifcollision=</span><span class="si">{</span><span class="n">ifcollision</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;is being IGNORED because the download destination is synapse&#39;s cache.&quot;</span>
                    <span class="s1">&#39; Instead, the behavior is &quot;overwrite.local&quot;. </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;!&quot;</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">ifcollision</span> <span class="o">=</span> <span class="s2">&quot;overwrite.local&quot;</span>
        <span class="c1"># if ifcollision not specified, keep.local</span>
        <span class="n">ifcollision</span> <span class="o">=</span> <span class="n">ifcollision</span> <span class="ow">or</span> <span class="s2">&quot;keep.both&quot;</span>

        <span class="n">downloadPath</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">normalize_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">downloadLocation</span><span class="p">,</span> <span class="n">file_name</span><span class="p">))</span>
        <span class="c1"># resolve collison</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">downloadPath</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">ifcollision</span> <span class="o">==</span> <span class="s2">&quot;overwrite.local&quot;</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">ifcollision</span> <span class="o">==</span> <span class="s2">&quot;keep.local&quot;</span><span class="p">:</span>
                <span class="c1"># Don&#39;t want to overwrite the local file.</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">ifcollision</span> <span class="o">==</span> <span class="s2">&quot;keep.both&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">downloadPath</span> <span class="o">!=</span> <span class="n">cached_file_path</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">unique_filename</span><span class="p">(</span><span class="n">downloadPath</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Invalid parameter: &quot;</span><span class="si">%s</span><span class="s1">&quot; is not a valid value &#39;</span>
                    <span class="s1">&#39;for &quot;ifcollision&quot;&#39;</span> <span class="o">%</span> <span class="n">ifcollision</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">downloadPath</span>

    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">createOrUpdate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">forceVersion</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">versionLabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">isRestricted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">activity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">used</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">executed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">activityName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">activityDescription</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">set_annotations</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new Entity or updates an existing Entity, uploading any files in the process.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            obj: A Synapse Entity, Evaluation, or Wiki</span>
<span class="sd">            used: The Entity, Synapse ID, or URL used to create the object (can also be a list of these)</span>
<span class="sd">            executed: The Entity, Synapse ID, or URL representing code executed to create the object</span>
<span class="sd">                        (can also be a list of these)</span>
<span class="sd">            activity: Activity object specifying the user&#39;s provenance.</span>
<span class="sd">            activityName: Activity name to be used in conjunction with *used* and *executed*.</span>
<span class="sd">            activityDescription: Activity description to be used in conjunction with *used* and *executed*.</span>
<span class="sd">            createOrUpdate: Indicates whether the method should automatically perform an update if the &#39;obj&#39;</span>
<span class="sd">                            conflicts with an existing Synapse object.</span>
<span class="sd">            forceVersion: Indicates whether the method should increment the version of the object even if nothing</span>
<span class="sd">                            has changed.</span>
<span class="sd">            versionLabel: Arbitrary string used to label the version.</span>
<span class="sd">            isRestricted: If set to true, an email will be sent to the Synapse access control team to start the</span>
<span class="sd">                            process of adding terms-of-use or review board approval for this entity.</span>
<span class="sd">                            You will be contacted with regards to the specific data being restricted and the</span>
<span class="sd">                            requirements of access.</span>
<span class="sd">            set_annotations: If True, set the annotations on the entity. If False, do not set the annotations.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Synapse Entity, Evaluation, or Wiki</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Creating a new Project:</span>

<span class="sd">                from synapseclient import Project</span>

<span class="sd">                project = Project(&#39;My uniquely named project&#39;)</span>
<span class="sd">                project = syn.store(project)</span>

<span class="sd">            Adding files with [provenance (aka: Activity)][synapseclient.Activity]:</span>

<span class="sd">                from synapseclient import File, Activity</span>

<span class="sd">            A synapse entity *syn1906480* contains data and an entity *syn1917825* contains code</span>

<span class="sd">                activity = Activity(</span>
<span class="sd">                    &#39;Fancy Processing&#39;,</span>
<span class="sd">                    description=&#39;No seriously, really fancy processing&#39;,</span>
<span class="sd">                    used=[&#39;syn1906480&#39;, &#39;http://data_r_us.com/fancy/data.txt&#39;],</span>
<span class="sd">                    executed=&#39;syn1917825&#39;)</span>

<span class="sd">                test_entity = File(&#39;/path/to/data/file.xyz&#39;, description=&#39;Fancy new data&#39;, parent=project)</span>
<span class="sd">                test_entity = syn.store(test_entity, activity=activity)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;thread.id&quot;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">get_ident</span><span class="p">()})</span>
        <span class="c1"># SYNPY-1031: activity must be Activity object or code will fail later</span>
        <span class="k">if</span> <span class="n">activity</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="n">synapseclient</span><span class="o">.</span><span class="n">Activity</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;activity should be synapseclient.Activity object&quot;</span><span class="p">)</span>
        <span class="c1"># _before_store hook</span>
        <span class="c1"># give objects a chance to do something before being stored</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;_before_synapse_store&quot;</span><span class="p">):</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">_before_synapse_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># _synapse_store hook</span>
        <span class="c1"># for objects that know how to store themselves</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;_synapse_store&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">_synapse_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Handle all non-Entity objects</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Entity</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Wiki</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storeWiki</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">createOrUpdate</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>  <span class="c1"># If ID is present, update</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
                <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">putURI</span><span class="p">(),</span> <span class="n">obj</span><span class="o">.</span><span class="n">json</span><span class="p">()))</span>

            <span class="k">try</span><span class="p">:</span>  <span class="c1"># If no ID is present, attempt to POST the object</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">})</span>
                <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">postURI</span><span class="p">(),</span> <span class="n">obj</span><span class="o">.</span><span class="n">json</span><span class="p">()))</span>

            <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="c1"># If already present and we want to update attempt to get the object content</span>
                <span class="k">if</span> <span class="n">createOrUpdate</span> <span class="ow">and</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">409</span><span class="p">:</span>
                    <span class="n">newObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getByNameURI</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
                    <span class="n">newObj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)(</span><span class="o">**</span><span class="n">newObj</span><span class="p">)</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">putURI</span><span class="p">(),</span> <span class="n">obj</span><span class="o">.</span><span class="n">json</span><span class="p">()))</span>
                    <span class="k">return</span> <span class="n">obj</span>
                <span class="k">raise</span>

        <span class="c1"># If the input object is an Entity or a dictionary</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="n">properties</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">local_state</span> <span class="o">=</span> <span class="n">split_entity_namespaces</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Explicitly set an empty versionComment property if none is supplied,</span>
        <span class="c1"># otherwise an existing entity bundle&#39;s versionComment will be copied to the update.</span>
        <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;versionComment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;versionComment&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;versionComment&quot;</span> <span class="ow">in</span> <span class="n">properties</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="c1"># Anything with a path is treated as a cache-able item</span>
        <span class="c1"># Only Files are expected in the following logic</span>
        <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Folder</span><span class="p">):</span>
            <span class="n">local_file_md5_hex</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="s2">&quot;concreteType&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">File</span><span class="o">.</span><span class="n">_synapse_entity_type</span>
            <span class="c1"># Make sure the path is fully resolved</span>
            <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>

            <span class="c1"># Check if the File already exists in Synapse by fetching metadata on it</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">bundle</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">createOrUpdate</span><span class="p">:</span>
                    <span class="c1"># update our properties from the existing bundle so that we have</span>
                    <span class="c1"># enough to process this as an entity update.</span>
                    <span class="n">properties</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">properties</span><span class="p">}</span>

                <span class="c1"># Check if the file should be uploaded</span>
                <span class="n">fileHandle</span> <span class="o">=</span> <span class="n">find_data_file_handle</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">fileHandle</span>
                    <span class="ow">and</span> <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>
                    <span class="o">==</span> <span class="s2">&quot;org.sagebionetworks.repo.model.file.ExternalFileHandle&quot;</span>
                <span class="p">):</span>
                    <span class="c1"># switching away from ExternalFileHandle or the url was updated</span>
                    <span class="n">needs_upload</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;synapseStore&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;externalURL&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;externalURL&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">synapse_store_flag</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;synapseStore&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="s2">&quot;synapseStore&quot;</span>
                    <span class="p">)</span>
                    <span class="c1"># Check if we need to upload a new version of an existing</span>
                    <span class="c1"># file. If the file referred to by entity[&#39;path&#39;] has been</span>
                    <span class="c1"># modified, we want to upload the new version.</span>
                    <span class="c1"># If synapeStore is false then we must upload a ExternalFileHandle</span>
                    <span class="n">needs_upload</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">synapse_store_flag</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span>
                        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">],</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
                    <span class="p">)</span>

                    <span class="n">md5_stored_in_synapse</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="s2">&quot;contentMd5&quot;</span><span class="p">,</span> <span class="kc">None</span>
                    <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">fileHandle</span> <span class="ow">or</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

                    <span class="c1"># Check if we got an MD5 checksum from Synapse and compare it to the local file</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">synapse_store_flag</span>
                        <span class="ow">and</span> <span class="n">needs_upload</span>
                        <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>
                        <span class="ow">and</span> <span class="n">md5_stored_in_synapse</span>
                        <span class="ow">and</span> <span class="n">md5_stored_in_synapse</span>
                        <span class="o">==</span> <span class="p">(</span>
                            <span class="n">local_file_md5_hex</span> <span class="o">:=</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span>
                                <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
                            <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
                        <span class="p">)</span>
                    <span class="p">):</span>
                        <span class="n">needs_upload</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">needs_upload</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">needs_upload</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="n">needs_upload</span><span class="p">:</span>
                <span class="n">local_state_fh</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="n">synapseStore</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;synapseStore&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

                <span class="c1"># parent_id_for_upload is allowing `store` to be called on files that have</span>
                <span class="c1"># already been stored to Synapse, but did not specify a parentId in the</span>
                <span class="c1"># FileEntity. This is useful as it prevents the need to specify the</span>
                <span class="c1"># parentId every time a file is stored to Synapse when the ID is</span>
                <span class="c1"># already known.</span>
                <span class="n">parent_id_for_upload</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parentId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">parent_id_for_upload</span> <span class="ow">and</span> <span class="n">bundle</span> <span class="ow">and</span> <span class="n">bundle</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entity&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="n">parent_id_for_upload</span> <span class="o">=</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;parentId&quot;</span><span class="p">]</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">parent_id_for_upload</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SynapseMalformedEntityError</span><span class="p">(</span>
                        <span class="s2">&quot;Entities of type File must have a parentId.&quot;</span>
                    <span class="p">)</span>

                <span class="n">fileHandle</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
                    <span class="n">upload_file_handle_async</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span>
                        <span class="n">parent_id_for_upload</span><span class="p">,</span>
                        <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">synapseStore</span> <span class="ow">or</span> <span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;externalURL&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
                        <span class="k">else</span> <span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;externalURL&quot;</span><span class="p">),</span>
                        <span class="n">synapse_store</span><span class="o">=</span><span class="n">synapseStore</span><span class="p">,</span>
                        <span class="n">md5</span><span class="o">=</span><span class="n">local_file_md5_hex</span> <span class="ow">or</span> <span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">),</span>
                        <span class="n">file_size</span><span class="o">=</span><span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentSize&quot;</span><span class="p">),</span>
                        <span class="n">mimetype</span><span class="o">=</span><span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentType&quot;</span><span class="p">),</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileHandle</span>

            <span class="k">elif</span> <span class="s2">&quot;dataFileHandleId&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
                <span class="c1"># Handle the case where the Entity lacks an ID</span>
                <span class="c1"># But becomes an update() due to conflict</span>
                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span>

            <span class="c1"># update the file_handle metadata if the FileEntity&#39;s FileHandle id has changed</span>
            <span class="n">local_state_fh_id</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">local_state_fh_id</span>
                <span class="ow">and</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">local_state_fh_id</span>
            <span class="p">):</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_data_file_handle</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span>
                        <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
                        <span class="n">requestedObjects</span><span class="o">=</span><span class="p">{</span>
                            <span class="s2">&quot;includeEntity&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;includeFileHandles&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">)</span>
                <span class="p">)</span>

                <span class="c1"># check if we already have the filehandleid cached somewhere</span>
                <span class="n">cached_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">cached_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;cacheDir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;files&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cached_path</span>
                    <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;cacheDir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">cached_path</span><span class="p">)</span>
                    <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;files&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">cached_path</span><span class="p">)]</span>

        <span class="c1"># Create or update Entity in Synapse</span>
        <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
            <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_updateEntity</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">forceVersion</span><span class="p">,</span> <span class="n">versionLabel</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If Link, get the target name, version number and concrete type and store in link properties</span>
            <span class="k">if</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;org.sagebionetworks.repo.model.Link&quot;</span><span class="p">:</span>
                <span class="n">target_properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntity</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">][</span><span class="s2">&quot;targetId&quot;</span><span class="p">],</span>
                    <span class="n">version</span><span class="o">=</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targetVersionNumber&quot;</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">target_properties</span><span class="p">[</span><span class="s2">&quot;parentId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;parentId&quot;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;Cannot create a Link to an entity under the same parent.&quot;</span>
                    <span class="p">)</span>
                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksToClassName&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_properties</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">target_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targetVersionNumber&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">):</span>
                    <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">][</span><span class="s2">&quot;targetVersionNumber&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_properties</span><span class="p">[</span>
                        <span class="s2">&quot;versionNumber&quot;</span>
                    <span class="p">]</span>
                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_createEntity</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">createOrUpdate</span> <span class="ow">and</span> <span class="n">ex</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">409</span><span class="p">:</span>
                    <span class="c1"># Get the existing Entity&#39;s ID via the name and parent</span>
                    <span class="n">existing_entity_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findEntityId</span><span class="p">(</span>
                        <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parentId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">existing_entity_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">raise</span>

                    <span class="c1"># get existing properties and annotations</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">bundle</span><span class="p">:</span>
                        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span>
                            <span class="n">existing_entity_id</span><span class="p">,</span>
                            <span class="n">requestedObjects</span><span class="o">=</span><span class="p">{</span>
                                <span class="s2">&quot;includeEntity&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                                <span class="s2">&quot;includeAnnotations&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="p">},</span>
                        <span class="p">)</span>

                    <span class="n">properties</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">properties</span><span class="p">}</span>

                    <span class="c1"># we additionally merge the annotations under the assumption that a missing annotation</span>
                    <span class="c1"># from a resolved conflict represents an newer annotation that should be preserved</span>
                    <span class="c1"># rather than an intentionally deleted annotation.</span>
                    <span class="n">annotations</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="o">**</span><span class="n">from_synapse_annotations</span><span class="p">(</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]),</span>
                        <span class="o">**</span><span class="n">annotations</span><span class="p">,</span>
                    <span class="p">}</span>

                    <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_updateEntity</span><span class="p">(</span>
                        <span class="n">properties</span><span class="p">,</span> <span class="n">forceVersion</span><span class="p">,</span> <span class="n">versionLabel</span>
                    <span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>

        <span class="c1"># Deal with access restrictions</span>
        <span class="k">if</span> <span class="n">isRestricted</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_createAccessRequirementIfNone</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>

        <span class="c1"># Update annotations</span>
        <span class="k">if</span> <span class="n">set_annotations</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="p">(</span><span class="ow">not</span> <span class="n">bundle</span> <span class="ow">and</span> <span class="n">annotations</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span>
                <span class="n">bundle</span> <span class="ow">and</span> <span class="n">check_annotations_changed</span><span class="p">(</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">],</span> <span class="n">annotations</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">):</span>
            <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_annotations</span><span class="p">(</span>
                <span class="n">Annotations</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">],</span> <span class="n">annotations</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="n">etag</span>

        <span class="c1"># If the parameters &#39;used&#39; or &#39;executed&#39; are given, create an Activity object</span>
        <span class="k">if</span> <span class="n">used</span> <span class="ow">or</span> <span class="n">executed</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">activity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SynapseProvenanceError</span><span class="p">(</span>
                    <span class="s2">&quot;Provenance can be specified as an Activity object or as used/executed&quot;</span>
                    <span class="s2">&quot; item(s), but not both.&quot;</span>
                <span class="p">)</span>
            <span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">activityName</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="n">activityDescription</span><span class="p">,</span>
                <span class="n">used</span><span class="o">=</span><span class="n">used</span><span class="p">,</span>
                <span class="n">executed</span><span class="o">=</span><span class="n">executed</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># If we have an Activity, set it as the Entity&#39;s provenance record</span>
        <span class="k">if</span> <span class="n">activity</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setProvenance</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">activity</span><span class="p">)</span>

            <span class="c1"># &#39;etag&#39; has changed, so get the new Entity</span>
            <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntity</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>

        <span class="c1"># Return the updated Entity object</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">local_state</span><span class="p">)</span>
        <span class="n">return_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">return_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;synapse.concrete_type&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;concreteType&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">return_data</span>

    <span class="k">def</span> <span class="nf">_createAccessRequirementIfNone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks to see if the given entity has access requirements. If not, then one is added</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: A Synapse ID or a Synapse Entity object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">existingRestrictions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/accessRequirement?offset=0&amp;limit=1&quot;</span> <span class="o">%</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">existingRestrictions</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/lockAccessRequirement&quot;</span> <span class="o">%</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getEntityBundle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">requestedObjects</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets some information about the Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:           A Synapse Entity or Synapse ID</span>
<span class="sd">            version:          The entity&#39;s version. Defaults to None meaning most recent version.</span>
<span class="sd">            requestedObjects: A dictionary indicating settings for what to include.</span>

<span class="sd">        Default value for requestedObjects is:</span>

<span class="sd">            requestedObjects = {&#39;includeEntity&#39;: True,</span>
<span class="sd">                                &#39;includeAnnotations&#39;: True,</span>
<span class="sd">                                &#39;includeFileHandles&#39;: True,</span>
<span class="sd">                                &#39;includeRestrictionInformation&#39;: True}</span>

<span class="sd">        Keys available for requestedObjects:</span>

<span class="sd">            includeEntity</span>
<span class="sd">            includeAnnotations</span>
<span class="sd">            includePermissions</span>
<span class="sd">            includeEntityPath</span>
<span class="sd">            includeHasChildren</span>
<span class="sd">            includeAccessControlList</span>
<span class="sd">            includeFileHandles</span>
<span class="sd">            includeTableBundle</span>
<span class="sd">            includeRootWikiId</span>
<span class="sd">            includeBenefactorACL</span>
<span class="sd">            includeDOIAssociation</span>
<span class="sd">            includeFileName</span>
<span class="sd">            includeThreadCount</span>
<span class="sd">            includeRestrictionInformation</span>


<span class="sd">        Keys with values set to False may simply be omitted.</span>
<span class="sd">        For example, we might ask for an entity bundle containing file handles, annotations, and properties:</span>
<span class="sd">            requested_objects = {&#39;includeEntity&#39;:True</span>
<span class="sd">                                 &#39;includeAnnotations&#39;:True,</span>
<span class="sd">                                 &#39;includeFileHandles&#39;:True}</span>
<span class="sd">            bundle = syn._getEntityBundle(&#39;syn111111&#39;, )</span>

<span class="sd">        Returns:</span>
<span class="sd">            An EntityBundle with the requested fields or by default Entity header, annotations, unmet access</span>
<span class="sd">            requirements, and file handles</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If &#39;entity&#39; is given without an ID, try to find it by &#39;parentId&#39; and &#39;name&#39;.</span>
        <span class="c1"># Use case:</span>
        <span class="c1">#     If the user forgets to catch the return value of a syn.store(e)</span>
        <span class="c1">#     this allows them to recover by doing: e = syn.get(e)</span>
        <span class="k">if</span> <span class="n">requestedObjects</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">requestedObjects</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;includeEntity&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;includeAnnotations&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;includeFileHandles&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;includeRestrictionInformation&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">)</span>
            <span class="ow">and</span> <span class="s2">&quot;id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity</span>
            <span class="ow">and</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">entity</span>
        <span class="p">):</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findEntityId</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parentId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

        <span class="c1"># Avoid an exception from finding an ID from a NoneType</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span><span class="si">}</span><span class="s2">/version/</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">version</span><span class="p">)</span><span class="si">:</span><span class="s2">d</span><span class="si">}</span><span class="s2">/bundle2&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span><span class="si">}</span><span class="s2">/bundle2&quot;</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">requestedObjects</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">bundle</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes an object from Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            obj: An existing object stored on Synapse such as Evaluation, File, Project, or Wiki</span>
<span class="sd">            version: For entities, specify a particular version to delete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Handle all strings as the Entity ID for backward compatibility</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>
            <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/version/</span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;_synapse_delete&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">_synapse_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Versionable</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">deleteURI</span><span class="p">(</span><span class="n">versionNumber</span><span class="o">=</span><span class="n">version</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">deleteURI</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t delete a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s2">. Please specify a Synapse object or id&quot;</span>
                <span class="p">)</span>

    <span class="n">_user_name_cache</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">_get_user_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get username with ownerId</span>

<span class="sd">        Arguments:</span>
<span class="sd">            user_id: The ownerId of a user</span>

<span class="sd">        Returns:</span>
<span class="sd">            A username</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">user_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_name_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user_name_cache</span><span class="p">[</span><span class="n">user_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_user_name</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_name_cache</span><span class="p">[</span><span class="n">user_id</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_list</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">long_format</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">show_modified</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">indent</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">out</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List child objects of the given parent, recursively if requested.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            parent:        A Synapse ID for folder or project that you want to list child objects for</span>
<span class="sd">            recursive:     Whether to show subfolder</span>
<span class="sd">            long_format:   Whether to show createdOn, createdBy and version</span>
<span class="sd">            show_modified: Whether to show modifiedOn and modifiedBy</span>
<span class="sd">            indent:        The left padding of the file tree structure</span>
<span class="sd">            out:           The location to write the output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;nodeType&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">long_format</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;createdByPrincipalId&quot;</span><span class="p">,</span> <span class="s2">&quot;createdOn&quot;</span><span class="p">,</span> <span class="s2">&quot;versionNumber&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">show_modified</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;modifiedByPrincipalId&quot;</span><span class="p">,</span> <span class="s2">&quot;modifiedOn&quot;</span><span class="p">])</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChildren</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="n">results_found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="n">results_found</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="n">fmt_fields</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
                <span class="s2">&quot;padding&quot;</span><span class="p">:</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent</span><span class="p">,</span>
                <span class="s2">&quot;slash_or_not&quot;</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span> <span class="k">if</span> <span class="n">is_container</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">fmt_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{id}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">long_format</span><span class="p">:</span>
                <span class="n">fmt_fields</span><span class="p">[</span><span class="s2">&quot;createdOn&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">iso_to_datetime</span><span class="p">(</span>
                    <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createdOn&quot;</span><span class="p">]</span>
                <span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M&quot;</span><span class="p">)</span>
                <span class="n">fmt_fields</span><span class="p">[</span><span class="s2">&quot;createdBy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user_name</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createdBy&quot;</span><span class="p">])[:</span><span class="mi">18</span><span class="p">]</span>
                <span class="n">fmt_fields</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">]</span>
                <span class="n">fmt_string</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">{version:3}</span><span class="s2">  </span><span class="si">{createdBy:&gt;18}</span><span class="s2"> </span><span class="si">{createdOn}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">show_modified</span><span class="p">:</span>
                <span class="n">fmt_fields</span><span class="p">[</span><span class="s2">&quot;modifiedOn&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">iso_to_datetime</span><span class="p">(</span>
                    <span class="n">result</span><span class="p">[</span><span class="s2">&quot;modifiedOn&quot;</span><span class="p">]</span>
                <span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M&quot;</span><span class="p">)</span>
                <span class="n">fmt_fields</span><span class="p">[</span><span class="s2">&quot;modifiedBy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user_name</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;modifiedBy&quot;</span><span class="p">])[</span>
                    <span class="p">:</span><span class="mi">18</span>
                <span class="p">]</span>
                <span class="n">fmt_string</span> <span class="o">+=</span> <span class="s2">&quot;  </span><span class="si">{modifiedBy:&gt;18}</span><span class="s2"> </span><span class="si">{modifiedOn}</span><span class="s2">&quot;</span>

            <span class="n">fmt_string</span> <span class="o">+=</span> <span class="s2">&quot;  </span><span class="si">{padding}{name}{slash_or_not}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fmt_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">fmt_fields</span><span class="p">))</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">indent</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">recursive</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_container</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">(</span>
                    <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
                    <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                    <span class="n">long_format</span><span class="o">=</span><span class="n">long_format</span><span class="p">,</span>
                    <span class="n">show_modified</span><span class="o">=</span><span class="n">show_modified</span><span class="p">,</span>
                    <span class="n">indent</span><span class="o">=</span><span class="n">indent</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">indent</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">results_found</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;No results visible to </span><span class="si">{username}</span><span class="s2"> found for id </span><span class="si">{id}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">username</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">uploadFileHandle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">synapseStore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">md5</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_size</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads the file in the provided path (if necessary) to a storage location based on project settings.</span>
<span class="sd">        Returns a new FileHandle as a dict to represent the stored file.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            parent: Parent of the entity to which we upload.</span>
<span class="sd">            path:   File path to the file being uploaded</span>
<span class="sd">            synapseStore: If False, will not upload the file, but instead create an ExternalFileHandle that references</span>
<span class="sd">                            the file on the local machine.</span>
<span class="sd">                            If True, will upload the file based on StorageLocation determined by the entity_parent_id</span>
<span class="sd">            mimetype: The MIME type metadata for the uploaded file</span>
<span class="sd">            md5: The MD5 checksum for the file, if known. Otherwise if the file is a local file, it will be calculated</span>
<span class="sd">                    automatically.</span>
<span class="sd">            file_size: The size the file, if known. Otherwise if the file is a local file, it will be calculated</span>
<span class="sd">                        automatically.</span>
<span class="sd">            file_type: The MIME type the file, if known. Otherwise if the file is a local file, it will be calculated</span>
<span class="sd">                        automatically.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dict of a new FileHandle as a dict that represents the uploaded file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
            <span class="n">upload_file_handle_async</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">synapseStore</span><span class="p">,</span> <span class="n">md5</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mimetype</span>
            <span class="p">),</span>
            <span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                  Download List                           #</span>
    <span class="c1">############################################################</span>
    <span class="k">def</span> <span class="nf">clear_download_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear all files from download list&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="s2">&quot;/download/list&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_from_download_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_files</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove a batch of files from download list</span>

<span class="sd">        Arguments:</span>
<span class="sd">            list_of_files: Array of files in the format of a mapping {fileEntityId: synid, versionNumber: version}</span>

<span class="sd">        Returns:</span>
<span class="sd">            Number of files removed from download list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;batchToRemove&quot;</span><span class="p">:</span> <span class="n">list_of_files</span><span class="p">}</span>
        <span class="n">num_files_removed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/download/list/remove&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request_body</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">num_files_removed</span>

    <span class="k">def</span> <span class="nf">_generate_manifest_from_download_list</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">quoteCharacter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
        <span class="n">escapeCharacter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">lineEnd</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
        <span class="n">separator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
        <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a download list manifest generation request</span>

<span class="sd">        Arguments:</span>
<span class="sd">            quoteCharacter:  The character to be used for quoted elements in the resulting file.</span>
<span class="sd">            escapeCharacter: The escape character to be used for escaping a separator or quote in the resulting file.</span>
<span class="sd">            lineEnd:         The line feed terminator to be used for the resulting file.</span>
<span class="sd">            separator:       The delimiter to be used for separating entries in the resulting file.</span>
<span class="sd">            header:          Is the first line a header?</span>

<span class="sd">        Returns:</span>
<span class="sd">            Filehandle of download list manifest</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.download.DownloadListManifestRequest&quot;</span><span class="p">,</span>
            <span class="s2">&quot;csvTableDescriptor&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;separator&quot;</span><span class="p">:</span> <span class="n">separator</span><span class="p">,</span>
                <span class="s2">&quot;quoteCharacter&quot;</span><span class="p">:</span> <span class="n">quoteCharacter</span><span class="p">,</span>
                <span class="s2">&quot;escapeCharacter&quot;</span><span class="p">:</span> <span class="n">escapeCharacter</span><span class="p">,</span>
                <span class="s2">&quot;lineEnd&quot;</span><span class="p">:</span> <span class="n">lineEnd</span><span class="p">,</span>
                <span class="s2">&quot;isFirstLineHeader&quot;</span><span class="p">:</span> <span class="n">header</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span>
            <span class="n">uri</span><span class="o">=</span><span class="s2">&quot;/download/list/manifest/async&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request_body</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_download_list_manifest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the path of the download list manifest file</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path of download list manifest file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">manifest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_manifest_from_download_list</span><span class="p">()</span>
        <span class="c1"># Get file handle download link</span>
        <span class="n">file_result</span> <span class="o">=</span> <span class="n">get_file_handle_for_download</span><span class="p">(</span>
            <span class="n">file_handle_id</span><span class="o">=</span><span class="n">manifest</span><span class="p">[</span><span class="s2">&quot;resultFileHandleId&quot;</span><span class="p">],</span>
            <span class="n">synapse_id</span><span class="o">=</span><span class="n">manifest</span><span class="p">[</span><span class="s2">&quot;resultFileHandleId&quot;</span><span class="p">],</span>
            <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;FileEntity&quot;</span><span class="p">,</span>
            <span class="n">synapse_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Download the manifest</span>
        <span class="n">downloaded_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_from_URL</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;preSignedURL&quot;</span><span class="p">],</span>
            <span class="n">destination</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
            <span class="n">fileHandleId</span><span class="o">=</span><span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">],</span>
            <span class="n">expected_md5</span><span class="o">=</span><span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;fileHandle&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;synapse.file_handle_id&quot;</span><span class="p">:</span> <span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]}</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">downloaded_path</span>

    <span class="k">def</span> <span class="nf">get_download_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Download all files from your Synapse download list</span>

<span class="sd">        Arguments:</span>
<span class="sd">            downloadLocation: Directory to download files to.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Manifest file with file paths</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dl_list_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_download_list_manifest</span><span class="p">()</span>
        <span class="n">downloaded_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_manifest_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;manifest_</span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">()</span><span class="si">}</span><span class="s2">.csv&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dl_list_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">manifest_f</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span>
            <span class="n">new_manifest_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">write_obj</span><span class="p">:</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">manifest_f</span><span class="p">)</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">fieldnames</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">])</span>
            <span class="c1"># Write the downloaded paths to a new manifest file</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">write_obj</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
                <span class="c1"># You can add things to the download list that you don&#39;t have access to</span>
                <span class="c1"># So there must be a try catch here</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span> <span class="n">downloadLocation</span><span class="o">=</span><span class="n">downloadLocation</span><span class="p">)</span>
                    <span class="c1"># Must include version number because you can have multiple versions of a</span>
                    <span class="c1"># file in the download list</span>
                    <span class="n">downloaded_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;fileEntityId&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;versionNumber&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">],</span>
                        <span class="p">}</span>
                    <span class="p">)</span>
                    <span class="n">row</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">path</span>
                    <span class="n">row</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="n">row</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="n">row</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;DOWNLOAD FAILED&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unable to download file&quot;</span><span class="p">)</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="c1"># Don&#39;t want to clear all the download list because you can add things</span>
        <span class="c1"># to the download list after initiating this command.</span>
        <span class="c1"># Files that failed to download should not be removed from download list</span>
        <span class="c1"># Remove all files from download list after the entire download is complete.</span>
        <span class="c1"># This is because if download fails midway, we want to return the full manifest</span>
        <span class="k">if</span> <span class="n">downloaded_files</span><span class="p">:</span>
            <span class="c1"># Only want to invoke this if there is a list of files to remove</span>
            <span class="c1"># or the API call will error</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_download_list</span><span class="p">(</span><span class="n">list_of_files</span><span class="o">=</span><span class="n">downloaded_files</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;A manifest was created, but no files were downloaded&quot;</span><span class="p">)</span>

        <span class="c1"># Always remove original manifest file</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">dl_list_path</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_manifest_path</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                  Get / Set Annotations                   #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">_getRawAnnotations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve annotations for an Entity returning them in the native Synapse format.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:  A Synapse Entity or Synapse ID</span>
<span class="sd">            version: The entity&#39;s version. Defaults to None meaning most recent version.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An annotation dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Note: Specifying the version results in a zero-ed out etag,</span>
        <span class="c1"># even if the version is the most recent.</span>
        <span class="c1"># See [PLFM-1874](https://sagebionetworks.jira.com/browse/PLFM-1874) for more details.</span>
        <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span><span class="si">}</span><span class="s2">/version/</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">version</span><span class="p">)</span><span class="si">}</span><span class="s2">/annotations2&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span><span class="si">}</span><span class="s2">/annotations2&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_annotations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">],</span> <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Annotations</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve annotations for an Entity from the Synapse Repository as a Python dict.</span>

<span class="sd">        Note that collapsing annotations from the native Synapse format to a Python dict may involve some loss of</span>
<span class="sd">        information. See `_getRawAnnotations` to get annotations in the native format.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: An Entity or Synapse ID to lookup</span>
<span class="sd">            version: The version of the Entity to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A [synapseclient.annotations.Annotations][] object, a dict that also has id and etag attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">from_synapse_annotations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getRawAnnotations</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">version</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="n">Annotations</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Store annotations for an Entity in the Synapse Repository.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            annotations: A [synapseclient.annotations.Annotations][] of annotation names and values,</span>
<span class="sd">                            with the id and etag attribute set</span>

<span class="sd">        Returns:</span>
<span class="sd">            The updated [synapseclient.annotations.Annotations][] for the entity</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Getting annotations, adding a new annotation, and updating the annotations:</span>

<span class="sd">                annos = syn.get_annotations(&#39;syn123&#39;)</span>

<span class="sd">            `annos` will contain the id and etag associated with the entity upon retrieval</span>

<span class="sd">                print(annos.id)</span>
<span class="sd">                &gt; syn123</span>
<span class="sd">                print(annos.etag)</span>
<span class="sd">                &gt; 7bdb83e9-a50a-46e4-987a-4962559f090f   (Usually some UUID in the form of a string)</span>

<span class="sd">            Returned `annos` object from `get_annotations()` can be used as if it were a dict.</span>
<span class="sd">            Set key &#39;foo&#39; to have value of &#39;bar&#39; and &#39;baz&#39;</span>

<span class="sd">                annos[&#39;foo&#39;] = [&#39;bar&#39;, &#39;baz&#39;]</span>

<span class="sd">            Single values will automatically be wrapped in a list once stored</span>

<span class="sd">                annos[&#39;qwerty&#39;] = &#39;asdf&#39;</span>

<span class="sd">            Store the annotations</span>

<span class="sd">                annos = syn.set_annotations(annos)</span>

<span class="sd">                print(annos)</span>
<span class="sd">                &gt; {&#39;foo&#39;:[&#39;bar&#39;,&#39;baz], &#39;qwerty&#39;:[&#39;asdf&#39;]}</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">annotations</span><span class="p">,</span> <span class="n">Annotations</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected a synapseclient.Annotations object&quot;</span><span class="p">)</span>

        <span class="n">synapseAnnos</span> <span class="o">=</span> <span class="n">to_synapse_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>

        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

        <span class="k">return</span> <span class="n">from_synapse_annotations</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/annotations2&quot;</span><span class="p">,</span>
                <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">synapseAnnos</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                         Querying                         #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">getChildren</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">,</span>
        <span class="n">includeTypes</span><span class="o">=</span><span class="p">[</span>
            <span class="s2">&quot;folder&quot;</span><span class="p">,</span>
            <span class="s2">&quot;file&quot;</span><span class="p">,</span>
            <span class="s2">&quot;table&quot;</span><span class="p">,</span>
            <span class="s2">&quot;link&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityview&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dockerrepo&quot;</span><span class="p">,</span>
            <span class="s2">&quot;submissionview&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
            <span class="s2">&quot;materializedview&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">sortBy</span><span class="o">=</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span>
        <span class="n">sortDirection</span><span class="o">=</span><span class="s2">&quot;ASC&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves all of the entities stored within a parent such as folder or project.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            parent: An id or an object of a Synapse container or None to retrieve all projects</span>
<span class="sd">            includeTypes: Must be a list of entity types (ie. [&quot;folder&quot;,&quot;file&quot;]) which can be found [here](http://docs.synapse.org/rest/org/sagebionetworks/repo/model/EntityType.html)</span>
<span class="sd">            sortBy: How results should be sorted. Can be NAME, or CREATED_ON</span>
<span class="sd">            sortDirection: The direction of the result sort. Can be ASC, or DESC</span>

<span class="sd">        Yields:</span>
<span class="sd">            An iterator that shows all the children of the container.</span>

<span class="sd">        Also see:</span>

<span class="sd">        - [synapseutils.walk][]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parentId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.parent_id&quot;</span><span class="p">:</span> <span class="n">parentId</span><span class="p">})</span>
        <span class="n">entityChildrenRequest</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;parentId&quot;</span><span class="p">:</span> <span class="n">parentId</span><span class="p">,</span>
            <span class="s2">&quot;includeTypes&quot;</span><span class="p">:</span> <span class="n">includeTypes</span><span class="p">,</span>
            <span class="s2">&quot;sortBy&quot;</span><span class="p">:</span> <span class="n">sortBy</span><span class="p">,</span>
            <span class="s2">&quot;sortDirection&quot;</span><span class="p">:</span> <span class="n">sortDirection</span><span class="p">,</span>
            <span class="s2">&quot;nextPageToken&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">entityChildrenResponse</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">:</span> <span class="s2">&quot;first&quot;</span><span class="p">}</span>
        <span class="k">while</span> <span class="n">entityChildrenResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">entityChildrenResponse</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
                <span class="s2">&quot;/entity/children&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">entityChildrenRequest</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">entityChildrenResponse</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]:</span>
                <span class="k">yield</span> <span class="n">child</span>
            <span class="k">if</span> <span class="n">entityChildrenResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">entityChildrenRequest</span><span class="p">[</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entityChildrenResponse</span><span class="p">[</span>
                    <span class="s2">&quot;nextPageToken&quot;</span>
                <span class="p">]</span>

    <span class="k">def</span> <span class="nf">md5Query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md5</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the Entities which have attached file(s) which have the given MD5 hash.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            md5: The MD5 to query for (hexadecimal string)</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of Entity headers</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/entity/md5/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">md5</span><span class="p">)[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                     ACL manipulation                     #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">_getBenefactor</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an Entity&#39;s benefactor.</span>
<span class="sd">        An Entity gets its ACL from its benefactor.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: A Synapse Entity or Synapse ID</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary of the Entity&#39;s benefactor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_synapse_id_str</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="ow">or</span> <span class="n">is_synapse_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
            <span class="n">synid</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_synid_and_version</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/benefactor&quot;</span> <span class="o">%</span> <span class="n">synid</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">entity</span>

    <span class="k">def</span> <span class="nf">_getACL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the effective Access Control Lists (ACL) for a Synapse Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: A Synapse Entity or Synapse ID</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary of the Entity&#39;s ACL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;getACLURI&quot;</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">getACLURI</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get the ACL from the benefactor (which may be the entity itself)</span>
            <span class="n">benefactor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getBenefactor</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/acl&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_storeACL</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">acl</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create or update the ACL for a Synapse Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:  A Synapse Entity or Synapse ID</span>
<span class="sd">            acl:     An ACl as a dictionary</span>

<span class="sd">        The format of acl:</span>

<span class="sd">            {&#39;resourceAccess&#39;: [</span>
<span class="sd">                {&#39;accessType&#39;: [&#39;READ&#39;],</span>
<span class="sd">                 &#39;principalId&#39;: 222222}</span>
<span class="sd">            ]}</span>

<span class="sd">        Returns:</span>
<span class="sd">            The new or updated ACL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;putACLURI&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">putACLURI</span><span class="p">(),</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">acl</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get benefactor. (An entity gets its ACL from its benefactor.)</span>
            <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/benefactor&quot;</span> <span class="o">%</span> <span class="n">entity_id</span>
            <span class="n">benefactor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

            <span class="c1"># Update or create new ACL</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/acl&quot;</span> <span class="o">%</span> <span class="n">entity_id</span>
            <span class="k">if</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entity_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">acl</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">acl</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_getUserbyPrincipalIdOrName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">principalId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given either a string, int or None finds the corresponding user where None implies PUBLIC</span>

<span class="sd">        Arguments:</span>
<span class="sd">            principalId: Identifier of a user or group</span>

<span class="sd">        Raises:</span>
<span class="sd">            SynapseError: Warn for unknown user principalId</span>

<span class="sd">        Returns:</span>
<span class="sd">            The integer ID of the user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">principalId</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">principalId</span> <span class="o">==</span> <span class="s2">&quot;PUBLIC&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PUBLIC</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">principalId</span><span class="p">)</span>

        <span class="c1"># If principalId is not a number assume it is a name or email</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">userProfiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/userGroupHeaders?prefix=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">principalId</span><span class="p">)</span>
            <span class="n">totalResults</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">userProfiles</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">totalResults</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">userProfiles</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;ownerId&quot;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">totalResults</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">profile</span> <span class="ow">in</span> <span class="n">userProfiles</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">profile</span><span class="p">[</span><span class="s2">&quot;userName&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">principalId</span><span class="p">:</span>
                        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">profile</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">])</span>

            <span class="n">supplementalMessage</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;Please be more specific&quot;</span> <span class="k">if</span> <span class="n">totalResults</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;No matches&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                <span class="s2">&quot;Unknown Synapse user (</span><span class="si">%s</span><span class="s2">).  </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">principalId</span><span class="p">,</span> <span class="n">supplementalMessage</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_acl</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">],</span>
        <span class="n">principal_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the [ACL](https://rest-docs.synapse.org/rest/org/</span>
<span class="sd">        sagebionetworks/repo/model/ACCESS_TYPE.html)</span>
<span class="sd">        that a user or group has on an Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:      An Entity or Synapse ID to lookup</span>
<span class="sd">            principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>

<span class="sd">        Returns:</span>
<span class="sd">            An array containing some combination of</span>
<span class="sd">                [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">                &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">                or an empty array</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">principal_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getUserbyPrincipalIdOrName</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span> <span class="s2">&quot;synapse.principal_id&quot;</span><span class="p">:</span> <span class="n">principal_id</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="n">acl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getACL</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="n">team_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_teams_for_principal</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span>
        <span class="n">team_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">team</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="n">team_list</span><span class="p">]</span>
        <span class="n">effective_permission_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># This user_profile_bundle is being used to verify that the principal_id</span>
        <span class="c1">#  is a registered user of the system</span>
        <span class="n">user_profile_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user_bundle</span><span class="p">(</span><span class="n">principal_id</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Loop over all permissions in the returned ACL and add it to the effective_permission_set</span>
        <span class="c1"># if the principalId in the ACL matches</span>
        <span class="c1"># 1) the one we are looking for,</span>
        <span class="c1"># 2) a team the entity is a member of,</span>
        <span class="c1"># 3) PUBLIC</span>
        <span class="c1"># 4) A user_profile_bundle exists for the principal_id</span>
        <span class="k">for</span> <span class="n">permissions</span> <span class="ow">in</span> <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s2">&quot;principalId&quot;</span> <span class="ow">in</span> <span class="n">permissions</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">principal_id</span>
                <span class="ow">or</span> <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">team_ids</span>
                <span class="ow">or</span> <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">PUBLIC</span>
                <span class="ow">or</span> <span class="p">(</span>
                    <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">AUTHENTICATED_USERS</span>
                    <span class="ow">and</span> <span class="n">user_profile_bundle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="n">effective_permission_set</span> <span class="o">=</span> <span class="n">effective_permission_set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
                    <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">effective_permission_set</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.0.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;deprecated and replaced with synapseclient.Synapse.get_acl&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">getPermissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">],</span>
        <span class="n">principal_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Deprecated** and replaced with [get_acl][synapseclient.Synapse.get_acl].</span>


<span class="sd">        Get the permissions that a user or group has on an Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:      An Entity or Synapse ID to lookup</span>
<span class="sd">            principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>

<span class="sd">        Returns:</span>
<span class="sd">            An array containing some combination of</span>
<span class="sd">                [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">                &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">                or an empty array</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl</span><span class="p">(</span><span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span> <span class="n">principal_id</span><span class="o">=</span><span class="n">principal_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Permissions</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the [permissions](https://rest-docs.synapse.org/rest/org/</span>
<span class="sd">        sagebionetworks/repo/model/auth/UserEntityPermissions.html)</span>
<span class="sd">        that the caller has on an Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: An Entity or Synapse ID to lookup</span>

<span class="sd">        Returns:</span>
<span class="sd">            An Permissions object</span>


<span class="sd">        Example: Using this function:</span>
<span class="sd">            Getting permissions for a Synapse Entity</span>

<span class="sd">                permissions = syn.get_permissions(Entity)</span>

<span class="sd">            Getting permissions for a Synapse ID</span>

<span class="sd">                permissions = syn.get_permissions(&quot;syn12345&quot;)</span>

<span class="sd">            Getting access types list from the Permissions object</span>

<span class="sd">                permissions.access_types</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/permissions&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Permissions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setPermissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">,</span>
        <span class="n">principalId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">accessType</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;READ&quot;</span><span class="p">,</span> <span class="s2">&quot;DOWNLOAD&quot;</span><span class="p">],</span>
        <span class="n">modify_benefactor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">warn_if_inherits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets permission that a user or group has on an Entity.</span>
<span class="sd">        An Entity may have its own ACL or inherit its ACL from a benefactor.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: An Entity or Synapse ID to modify</span>
<span class="sd">            principalId: Identifier of a user or group. &#39;273948&#39; is for all registered Synapse users</span>
<span class="sd">                            and &#39;273949&#39; is for public access. None implies public access.</span>
<span class="sd">            accessType: Type of permission to be granted. One or more of CREATE, READ, DOWNLOAD, UPDATE,</span>
<span class="sd">                            DELETE, CHANGE_PERMISSIONS</span>
<span class="sd">            modify_benefactor: Set as True when modifying a benefactor&#39;s ACL</span>
<span class="sd">            warn_if_inherits: Set as False, when creating a new ACL.</span>
<span class="sd">                                Trying to modify the ACL of an Entity that inherits its ACL will result in a warning</span>
<span class="sd">            overwrite: By default this function overwrites existing permissions for the specified user.</span>
<span class="sd">                        Set this flag to False to add new permissions non-destructively.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An Access Control List object</span>

<span class="sd">        Example: Setting permissions</span>
<span class="sd">            Grant all registered users download access</span>

<span class="sd">                syn.setPermissions(&#39;syn1234&#39;,&#39;273948&#39;,[&#39;READ&#39;,&#39;DOWNLOAD&#39;])</span>

<span class="sd">            Grant the public view access</span>

<span class="sd">                syn.setPermissions(&#39;syn1234&#39;,&#39;273949&#39;,[&#39;READ&#39;])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

        <span class="n">benefactor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getBenefactor</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">entity_id</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">modify_benefactor</span><span class="p">:</span>
                <span class="n">entity</span> <span class="o">=</span> <span class="n">benefactor</span>
            <span class="k">elif</span> <span class="n">warn_if_inherits</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Creating an ACL for entity </span><span class="si">%s</span><span class="s2">, which formerly inherited access control from a&quot;</span>
                    <span class="s1">&#39; benefactor entity, &quot;</span><span class="si">%s</span><span class="s1">&quot; (</span><span class="si">%s</span><span class="s1">).</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
                <span class="p">)</span>

        <span class="n">acl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getACL</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="n">principalId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getUserbyPrincipalIdOrName</span><span class="p">(</span><span class="n">principalId</span><span class="p">)</span>

        <span class="c1"># Find existing permissions</span>
        <span class="n">permissions_to_update</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">permissions</span> <span class="ow">in</span> <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="s2">&quot;principalId&quot;</span> <span class="ow">in</span> <span class="n">permissions</span>
                <span class="ow">and</span> <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">principalId</span>
            <span class="p">):</span>
                <span class="n">permissions_to_update</span> <span class="o">=</span> <span class="n">permissions</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="n">accessType</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">accessType</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="c1"># remove permissions</span>
            <span class="k">if</span> <span class="n">permissions_to_update</span> <span class="ow">and</span> <span class="n">overwrite</span><span class="p">:</span>
                <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">permissions_to_update</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># add a &#39;resourceAccess&#39; entry, if necessary</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">permissions_to_update</span><span class="p">:</span>
                <span class="n">permissions_to_update</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;accessType&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;principalId&quot;</span><span class="p">:</span> <span class="n">principalId</span><span class="p">}</span>
                <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permissions_to_update</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">overwrite</span><span class="p">:</span>
                <span class="n">permissions_to_update</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">accessType</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">permissions_to_update</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="nb">set</span><span class="p">(</span><span class="n">permissions_to_update</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">])</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">accessType</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storeACL</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">acl</span><span class="p">)</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                        Provenance                        #</span>
    <span class="c1">############################################################</span>

    <span class="c1"># TODO: rename these to Activity</span>
    <span class="k">def</span> <span class="nf">getProvenance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">],</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Activity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve provenance information for a Synapse Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:  An Entity or Synapse ID to lookup</span>
<span class="sd">            version: The version of the Entity to retrieve. Gets the most recent version if omitted</span>

<span class="sd">        Returns:</span>
<span class="sd">            An Activity object or raises exception if no provenance record exists</span>

<span class="sd">        Raises:</span>
<span class="sd">            SynapseHTTPError: if no provenance record exists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get versionNumber from Entity</span>
        <span class="k">if</span> <span class="n">version</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;versionNumber&quot;</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
            <span class="n">version</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">]</span>
        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/version/</span><span class="si">%d</span><span class="s2">/generatedBy&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/generatedBy&quot;</span> <span class="o">%</span> <span class="n">entity_id</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">Activity</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">setProvenance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">],</span>
        <span class="n">activity</span><span class="p">:</span> <span class="n">Activity</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Activity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stores a record of the code and data used to derive a Synapse entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:   An Entity or Synapse ID to modify</span>
<span class="sd">            activity: A [synapseclient.activity.Activity][]</span>

<span class="sd">        Returns:</span>
<span class="sd">            An updated [synapseclient.activity.Activity][] object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assert that the entity was generated by a given Activity.</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_saveActivity</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>

        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="c1"># assert that an entity is generated by an activity</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/generatedBy?generatedBy=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">activity</span>

    <span class="k">def</span> <span class="nf">deleteProvenance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes provenance information from an Entity and deletes the associated Activity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: An Entity or Synapse ID to modify</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getProvenance</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">activity</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/generatedBy&quot;</span> <span class="o">%</span> <span class="n">entity_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

        <span class="c1"># If the activity is shared by more than one entity you recieve an HTTP 400 error:</span>
        <span class="c1"># &quot;If you wish to delete this activity, please first delete all Entities generated by this Activity.&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/activity/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_saveActivity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activity</span><span class="p">:</span> <span class="n">Activity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Activity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the Activity</span>

<span class="sd">        Arguments:</span>
<span class="sd">            activity: The Activity to be saved</span>

<span class="sd">        Returns:</span>
<span class="sd">            An Activity object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">activity</span><span class="p">:</span>
            <span class="c1"># We&#39;re updating provenance</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/activity/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">activity</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="s2">&quot;/activity&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">activity</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">activity</span>

    <span class="k">def</span> <span class="nf">updateActivity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Activity</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modifies an existing Activity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            activity: The Activity to be updated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An updated Activity object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">activity</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The activity you want to update must exist on Synapse&quot;</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_saveActivity</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_convertProvenanceList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">usedList</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">limitSearch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert a list of Synapse IDs, URLs and local files by replacing local files with Synapse IDs</span>

<span class="sd">        Arguments:</span>
<span class="sd">            usedList:    A list of Synapse IDs, URLs and local files</span>
<span class="sd">            limitSearch: Limits the places in Synapse where the file is searched for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A converted list with local files being replaced with Synapse IDs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">usedList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">usedList</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">limitSearch</span><span class="o">=</span><span class="n">limitSearch</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span> <span class="n">target</span>
            <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">usedList</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">usedList</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                File handle service calls                 #</span>
    <span class="c1">############################################################</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/api/file_services.py::get_file_handle_for_download&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_getFileHandleDownload</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">fileHandleId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">objectId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">objectType</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the URL and the metadata as filehandle object for a filehandle or fileHandleId</span>

<span class="sd">        Arguments:</span>
<span class="sd">            fileHandleId:   ID of fileHandle to download</span>
<span class="sd">            objectId:       The ID of the object associated with the file e.g. syn234</span>
<span class="sd">            objectType:     Type of object associated with a file e.g. FileEntity, TableEntity</span>

<span class="sd">        Raises:</span>
<span class="sd">            SynapseFileNotFoundError: If the fileHandleId is not found in Synapse.</span>
<span class="sd">            SynapseError:             If the user does not have the permission to access the fileHandleId.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary with keys: fileHandle, fileHandleId and preSignedURL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;includeFileHandles&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;includePreSignedURLs&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;requestedFiles&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;fileHandleId&quot;</span><span class="p">:</span> <span class="n">fileHandleId</span><span class="p">,</span>
                    <span class="s2">&quot;associateObjectId&quot;</span><span class="p">:</span> <span class="n">objectId</span><span class="p">,</span>
                    <span class="s2">&quot;associateObjectType&quot;</span><span class="p">:</span> <span class="n">objectType</span> <span class="ow">or</span> <span class="s2">&quot;FileEntity&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">],</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/fileHandle/batch&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;requestedFiles&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">failure</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;failureCode&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">failure</span> <span class="o">==</span> <span class="s2">&quot;NOT_FOUND&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseFileNotFoundError</span><span class="p">(</span>
                <span class="s2">&quot;The fileHandleId </span><span class="si">%s</span><span class="s2"> could not be found&quot;</span> <span class="o">%</span> <span class="n">fileHandleId</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">failure</span> <span class="o">==</span> <span class="s2">&quot;UNAUTHORIZED&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                <span class="s2">&quot;You are not authorized to access fileHandleId </span><span class="si">%s</span><span class="s2"> associated with the Synapse&quot;</span>
                <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileHandleId</span><span class="p">,</span> <span class="n">objectType</span><span class="p">,</span> <span class="n">objectId</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::is_retryable_download_error&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_retryable_download_error</span><span class="p">(</span><span class="n">ex</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the download error is retryable</span>

<span class="sd">        Arguments:</span>
<span class="sd">            ex: An exception</span>

<span class="sd">        Returns:</span>
<span class="sd">            Boolean value indicating whether the download error is retryable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># some exceptions caught during download indicate non-recoverable situations that</span>
        <span class="c1"># will not be remedied by a repeated download attempt.</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ex</span><span class="o">.</span><span class="n">errno</span> <span class="o">==</span> <span class="n">errno</span><span class="o">.</span><span class="n">ENOSPC</span><span class="p">)</span>
            <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">SynapseMd5MismatchError</span><span class="p">)</span>  <span class="c1"># out of disk space</span>
        <span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::download_by_file_handle&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_downloadFileHandle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">fileHandleId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">objectId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">objectType</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Download a file from the given URL to the local file system.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            fileHandleId: The id of the FileHandle to download</span>
<span class="sd">            objectId:     The id of the Synapse object that uses the FileHandle e.g. &quot;syn123&quot;</span>
<span class="sd">            objectType:   The type of the Synapse object that uses the FileHandle e.g. &quot;FileEntity&quot;</span>
<span class="sd">            destination:  The destination on local file system</span>
<span class="sd">            retries:      The Number of download retries attempted before throwing an exception.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to downloaded file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">destination</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">retries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fileResult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getFileHandleDownload</span><span class="p">(</span>
                    <span class="n">fileHandleId</span><span class="p">,</span> <span class="n">objectId</span><span class="p">,</span> <span class="n">objectType</span>
                <span class="p">)</span>
                <span class="n">fileHandle</span> <span class="o">=</span> <span class="n">fileResult</span><span class="p">[</span><span class="s2">&quot;fileHandle&quot;</span><span class="p">]</span>
                <span class="n">concreteType</span> <span class="o">=</span> <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>
                <span class="n">storageLocationId</span> <span class="o">=</span> <span class="n">fileHandle</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;storageLocationId&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">concreteType</span> <span class="o">==</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">EXTERNAL_OBJECT_STORE_FILE_HANDLE</span><span class="p">:</span>
                    <span class="n">profile</span> <span class="o">=</span> <span class="n">get_client_authenticated_s3_profile</span><span class="p">(</span>
                        <span class="n">endpoint</span><span class="o">=</span><span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;endpointUrl&quot;</span><span class="p">],</span>
                        <span class="n">bucket</span><span class="o">=</span><span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;bucket&quot;</span><span class="p">],</span>
                        <span class="n">config_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">downloaded_path</span> <span class="o">=</span> <span class="n">S3ClientWrapper</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span>
                        <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;bucket&quot;</span><span class="p">],</span>
                        <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;endpointUrl&quot;</span><span class="p">],</span>
                        <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;fileKey&quot;</span><span class="p">],</span>
                        <span class="n">destination</span><span class="p">,</span>
                        <span class="n">profile_name</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span>
                        <span class="n">show_progress</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">silent</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="p">(</span>
                    <span class="n">sts_transfer</span><span class="o">.</span><span class="n">is_boto_sts_transfer_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">sts_transfer</span><span class="o">.</span><span class="n">is_storage_location_sts_enabled</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="n">objectId</span><span class="p">,</span> <span class="n">storageLocationId</span>
                    <span class="p">)</span>
                    <span class="ow">and</span> <span class="n">concreteType</span> <span class="o">==</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">S3_FILE_HANDLE</span>
                <span class="p">):</span>

                    <span class="k">def</span> <span class="nf">download_fn</span><span class="p">(</span><span class="n">credentials</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">S3ClientWrapper</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span>
                            <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;bucketName&quot;</span><span class="p">],</span>
                            <span class="kc">None</span><span class="p">,</span>
                            <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span>
                            <span class="n">destination</span><span class="p">,</span>
                            <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">,</span>
                            <span class="n">show_progress</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">silent</span><span class="p">,</span>
                            <span class="c1"># pass through our synapse threading config to boto s3</span>
                            <span class="n">transfer_config_kwargs</span><span class="o">=</span><span class="p">{</span>
                                <span class="s2">&quot;max_concurrency&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_threads</span>
                            <span class="p">},</span>
                        <span class="p">)</span>

                    <span class="n">downloaded_path</span> <span class="o">=</span> <span class="n">sts_transfer</span><span class="o">.</span><span class="n">with_boto_sts_credentials</span><span class="p">(</span>
                        <span class="n">download_fn</span><span class="p">,</span>
                        <span class="bp">self</span><span class="p">,</span>
                        <span class="n">objectId</span><span class="p">,</span>
                        <span class="s2">&quot;read_only&quot;</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">multi_threaded</span>
                    <span class="ow">and</span> <span class="n">concreteType</span> <span class="o">==</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">S3_FILE_HANDLE</span>
                    <span class="ow">and</span> <span class="n">fileHandle</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentSize&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="o">&gt;</span> <span class="n">multithread_download</span><span class="o">.</span><span class="n">SYNAPSE_DEFAULT_DOWNLOAD_PART_SIZE</span>
                <span class="p">):</span>
                    <span class="c1"># run the download multi threaded if the file supports it, we&#39;re configured to do so,</span>
                    <span class="c1"># and the file is large enough that it would be broken into parts to take advantage of</span>
                    <span class="c1"># multiple downloading threads. otherwise it&#39;s more efficient to run the download as a simple</span>
                    <span class="c1"># single threaded URL download.</span>
                    <span class="n">downloaded_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_from_url_multi_threaded</span><span class="p">(</span>
                        <span class="n">fileHandleId</span><span class="p">,</span>
                        <span class="n">objectId</span><span class="p">,</span>
                        <span class="n">objectType</span><span class="p">,</span>
                        <span class="n">destination</span><span class="p">,</span>
                        <span class="n">expected_md5</span><span class="o">=</span><span class="n">fileHandle</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">),</span>
                    <span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">downloaded_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_from_URL</span><span class="p">(</span>
                        <span class="n">fileResult</span><span class="p">[</span><span class="s2">&quot;preSignedURL&quot;</span><span class="p">],</span>
                        <span class="n">destination</span><span class="p">,</span>
                        <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
                        <span class="n">expected_md5</span><span class="o">=</span><span class="n">fileHandle</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">downloaded_path</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">downloaded_path</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_retryable_download_error</span><span class="p">(</span><span class="n">ex</span><span class="p">):</span>
                    <span class="k">raise</span>

                <span class="n">exc_info</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
                <span class="n">ex</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">ex</span><span class="o">.</span><span class="n">progress</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Retrying download on error: [</span><span class="si">%s</span><span class="s2">] after progressing </span><span class="si">%i</span><span class="s2"> bytes&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">exc_info</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ex</span><span class="o">.</span><span class="n">progress</span><span class="p">),</span>
                    <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>  <span class="c1"># this will include stack trace</span>
                <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">progress</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># No progress was made reduce remaining retries.</span>
                    <span class="n">retries</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">retries</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># Re-raise exception</span>
                    <span class="k">raise</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;should not reach this line&quot;</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::download_from_url_multi_threaded&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_download_from_url_multi_threaded</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">file_handle_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">object_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">object_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">expected_md5</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Download a file from the given URL using multiple threads.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            file_handle_id: The id of the FileHandle to download</span>
<span class="sd">            object_id:      The id of the Synapse object that uses the FileHandle e.g. &quot;syn123&quot;</span>
<span class="sd">            object_type:    The type of the Synapse object that uses the FileHandle e.g. &quot;FileEntity&quot;</span>
<span class="sd">            destination:    The destination on local file system</span>
<span class="sd">            expected_md5:   The expected MD5</span>
<span class="sd">        Raises:</span>
<span class="sd">            SynapseMd5MismatchError: If the actual MD5 does not match expected MD5.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to downloaded file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
        <span class="n">temp_destination</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">temp_download_filename</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">file_handle_id</span><span class="p">)</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">multithread_download</span><span class="o">.</span><span class="n">DownloadRequest</span><span class="p">(</span>
            <span class="n">file_handle_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">file_handle_id</span><span class="p">),</span>
            <span class="n">object_id</span><span class="o">=</span><span class="n">object_id</span><span class="p">,</span>
            <span class="n">object_type</span><span class="o">=</span><span class="n">object_type</span><span class="p">,</span>
            <span class="n">path</span><span class="o">=</span><span class="n">temp_destination</span><span class="p">,</span>
            <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">multithread_download</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">expected_md5</span>
        <span class="p">):</span>  <span class="c1"># if md5 not set (should be the case for all except http download)</span>
            <span class="n">actual_md5</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
            <span class="c1"># check md5 if given</span>
            <span class="k">if</span> <span class="n">actual_md5</span> <span class="o">!=</span> <span class="n">expected_md5</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                    <span class="c1"># file already does not exist. nothing to do</span>
                    <span class="k">pass</span>
                <span class="k">raise</span> <span class="n">SynapseMd5MismatchError</span><span class="p">(</span>
                    <span class="s2">&quot;Downloaded file </span><span class="si">{filename}</span><span class="s2">&#39;s md5 </span><span class="si">{md5}</span><span class="s2"> does not match expected MD5 of&quot;</span>
                    <span class="s2">&quot; </span><span class="si">{expected_md5}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">filename</span><span class="o">=</span><span class="n">temp_destination</span><span class="p">,</span>
                        <span class="n">md5</span><span class="o">=</span><span class="n">actual_md5</span><span class="p">,</span>
                        <span class="n">expected_md5</span><span class="o">=</span><span class="n">expected_md5</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="c1"># once download completed, rename to desired destination</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">destination</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::is_synapse_uri&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_synapse_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check whether the given uri is hosted at the configured Synapse repo endpoint</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: A given uri</span>

<span class="sd">        Returns:</span>
<span class="sd">            A boolean value indicating whether the given uri is hosted at the configured Synapse repo endpoint</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri_domain</span> <span class="o">=</span> <span class="n">urllib_urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span><span class="o">.</span><span class="n">netloc</span>
        <span class="n">synapse_repo_domain</span> <span class="o">=</span> <span class="n">urllib_urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repoEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">netloc</span>
        <span class="k">return</span> <span class="n">uri_domain</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">synapse_repo_domain</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
        <span class="s2">&quot;Moved to synapseclient/core/download/download_functions.py::download_from_url&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">_download_from_URL</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fileHandleId</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">expected_md5</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Download a file from the given URL to the local file system.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            url:           The source of download</span>
<span class="sd">            destination:   The destination on local file system</span>
<span class="sd">            fileHandleId:  Optional. If given, the file will be given a temporary name that includes the file</span>
<span class="sd">                                    handle id which allows resuming partial downloads of the same file from previous</span>
<span class="sd">                                    sessions</span>
<span class="sd">            expected_md5:  Optional. If given, check that the MD5 of the downloaded file matches the expected MD5</span>

<span class="sd">        Raises:</span>
<span class="sd">            IOError:                 If the local file does not exist.</span>
<span class="sd">            SynapseError:            If fail to download the file.</span>
<span class="sd">            SynapseHTTPError:        If there are too many redirects.</span>
<span class="sd">            SynapseMd5MismatchError: If the actual MD5 does not match expected MD5.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to downloaded file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
        <span class="n">actual_md5</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">redirect_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">delete_on_md5_mismatch</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">destination</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">redirect_count</span> <span class="o">&lt;</span> <span class="n">REDIRECT_LIMIT</span><span class="p">:</span>
            <span class="n">redirect_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">scheme</span> <span class="o">=</span> <span class="n">urllib_urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">scheme</span>
            <span class="k">if</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                <span class="n">delete_on_md5_mismatch</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">destination</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">file_url_to_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">verify_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">destination</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s2">&quot;Local file (</span><span class="si">%s</span><span class="s2">) does not exist.&quot;</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;sftp&quot;</span><span class="p">:</span>
                <span class="n">username</span><span class="p">,</span> <span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getUserCredentials</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="n">destination</span> <span class="o">=</span> <span class="n">SFTPWrapper</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span>
                    <span class="n">url</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">show_progress</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">silent</span>
                <span class="p">)</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;ftp&quot;</span><span class="p">:</span>
                <span class="n">transfer_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

                <span class="k">def</span> <span class="nf">_ftp_report_hook</span><span class="p">(</span>
                    <span class="n">block_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">read_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">total_size</span><span class="p">:</span> <span class="nb">int</span>
                <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">show_progress</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">silent</span>
                    <span class="k">if</span> <span class="n">show_progress</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_print_transfer_progress</span><span class="p">(</span>
                            <span class="n">transferred</span><span class="o">=</span><span class="n">block_number</span> <span class="o">*</span> <span class="n">read_size</span><span class="p">,</span>
                            <span class="n">toBeTransferred</span><span class="o">=</span><span class="n">total_size</span><span class="p">,</span>
                            <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;Downloading &quot;</span><span class="p">,</span>
                            <span class="n">postfix</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">destination</span><span class="p">),</span>
                            <span class="n">dt</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">transfer_start_time</span><span class="p">,</span>
                        <span class="p">)</span>

                <span class="n">urllib_request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="n">reporthook</span><span class="o">=</span><span class="n">_ftp_report_hook</span>
                <span class="p">)</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;http&quot;</span> <span class="ow">or</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;https&quot;</span><span class="p">:</span>
                <span class="c1"># if a partial download exists with the temporary name,</span>
                <span class="n">temp_destination</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">temp_download_filename</span><span class="p">(</span>
                    <span class="n">destination</span><span class="p">,</span> <span class="n">fileHandleId</span>
                <span class="p">)</span>
                <span class="n">range_header</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;Range&quot;</span><span class="p">:</span> <span class="s2">&quot;bytes=</span><span class="si">{start}</span><span class="s2">-&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">start</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">)</span>
                    <span class="k">else</span> <span class="p">{}</span>
                <span class="p">)</span>

                <span class="c1"># pass along synapse auth credentials only if downloading directly from synapse</span>
                <span class="n">auth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_synapse_uri</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">with_retry</span><span class="p">(</span>
                    <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_headers</span><span class="p">(</span><span class="n">range_header</span><span class="p">),</span>
                        <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">STANDARD_RETRY_PARAMS</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">exceptions</span><span class="o">.</span><span class="n">_raise_for_status</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span><span class="s2">&quot;Could not download the file at </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="p">(</span>
                        <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">416</span>
                    <span class="p">):</span>  <span class="c1"># Requested Range Not Statisfiable</span>
                        <span class="c1"># this is a weird error when the client already finished downloading but the loop continues</span>
                        <span class="c1"># When this exception occurs, the range we request is guaranteed to be &gt;= file size so we</span>
                        <span class="c1"># assume that the file has been fully downloaded, rename it to destination file</span>
                        <span class="c1"># and break out of the loop to perform the MD5 check.</span>
                        <span class="c1"># If it fails the user can retry with another download.</span>
                        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span>
                        <span class="k">break</span>
                    <span class="k">raise</span>

                <span class="c1"># handle redirects</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">301</span><span class="p">,</span> <span class="mi">302</span><span class="p">,</span> <span class="mi">303</span><span class="p">,</span> <span class="mi">307</span><span class="p">,</span> <span class="mi">308</span><span class="p">]:</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span>
                    <span class="c1"># don&#39;t break, loop again</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># get filename from content-disposition, if we don&#39;t have it already</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">destination</span><span class="p">):</span>
                        <span class="n">filename</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_filename</span><span class="p">(</span>
                            <span class="n">content_disposition_header</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                <span class="s2">&quot;content-disposition&quot;</span><span class="p">,</span> <span class="kc">None</span>
                            <span class="p">),</span>
                            <span class="n">default_filename</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">guess_file_name</span><span class="p">(</span><span class="n">url</span><span class="p">),</span>
                        <span class="p">)</span>
                        <span class="n">destination</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                    <span class="c1"># Stream the file to disk</span>
                    <span class="k">if</span> <span class="s2">&quot;content-length&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">:</span>
                        <span class="n">toBeTransferred</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;content-length&quot;</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">toBeTransferred</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="n">transferred</span> <span class="o">=</span> <span class="mi">0</span>

                    <span class="c1"># Servers that respect the Range header return 206 Partial Content</span>
                    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">206</span><span class="p">:</span>
                        <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;ab&quot;</span>
                        <span class="n">previouslyTransferred</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">)</span>
                        <span class="n">toBeTransferred</span> <span class="o">+=</span> <span class="n">previouslyTransferred</span>
                        <span class="n">transferred</span> <span class="o">+=</span> <span class="n">previouslyTransferred</span>
                        <span class="n">sig</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;wb&quot;</span>
                        <span class="n">previouslyTransferred</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">sig</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;md5&quot;</span><span class="p">,</span> <span class="n">usedforsecurity</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># nosec</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
                            <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">nChunks</span><span class="p">,</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                                <span class="n">response</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">FILE_BUFFER_SIZE</span><span class="p">)</span>
                            <span class="p">):</span>
                                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
                                <span class="n">sig</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

                                <span class="c1"># the &#39;content-length&#39; header gives the total number of bytes that will be transferred</span>
                                <span class="c1"># to us len(chunk) cannot be used to track progress because iter_content automatically</span>
                                <span class="c1"># decodes the chunks if the response body is encoded so the len(chunk) could be</span>
                                <span class="c1"># different from the total number of bytes we&#39;ve read read from the response body</span>
                                <span class="c1"># response.raw.tell() is the total number of response body bytes transferred over the</span>
                                <span class="c1"># wire so far</span>
                                <span class="n">transferred</span> <span class="o">=</span> <span class="p">(</span>
                                    <span class="n">response</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">+</span> <span class="n">previouslyTransferred</span>
                                <span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_print_transfer_progress</span><span class="p">(</span>
                                    <span class="n">transferred</span><span class="p">,</span>
                                    <span class="n">toBeTransferred</span><span class="p">,</span>
                                    <span class="s2">&quot;Downloading &quot;</span><span class="p">,</span>
                                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">destination</span><span class="p">),</span>
                                    <span class="n">dt</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span><span class="p">,</span>
                                <span class="p">)</span>
                    <span class="k">except</span> <span class="p">(</span>
                        <span class="ne">Exception</span>
                    <span class="p">)</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># We will add a progress parameter then push it back to retry.</span>
                        <span class="n">ex</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span> <span class="n">transferred</span> <span class="o">-</span> <span class="n">previouslyTransferred</span>
                        <span class="k">raise</span>

                    <span class="c1"># verify that the file was completely downloaded and retry if it is not complete</span>
                    <span class="k">if</span> <span class="n">toBeTransferred</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">transferred</span> <span class="o">&lt;</span> <span class="n">toBeTransferred</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Retrying download because the connection ended early.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">continue</span>

                    <span class="n">actual_md5</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
                    <span class="c1"># rename to final destination</span>
                    <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">temp_destination</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unable to download URLs of type </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">scheme</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># didn&#39;t break out of loop</span>
            <span class="k">raise</span> <span class="n">SynapseHTTPError</span><span class="p">(</span><span class="s2">&quot;Too many redirects&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">actual_md5</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>  <span class="c1"># if md5 not set (should be the case for all except http download)</span>
            <span class="n">actual_md5</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

        <span class="c1"># check md5 if given</span>
        <span class="k">if</span> <span class="n">expected_md5</span> <span class="ow">and</span> <span class="n">actual_md5</span> <span class="o">!=</span> <span class="n">expected_md5</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">delete_on_md5_mismatch</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">destination</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">SynapseMd5MismatchError</span><span class="p">(</span>
                <span class="s2">&quot;Downloaded file </span><span class="si">{filename}</span><span class="s2">&#39;s md5 </span><span class="si">{md5}</span><span class="s2"> does not match expected MD5 of&quot;</span>
                <span class="s2">&quot; </span><span class="si">{expected_md5}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">filename</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="n">md5</span><span class="o">=</span><span class="n">actual_md5</span><span class="p">,</span> <span class="n">expected_md5</span><span class="o">=</span><span class="n">expected_md5</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">destination</span>

    <span class="k">def</span> <span class="nf">_createExternalFileHandle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">externalURL</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mimetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">md5</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fileSize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new FileHandle representing an external URL.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            externalURL: An external URL</span>
<span class="sd">            mimetype:    The Mimetype of the file, if known.</span>
<span class="sd">            md5:         The file&#39;s content MD5.</span>
<span class="sd">            fileSize:    The size of the file in bytes.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A FileHandle for files that are stored externally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">externalURL</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">externalURL</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">as_url</span><span class="p">(</span><span class="n">externalURL</span><span class="p">)</span>
        <span class="n">fileHandle</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">EXTERNAL_FILE_HANDLE</span><span class="p">,</span>
            <span class="s2">&quot;fileName&quot;</span><span class="p">:</span> <span class="n">fileName</span><span class="p">,</span>
            <span class="s2">&quot;externalURL&quot;</span><span class="p">:</span> <span class="n">externalURL</span><span class="p">,</span>
            <span class="s2">&quot;contentMd5&quot;</span><span class="p">:</span> <span class="n">md5</span><span class="p">,</span>
            <span class="s2">&quot;contentSize&quot;</span><span class="p">:</span> <span class="n">fileSize</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">mimetype</span><span class="p">,</span> <span class="n">enc</span><span class="p">)</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">externalURL</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;contentType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mimetype</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/externalFileHandle&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">fileHandle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_createExternalObjectStoreFileHandle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">s3_file_key</span><span class="p">,</span>
        <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">storage_location_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">mimetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">md5</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new FileHandle representing an external object.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            s3_file_key:         S3 key of the uploaded object</span>
<span class="sd">            file_path:           The local path of the uploaded file</span>
<span class="sd">            storage_location_id: The optional storage location descriptor</span>
<span class="sd">            mimetype:            The Mimetype of the file, if known.</span>
<span class="sd">            md5:                 The file&#39;s content MD5, if known.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A FileHandle for objects that are stored externally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mimetype</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">file_handle</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">EXTERNAL_OBJECT_STORE_FILE_HANDLE</span><span class="p">,</span>
            <span class="s2">&quot;fileKey&quot;</span><span class="p">:</span> <span class="n">s3_file_key</span><span class="p">,</span>
            <span class="s2">&quot;fileName&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
            <span class="s2">&quot;contentMd5&quot;</span><span class="p">:</span> <span class="n">md5</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(),</span>
            <span class="s2">&quot;contentSize&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span><span class="p">,</span>
            <span class="s2">&quot;storageLocationId&quot;</span><span class="p">:</span> <span class="n">storage_location_id</span><span class="p">,</span>
            <span class="s2">&quot;contentType&quot;</span><span class="p">:</span> <span class="n">mimetype</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/externalFileHandle&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">file_handle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_external_s3_file_handle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">bucket_name</span><span class="p">,</span>
        <span class="n">s3_file_key</span><span class="p">,</span>
        <span class="n">file_path</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">storage_location_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">mimetype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">md5</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an external S3 file handle for e.g. a file that has been uploaded directly to</span>
<span class="sd">        an external S3 storage location.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            bucket_name: Name of the S3 bucket</span>
<span class="sd">            s3_file_key: S3 key of the uploaded object</span>
<span class="sd">            file_path: Local path of the uploaded file</span>
<span class="sd">            parent: Parent entity to create the file handle in, the file handle will be created</span>
<span class="sd">                    in the default storage location of the parent. Mutually exclusive with</span>
<span class="sd">                    storage_location_id</span>
<span class="sd">            storage_location_id: Explicit storage location id to create the file handle in, mutually exclusive</span>
<span class="sd">                    with parent</span>
<span class="sd">            mimetype: Mimetype of the file, if known</span>
<span class="sd">            md5: MD5 of the file, if known</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If neither parent nor storage_location_id is specified, or if both are specified.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">storage_location_id</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parent</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pass parent or storage_location_id, not both&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">parent</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;One of parent or storage_location_id is required&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">upload_destination</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getDefaultUploadDestination</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
            <span class="n">storage_location_id</span> <span class="o">=</span> <span class="n">upload_destination</span><span class="p">[</span><span class="s2">&quot;storageLocationId&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mimetype</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">file_handle</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">S3_FILE_HANDLE</span><span class="p">,</span>
            <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">s3_file_key</span><span class="p">,</span>
            <span class="s2">&quot;bucketName&quot;</span><span class="p">:</span> <span class="n">bucket_name</span><span class="p">,</span>
            <span class="s2">&quot;fileName&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
            <span class="s2">&quot;contentMd5&quot;</span><span class="p">:</span> <span class="n">md5</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(),</span>
            <span class="s2">&quot;contentSize&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span><span class="p">,</span>
            <span class="s2">&quot;storageLocationId&quot;</span><span class="p">:</span> <span class="n">storage_location_id</span><span class="p">,</span>
            <span class="s2">&quot;contentType&quot;</span><span class="p">:</span> <span class="n">mimetype</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/externalFileHandle/s3&quot;</span><span class="p">,</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">file_handle</span><span class="p">),</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_file_handle_as_creator</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">fileHandle</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve a fileHandle from the fileHandle service.</span>
<span class="sd">        Note: You must be the creator of the filehandle to use this method. Otherwise, an 403-Forbidden error will be raised.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            fileHandle: A fileHandle</span>

<span class="sd">        Returns:</span>
<span class="sd">            A fileHandle retrieved from the fileHandle service.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/fileHandle/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">id_of</span><span class="p">(</span><span class="n">fileHandle</span><span class="p">),)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_deleteFileHandle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileHandle</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the given file handle.</span>

<span class="sd">        Note: Only the user that created the FileHandle can delete it. Also, a FileHandle cannot be deleted if it is</span>
<span class="sd">        associated with a FileEntity or WikiPage.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            fileHandle: A fileHandle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/fileHandle/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">id_of</span><span class="p">(</span><span class="n">fileHandle</span><span class="p">),)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fileHandle</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                    SFTP                                  #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">_getDefaultUploadDestination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_entity</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/uploadDestination&quot;</span> <span class="o">%</span> <span class="n">id_of</span><span class="p">(</span><span class="n">parent_entity</span><span class="p">),</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getUserCredentials</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get user credentials for a specified URL by either looking in the configFile or querying the user.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            username: The username on server (optionally specified).</span>
<span class="sd">            password: The password for authentication on the server (optionally specified).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple of username, password.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get authentication information from configFile</span>
        <span class="n">parsedURL</span> <span class="o">=</span> <span class="n">urllib_urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">baseURL</span> <span class="o">=</span> <span class="n">parsedURL</span><span class="o">.</span><span class="n">scheme</span> <span class="o">+</span> <span class="s2">&quot;://&quot;</span> <span class="o">+</span> <span class="n">parsedURL</span><span class="o">.</span><span class="n">hostname</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">get_config_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">username</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">password</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">):</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span>
        <span class="c1"># If I still don&#39;t have a username and password prompt for it</span>
        <span class="k">if</span> <span class="n">username</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span>  <span class="c1"># Default to login name</span>
            <span class="c1"># Note that if we hit the following line from within nosetests in</span>
            <span class="c1"># Python 3, we get &quot;TypeError: bad argument type for built-in operation&quot;.</span>
            <span class="c1"># Luckily, this case isn&#39;t covered in our test suite!</span>
            <span class="n">user</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Username for </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">):&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="n">username</span><span class="p">))</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">username</span> <span class="k">if</span> <span class="n">user</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="k">else</span> <span class="n">user</span>
        <span class="k">if</span> <span class="n">password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Password for </span><span class="si">%s</span><span class="s2">:&quot;</span> <span class="o">%</span> <span class="n">baseURL</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span>

    <span class="c1">############################################</span>
    <span class="c1"># Project/Folder storage location settings #</span>
    <span class="c1">############################################</span>

    <span class="k">def</span> <span class="nf">createStorageLocationSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_type</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an IMMUTABLE storage location based on the specified type.</span>

<span class="sd">        For each storage_type, the following kwargs should be specified:</span>

<span class="sd">        **ExternalObjectStorage**: (S3-like (e.g. AWS S3 or Openstack) bucket not accessed by Synapse)</span>

<span class="sd">        - `endpointUrl`: endpoint URL of the S3 service (for example: &#39;https://s3.amazonaws.com&#39;)</span>
<span class="sd">        - `bucket`: the name of the bucket to use</span>

<span class="sd">        **ExternalS3Storage**: (Amazon S3 bucket accessed by Synapse)</span>

<span class="sd">        - `bucket`: the name of the bucket to use</span>

<span class="sd">        **ExternalStorage**: (SFTP or FTP storage location not accessed by Synapse)</span>

<span class="sd">        - `url`: the base URL for uploading to the external destination</span>
<span class="sd">        - `supportsSubfolders(optional)`: does the destination support creating subfolders under the base url</span>
<span class="sd">            (default: false)</span>

<span class="sd">        **ProxyStorage**: (a proxy server that controls access to a storage)</span>

<span class="sd">        - `secretKey`: The encryption key used to sign all pre-signed URLs used to communicate with the proxy.</span>
<span class="sd">        - `proxyUrl`: The HTTPS URL of the proxy used for upload and download.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            storage_type: The type of the StorageLocationSetting to create</span>
<span class="sd">            banner: (Optional) The optional banner to show every time a file is uploaded</span>
<span class="sd">            description: (Optional) The description to show the user when the user has to choose which upload destination to use</span>
<span class="sd">            kwargs: fields necessary for creation of the specified storage_type</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dict of the created StorageLocationSetting</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">upload_type_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;ExternalObjectStorage&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ExternalS3Storage&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ExternalStorage&quot;</span><span class="p">:</span> <span class="s2">&quot;SFTP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ProxyStorage&quot;</span><span class="p">:</span> <span class="s2">&quot;PROXYLOCAL&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">storage_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">upload_type_dict</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown storage_type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">storage_type</span><span class="p">)</span>

        <span class="c1"># ProxyStorageLocationSettings has an extra &#39;s&#39; at the end &gt;:(</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;org.sagebionetworks.repo.model.project.&quot;</span>
            <span class="o">+</span> <span class="n">storage_type</span>
            <span class="o">+</span> <span class="s2">&quot;LocationSetting&quot;</span>
            <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="n">storage_type</span> <span class="o">==</span> <span class="s2">&quot;ProxyStorage&quot;</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;uploadType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">upload_type_dict</span><span class="p">[</span><span class="n">storage_type</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="s2">&quot;/storageLocation&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">getMyStorageLocationSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_location_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a StorageLocationSetting by its id.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            storage_location_id: id of the StorageLocationSetting to retrieve.</span>
<span class="sd">                                    The corresponding StorageLocationSetting must have been created by this user.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dict describing the StorageLocationSetting retrieved by its id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/storageLocation/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">storage_location_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setStorageLocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">storage_location_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the storage location for a Project or Folder</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: A Project or Folder to which the StorageLocationSetting is set</span>
<span class="sd">            storage_location_id: A StorageLocation id or a list of StorageLocation ids. Pass in None for the default</span>
<span class="sd">                                    Synapse storage.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The created or updated settings as a dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">storage_location_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">storage_location_id</span> <span class="o">=</span> <span class="n">DEFAULT_STORAGE_LOCATION_ID</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">storage_location_id</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">storage_location_id</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">[</span><span class="n">storage_location_id</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="n">existing_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getProjectSetting</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;upload&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">existing_setting</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">existing_setting</span><span class="p">[</span><span class="s2">&quot;locations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">locations</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="s2">&quot;/projectSettings&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">existing_setting</span><span class="p">))</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getProjectSetting</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;upload&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">project_destination</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.project.UploadDestinationListSetting&quot;</span><span class="p">,</span>
                <span class="s2">&quot;settingsType&quot;</span><span class="p">:</span> <span class="s2">&quot;upload&quot;</span><span class="p">,</span>
                <span class="s2">&quot;locations&quot;</span><span class="p">:</span> <span class="n">locations</span><span class="p">,</span>
                <span class="s2">&quot;projectId&quot;</span><span class="p">:</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
                <span class="s2">&quot;/projectSettings&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">project_destination</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">getProjectSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">setting_type</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the ProjectSetting for a project.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            project: Project entity or its id as a string</span>
<span class="sd">            setting_type: Type of setting. Choose from:</span>

<span class="sd">                - `upload`</span>
<span class="sd">                - `external_sync`</span>
<span class="sd">                - `requester_pays`</span>

<span class="sd">        Returns:</span>
<span class="sd">            The ProjectSetting as a dict or None if no settings of the specified type exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">setting_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;upload&quot;</span><span class="p">,</span> <span class="s2">&quot;external_sync&quot;</span><span class="p">,</span> <span class="s2">&quot;requester_pays&quot;</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid project_type: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">setting_type</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="s2">&quot;/projectSettings/</span><span class="si">{projectId}</span><span class="s2">/type/</span><span class="si">{type}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">projectId</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">project</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="n">setting_type</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">response</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>  <span class="c1"># if no project setting, a empty string is returned as the response</span>

    <span class="k">def</span> <span class="nf">get_sts_storage_token</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">min_remaining_life</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get STS credentials for the given entity_id and permission, outputting it in the given format</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: The entity or entity id whose credentials are being returned</span>
<span class="sd">            permission: One of:</span>

<span class="sd">                - `read_only`</span>
<span class="sd">                - `read_write`</span>

<span class="sd">            output_format: One of:</span>

<span class="sd">                - `json`: the dictionary returned from the Synapse STS API including expiration</span>
<span class="sd">                - `boto`: a dictionary compatible with a boto session (aws_access_key_id, etc)</span>
<span class="sd">                - `shell`: output commands for exporting credentials appropriate for the detected shell</span>
<span class="sd">                - `bash`: output commands for exporting credentials into a bash shell</span>
<span class="sd">                - `cmd`: output commands for exporting credentials into a windows cmd shell</span>
<span class="sd">                - `powershell`: output commands for exporting credentials into a windows powershell</span>

<span class="sd">            min_remaining_life: The minimum allowable remaining life on a cached token to return. If a cached token</span>
<span class="sd">                                has left than this amount of time left a fresh token will be fetched</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">sts_transfer</span><span class="o">.</span><span class="n">get_sts_credentials</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span>
            <span class="n">permission</span><span class="p">,</span>
            <span class="n">output_format</span><span class="o">=</span><span class="n">output_format</span><span class="p">,</span>
            <span class="n">min_remaining_life</span><span class="o">=</span><span class="n">min_remaining_life</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_s3_storage_location</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">folder_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">bucket_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">base_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">sts_enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Folder</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a storage location in the given parent, either in the given folder or by creating a new</span>
<span class="sd">        folder in that parent with the given name. This will both create a StorageLocationSetting,</span>
<span class="sd">        and a ProjectSetting together, optionally creating a new folder in which to locate it,</span>
<span class="sd">        and optionally enabling this storage location for access via STS. If enabling an existing folder for STS,</span>
<span class="sd">        it must be empty.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            parent: The parent in which to locate the storage location (mutually exclusive with folder)</span>
<span class="sd">            folder_name: The name of a new folder to create (mutually exclusive with folder)</span>
<span class="sd">            folder: The existing folder in which to create the storage location (mutually exclusive with folder_name)</span>
<span class="sd">            bucket_name: The name of an S3 bucket, if this is an external storage location,</span>
<span class="sd">                            if None will use Synapse S3 storage</span>
<span class="sd">            base_key: The base key of within the bucket, None to use the bucket root,</span>
<span class="sd">                            only applicable if bucket_name is passed</span>
<span class="sd">            sts_enabled: Whether this storage location should be STS enabled</span>

<span class="sd">        Returns:</span>
<span class="sd">            A 3-tuple of the synapse Folder, a the storage location setting, and the project setting dictionaries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">folder_name</span> <span class="ow">and</span> <span class="n">parent</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;folder and  folder_name are mutually exclusive, only one should be passed&quot;</span>
                <span class="p">)</span>

            <span class="n">folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">Folder</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">folder_name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">))</span>

        <span class="k">elif</span> <span class="ow">not</span> <span class="n">folder</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;either folder or folder_name should be required&quot;</span><span class="p">)</span>

        <span class="n">storage_location_kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;uploadType&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;stsEnabled&quot;</span><span class="p">:</span> <span class="n">sts_enabled</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">bucket_name</span><span class="p">:</span>
            <span class="n">storage_location_kwargs</span><span class="p">[</span>
                <span class="s2">&quot;concreteType&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">EXTERNAL_S3_STORAGE_LOCATION_SETTING</span>
            <span class="n">storage_location_kwargs</span><span class="p">[</span><span class="s2">&quot;bucket&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bucket_name</span>
            <span class="k">if</span> <span class="n">base_key</span><span class="p">:</span>
                <span class="n">storage_location_kwargs</span><span class="p">[</span><span class="s2">&quot;baseKey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_key</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">storage_location_kwargs</span><span class="p">[</span>
                <span class="s2">&quot;concreteType&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">SYNAPSE_S3_STORAGE_LOCATION_SETTING</span>

        <span class="n">storage_location_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/storageLocation&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">storage_location_kwargs</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">storage_location_id</span> <span class="o">=</span> <span class="n">storage_location_setting</span><span class="p">[</span><span class="s2">&quot;storageLocationId&quot;</span><span class="p">]</span>
        <span class="n">project_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setStorageLocation</span><span class="p">(</span>
            <span class="n">folder</span><span class="p">,</span>
            <span class="n">storage_location_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">folder</span><span class="p">,</span> <span class="n">storage_location_setting</span><span class="p">,</span> <span class="n">project_setting</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                   CRUD for Evaluations                   #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">getEvaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets an Evaluation object from Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            id: The ID of the [synapseclient.evaluation.Evaluation][] to return.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An [synapseclient.evaluation.Evaluation][] object</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Creating an Evaluation instance</span>

<span class="sd">                evaluation = syn.getEvaluation(2005090)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">evaluation_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">Evaluation</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="n">evaluation_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Evaluation</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="c1"># TODO: Should this be combined with getEvaluation?</span>
    <span class="k">def</span> <span class="nf">getEvaluationByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets an Evaluation object from Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            Name: The name of the [synapseclient.evaluation.Evaluation][] to return.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An [synapseclient.evaluation.Evaluation][] object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">Evaluation</span><span class="o">.</span><span class="n">getByNameURI</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Evaluation</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">getEvaluationByContentSource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a generator over evaluations that derive their content from the given entity</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: The [synapseclient.entity.Project][] whose Evaluations are to be fetched.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator over [synapseclient.evaluation.Evaluation][] objects for the given [synapseclient.entity.Project][].</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">entityId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/evaluation&quot;</span> <span class="o">%</span> <span class="n">entityId</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">Evaluation</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_findTeam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Team</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve a Teams matching the supplied name fragment</span>

<span class="sd">        Arguments:</span>
<span class="sd">            name: A team name</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator that yields objects of type [Team][synapseclient.team.Team]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="s2">&quot;/teams?fragment=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">Team</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_find_teams_for_principal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">principal_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Team</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve a list of teams for the matching principal ID. If the principalId that is passed in is a team itself,</span>
<span class="sd">        or not found, this will return a generator that yields no results.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            principal_id: Identifier of a user or group.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator that yields objects of type [Team][synapseclient.team.Team]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/user/</span><span class="si">{</span><span class="n">principal_id</span><span class="si">}</span><span class="s2">/team&quot;</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">Team</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_team</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">can_public_join</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">can_request_membership</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Team</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new team.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            name: The name of the team to create.</span>
<span class="sd">            description: A description of the team.</span>
<span class="sd">            icon: The FileHandleID of the icon to be used for the team.</span>
<span class="sd">            canPublicJoin: Whether the team can be joined by anyone. Defaults to False.</span>
<span class="sd">            canRequestMembership: Whether the team can request membership. Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An object of type [synapseclient.team.Team][]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
            <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="n">icon</span><span class="p">,</span>
            <span class="s2">&quot;canPublicJoin&quot;</span><span class="p">:</span> <span class="n">can_public_join</span><span class="p">,</span>
            <span class="s2">&quot;canRequestMembership&quot;</span><span class="p">:</span> <span class="n">can_request_membership</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Team</span><span class="p">(</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
                <span class="s2">&quot;/team&quot;</span><span class="p">,</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request_body</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_team</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a team.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            id: The ID of the team to delete.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/team/</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getTeam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Team</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds a team with a given ID or name.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            id: The ID or name of the team or a Team object to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An object of type [synapseclient.team.Team][]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Retrieves team id</span>
        <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">teamid</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findTeam</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">team</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                        <span class="n">teamid</span> <span class="o">=</span> <span class="n">team</span><span class="o">.</span><span class="n">id</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t find team &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">teamid</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t find team &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">teamid</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Team</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/team/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">teamid</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">getTeamMembers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">team</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Team</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n">TeamMember</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Lists the members of the given team.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator over [synapseclient.team.TeamMember][] objects.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="s2">&quot;/teamMembers/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">))):</span>
            <span class="k">yield</span> <span class="n">TeamMember</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_docker_digest</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">docker_tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get matching Docker sha-digest of a DockerRepository given a Docker tag</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:      Synapse ID or Entity of Docker repository</span>
<span class="sd">            docker_tag:  Docker tag</span>

<span class="sd">        Returns:</span>
<span class="sd">            Docker digest matching Docker tag</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entityid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{entityId}</span><span class="s2">/dockerTag&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entityId</span><span class="o">=</span><span class="n">entityid</span><span class="p">)</span>

        <span class="n">docker_commits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="n">docker_digest</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">commit</span> <span class="ow">in</span> <span class="n">docker_commits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">docker_tag</span> <span class="o">==</span> <span class="n">commit</span><span class="p">[</span><span class="s2">&quot;tag&quot;</span><span class="p">]:</span>
                <span class="n">docker_digest</span> <span class="o">=</span> <span class="n">commit</span><span class="p">[</span><span class="s2">&quot;digest&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">docker_digest</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Docker tag </span><span class="si">{docker_tag}</span><span class="s2"> not found.  Please specify a &quot;</span>
                <span class="s2">&quot;docker tag that exists. &#39;latest&#39; is used as &quot;</span>
                <span class="s2">&quot;default.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">docker_tag</span><span class="o">=</span><span class="n">docker_tag</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">docker_digest</span>

    <span class="k">def</span> <span class="nf">get_team_open_invitations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">team</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Team</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the open requests submitted to a Team</span>
<span class="sd">        &lt;https://rest-docs.synapse.org/rest/GET/team/id/openInvitation.html&gt;</span>

<span class="sd">        Arguments:</span>
<span class="sd">            team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Generator of MembershipRequest dictionaries</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="s2">&quot;/team/</span><span class="si">{team}</span><span class="s2">/openInvitation&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="n">teamid</span><span class="p">)</span>
        <span class="n">open_requests</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">open_requests</span>

    <span class="k">def</span> <span class="nf">get_membership_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="n">team</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a user&#39;s Team Membership Status bundle.</span>
<span class="sd">        &lt;https://rest-docs.synapse.org/rest/GET/team/id/member/principalId/membershipStatus.html&gt;</span>

<span class="sd">        Arguments:</span>
<span class="sd">            user: Synapse user ID</span>
<span class="sd">            team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict of TeamMembershipStatus</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="s2">&quot;/team/</span><span class="si">{team}</span><span class="s2">/member/</span><span class="si">{user}</span><span class="s2">/membershipStatus&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">team</span><span class="o">=</span><span class="n">teamid</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">userid</span>
        <span class="p">)</span>
        <span class="n">membership_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">membership_status</span>

    <span class="k">def</span> <span class="nf">_delete_membership_invitation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invitationid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete an invitation Note: The client must be an administrator of the</span>
<span class="sd">        Team referenced by the invitation or the invitee to make this request.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            invitationid: Open invitation id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="s2">&quot;/membershipInvitation/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">invitationid</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">send_membership_invitation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">teamId</span><span class="p">,</span> <span class="n">inviteeId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inviteeEmail</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a membership invitation and send an email notification</span>
<span class="sd">        to the invitee.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            teamId: Synapse teamId</span>
<span class="sd">            inviteeId: Synapse username or profile id of user</span>
<span class="sd">            inviteeEmail: Email of user</span>
<span class="sd">            message: Additional message for the user getting invited to the</span>
<span class="sd">                     team.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MembershipInvitation</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">invite_request</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;teamId&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">teamId</span><span class="p">),</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">message</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">inviteeEmail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">invite_request</span><span class="p">[</span><span class="s2">&quot;inviteeEmail&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">inviteeEmail</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inviteeId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">invite_request</span><span class="p">[</span><span class="s2">&quot;inviteeId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">inviteeId</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/membershipInvitation&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">invite_request</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">invite_to_team</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">team</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Team</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">inviteeEmail</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invite user to a Synapse team via Synapse username or email</span>
<span class="sd">        (choose one or the other)</span>

<span class="sd">        Arguments:</span>
<span class="sd">            syn: Synapse object</span>
<span class="sd">            team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>
<span class="sd">            user: Synapse username or profile id of user</span>
<span class="sd">            inviteeEmail: Email of user</span>
<span class="sd">            message: Additional message for the user getting invited to the team.</span>
<span class="sd">            force: If an open invitation exists for the invitee, the old invite will be cancelled.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MembershipInvitation or None if user is already a member</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Throw error if both user and email is specified and if both not</span>
        <span class="c1"># specified</span>
        <span class="n">id_email_specified</span> <span class="o">=</span> <span class="n">inviteeEmail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">id_email_notspecified</span> <span class="o">=</span> <span class="n">inviteeEmail</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">id_email_specified</span> <span class="ow">or</span> <span class="n">id_email_notspecified</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Must specify either &#39;user&#39; or &#39;inviteeEmail&#39;&quot;</span><span class="p">)</span>

        <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
        <span class="n">is_member</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">open_invitations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_team_open_invitations</span><span class="p">(</span><span class="n">teamid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">inviteeId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">(</span><span class="n">user</span><span class="p">)[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
            <span class="n">membership_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_membership_status</span><span class="p">(</span><span class="n">inviteeId</span><span class="p">,</span> <span class="n">teamid</span><span class="p">)</span>
            <span class="n">is_member</span> <span class="o">=</span> <span class="n">membership_status</span><span class="p">[</span><span class="s2">&quot;isMember&quot;</span><span class="p">]</span>
            <span class="n">open_invites_to_user</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">invitation</span>
                <span class="k">for</span> <span class="n">invitation</span> <span class="ow">in</span> <span class="n">open_invitations</span>
                <span class="k">if</span> <span class="n">invitation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inviteeId&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">inviteeId</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">inviteeId</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">open_invites_to_user</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">invitation</span>
                <span class="k">for</span> <span class="n">invitation</span> <span class="ow">in</span> <span class="n">open_invitations</span>
                <span class="k">if</span> <span class="n">invitation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inviteeEmail&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">inviteeEmail</span>
            <span class="p">]</span>
        <span class="c1"># Only invite if the invitee is not a member and</span>
        <span class="c1"># if invitee doesn&#39;t have an open invitation unless force=True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_member</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">open_invites_to_user</span> <span class="ow">or</span> <span class="n">force</span><span class="p">):</span>
            <span class="c1"># Delete all old invitations</span>
            <span class="k">for</span> <span class="n">invite</span> <span class="ow">in</span> <span class="n">open_invites_to_user</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_delete_membership_invitation</span><span class="p">(</span><span class="n">invite</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_membership_invitation</span><span class="p">(</span>
                <span class="n">teamid</span><span class="p">,</span>
                <span class="n">inviteeId</span><span class="o">=</span><span class="n">inviteeId</span><span class="p">,</span>
                <span class="n">inviteeEmail</span><span class="o">=</span><span class="n">inviteeEmail</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">is_member</span><span class="p">:</span>
            <span class="n">not_sent_reason</span> <span class="o">=</span> <span class="s2">&quot;invitee is already a member&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">not_sent_reason</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;invitee already has an open invitation &quot;</span>
                <span class="s2">&quot;Set force=True to send new invite.&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No invitation sent: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">not_sent_reason</span><span class="p">))</span>
        <span class="c1"># Return None if no invite is sent.</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">evaluation</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">team</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">submitterAlias</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">teamName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">dockerTag</span><span class="o">=</span><span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Submit an Entity for [evaluation][synapseclient.evaluation.Evaluation].</span>

<span class="sd">        Arguments:</span>
<span class="sd">            evalation: Evaluation queue to submit to</span>
<span class="sd">            entity: The Entity containing the Submissions</span>
<span class="sd">            name: A name for this submission. In the absent of this parameter, the entity name will be used.</span>
<span class="sd">                    (Optional) A [synapseclient.team.Team][] object, ID or name of a Team that is registered for the challenge</span>
<span class="sd">            team: (optional) A [synapseclient.team.Team][] object, ID or name of a Team that is registered for the challenge</span>
<span class="sd">            silent: Set to True to suppress output.</span>
<span class="sd">            submitterAlias: (optional) A nickname, possibly for display in leaderboards in place of the submitter&#39;s name</span>
<span class="sd">            teamName: (deprecated) A synonym for submitterAlias</span>
<span class="sd">            dockerTag: (optional) The Docker tag must be specified if the entity is a DockerRepository.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A [synapseclient.evaluation.Submission][] object</span>


<span class="sd">        In the case of challenges, a team can optionally be provided to give credit to members of the team that</span>
<span class="sd">        contributed to the submission. The team must be registered for the challenge with which the given evaluation is</span>
<span class="sd">        associated. The caller must be a member of the submitting team.</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Getting and submitting an evaluation</span>

<span class="sd">                evaluation = syn.getEvaluation(123)</span>
<span class="sd">                entity = syn.get(&#39;syn456&#39;)</span>
<span class="sd">                submission = syn.submit(evaluation, entity, name=&#39;Our Final Answer&#39;, team=&#39;Blue Team&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">require_param</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="s2">&quot;evaluation&quot;</span><span class="p">)</span>
        <span class="n">require_param</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;entity&quot;</span><span class="p">)</span>

        <span class="n">evaluation_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>

        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">synapseclient</span><span class="o">.</span><span class="n">DockerRepository</span><span class="p">):</span>
            <span class="c1"># Edge case if dockerTag is specified as None</span>
            <span class="k">if</span> <span class="n">dockerTag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;A dockerTag is required to submit a DockerEntity. Cannot be None&quot;</span>
                <span class="p">)</span>
            <span class="n">docker_repository</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;repositoryName&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">docker_repository</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;versionNumber&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1"># version defaults to 1 to hack around required version field and allow submission of files/folders</span>
        <span class="n">entity_version</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># default name of submission to name of entity</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

        <span class="n">team_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">team</span><span class="p">:</span>
            <span class="n">team</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTeam</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
            <span class="n">team_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>

        <span class="n">contributors</span><span class="p">,</span> <span class="n">eligibility_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_contributors</span><span class="p">(</span><span class="n">evaluation_id</span><span class="p">,</span> <span class="n">team</span><span class="p">)</span>

        <span class="c1"># for backward compatible until we remove supports for teamName</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">submitterAlias</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">teamName</span><span class="p">:</span>
                <span class="n">submitterAlias</span> <span class="o">=</span> <span class="n">teamName</span>
            <span class="k">elif</span> <span class="n">team</span> <span class="ow">and</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">team</span><span class="p">:</span>
                <span class="n">submitterAlias</span> <span class="o">=</span> <span class="n">team</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">synapseclient</span><span class="o">.</span><span class="n">DockerRepository</span><span class="p">):</span>
            <span class="n">docker_digest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_docker_digest</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">dockerTag</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">docker_digest</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">submission</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;evaluationId&quot;</span><span class="p">:</span> <span class="n">evaluation_id</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;entityId&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">,</span>
            <span class="s2">&quot;versionNumber&quot;</span><span class="p">:</span> <span class="n">entity_version</span><span class="p">,</span>
            <span class="s2">&quot;dockerDigest&quot;</span><span class="p">:</span> <span class="n">docker_digest</span><span class="p">,</span>
            <span class="s2">&quot;dockerRepositoryName&quot;</span><span class="p">:</span> <span class="n">docker_repository</span><span class="p">,</span>
            <span class="s2">&quot;teamId&quot;</span><span class="p">:</span> <span class="n">team_id</span><span class="p">,</span>
            <span class="s2">&quot;contributors&quot;</span><span class="p">:</span> <span class="n">contributors</span><span class="p">,</span>
            <span class="s2">&quot;submitterAlias&quot;</span><span class="p">:</span> <span class="n">submitterAlias</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">submitted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_submit</span><span class="p">(</span><span class="n">submission</span><span class="p">,</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">],</span> <span class="n">eligibility_hash</span><span class="p">)</span>

        <span class="c1"># if we want to display the receipt message, we need the full object</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">silent</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">)):</span>
                <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getEvaluation</span><span class="p">(</span><span class="n">evaluation_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;submissionReceiptMessage&quot;</span> <span class="ow">in</span> <span class="n">evaluation</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="s2">&quot;submissionReceiptMessage&quot;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">submitted</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">submission</span><span class="p">,</span> <span class="n">entity_etag</span><span class="p">,</span> <span class="n">eligibility_hash</span><span class="p">):</span>
        <span class="n">require_param</span><span class="p">(</span><span class="n">submission</span><span class="p">,</span> <span class="s2">&quot;submission&quot;</span><span class="p">)</span>
        <span class="n">require_param</span><span class="p">(</span><span class="n">entity_etag</span><span class="p">,</span> <span class="s2">&quot;entity_etag&quot;</span><span class="p">)</span>
        <span class="c1"># URI requires the etag of the entity and, in the case of a team submission, requires an eligibilityStateHash</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/evaluation/submission?etag=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">entity_etag</span>
        <span class="k">if</span> <span class="n">eligibility_hash</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;&amp;submissionEligibilityHash=</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">eligibility_hash</span><span class="p">)</span>
        <span class="n">submitted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">submission</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">submitted</span>

    <span class="k">def</span> <span class="nf">_get_contributors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evaluation_id</span><span class="p">,</span> <span class="n">team</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">evaluation_id</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">team</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">team_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
        <span class="c1"># see &lt;https://rest-docs.synapse.org/rest/GET/evaluation/evalId/team/id/submissionEligibility.html&gt;</span>
        <span class="n">eligibility</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="s2">&quot;/evaluation/</span><span class="si">{evalId}</span><span class="s2">/team/</span><span class="si">{id}</span><span class="s2">/submissionEligibility&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">evalId</span><span class="o">=</span><span class="n">evaluation_id</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">team_id</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">eligibility</span><span class="p">[</span><span class="s2">&quot;teamEligibility&quot;</span><span class="p">][</span><span class="s2">&quot;isEligible&quot;</span><span class="p">]:</span>
            <span class="c1"># Check team eligibility and raise an exception if not eligible</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">eligibility</span><span class="p">[</span><span class="s2">&quot;teamEligibility&quot;</span><span class="p">][</span><span class="s2">&quot;isRegistered&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                    <span class="s1">&#39;Team &quot;</span><span class="si">{team}</span><span class="s1">&quot; is not registered.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="n">team</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">eligibility</span><span class="p">[</span><span class="s2">&quot;teamEligibility&quot;</span><span class="p">][</span><span class="s2">&quot;isQuotaFilled&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                    <span class="s1">&#39;Team &quot;</span><span class="si">{team}</span><span class="s1">&quot; has already submitted the full quota of submissions.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">team</span><span class="o">=</span><span class="n">team</span><span class="o">.</span><span class="n">name</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span><span class="s1">&#39;Team &quot;</span><span class="si">{team}</span><span class="s1">&quot; is not eligible.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="n">team</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="c1"># Include all team members who are eligible.</span>
        <span class="n">contributors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;principalId&quot;</span><span class="p">:</span> <span class="n">member</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]}</span>
            <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">eligibility</span><span class="p">[</span><span class="s2">&quot;membersEligibility&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">member</span><span class="p">[</span><span class="s2">&quot;isEligible&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">member</span><span class="p">[</span><span class="s2">&quot;hasConflictingSubmission&quot;</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">contributors</span><span class="p">,</span> <span class="n">eligibility</span><span class="p">[</span><span class="s2">&quot;eligibilityStateHash&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_allowParticipation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">evaluation</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">user</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">rights</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;READ&quot;</span><span class="p">,</span> <span class="s2">&quot;PARTICIPATE&quot;</span><span class="p">,</span> <span class="s2">&quot;SUBMIT&quot;</span><span class="p">,</span> <span class="s2">&quot;UPDATE_SUBMISSION&quot;</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Grants the given user the minimal access rights to join and submit to an Evaluation.</span>
<span class="sd">        Note: The specification of this method has not been decided yet, so the method is likely to change in future.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            evaluation: An Evaluation object or Evaluation ID</span>
<span class="sd">            user:       Either a user group or the principal ID of a user to grant rights to.</span>

<span class="sd">                - To allow all users, use &quot;PUBLIC&quot;.</span>
<span class="sd">                - To allow authenticated users, use &quot;AUTHENTICATED_USERS&quot;.</span>

<span class="sd">            rights:     The access rights to give to the users.</span>

<span class="sd">                - `READ`</span>
<span class="sd">                - `PARTICIPATE`</span>
<span class="sd">                - `SUBMIT`</span>
<span class="sd">                - `UPDATE_SUBMISSION`</span>

<span class="sd">        Raises:</span>
<span class="sd">            SynapseError: If the user does not exist</span>

<span class="sd">        Returns:</span>
<span class="sd">            The new or updated ACL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check to see if the user is an ID or group</span>
        <span class="n">userId</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># TODO: is there a better way to differentiate between a userID and a group name?</span>
            <span class="c1"># What if a group is named with just numbers?</span>
            <span class="n">userId</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

            <span class="c1"># Verify that the user exists</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">(</span><span class="n">userId</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span><span class="s2">&quot;The user (</span><span class="si">%s</span><span class="s2">) does not exist&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">userId</span><span class="p">))</span>
                <span class="k">raise</span>

        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># Fetch the ID of the user group</span>
            <span class="n">userId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getUserbyPrincipalIdOrName</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">):</span>
            <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getEvaluation</span><span class="p">(</span><span class="n">id_of</span><span class="p">(</span><span class="n">evaluation</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setPermissions</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">userId</span><span class="p">,</span> <span class="n">accessType</span><span class="o">=</span><span class="n">rights</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getSubmissions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arguments:</span>
<span class="sd">            evaluation: Evaluation to get submissions from.</span>
<span class="sd">            status: Optionally filter submissions for a specific status.</span>
<span class="sd">                    One of:</span>

<span class="sd">                - `OPEN`</span>
<span class="sd">                - `CLOSED`</span>
<span class="sd">                - `SCORED`</span>
<span class="sd">                - `INVALID`</span>
<span class="sd">                - `VALIDATED`</span>
<span class="sd">                - `EVALUATION_IN_PROGRESS`</span>
<span class="sd">                - `RECEIVED`</span>
<span class="sd">                - `REJECTED`</span>
<span class="sd">                - `ACCEPTED`</span>

<span class="sd">            myOwn: Determines if only your Submissions should be fetched.</span>
<span class="sd">                     Defaults to False (all Submissions)</span>
<span class="sd">            limit: Limits the number of submissions in a single response.</span>
<span class="sd">                        Because this method returns a generator and repeatedly</span>
<span class="sd">                        fetches submissions, this argument is limiting the</span>
<span class="sd">                        size of a single request and NOT the number of sub-</span>
<span class="sd">                        missions returned in total.</span>
<span class="sd">            offset: Start iterating at a submission offset from the first submission.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator over [synapseclient.evaluation.Submission][] objects for an Evaluation</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Print submissions</span>

<span class="sd">                for submission in syn.getSubmissions(1234567):</span>
<span class="sd">                    print(submission[&#39;entityId&#39;])</span>

<span class="sd">        See:</span>

<span class="sd">        - [synapseclient.evaluation][]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">evaluation_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/evaluation/</span><span class="si">%s</span><span class="s2">/submission</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">myOwn</span> <span class="k">else</span> <span class="s2">&quot;/all&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;?status=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">status</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getSubmissionBundles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">evaluation</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">status</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">myOwn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Submission</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the requesting user&#39;s bundled Submissions and SubmissionStatuses to a specified Evaluation.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            evaluation: Evaluation to get submissions from.</span>
<span class="sd">            status:     Optionally filter submissions for a specific status.</span>
<span class="sd">                        One of {OPEN, CLOSED, SCORED, INVALID}</span>
<span class="sd">            myOwn:      Determines if only your Submissions should be fetched.</span>
<span class="sd">                        Defaults to False (all Submissions)</span>
<span class="sd">            limit:      Limits the number of submissions coming back from the</span>
<span class="sd">                        service in a single response.</span>
<span class="sd">            offset:     Start iterating at a submission offset from the first</span>
<span class="sd">                        submission.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator over dictionaries with keys &#39;submission&#39; and &#39;submissionStatus&#39;.</span>

<span class="sd">        Example:</span>

<span class="sd">            for sb in syn._getSubmissionBundles(1234567):</span>
<span class="sd">                print(sb[&#39;submission&#39;][&#39;name&#39;],</span>
<span class="sd">                      sb[&#39;submission&#39;][&#39;submitterAlias&#39;],</span>
<span class="sd">                      sb[&#39;submissionStatus&#39;][&#39;status&#39;],</span>
<span class="sd">                      sb[&#39;submissionStatus&#39;][&#39;score&#39;])</span>

<span class="sd">        This may later be changed to return objects, pending some thought on how submissions along with related status</span>
<span class="sd">        and annotations should be represented in the clients.</span>

<span class="sd">        See: [synapseclient.evaluation][]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">evaluation_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;/evaluation/</span><span class="si">%s</span><span class="s2">/submission/bundle</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">evaluation_id</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">myOwn</span> <span class="k">else</span> <span class="s2">&quot;/all&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">+=</span> <span class="s2">&quot;?status=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">status</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getSubmissionBundles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve submission bundles (submission and submissions status) for an evaluation queue, optionally filtered by</span>
<span class="sd">        submission status and/or owner.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            evaluation: Evaluation to get submissions from.</span>
<span class="sd">            status:     Optionally filter submissions for a specific status.</span>
<span class="sd">                        One of:</span>

<span class="sd">                - `OPEN`</span>
<span class="sd">                - `CLOSED`</span>
<span class="sd">                - `SCORED`</span>
<span class="sd">                - `INVALID`</span>

<span class="sd">            myOwn:      Determines if only your Submissions should be fetched.</span>
<span class="sd">                        Defaults to False (all Submissions)</span>
<span class="sd">            limit:      Limits the number of submissions coming back from the</span>
<span class="sd">                        service in a single response.</span>
<span class="sd">            offset:     Start iterating at a submission offset from the first submission.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator over tuples containing a [synapseclient.evaluation.Submission][] and a [synapseclient.evaluation.SubmissionStatus][].</span>

<span class="sd">        Example: Using this function</span>
<span class="sd">            Loop over submissions</span>

<span class="sd">                for submission, status in syn.getSubmissionBundles(evaluation):</span>
<span class="sd">                    print(submission.name,</span>
<span class="sd">                          submission.submitterAlias,</span>
<span class="sd">                          status.status,</span>
<span class="sd">                          status.score)</span>

<span class="sd">        This may later be changed to return objects, pending some thought on how submissions along with related status</span>
<span class="sd">        and annotations should be represented in the clients.</span>

<span class="sd">        See:</span>
<span class="sd">        - [synapseclient.evaluation][]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getSubmissionBundles</span><span class="p">(</span>
            <span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="n">myOwn</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span>
        <span class="p">):</span>
            <span class="k">yield</span> <span class="p">(</span>
                <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;submission&quot;</span><span class="p">]),</span>
                <span class="n">SubmissionStatus</span><span class="p">(</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;submissionStatus&quot;</span><span class="p">]),</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_GET_paginated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get paginated results</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri:     A URI that returns paginated results</span>
<span class="sd">            limit:   How many records should be returned per request</span>
<span class="sd">            offset:  At what record offset from the first should iteration start</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator over some paginated results</span>

<span class="sd">        The limit parameter is set at 20 by default. Using a larger limit results in fewer calls to the service, but if</span>
<span class="sd">        responses are large enough to be a burden on the service they may be truncated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prev_num_results</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
        <span class="k">while</span> <span class="n">prev_num_results</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_limit_and_offset</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">page</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;results&quot;</span> <span class="ow">in</span> <span class="n">page</span> <span class="k">else</span> <span class="n">page</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
            <span class="n">prev_num_results</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">yield</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_POST_paginated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get paginated results</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri:     A URI that returns paginated results</span>
<span class="sd">            body:    POST request payload</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator over some paginated results</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">next_page_token</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">body</span><span class="p">[</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_page_token</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">next_page_token</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]:</span>
                <span class="k">yield</span> <span class="n">item</span>
            <span class="k">if</span> <span class="n">next_page_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">def</span> <span class="nf">getSubmission</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets a [synapseclient.evaluation.Submission][] object by its id.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            id: The id of the submission to retrieve</span>

<span class="sd">        Returns:</span>
<span class="sd">            A [synapseclient.evaluation.Submission][] object</span>

<span class="sd">        See:</span>

<span class="sd">        - [synapseclient.Synapse.get][] for information</span>
<span class="sd">             on the *downloadFile*, *downloadLocation*, and *ifcollision* parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">submission_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">Submission</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="n">submission_id</span><span class="p">)</span>
        <span class="n">submission</span> <span class="o">=</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

        <span class="c1"># Pre-fetch the Entity tied to the Submission, if there is one</span>
        <span class="k">if</span> <span class="s2">&quot;entityId&quot;</span> <span class="ow">in</span> <span class="n">submission</span> <span class="ow">and</span> <span class="n">submission</span><span class="p">[</span><span class="s2">&quot;entityId&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">entityBundleJSON</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">submission</span><span class="p">[</span><span class="s2">&quot;entityBundleJSON&quot;</span><span class="p">])</span>

            <span class="c1"># getWithEntityBundle expects a bundle services v2 style</span>
            <span class="c1"># annotations dict, but the evaluations API may return</span>
            <span class="c1"># an older format annotations object in the encoded JSON</span>
            <span class="c1"># depending on when the original submission was made.</span>
            <span class="n">annotations</span> <span class="o">=</span> <span class="n">entityBundleJSON</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;annotations&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">annotations</span><span class="p">:</span>
                <span class="n">entityBundleJSON</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">convert_old_annotation_json</span><span class="p">(</span>
                    <span class="n">annotations</span>
                <span class="p">)</span>

            <span class="n">related</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getWithEntityBundle</span><span class="p">(</span>
                <span class="n">entityBundle</span><span class="o">=</span><span class="n">entityBundleJSON</span><span class="p">,</span>
                <span class="n">entity</span><span class="o">=</span><span class="n">submission</span><span class="p">[</span><span class="s2">&quot;entityId&quot;</span><span class="p">],</span>
                <span class="n">submission</span><span class="o">=</span><span class="n">submission_id</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">submission</span><span class="o">.</span><span class="n">entity</span> <span class="o">=</span> <span class="n">related</span>
            <span class="n">submission</span><span class="o">.</span><span class="n">filePath</span> <span class="o">=</span> <span class="n">related</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">submission</span>

    <span class="k">def</span> <span class="nf">getSubmissionStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">submission</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Downloads the status of a Submission.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            submission: The submission to lookup</span>

<span class="sd">        Returns:</span>
<span class="sd">            A [synapseclient.evaluation.SubmissionStatus][] object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">submission_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">submission</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">SubmissionStatus</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="n">submission_id</span><span class="p">)</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SubmissionStatus</span><span class="p">(</span><span class="o">**</span><span class="n">val</span><span class="p">)</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                      CRUD for Wikis                      #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">getWiki</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">subpageId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a [synapseclient.wiki.Wiki][] object from Synapse. Uses wiki2 API which supports versioning.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            owner: The entity to which the Wiki is attached</span>
<span class="sd">            subpageId: The id of the specific sub-page or None to get the root Wiki page</span>
<span class="sd">            version: The version of the page to retrieve or None to retrieve the latest</span>

<span class="sd">        Returns:</span>
<span class="sd">            A [synapseclient.wiki.Wiki][] object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{ownerId}</span><span class="s2">/wiki2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ownerId</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">owner</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">subpageId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;/</span><span class="si">{wikiId}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wikiId</span><span class="o">=</span><span class="n">subpageId</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;?wikiVersion=</span><span class="si">{version}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

        <span class="n">wiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="n">wiki</span> <span class="o">=</span> <span class="n">Wiki</span><span class="p">(</span><span class="o">**</span><span class="n">wiki</span><span class="p">)</span>

        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">markdownFileHandleId</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">cache_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get_cache_dir</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">markdownFileHandleId</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
                <span class="n">coroutine</span><span class="o">=</span><span class="n">download_by_file_handle</span><span class="p">(</span>
                    <span class="n">file_handle_id</span><span class="o">=</span><span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;markdownFileHandleId&quot;</span><span class="p">],</span>
                    <span class="n">synapse_id</span><span class="o">=</span><span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
                    <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;WikiMarkdown&quot;</span><span class="p">,</span>
                    <span class="n">destination</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">cache_dir</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">markdownFileHandleId</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.md&quot;</span>
                    <span class="p">),</span>
                <span class="p">),</span>
                <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">gzip</span>

            <span class="k">with</span> <span class="n">gzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">markdown</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">markdown</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

        <span class="n">wiki</span><span class="o">.</span><span class="n">markdown</span> <span class="o">=</span> <span class="n">markdown</span>
        <span class="n">wiki</span><span class="o">.</span><span class="n">markdown_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">return</span> <span class="n">wiki</span>

    <span class="k">def</span> <span class="nf">getWikiHeaders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the headers of all Wikis belonging to the owner (the entity to which the Wiki is attached).</span>

<span class="sd">        Arguments:</span>
<span class="sd">            owner: An Entity</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of Objects with three fields: id, title and parentId.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/wikiheadertree&quot;</span> <span class="o">%</span> <span class="n">id_of</span><span class="p">(</span><span class="n">owner</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">DictObject</span><span class="p">(</span><span class="o">**</span><span class="n">header</span><span class="p">)</span> <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_storeWiki</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wiki</span><span class="p">:</span> <span class="n">Wiki</span><span class="p">,</span> <span class="n">createOrUpdate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Wiki</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stores or updates the given Wiki.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            wiki:           A Wiki object</span>
<span class="sd">            createOrUpdate: Indicates whether the method should automatically perform an update if the &#39;obj&#39;</span>
<span class="sd">                            conflicts with an existing Synapse object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An updated Wiki object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure the file handle field is a list</span>
        <span class="k">if</span> <span class="s2">&quot;attachmentFileHandleIds&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">wiki</span><span class="p">:</span>
            <span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;attachmentFileHandleIds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Convert all attachments into file handles</span>
        <span class="k">if</span> <span class="n">wiki</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attachments&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">attachment</span> <span class="ow">in</span> <span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;attachments&quot;</span><span class="p">]:</span>
                <span class="n">fileHandle</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
                    <span class="n">upload_synapse_s3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attachment</span><span class="p">),</span> <span class="bp">self</span>
                <span class="p">)</span>
                <span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;attachmentFileHandleIds&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;attachments&quot;</span><span class="p">]</span>

        <span class="c1"># Perform an update if the Wiki has an ID</span>
        <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">wiki</span><span class="p">:</span>
            <span class="n">updated_wiki</span> <span class="o">=</span> <span class="n">Wiki</span><span class="p">(</span>
                <span class="n">owner</span><span class="o">=</span><span class="n">wiki</span><span class="o">.</span><span class="n">ownerId</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">putURI</span><span class="p">(),</span> <span class="n">wiki</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
            <span class="p">)</span>

        <span class="c1"># Perform a create if the Wiki has no ID</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">updated_wiki</span> <span class="o">=</span> <span class="n">Wiki</span><span class="p">(</span>
                    <span class="n">owner</span><span class="o">=</span><span class="n">wiki</span><span class="o">.</span><span class="n">ownerId</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">postURI</span><span class="p">(),</span> <span class="n">wiki</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="c1"># If already present we get an unhelpful SQL error</span>
                <span class="k">if</span> <span class="n">createOrUpdate</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="p">(</span>
                        <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">400</span>
                        <span class="ow">and</span> <span class="s2">&quot;DuplicateKeyException&quot;</span> <span class="ow">in</span> <span class="n">err</span><span class="o">.</span><span class="n">message</span>
                    <span class="p">)</span>
                    <span class="ow">or</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">409</span>
                <span class="p">):</span>
                    <span class="n">existing_wiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getWiki</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">ownerId</span><span class="p">)</span>

                    <span class="c1"># overwrite everything except for the etag (this will keep unmodified fields in the existing wiki)</span>
                    <span class="n">etag</span> <span class="o">=</span> <span class="n">existing_wiki</span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">]</span>
                    <span class="n">existing_wiki</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">wiki</span><span class="p">)</span>
                    <span class="n">existing_wiki</span><span class="o">.</span><span class="n">etag</span> <span class="o">=</span> <span class="n">etag</span>

                    <span class="n">updated_wiki</span> <span class="o">=</span> <span class="n">Wiki</span><span class="p">(</span>
                        <span class="n">owner</span><span class="o">=</span><span class="n">wiki</span><span class="o">.</span><span class="n">ownerId</span><span class="p">,</span>
                        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">existing_wiki</span><span class="o">.</span><span class="n">putURI</span><span class="p">(),</span> <span class="n">existing_wiki</span><span class="o">.</span><span class="n">json</span><span class="p">()),</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
        <span class="k">return</span> <span class="n">updated_wiki</span>

    <span class="k">def</span> <span class="nf">getWikiAttachments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wiki</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the attachments to a wiki page.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            wiki: The Wiki object for which the attachments are to be returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of file handles for the files attached to the Wiki.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/wiki/</span><span class="si">%s</span><span class="s2">/attachmenthandles&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">ownerId</span><span class="p">,</span> <span class="n">wiki</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="n">file_handles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">WikiAttachment</span><span class="p">(</span><span class="o">**</span><span class="n">fh</span><span class="p">)</span> <span class="k">for</span> <span class="n">fh</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">file_handles</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                      Tables                              #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">_waitForAsync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">endpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repoEndpoint</span>
        <span class="n">async_job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="n">uri</span> <span class="o">+</span> <span class="s2">&quot;/start&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span>
        <span class="p">)</span>

        <span class="c1"># https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/asynch/AsynchronousJobStatus.html</span>
        <span class="n">sleep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_query_sleep</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">lastMessage</span><span class="p">,</span> <span class="n">lastProgress</span><span class="p">,</span> <span class="n">lastTotal</span><span class="p">,</span> <span class="n">progressed</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">False</span>
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_query_timeout</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
                <span class="n">uri</span> <span class="o">+</span> <span class="s2">&quot;/get/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">async_job_id</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">],</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;jobState&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;PROCESSING&quot;</span><span class="p">:</span>
                <span class="n">progressed</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;progressMessage&quot;</span><span class="p">,</span> <span class="n">lastMessage</span><span class="p">)</span>
                <span class="n">progress</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;progressCurrent&quot;</span><span class="p">,</span> <span class="n">lastProgress</span><span class="p">)</span>
                <span class="n">total</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;progressTotal&quot;</span><span class="p">,</span> <span class="n">lastTotal</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">message</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_print_transfer_progress</span><span class="p">(</span>
                        <span class="n">progress</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">isBytes</span><span class="o">=</span><span class="kc">False</span>
                    <span class="p">)</span>
                <span class="c1"># Reset the time if we made progress (fix SYNPY-214)</span>
                <span class="k">if</span> <span class="n">message</span> <span class="o">!=</span> <span class="n">lastMessage</span> <span class="ow">or</span> <span class="n">lastProgress</span> <span class="o">!=</span> <span class="n">progress</span><span class="p">:</span>
                    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                    <span class="n">lastMessage</span><span class="p">,</span> <span class="n">lastProgress</span><span class="p">,</span> <span class="n">lastTotal</span> <span class="o">=</span> <span class="n">message</span><span class="p">,</span> <span class="n">progress</span><span class="p">,</span> <span class="n">total</span>
                <span class="n">sleep</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">table_query_max_sleep</span><span class="p">,</span> <span class="n">sleep</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_query_backoff</span>
                <span class="p">)</span>
                <span class="n">doze</span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseTimeoutError</span><span class="p">(</span>
                <span class="s2">&quot;Timeout waiting for query results: </span><span class="si">%0.1f</span><span class="s2"> seconds &quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;jobState&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;FAILED&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;errorMessage&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;errorDetails&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="n">asynchronousJobStatus</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">progressed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print_transfer_progress</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">isBytes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets a Column object from Synapse by ID.</span>

<span class="sd">        See: [synapseclient.table.Column][]</span>

<span class="sd">        Arguments:</span>
<span class="sd">            id: The ID of the column to retrieve</span>

<span class="sd">        Returns:</span>
<span class="sd">            An object of type [synapseclient.table.Column][]</span>


<span class="sd">        Example: Using this function</span>
<span class="sd">            Getting a column</span>

<span class="sd">                column = syn.getColumn(123)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">Column</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="nb">id</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">getColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the columns defined in Synapse either (1) corresponding to a set of column headers, (2) those for a given</span>
<span class="sd">        schema, or (3) those whose names start with a given prefix.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            x: A list of column headers, a Table Entity object (Schema/EntityViewSchema), a Table&#39;s Synapse ID, or a</span>
<span class="sd">                string prefix</span>
<span class="sd">            limit: maximum number of columns to return (pagination parameter)</span>
<span class="sd">            offset: the index of the first column to return (pagination parameter)</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator over [synapseclient.table.Column][] objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/column&quot;</span>
            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># if header is an integer, it&#39;s a columnID, otherwise it&#39;s an aggregate column, like &quot;AVG(Foo)&quot;</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">getColumn</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="c1"># ignore aggregate column</span>
                    <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">SchemaBase</span><span class="p">)</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_synapse_id_str</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTableColumns</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">col</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/column?prefix=&quot;</span> <span class="o">+</span> <span class="n">x</span>
            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t get columns for a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">create_snapshot_version</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="n">EntityViewSchema</span><span class="p">,</span> <span class="n">Schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">SubmissionViewSchema</span><span class="p">,</span> <span class="n">Dataset</span>
        <span class="p">],</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">activity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Activity</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new Table Version, new View version, or new Dataset version.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            table: The schema of the Table/View, or its ID.</span>
<span class="sd">            comment: Optional snapshot comment.</span>
<span class="sd">            label: Optional snapshot label.</span>
<span class="sd">            activity: Optional activity ID applied to snapshot version.</span>
<span class="sd">            wait: True if this method should return the snapshot version after waiting for any necessary</span>
<span class="sd">                    asynchronous table updates to complete. If False this method will return</span>
<span class="sd">                    as soon as any updates are initiated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The snapshot version number if wait=True, None if wait=False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">id_of</span><span class="p">(</span><span class="n">table</span><span class="p">),</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ent</span><span class="p">,</span> <span class="p">(</span><span class="n">EntityViewSchema</span><span class="p">,</span> <span class="n">SubmissionViewSchema</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">)):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_async_table_update</span><span class="p">(</span>
                <span class="n">table</span><span class="p">,</span>
                <span class="n">create_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">activity</span><span class="o">=</span><span class="n">activity</span><span class="p">,</span>
                <span class="n">wait</span><span class="o">=</span><span class="n">wait</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ent</span><span class="p">,</span> <span class="n">Schema</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_table_snapshot</span><span class="p">(</span>
                <span class="n">table</span><span class="p">,</span>
                <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">activity</span><span class="o">=</span><span class="n">activity</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;This function only accepts Synapse ids of Tables or Views&quot;</span>
            <span class="p">)</span>

        <span class="c1"># for consistency we return nothing if wait=False since we can&#39;t</span>
        <span class="c1"># supply the snapshot version on an async table update without waiting</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;snapshotVersionNumber&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">wait</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_create_table_snapshot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">activity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Activity</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates Table snapshot</span>

<span class="sd">        Arguments:</span>
<span class="sd">            table:  The schema of the Table</span>
<span class="sd">            comment:  Optional snapshot comment.</span>
<span class="sd">            label:  Optional snapshot label.</span>
<span class="sd">            activity:  Optional activity ID or activity instance applied to snapshot version.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Snapshot Response</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># check the activity id or object is provided</span>
        <span class="n">activity_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">activity</span><span class="p">:</span>
                <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_saveActivity</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>
            <span class="n">activity_id</span> <span class="o">=</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">activity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">activity_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>

        <span class="n">snapshot_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;snapshotComment&quot;</span><span class="p">:</span> <span class="n">comment</span><span class="p">,</span>
            <span class="s2">&quot;snapshotLabel&quot;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
            <span class="s2">&quot;snapshotActivityId&quot;</span><span class="p">:</span> <span class="n">activity_id</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">new_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">snapshot_body</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="n">snapshot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/entity/</span><span class="si">{}</span><span class="s2">/table/snapshot&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">id_of</span><span class="p">(</span><span class="n">table</span><span class="p">)),</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">new_body</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">snapshot</span>

    <span class="k">def</span> <span class="nf">_async_table_update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">EntityViewSchema</span><span class="p">,</span> <span class="n">Schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">SubmissionViewSchema</span><span class="p">],</span>
        <span class="n">changes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">create_snapshot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">activity</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates view updates and snapshots</span>

<span class="sd">        Arguments:</span>
<span class="sd">            table:           The schema of the EntityView or its ID.</span>
<span class="sd">            changes:         Array of Table changes</span>
<span class="sd">            create_snapshot: Create snapshot</span>
<span class="sd">            comment:         Optional snapshot comment.</span>
<span class="sd">            label:           Optional snapshot label.</span>
<span class="sd">            activity:        Optional activity ID applied to snapshot version.</span>
<span class="sd">            wait:            True to wait for async table update to complete</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Snapshot Response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">snapshot_options</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;snapshotComment&quot;</span><span class="p">:</span> <span class="n">comment</span><span class="p">,</span>
            <span class="s2">&quot;snapshotLabel&quot;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
            <span class="s2">&quot;snapshotActivityId&quot;</span><span class="p">:</span> <span class="n">activity</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">new_snapshot</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">snapshot_options</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="n">table_update_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;changes&quot;</span><span class="p">:</span> <span class="n">changes</span><span class="p">,</span>
            <span class="s2">&quot;createSnapshot&quot;</span><span class="p">:</span> <span class="n">create_snapshot</span><span class="p">,</span>
            <span class="s2">&quot;snapshotOptions&quot;</span><span class="p">:</span> <span class="n">new_snapshot</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{}</span><span class="s2">/table/transaction/async&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">id_of</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">wait</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">table_update_body</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/start&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">),</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">table_update_body</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">getTableColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the column models used in the given table schema.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            table: The schema of the Table whose columns are to be retrieved</span>

<span class="sd">        Yields:</span>
<span class="sd">            A Generator over the Table&#39;s [columns][synapseclient.table.Column]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{id}</span><span class="s2">/column&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
        <span class="c1"># The returned object type for this service, PaginatedColumnModels, is a misnomer.</span>
        <span class="c1"># This service always returns the full list of results so the pagination does not not actually matter.</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)[</span><span class="s2">&quot;results&quot;</span><span class="p">]:</span>
            <span class="k">yield</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tableQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resultsAs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query a Synapse Table.</span>

<span class="sd">        You can receive query results either as a generator over rows or as a CSV file. For smallish tables, either</span>
<span class="sd">        method will work equally well. Use of a &quot;rowset&quot; generator allows rows to be processed one at a time and</span>
<span class="sd">        processing may be stopped before downloading the entire table.</span>

<span class="sd">        Optional keyword arguments differ for the two return types of `rowset` or `csv`</span>

<span class="sd">        Arguments:</span>
<span class="sd">            query: Query string in a [SQL-like syntax](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/web/controller/TableExamples.html), for example: `&quot;SELECT * from syn12345&quot;`</span>
<span class="sd">            resultsAs: select whether results are returned as a CSV file (&quot;csv&quot;) or incrementally downloaded as sets of rows (&quot;rowset&quot;)</span>
<span class="sd">            limit: (rowset only) Specify the maximum number of rows to be returned, defaults to None</span>
<span class="sd">            offset: (rowset only) Don&#39;t return the first n rows, defaults to None</span>
<span class="sd">            quoteCharacter: (csv only) default double quote</span>
<span class="sd">            escapeCharacter: (csv only) default backslash</span>
<span class="sd">            lineEnd: (csv only) defaults to os.linesep</span>
<span class="sd">            separator: (csv only) defaults to comma</span>
<span class="sd">            header: (csv only) True by default</span>
<span class="sd">            includeRowIdAndRowVersion: (csv only) True by default</span>
<span class="sd">            downloadLocation: (csv only) directory path to download the CSV file to</span>

<span class="sd">        Returns:</span>
<span class="sd">            A [TableQueryResult][synapseclient.table.TableQueryResult] or [CsvFileTable][synapseclient.table.CsvFileTable] object</span>

<span class="sd">        NOTE:</span>
<span class="sd">            When performing queries on frequently updated tables, the table can be inaccessible for a period leading</span>
<span class="sd">              to a timeout of the query.  Since the results are guaranteed to eventually be returned you can change the</span>
<span class="sd">              max timeout by setting the table_query_timeout variable of the Synapse object:</span>

<span class="sd">                  # Sets the max timeout to 5 minutes.</span>
<span class="sd">                  syn.table_query_timeout = 300</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">resultsAs</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;rowset&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TableQueryResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">resultsAs</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
            <span class="c1"># TODO: remove isConsistent because it has now been deprecated</span>
            <span class="c1"># from the backend</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;isConsistent&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;isConsistent&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">CsvFileTable</span><span class="o">.</span><span class="n">from_table_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Unknown return type requested from tableQuery: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">resultsAs</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_queryTable</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">isConsistent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">partMask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TableQueryResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query a table and return the first page of results as a [QueryResultBundle](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/QueryResultBundle.html).</span>
<span class="sd">        If the result contains a *nextPageToken*, following pages a retrieved by calling [_queryTableNext][].</span>

<span class="sd">        Arguments:</span>
<span class="sd">            query:        A sql query</span>
<span class="sd">            limit:        The optional limit to the results</span>
<span class="sd">            offset:       The optional offset into the results</span>
<span class="sd">            isConsistent: Whether the index is inconsistent with the true state of the table</span>
<span class="sd">            partMask:     Optional, default all. The &#39;partsMask&#39; is a bit field for requesting</span>
<span class="sd">                          different elements in the resulting JSON bundle.</span>
<span class="sd">                          Query Results (queryResults) = 0x1</span>
<span class="sd">                          Query Count (queryCount) = 0x2</span>
<span class="sd">                          Select Columns (selectColumns) = 0x4</span>
<span class="sd">                          Max Rows Per Page (maxRowsPerPage) = 0x8</span>

<span class="sd">        Returns:</span>
<span class="sd">            The first page of results as a QueryResultBundle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># See: &lt;https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/QueryBundleRequest.html&gt;</span>
        <span class="n">query_bundle_request</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.table.QueryBundleRequest&quot;</span><span class="p">,</span>
            <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;sql&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
                <span class="s2">&quot;isConsistent&quot;</span><span class="p">:</span> <span class="n">isConsistent</span><span class="p">,</span>
                <span class="s2">&quot;includeEntityEtag&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">partMask</span><span class="p">:</span>
            <span class="n">query_bundle_request</span><span class="p">[</span><span class="s2">&quot;partMask&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">partMask</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">query_bundle_request</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">limit</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">query_bundle_request</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="n">query_bundle_request</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;isConsistent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">isConsistent</span>

        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{id}</span><span class="s2">/table/query/async&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">extract_synapse_id_from_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">query_bundle_request</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_queryTableNext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nextPageToken</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tableId</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TableQueryResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve following pages if the result contains a *nextPageToken*</span>

<span class="sd">        Arguments:</span>
<span class="sd">            nextPageToken: Forward this token to get the next page of results.</span>
<span class="sd">            tableId:       The Synapse ID of the table</span>

<span class="sd">        Returns:</span>
<span class="sd">            The following page of results as a QueryResultBundle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{id}</span><span class="s2">/table/query/nextPage/async&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">tableId</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">nextPageToken</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_uploadCsv</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">updateEtag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoteCharacter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
        <span class="n">escapeCharacter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">lineEnd</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
        <span class="n">separator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
        <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">linesToSkip</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send an [UploadToTableRequest](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/UploadToTableRequest.html) to Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            filepath:        Path of a [CSV](https://en.wikipedia.org/wiki/Comma-separated_values) file.</span>
<span class="sd">            schema:          A table entity or its Synapse ID.</span>
<span class="sd">            updateEtag:      Any RowSet returned from Synapse will contain the current etag of the change set.</span>
<span class="sd">                             To update any rows from a RowSet the etag must be provided with the POST.</span>
<span class="sd">            quoteCharacter:  Quotation character</span>
<span class="sd">            escapeCharacter: Escape character</span>
<span class="sd">            lineEnd:         The string used to separate lines</span>
<span class="sd">            separator:       Separator character</span>
<span class="sd">            header:          Whether to set the first line as header.</span>
<span class="sd">            linesToSkip:     The number of lines to skip from the start of the file.</span>
<span class="sd">                             The default value of 0 will be used if this is not provided by the caller.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [UploadToTableResult](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/UploadToTableResult.html)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">fileHandleId</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
            <span class="n">multipart_upload_file_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s2">&quot;text/csv&quot;</span><span class="p">),</span> <span class="bp">self</span>
        <span class="p">)</span>

        <span class="n">uploadRequest</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.table.UploadToTableRequest&quot;</span><span class="p">,</span>
            <span class="s2">&quot;csvTableDescriptor&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;isFirstLineHeader&quot;</span><span class="p">:</span> <span class="n">header</span><span class="p">,</span>
                <span class="s2">&quot;quoteCharacter&quot;</span><span class="p">:</span> <span class="n">quoteCharacter</span><span class="p">,</span>
                <span class="s2">&quot;escapeCharacter&quot;</span><span class="p">:</span> <span class="n">escapeCharacter</span><span class="p">,</span>
                <span class="s2">&quot;lineEnd&quot;</span><span class="p">:</span> <span class="n">lineEnd</span><span class="p">,</span>
                <span class="s2">&quot;separator&quot;</span><span class="p">:</span> <span class="n">separator</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;linesToSkip&quot;</span><span class="p">:</span> <span class="n">linesToSkip</span><span class="p">,</span>
            <span class="s2">&quot;tableId&quot;</span><span class="p">:</span> <span class="n">id_of</span><span class="p">(</span><span class="n">schema</span><span class="p">),</span>
            <span class="s2">&quot;uploadFileHandleId&quot;</span><span class="p">:</span> <span class="n">fileHandleId</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">updateEtag</span><span class="p">:</span>
            <span class="n">uploadRequest</span><span class="p">[</span><span class="s2">&quot;updateEtag&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">updateEtag</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_async_table_update</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">changes</span><span class="o">=</span><span class="p">[</span><span class="n">uploadRequest</span><span class="p">],</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_table_transaction_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">_check_table_transaction_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]:</span>
            <span class="n">result_type</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">result_type</span> <span class="ow">in</span> <span class="p">{</span>
                <span class="n">concrete_types</span><span class="o">.</span><span class="n">ROW_REFERENCE_SET_RESULTS</span><span class="p">,</span>
                <span class="n">concrete_types</span><span class="o">.</span><span class="n">TABLE_SCHEMA_CHANGE_RESPONSE</span><span class="p">,</span>
                <span class="n">concrete_types</span><span class="o">.</span><span class="n">UPLOAD_TO_TABLE_RESULT</span><span class="p">,</span>
            <span class="p">}:</span>
                <span class="c1"># if these fail, it we would have gotten an HttpError before the results came back</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">result_type</span> <span class="o">==</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">ENTITY_UPDATE_RESULTS</span><span class="p">:</span>
                <span class="c1"># TODO: output full response to error file when the logging JIRA issue gets pulled in</span>
                <span class="n">successful_updates</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">failed_updates</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">update_result</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateResults&quot;</span><span class="p">]:</span>
                    <span class="n">failure_code</span> <span class="o">=</span> <span class="n">update_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;failureCode&quot;</span><span class="p">)</span>
                    <span class="n">failure_message</span> <span class="o">=</span> <span class="n">update_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;failureMessage&quot;</span><span class="p">)</span>
                    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">update_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entityId&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">failure_code</span> <span class="ow">or</span> <span class="n">failure_message</span><span class="p">:</span>
                        <span class="n">failed_updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">update_result</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">successful_updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">failed_updates</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                        <span class="s2">&quot;Not all of the entities were updated.&quot;</span>
                        <span class="s2">&quot; Successful updates: </span><span class="si">%s</span><span class="s2">.  Failed updates: </span><span class="si">%s</span><span class="s2">&quot;</span>
                        <span class="o">%</span> <span class="p">(</span><span class="n">successful_updates</span><span class="p">,</span> <span class="n">failed_updates</span><span class="p">)</span>
                    <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s2">&quot;Unexpected result from a table transaction of type [</span><span class="si">%s</span><span class="s2">].&quot;</span>
                    <span class="s2">&quot; Please check the result to make sure it is correct. </span><span class="si">%s</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">result_type</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_queryTableCsv</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">quoteCharacter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
        <span class="n">escapeCharacter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">lineEnd</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
        <span class="n">separator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
        <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">includeRowIdAndRowVersion</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">downloadLocation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query a Synapse Table and download a CSV file containing the results.</span>

<span class="sd">        Sends a [DownloadFromTableRequest](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/DownloadFromTableRequest.html) to Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            query:                     A sql query</span>
<span class="sd">            quoteCharacter:            Quotation character</span>
<span class="sd">            escapeCharacter:           Escape character</span>
<span class="sd">            lineEnd:                   The string used to separate lines</span>
<span class="sd">            separator:                 Separator character</span>
<span class="sd">            header:                    Whether to set the first line as header.</span>
<span class="sd">            includeRowIdAndRowVersion: Whether to set the first two columns contains the row ID and row version.</span>
<span class="sd">            downloadLocation:          The download location</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple containing a [DownloadFromTableResult](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/DownloadFromTableResult.html)</span>

<span class="sd">        The DownloadFromTableResult object contains these fields:</span>
<span class="sd">         * headers:             ARRAY&lt;STRING&gt;, The list of ColumnModel IDs that describes the rows of this set.</span>
<span class="sd">         * resultsFileHandleId: STRING, The resulting file handle ID can be used to download the CSV file created by</span>
<span class="sd">                                this query.</span>
<span class="sd">         * concreteType:        STRING</span>
<span class="sd">         * etag:                STRING, Any RowSet returned from Synapse will contain the current etag of the change</span>
<span class="sd">                                set.</span>
<span class="sd">                                To update any rows from a RowSet the etag must be provided with the POST.</span>
<span class="sd">         * tableId:             STRING, The ID of the table identified in the from clause of the table query.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">download_from_table_request</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.table.DownloadFromTableRequest&quot;</span><span class="p">,</span>
            <span class="s2">&quot;csvTableDescriptor&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;isFirstLineHeader&quot;</span><span class="p">:</span> <span class="n">header</span><span class="p">,</span>
                <span class="s2">&quot;quoteCharacter&quot;</span><span class="p">:</span> <span class="n">quoteCharacter</span><span class="p">,</span>
                <span class="s2">&quot;escapeCharacter&quot;</span><span class="p">:</span> <span class="n">escapeCharacter</span><span class="p">,</span>
                <span class="s2">&quot;lineEnd&quot;</span><span class="p">:</span> <span class="n">lineEnd</span><span class="p">,</span>
                <span class="s2">&quot;separator&quot;</span><span class="p">:</span> <span class="n">separator</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;sql&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
            <span class="s2">&quot;writeHeader&quot;</span><span class="p">:</span> <span class="n">header</span><span class="p">,</span>
            <span class="s2">&quot;includeRowIdAndRowVersion&quot;</span><span class="p">:</span> <span class="n">includeRowIdAndRowVersion</span><span class="p">,</span>
            <span class="s2">&quot;includeEntityEtag&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{id}</span><span class="s2">/table/download/csv/async&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">extract_synapse_id_from_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">download_from_table_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">download_from_table_request</span>
        <span class="p">)</span>
        <span class="n">file_handle_id</span> <span class="o">=</span> <span class="n">download_from_table_result</span><span class="p">[</span><span class="s2">&quot;resultsFileHandleId&quot;</span><span class="p">]</span>
        <span class="n">cached_file_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">file_handle_id</span><span class="o">=</span><span class="n">file_handle_id</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">downloadLocation</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">cached_file_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">download_from_table_result</span><span class="p">,</span> <span class="n">cached_file_path</span>

        <span class="k">if</span> <span class="n">downloadLocation</span><span class="p">:</span>
            <span class="n">download_dir</span> <span class="o">=</span> <span class="n">ensure_download_location_is_directory</span><span class="p">(</span>
                <span class="n">download_location</span><span class="o">=</span><span class="n">downloadLocation</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">download_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get_cache_dir</span><span class="p">(</span><span class="n">file_handle_id</span><span class="o">=</span><span class="n">file_handle_id</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SYNAPSE_TABLE_QUERY_</span><span class="si">{</span><span class="n">file_handle_id</span><span class="si">}</span><span class="s2">.csv&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
            <span class="n">coroutine</span><span class="o">=</span><span class="n">download_by_file_handle</span><span class="p">(</span>
                <span class="n">file_handle_id</span><span class="o">=</span><span class="n">file_handle_id</span><span class="p">,</span>
                <span class="n">synapse_id</span><span class="o">=</span><span class="n">extract_synapse_id_from_query</span><span class="p">(</span><span class="n">query</span><span class="p">),</span>
                <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;TableEntity&quot;</span><span class="p">,</span>
                <span class="n">destination</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
            <span class="p">),</span>
            <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">download_from_table_result</span><span class="p">,</span> <span class="n">path</span>

    <span class="c1"># This is redundant with syn.store(Column(...)) and will be removed unless people prefer this method.</span>
    <span class="k">def</span> <span class="nf">createColumn</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">columnType</span><span class="p">,</span>
        <span class="n">maximumSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">defaultValue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">enumValues</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">columnModel</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">columnType</span><span class="o">=</span><span class="n">columnType</span><span class="p">,</span>
            <span class="n">maximumSize</span><span class="o">=</span><span class="n">maximumSize</span><span class="p">,</span>
            <span class="n">defaultValue</span><span class="o">=</span><span class="n">defaultValue</span><span class="p">,</span>
            <span class="n">enumValue</span><span class="o">=</span><span class="n">enumValues</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="s2">&quot;/column&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">columnModel</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">createColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Column</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Column</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a batch of [synapseclient.table.Column][]&#39;s within a single request.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            columns: A list of [synapseclient.table.Column][]&#39;s</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of [synapseclient.table.Column][]&#39;s that have been created in Synapse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.ListWrapper&quot;</span><span class="p">,</span>
            <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">columns</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="s2">&quot;/column/batch&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request_body</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">_getColumnByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">column_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Column</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a schema and a column name, get the corresponding [Column][synapseclient.table.Column] object.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            schema: The Schema is an [Entity][synapseclient.entity.Entity] that defines a set of columns in a table.</span>
<span class="sd">            column_name: The column name</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Column object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getColumns</span><span class="p">(</span><span class="n">schema</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">column_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">column</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">downloadTableColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Bulk download of table-associated files.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            table: Table query result</span>
<span class="sd">            columns: A list of column names as strings</span>
<span class="sd">            downloadLocation: Directory into which to download the files</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary from file handle ID to path in the local file system.</span>

<span class="sd">        For example, consider a Synapse table whose ID is &quot;syn12345&quot; with two columns of type FILEHANDLEID named &#39;foo&#39;</span>
<span class="sd">        and &#39;bar&#39;. The associated files are JSON encoded, so we might retrieve the files from Synapse and load for the</span>
<span class="sd">        second 100 of those rows as shown here:</span>

<span class="sd">            import json</span>

<span class="sd">            results = syn.tableQuery(&#39;SELECT * FROM syn12345 LIMIT 100 OFFSET 100&#39;)</span>
<span class="sd">            file_map = syn.downloadTableColumns(results, [&#39;foo&#39;, &#39;bar&#39;])</span>

<span class="sd">            for file_handle_id, path in file_map.items():</span>
<span class="sd">                with open(path) as f:</span>
<span class="sd">                    data[file_handle_id] = f.read()</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">RETRIABLE_FAILURE_CODES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EXCEEDS_SIZE_LIMIT&quot;</span><span class="p">]</span>
        <span class="n">MAX_DOWNLOAD_TRIES</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">max_files_per_request</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_files_per_request&quot;</span><span class="p">,</span> <span class="mi">2500</span><span class="p">)</span>
        <span class="c1"># Rowset tableQuery result not allowed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">TableQueryResult</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;downloadTableColumn doesn&#39;t work with rowsets. Please use default tableQuery settings.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Columns parameter requires a list of column names&quot;</span><span class="p">)</span>

        <span class="p">(</span>
            <span class="n">file_handle_associations</span><span class="p">,</span>
            <span class="n">file_handle_to_path_map</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_table_download_file_handle_list</span><span class="p">(</span>
            <span class="n">table</span><span class="p">,</span>
            <span class="n">columns</span><span class="p">,</span>
            <span class="n">downloadLocation</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Downloading </span><span class="si">%d</span><span class="s2"> files, </span><span class="si">%d</span><span class="s2"> cached locally&quot;</span>
            <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">file_handle_associations</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_handle_to_path_map</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="n">permanent_failures</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>

        <span class="n">attempts</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_handle_associations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">attempts</span> <span class="o">&lt;</span> <span class="n">MAX_DOWNLOAD_TRIES</span><span class="p">:</span>
            <span class="n">attempts</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">file_handle_associations_batch</span> <span class="o">=</span> <span class="n">file_handle_associations</span><span class="p">[</span>
                <span class="p">:</span><span class="n">max_files_per_request</span>
            <span class="p">]</span>

            <span class="c1"># ------------------------------------------------------------</span>
            <span class="c1"># call async service to build zip file</span>
            <span class="c1"># ------------------------------------------------------------</span>

            <span class="c1"># returns a BulkFileDownloadResponse:</span>
            <span class="c1">#   &lt;https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/file/BulkFileDownloadResponse.html&gt;</span>
            <span class="n">request</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="n">concreteType</span><span class="o">=</span><span class="s2">&quot;org.sagebionetworks.repo.model.file.BulkFileDownloadRequest&quot;</span><span class="p">,</span>
                <span class="n">requestedFiles</span><span class="o">=</span><span class="n">file_handle_associations_batch</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span>
                <span class="n">uri</span><span class="o">=</span><span class="s2">&quot;/file/bulk/async&quot;</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
                <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># ------------------------------------------------------------</span>
            <span class="c1"># download zip file</span>
            <span class="c1"># ------------------------------------------------------------</span>

            <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
            <span class="n">zipfilepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="s2">&quot;table_file_download.zip&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">zipfilepath</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
                    <span class="n">download_by_file_handle</span><span class="p">(</span>
                        <span class="n">file_handle_id</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;resultZipFileHandleId&quot;</span><span class="p">],</span>
                        <span class="n">synapse_id</span><span class="o">=</span><span class="n">table</span><span class="o">.</span><span class="n">tableId</span><span class="p">,</span>
                        <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;TableEntity&quot;</span><span class="p">,</span>
                        <span class="n">destination</span><span class="o">=</span><span class="n">zipfilepath</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="c1"># TODO handle case when no zip file is returned</span>
                <span class="c1"># TODO test case when we give it partial or all bad file handles</span>
                <span class="c1"># TODO test case with deleted fileHandleID</span>
                <span class="c1"># TODO return null for permanent failures</span>

                <span class="c1"># ------------------------------------------------------------</span>
                <span class="c1"># unzip into cache</span>
                <span class="c1"># ------------------------------------------------------------</span>

                <span class="k">if</span> <span class="n">downloadLocation</span><span class="p">:</span>
                    <span class="n">download_dir</span> <span class="o">=</span> <span class="n">ensure_download_location_is_directory</span><span class="p">(</span>
                        <span class="n">downloadLocation</span>
                    <span class="p">)</span>

                <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zipfilepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">zf</span><span class="p">:</span>
                    <span class="c1"># the directory structure within the zip follows that of the cache:</span>
                    <span class="c1"># {fileHandleId modulo 1000}/{fileHandleId}/{fileName}</span>
                    <span class="k">for</span> <span class="n">summary</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;fileSummary&quot;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;SUCCESS&quot;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">downloadLocation</span><span class="p">:</span>
                                <span class="n">download_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get_cache_dir</span><span class="p">(</span>
                                    <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]</span>
                                <span class="p">)</span>

                            <span class="n">filepath</span> <span class="o">=</span> <span class="n">extract_zip_file_to_directory</span><span class="p">(</span>
                                <span class="n">zf</span><span class="p">,</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;zipEntryName&quot;</span><span class="p">],</span> <span class="n">download_dir</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">],</span> <span class="n">filepath</span><span class="p">)</span>
                            <span class="n">file_handle_to_path_map</span><span class="p">[</span><span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">filepath</span>
                        <span class="k">elif</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;failureCode&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RETRIABLE_FAILURE_CODES</span><span class="p">:</span>
                            <span class="n">permanent_failures</span><span class="p">[</span><span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">summary</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">zipfilepath</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">zipfilepath</span><span class="p">)</span>

            <span class="c1"># Do we have remaining files to download?</span>
            <span class="n">file_handle_associations</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">fha</span>
                <span class="k">for</span> <span class="n">fha</span> <span class="ow">in</span> <span class="n">file_handle_associations</span>
                <span class="k">if</span> <span class="n">fha</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">file_handle_to_path_map</span>
                <span class="ow">and</span> <span class="n">fha</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">permanent_failures</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">]</span>

        <span class="c1"># TODO if there are files we still haven&#39;t downloaded</span>

        <span class="k">return</span> <span class="n">file_handle_to_path_map</span>

    <span class="k">def</span> <span class="nf">_build_table_download_file_handle_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="p">):</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># build list of file handles to download</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="n">cols_not_found</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">h</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">headers</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols_not_found</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Columns not found: &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">col</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols_not_found</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">col_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span> <span class="k">if</span> <span class="n">h</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]</span>
        <span class="c1"># see: &lt;https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/file/BulkFileDownloadRequest.html&gt;</span>
        <span class="n">file_handle_associations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">file_handle_to_path_map</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">seen_file_handle_ids</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">set</span><span class="p">()</span>
        <span class="p">)</span>  <span class="c1"># ensure not sending duplicate requests for the same FileHandle IDs</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">col_index</span> <span class="ow">in</span> <span class="n">col_indices</span><span class="p">:</span>
                <span class="n">file_handle_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">col_index</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">file_handle_id</span><span class="p">):</span>
                    <span class="n">path_to_cached_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">file_handle_id</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">downloadLocation</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">path_to_cached_file</span><span class="p">:</span>
                        <span class="n">file_handle_to_path_map</span><span class="p">[</span><span class="n">file_handle_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">path_to_cached_file</span>
                    <span class="k">elif</span> <span class="n">file_handle_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_file_handle_ids</span><span class="p">:</span>
                        <span class="n">file_handle_associations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="nb">dict</span><span class="p">(</span>
                                <span class="n">associateObjectType</span><span class="o">=</span><span class="s2">&quot;TableEntity&quot;</span><span class="p">,</span>
                                <span class="n">fileHandleId</span><span class="o">=</span><span class="n">file_handle_id</span><span class="p">,</span>
                                <span class="n">associateObjectId</span><span class="o">=</span><span class="n">table</span><span class="o">.</span><span class="n">tableId</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                    <span class="n">seen_file_handle_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">file_handle_id</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Weird file handle: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">file_handle_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">file_handle_associations</span><span class="p">,</span> <span class="n">file_handle_to_path_map</span>

    <span class="k">def</span> <span class="nf">_get_default_view_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_type</span><span class="p">,</span> <span class="n">view_type_mask</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get default view columns&quot;&quot;&quot;</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/column/tableview/defaults?viewEntityType=</span><span class="si">{</span><span class="n">view_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">view_type_mask</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&amp;viewTypeMask=</span><span class="si">{</span><span class="n">view_type_mask</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)[</span><span class="s2">&quot;list&quot;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">_get_annotation_view_columns</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">scope_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">view_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">view_type_mask</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all the columns of a submission of entity view based on existing annotations</span>

<span class="sd">        Arguments:</span>
<span class="sd">            scope_ids:      List of Evaluation Queue or Project/Folder Ids</span>
<span class="sd">            view_type:      The submissionview or entityview</span>
<span class="sd">            view_type_mask: Bit mask representing the types to include in the view.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The list of columns</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">next_page_token</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">view_scope</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.table.ViewColumnModelRequest&quot;</span><span class="p">,</span>
                <span class="s2">&quot;viewScope&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="n">scope_ids</span><span class="p">,</span>
                    <span class="s2">&quot;viewEntityType&quot;</span><span class="p">:</span> <span class="n">view_type</span><span class="p">,</span>
                    <span class="s2">&quot;viewTypeMask&quot;</span><span class="p">:</span> <span class="n">view_type_mask</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="n">next_page_token</span><span class="p">:</span>
                <span class="n">view_scope</span><span class="p">[</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_page_token</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span>
                <span class="n">uri</span><span class="o">=</span><span class="s2">&quot;/column/view/scope/async&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">view_scope</span>
            <span class="p">)</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">column</span><span class="p">)</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">])</span>
            <span class="n">next_page_token</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">next_page_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">columns</span>

    <span class="c1">############################################################</span>
    <span class="c1">#              CRUD for Entities (properties)              #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">_getEntity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">Entity</span><span class="p">],</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an entity from Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:  A Synapse ID, a dictionary representing an Entity, or a Synapse Entity object</span>
<span class="sd">            version: The version number to fetch</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary containing an Entity&#39;s properties</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/&quot;</span> <span class="o">+</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;/version/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">version</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_createEntity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">Entity</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new entity in Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity: A dictionary representing an Entity or a Synapse Entity object</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary containing an Entity&#39;s properties</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;/entity&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">get_properties</span><span class="p">(</span><span class="n">entity</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_updateEntity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">Entity</span><span class="p">],</span>
        <span class="n">incrementVersion</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">versionLabel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an existing entity in Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity:           A dictionary representing an Entity or a Synapse Entity object</span>
<span class="sd">            incrementVersion: Whether to increment the entity version (if Versionable)</span>
<span class="sd">            versionLabel:     A label for the entity version (if Versionable)</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary containing an Entity&#39;s properties</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">is_versionable</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">versionLabel</span><span class="p">:</span>
                <span class="c1"># a versionLabel implicitly implies incrementing</span>
                <span class="n">incrementVersion</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">incrementVersion</span> <span class="ow">and</span> <span class="s2">&quot;versionNumber&quot;</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
                <span class="n">versionLabel</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">incrementVersion</span><span class="p">:</span>
                <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;versionLabel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">versionLabel</span>
                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;newVersion&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">get_properties</span><span class="p">(</span><span class="n">entity</span><span class="p">)),</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">findEntityId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find an Entity given its name and parent.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            name: Name of the entity to find</span>
<span class="sd">            parent: An Entity object or the Id of an entity as a string. Omit if searching for a Project by name</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Entity ID or None if not found</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># when we want to search for a project by name. set parentId as None instead of ROOT_ENTITY</span>
        <span class="n">entity_lookup_request</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;parentId&quot;</span><span class="p">:</span> <span class="n">id_of</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;entityName&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
                <span class="s2">&quot;/entity/child&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">entity_lookup_request</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span>
            <span class="p">):</span>  <span class="c1"># a 404 error is raised if the entity does not exist</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">raise</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                       Send Message                       #</span>
    <span class="c1">############################################################</span>
    <span class="k">def</span> <span class="nf">sendMessage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">userIds</span><span class="p">,</span> <span class="n">messageSubject</span><span class="p">,</span> <span class="n">messageBody</span><span class="p">,</span> <span class="n">contentType</span><span class="o">=</span><span class="s2">&quot;text/plain&quot;</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        send a message via Synapse.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            userIds: A list of user IDs to which the message is to be sent</span>
<span class="sd">            messageSubject: The subject for the message</span>
<span class="sd">            messageBody: The body of the message</span>
<span class="sd">            contentType: optional contentType of message body (default=&quot;text/plain&quot;)</span>
<span class="sd">                            Should be one of &quot;text/plain&quot; or &quot;text/html&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            The metadata of the created message</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">fileHandleId</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
            <span class="n">multipart_upload_string_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messageBody</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">contentType</span><span class="p">),</span>
            <span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">recipients</span><span class="o">=</span><span class="n">userIds</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">messageSubject</span><span class="p">,</span> <span class="n">fileHandleId</span><span class="o">=</span><span class="n">fileHandleId</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;/message&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>

    <span class="c1">############################################################</span>
    <span class="c1">#                   Low level Rest calls                   #</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">_generate_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate headers (auth headers produced separately by credentials object)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">headers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_headers</span><span class="p">)</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">synapseclient</span><span class="o">.</span><span class="n">USER_AGENT</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">headers</span>

    <span class="k">def</span> <span class="nf">_handle_synapse_http_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raise errors as appropriate for returned Synapse http status codes&quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">exceptions</span><span class="o">.</span><span class="n">_raise_for_status</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># if we get a unauthenticated or forbidden error and the user is not logged in</span>
            <span class="c1"># then we raise it as an authentication error.</span>
            <span class="c1"># we can&#39;t know for certain that logging in to their particular account will grant them</span>
            <span class="c1"># access to this resource but more than likely it&#39;s the cause of this error.</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SynapseAuthenticationError</span><span class="p">(</span>
                    <span class="s2">&quot;You are not logged in and do not have access to a requested resource.&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>

            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">_handle_httpx_synapse_http_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raise errors as appropriate for the HTTPX library returned Synapse http</span>
<span class="sd">        status codes</span>

<span class="sd">        Arguments:</span>
<span class="sd">            response: The HTTPX response object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">exceptions</span><span class="o">.</span><span class="n">_raise_for_status_httpx</span><span class="p">(</span>
                <span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># if we get a unauthenticated or forbidden error and the user is not logged in</span>
            <span class="c1"># then we raise it as an authentication error.</span>
            <span class="c1"># we can&#39;t know for certain that logging in to their particular account will grant them</span>
            <span class="c1"># access to this resource but more than likely it&#39;s the cause of this error.</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SynapseAuthenticationError</span><span class="p">(</span>
                    <span class="s2">&quot;You are not logged in and do not have access to a requested resource.&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>

            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">_attach_rest_data_to_otel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span>
        <span class="n">current_span</span><span class="p">:</span> <span class="n">trace</span><span class="o">.</span><span class="n">Span</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle attaching a few piece of data from the REST call into the OTEL span.</span>
<span class="sd">        This is used for easier tracking of data that is being sent out of this service.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            method: The HTTP method used in the REST call.</span>
<span class="sd">            uri: The URI of the REST call.</span>
<span class="sd">            data: The data being sent in the REST call.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">current_span</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span> <span class="s2">&quot;http.method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()})</span>
        <span class="k">if</span> <span class="n">current_span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">()</span> <span class="ow">and</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">data_to_parse</span> <span class="o">=</span> <span class="n">data</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                    <span class="n">data_to_parse</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span>
                <span class="n">data_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data_to_parse</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;parentId&quot;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
                    <span class="n">current_span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span>
                        <span class="s2">&quot;synapse.parent_id&quot;</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;parentId&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
                    <span class="n">current_span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="s2">&quot;concreteType&quot;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
                    <span class="n">current_span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span>
                        <span class="s2">&quot;synapse.concrete_type&quot;</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;entityName&quot;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
                    <span class="n">current_span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span>
                        <span class="s2">&quot;synapse.entity_name&quot;</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;entityName&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
                    <span class="n">current_span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s2">&quot;synapse.name&quot;</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse data for OTEL span in _rest_call&quot;</span><span class="p">,</span> <span class="n">ex</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_rest_call</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">method</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="p">,</span>
        <span class="n">requests_session</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            method:           The method to implement Create, Read, Update, Delete operations.</span>
<span class="sd">                              Should be post, get, put, delete.</span>
<span class="sd">            uri:              URI on which the method is performed</span>
<span class="sd">            endpoint:         Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers:          Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">            retryPolicy:      A retry policy</span>
<span class="sd">            requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">            kwargs:           Any other arguments taken by a</span>
<span class="sd">                              [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">        Returns:</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> request to </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_uri_and_headers</span><span class="p">(</span>
            <span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
        <span class="p">)</span>

        <span class="n">retryPolicy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retry_policy</span><span class="p">(</span><span class="n">retryPolicy</span><span class="p">)</span>
        <span class="n">requests_session</span> <span class="o">=</span> <span class="n">requests_session</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span>

        <span class="n">auth</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;auth&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">)</span>
        <span class="n">requests_method_fn</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">requests_session</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
        <span class="n">current_span</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">current_span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">():</span>
            <span class="n">current_span</span> <span class="o">=</span> <span class="n">tracer</span><span class="o">.</span><span class="n">start_span</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">SpanKind</span><span class="o">.</span><span class="n">CLIENT</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attach_rest_data_to_otel</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">current_span</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">with_retry</span><span class="p">(</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="n">requests_method_fn</span><span class="p">(</span>
                <span class="n">uri</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
            <span class="o">**</span><span class="n">retryPolicy</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">current_span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">():</span>
            <span class="n">current_span</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle_synapse_http_error</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">restGET</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP GET request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI on which get is performed</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">            requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">            kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">        Returns:</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
            <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">retryPolicy</span><span class="p">,</span> <span class="n">requests_session</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">restPOST</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">body</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP POST request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI on which get is performed</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            body: The payload to be delivered</span>
<span class="sd">            headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">            requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">            kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">        Returns:</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span>
            <span class="n">retryPolicy</span><span class="p">,</span>
            <span class="n">requests_session</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">restPUT</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">body</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP PUT request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI on which get is performed</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            body: The payload to be delivered</span>
<span class="sd">            headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">            requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">            kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">        Returns</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
            <span class="s2">&quot;put&quot;</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span>
            <span class="n">retryPolicy</span><span class="p">,</span>
            <span class="n">requests_session</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">restDELETE</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP DELETE request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI of resource to be deleted</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">            requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">            kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
            <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span>
            <span class="n">retryPolicy</span><span class="p">,</span>
            <span class="n">requests_session</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_build_uri_and_headers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a tuple of the URI and headers to request with.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">endpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repoEndpoint</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;server.address&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="p">})</span>

        <span class="c1"># Check to see if the URI is incomplete (i.e. a Synapse URL)</span>
        <span class="c1"># In that case, append a Synapse endpoint to the URI</span>
        <span class="n">parsedURL</span> <span class="o">=</span> <span class="n">urllib_urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parsedURL</span><span class="o">.</span><span class="n">netloc</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="n">uri</span>

        <span class="k">if</span> <span class="n">headers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_headers</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span>

    <span class="k">def</span> <span class="nf">_build_retry_policy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a retry policy to be passed onto _with_retry.&quot;&quot;&quot;</span>

        <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">STANDARD_RETRY_PARAMS</span><span class="p">)</span>
        <span class="n">defaults</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">retryPolicy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">defaults</span>

    <span class="k">def</span> <span class="nf">_build_retry_policy_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a retry policy to be passed onto with_retry_time_based_async.&quot;&quot;&quot;</span>

        <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">STANDARD_RETRY_ASYNC_PARAMS</span><span class="p">)</span>
        <span class="n">defaults</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">retry_policy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">defaults</span>

    <span class="k">def</span> <span class="nf">_return_rest_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns either a dictionary or a string depending on the &#39;content-type&#39; of the response.&quot;&quot;&quot;</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;http.response.status_code&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">is_json</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content-type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_rest_call_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">httpx</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            method: The method to implement Create, Read, Update, Delete operations.</span>
<span class="sd">                Should be post, get, put, delete.</span>
<span class="sd">            uri: URI on which the method is performed.</span>
<span class="sd">            data: The payload to be delivered.</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers: Dictionary of headers to use.</span>
<span class="sd">            retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">                [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">            requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">                specific call.</span>
<span class="sd">            kwargs: Any other arguments taken by a</span>
<span class="sd">                [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">        Returns:</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_uri_and_headers</span><span class="p">(</span>
            <span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
        <span class="p">)</span>

        <span class="n">retry_policy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retry_policy_async</span><span class="p">(</span><span class="n">retry_policy</span><span class="p">)</span>
        <span class="n">requests_session</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">requests_session_async_synapse</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_requests_session_async_synapse</span><span class="p">(</span>
                <span class="n">asyncio_event_loop</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">auth</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;auth&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">)</span>
        <span class="n">requests_method_fn</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">requests_session</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">with_retry_time_based_async</span><span class="p">(</span>
                <span class="k">lambda</span><span class="p">:</span> <span class="n">requests_method_fn</span><span class="p">(</span>
                    <span class="n">uri</span><span class="p">,</span>
                    <span class="n">content</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                    <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
                <span class="o">**</span><span class="n">retry_policy</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">with_retry_time_based_async</span><span class="p">(</span>
                <span class="k">lambda</span><span class="p">:</span> <span class="n">requests_method_fn</span><span class="p">(</span>
                    <span class="n">uri</span><span class="p">,</span>
                    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                    <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
                <span class="o">**</span><span class="n">retry_policy</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_handle_httpx_synapse_http_error</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">rest_get_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP GET request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI on which get is performed</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers: Dictionary of headers to use.</span>
<span class="sd">            retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">                [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">            requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">                specific call.</span>
<span class="sd">            kwargs: Any other arguments taken by a</span>
<span class="sd">                [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">        Returns:</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
                <span class="s2">&quot;get&quot;</span><span class="p">,</span>
                <span class="n">uri</span><span class="p">,</span>
                <span class="kc">None</span><span class="p">,</span>
                <span class="n">endpoint</span><span class="p">,</span>
                <span class="n">headers</span><span class="p">,</span>
                <span class="n">retry_policy</span><span class="p">,</span>
                <span class="n">requests_session_async_synapse</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error in rest_get_async&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">rest_post_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP POST request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI on which get is performed</span>
<span class="sd">            body: The payload to be delivered</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers: Dictionary of headers to use.</span>
<span class="sd">            retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">                [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">            requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">                specific call.</span>
<span class="sd">            kwargs: Any other arguments taken by a</span>
<span class="sd">                [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">        Returns:</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
            <span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span>
            <span class="n">retry_policy</span><span class="p">,</span>
            <span class="n">requests_session_async_synapse</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">rest_put_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP PUT request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI on which get is performed</span>
<span class="sd">            body: The payload to be delivered.</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers: Dictionary of headers to use.</span>
<span class="sd">            retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">                [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">            requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">                specific call.</span>
<span class="sd">            kwargs: Any other arguments taken by a</span>
<span class="sd">                [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">        Returns</span>
<span class="sd">            JSON encoding of response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
            <span class="s2">&quot;put&quot;</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">body</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span>
            <span class="n">retry_policy</span><span class="p">,</span>
            <span class="n">requests_session_async_synapse</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">rest_delete_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP DELETE request to the Synapse server.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            uri: URI of resource to be deleted</span>
<span class="sd">            endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">            headers: Dictionary of headers to use.</span>
<span class="sd">            retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">                [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">            requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">                specific call</span>
<span class="sd">            kwargs: Any other arguments taken by a [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
            <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span>
            <span class="n">retry_policy</span><span class="p">,</span>
            <span class="n">requests_session_async_synapse</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<h3 id="synapseclient.Synapse-functions">Functions<a href="#synapseclient.Synapse-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.login" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">login</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">authToken</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_client</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.login" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Valid combinations of login() arguments:</p>
<ul>
<li>authToken</li>
</ul>
<p>If no login arguments are provided or only username is provided, login() will attempt to log in using
 information from these sources (in order of preference):</p>
<ol>
<li>.synapseConfig file (in user home folder unless configured otherwise)</li>
<li>User defined arguments during a CLI session</li>
<li>User's Personal Access Token (aka: Synapse Auth Token)
    from the environment variable: SYNAPSE_AUTH_TOKEN</li>
<li>Retrieves user's authentication token from AWS SSM Parameter store (if configured)</li>
</ol>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>email</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Synapse user name (or an email address associated with a Synapse account)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>authToken</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A bearer authorization token, e.g. a
<a href="https://python-docs.synapse.org/tutorials/authentication/">personal access token</a>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>silent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Defaults to False.  Suppresses the "Welcome ...!" message.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>bool</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cache_client</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether to cache the Synapse client object in the Synapse module. Defaults to True.
             When set to True anywhere a <code>Synapse</code> object is optional you do not need to pass an
             instance of <code>Synapse</code> to that function, method, or class.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>bool</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Logging in</summary>
  <p>Using an auth token:</p>
<pre><code>syn.login(authToken="authtoken")
&gt; Welcome, Me!
</code></pre>
<p>Using an auth token and username. The username is optional but verified
against the username in the auth token:</p>
<pre><code>syn.login(email="my-username", authToken="authtoken")
&gt; Welcome, Me!
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">login</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">silent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">authToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cache_client</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Valid combinations of login() arguments:</span>

<span class="sd">    - authToken</span>

<span class="sd">    If no login arguments are provided or only username is provided, login() will attempt to log in using</span>
<span class="sd">     information from these sources (in order of preference):</span>

<span class="sd">    1. .synapseConfig file (in user home folder unless configured otherwise)</span>
<span class="sd">    2. User defined arguments during a CLI session</span>
<span class="sd">    3. User&#39;s Personal Access Token (aka: Synapse Auth Token)</span>
<span class="sd">        from the environment variable: SYNAPSE_AUTH_TOKEN</span>
<span class="sd">    4. Retrieves user&#39;s authentication token from AWS SSM Parameter store (if configured)</span>

<span class="sd">    Arguments:</span>
<span class="sd">        email:        Synapse user name (or an email address associated with a Synapse account)</span>
<span class="sd">        authToken:    A bearer authorization token, e.g. a</span>
<span class="sd">            [personal access token](https://python-docs.synapse.org/tutorials/authentication/).</span>
<span class="sd">        silent:       Defaults to False.  Suppresses the &quot;Welcome ...!&quot; message.</span>
<span class="sd">        cache_client: Whether to cache the Synapse client object in the Synapse module. Defaults to True.</span>
<span class="sd">                         When set to True anywhere a `Synapse` object is optional you do not need to pass an</span>
<span class="sd">                         instance of `Synapse` to that function, method, or class.</span>

<span class="sd">    Example: Logging in</span>
<span class="sd">        Using an auth token:</span>

<span class="sd">            syn.login(authToken=&quot;authtoken&quot;)</span>
<span class="sd">            &gt; Welcome, Me!</span>

<span class="sd">        Using an auth token and username. The username is optional but verified</span>
<span class="sd">        against the username in the auth token:</span>

<span class="sd">            syn.login(email=&quot;my-username&quot;, authToken=&quot;authtoken&quot;)</span>
<span class="sd">            &gt; Welcome, Me!</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Note: the order of the logic below reflects the ordering in the docstring above.</span>

    <span class="c1"># Check version before logging in</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">skip_checks</span><span class="p">:</span>
        <span class="n">version_check</span><span class="p">()</span>

    <span class="c1"># Make sure to invalidate the existing session</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>

    <span class="n">credential_provider_chain</span> <span class="o">=</span> <span class="n">get_default_credential_chain</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="o">=</span> <span class="n">credential_provider_chain</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">(</span>
        <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">user_login_args</span><span class="o">=</span><span class="n">UserLoginArgs</span><span class="p">(</span>
            <span class="n">email</span><span class="p">,</span>
            <span class="n">authToken</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Final check on login success</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SynapseNoCredentialsError</span><span class="p">(</span><span class="s2">&quot;No credentials provided.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">silent</span><span class="p">:</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">()</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">profile</span><span class="p">[</span><span class="s2">&quot;displayName&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;displayName&quot;</span> <span class="ow">in</span> <span class="n">profile</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">username</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Welcome, </span><span class="si">{</span><span class="n">display_name</span><span class="si">}</span><span class="s2">!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">cache_client</span><span class="p">:</span>
        <span class="n">Synapse</span><span class="o">.</span><span class="n">set_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.logout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">logout</span><span class="p">()</span></code>

<a href="#synapseclient.Synapse.logout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Removes authentication information from the Synapse client.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>None</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes authentication information from the Synapse client.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Gets a Synapse entity from the repository service.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A Synapse ID (e.g. syn123 or syn123.1, with .1 denoting version), a Synapse Entity object,
              a plain dictionary in which 'id' maps to a Synapse ID or a local file that is stored in
              Synapse (found by the file MD5)</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The specific version to get.
                Defaults to the most recent version. If not denoted in the entity input.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>downloadFile</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether associated files(s) should be downloaded.
                Defaults to True.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>downloadLocation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Directory where to download the Synapse File Entity.
                Defaults to the local cache.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>followLink</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether the link returns the target Entity.
                Defaults to False.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ifcollision</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Determines how to handle file collisions.
                May be "overwrite.local", "keep.local", or "keep.both".
                Defaults to "keep.both".</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limitSearch</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A Synanpse ID used to limit the search in Synapse if entity is specified as a local
                file.  That is, if the file is stored in multiple locations in Synapse only the ones
                in the specified folder/project will be returned.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>md5</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The MD5 checksum for the file, if known. Otherwise if the file is a
local file, it will be calculated automatically.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A new Synapse Entity object of the appropriate type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Download file into cache</p>
<pre><code>entity = syn.get('syn1906479')
print(entity.name)
print(entity.path)
</code></pre>
<p>Download file into current working directory</p>
<pre><code>entity = syn.get('syn1906479', downloadLocation='.')
print(entity.name)
print(entity.path)
</code></pre>
<p>Determine the provenance of a locally stored file as indicated in Synapse</p>
<pre><code>entity = syn.get('/path/to/file.txt', limitSearch='syn12312')
print(syn.getProvenance(entity))
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets a Synapse entity from the repository service.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity:           A Synapse ID (e.g. syn123 or syn123.1, with .1 denoting version), a Synapse Entity object,</span>
<span class="sd">                          a plain dictionary in which &#39;id&#39; maps to a Synapse ID or a local file that is stored in</span>
<span class="sd">                          Synapse (found by the file MD5)</span>
<span class="sd">        version:          The specific version to get.</span>
<span class="sd">                            Defaults to the most recent version. If not denoted in the entity input.</span>
<span class="sd">        downloadFile:     Whether associated files(s) should be downloaded.</span>
<span class="sd">                            Defaults to True.</span>
<span class="sd">        downloadLocation: Directory where to download the Synapse File Entity.</span>
<span class="sd">                            Defaults to the local cache.</span>
<span class="sd">        followLink:       Whether the link returns the target Entity.</span>
<span class="sd">                            Defaults to False.</span>
<span class="sd">        ifcollision:      Determines how to handle file collisions.</span>
<span class="sd">                            May be &quot;overwrite.local&quot;, &quot;keep.local&quot;, or &quot;keep.both&quot;.</span>
<span class="sd">                            Defaults to &quot;keep.both&quot;.</span>
<span class="sd">        limitSearch:      A Synanpse ID used to limit the search in Synapse if entity is specified as a local</span>
<span class="sd">                            file.  That is, if the file is stored in multiple locations in Synapse only the ones</span>
<span class="sd">                            in the specified folder/project will be returned.</span>
<span class="sd">        md5: The MD5 checksum for the file, if known. Otherwise if the file is a</span>
<span class="sd">            local file, it will be calculated automatically.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new Synapse Entity object of the appropriate type.</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Download file into cache</span>

<span class="sd">            entity = syn.get(&#39;syn1906479&#39;)</span>
<span class="sd">            print(entity.name)</span>
<span class="sd">            print(entity.path)</span>

<span class="sd">        Download file into current working directory</span>

<span class="sd">            entity = syn.get(&#39;syn1906479&#39;, downloadLocation=&#39;.&#39;)</span>
<span class="sd">            print(entity.name)</span>
<span class="sd">            print(entity.path)</span>

<span class="sd">        Determine the provenance of a locally stored file as indicated in Synapse</span>

<span class="sd">            entity = syn.get(&#39;/path/to/file.txt&#39;, limitSearch=&#39;syn12312&#39;)</span>
<span class="sd">            print(syn.getProvenance(entity))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If entity is a local file determine the corresponding synapse entity</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getFromFile</span><span class="p">(</span>
            <span class="n">entity</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;limitSearch&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">md5</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;md5&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;downloadFile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_synapse_id_str</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SynapseFileNotFoundError</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="s2">&quot;The parameter </span><span class="si">%s</span><span class="s2"> is neither a local file path &quot;</span>
                <span class="s2">&quot; or a valid entity id&quot;</span> <span class="o">%</span> <span class="n">entity</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="c1"># have not been saved entities</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">Entity</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Cannot retrieve entity that has not been saved.&quot;</span>
            <span class="s2">&quot; Please use syn.store() to save your entity and try again.&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">input_version</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">synid_and_version</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_synid_and_version</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">version</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">input_version</span> <span class="k">if</span> <span class="n">input_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">synid_and_version</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="c1"># If ``version`` is None, the arg will be ignored</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span><span class="n">synid_and_version</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">version</span><span class="p">)</span>

    <span class="c1"># Check and warn for unmet access requirements</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_entity_restrictions</span><span class="p">(</span>
        <span class="n">bundle</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;downloadFile&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">return_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getWithEntityBundle</span><span class="p">(</span>
        <span class="n">entityBundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">return_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;synapse.concrete_type&quot;</span><span class="p">:</span> <span class="n">return_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;concreteType&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">return_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.store" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">store</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">createOrUpdate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">forceVersion</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">versionLabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">isRestricted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">activity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">used</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">executed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">activityName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">activityDescription</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_annotations</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.store" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Creates a new Entity or updates an existing Entity, uploading any files in the process.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>obj</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A Synapse Entity, Evaluation, or Wiki</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>used</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The Entity, Synapse ID, or URL used to create the object (can also be a list of these)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>executed</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The Entity, Synapse ID, or URL representing code executed to create the object
        (can also be a list of these)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>activity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Activity object specifying the user's provenance.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>activityName</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Activity name to be used in conjunction with <em>used</em> and <em>executed</em>.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>activityDescription</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Activity description to be used in conjunction with <em>used</em> and <em>executed</em>.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>createOrUpdate</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Indicates whether the method should automatically perform an update if the 'obj'
            conflicts with an existing Synapse object.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>forceVersion</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Indicates whether the method should increment the version of the object even if nothing
            has changed.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>versionLabel</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Arbitrary string used to label the version.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>isRestricted</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If set to true, an email will be sent to the Synapse access control team to start the
            process of adding terms-of-use or review board approval for this entity.
            You will be contacted with regards to the specific data being restricted and the
            requirements of access.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>set_annotations</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, set the annotations on the entity. If False, do not set the annotations.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A Synapse Entity, Evaluation, or Wiki</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Creating a new Project:</p>
<pre><code>from synapseclient import Project

project = Project('My uniquely named project')
project = syn.store(project)
</code></pre>
<p>Adding files with <a class="autorefs autorefs-internal" href="../activity/#synapseclient.activity.Activity">provenance (aka: Activity)</a>:</p>
<pre><code>from synapseclient import File, Activity
</code></pre>
<p>A synapse entity <em>syn1906480</em> contains data and an entity <em>syn1917825</em> contains code</p>
<pre><code>activity = Activity(
    'Fancy Processing',
    description='No seriously, really fancy processing',
    used=['syn1906480', 'http://data_r_us.com/fancy/data.txt'],
    executed='syn1917825')

test_entity = File('/path/to/data/file.xyz', description='Fancy new data', parent=project)
test_entity = syn.store(test_entity, activity=activity)
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span>
<span class="normal">2146</span>
<span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">store</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">obj</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">createOrUpdate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">forceVersion</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">versionLabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">isRestricted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">activity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">used</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">executed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">activityName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">activityDescription</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">set_annotations</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new Entity or updates an existing Entity, uploading any files in the process.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        obj: A Synapse Entity, Evaluation, or Wiki</span>
<span class="sd">        used: The Entity, Synapse ID, or URL used to create the object (can also be a list of these)</span>
<span class="sd">        executed: The Entity, Synapse ID, or URL representing code executed to create the object</span>
<span class="sd">                    (can also be a list of these)</span>
<span class="sd">        activity: Activity object specifying the user&#39;s provenance.</span>
<span class="sd">        activityName: Activity name to be used in conjunction with *used* and *executed*.</span>
<span class="sd">        activityDescription: Activity description to be used in conjunction with *used* and *executed*.</span>
<span class="sd">        createOrUpdate: Indicates whether the method should automatically perform an update if the &#39;obj&#39;</span>
<span class="sd">                        conflicts with an existing Synapse object.</span>
<span class="sd">        forceVersion: Indicates whether the method should increment the version of the object even if nothing</span>
<span class="sd">                        has changed.</span>
<span class="sd">        versionLabel: Arbitrary string used to label the version.</span>
<span class="sd">        isRestricted: If set to true, an email will be sent to the Synapse access control team to start the</span>
<span class="sd">                        process of adding terms-of-use or review board approval for this entity.</span>
<span class="sd">                        You will be contacted with regards to the specific data being restricted and the</span>
<span class="sd">                        requirements of access.</span>
<span class="sd">        set_annotations: If True, set the annotations on the entity. If False, do not set the annotations.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Synapse Entity, Evaluation, or Wiki</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Creating a new Project:</span>

<span class="sd">            from synapseclient import Project</span>

<span class="sd">            project = Project(&#39;My uniquely named project&#39;)</span>
<span class="sd">            project = syn.store(project)</span>

<span class="sd">        Adding files with [provenance (aka: Activity)][synapseclient.Activity]:</span>

<span class="sd">            from synapseclient import File, Activity</span>

<span class="sd">        A synapse entity *syn1906480* contains data and an entity *syn1917825* contains code</span>

<span class="sd">            activity = Activity(</span>
<span class="sd">                &#39;Fancy Processing&#39;,</span>
<span class="sd">                description=&#39;No seriously, really fancy processing&#39;,</span>
<span class="sd">                used=[&#39;syn1906480&#39;, &#39;http://data_r_us.com/fancy/data.txt&#39;],</span>
<span class="sd">                executed=&#39;syn1917825&#39;)</span>

<span class="sd">            test_entity = File(&#39;/path/to/data/file.xyz&#39;, description=&#39;Fancy new data&#39;, parent=project)</span>
<span class="sd">            test_entity = syn.store(test_entity, activity=activity)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;thread.id&quot;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">get_ident</span><span class="p">()})</span>
    <span class="c1"># SYNPY-1031: activity must be Activity object or code will fail later</span>
    <span class="k">if</span> <span class="n">activity</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="n">synapseclient</span><span class="o">.</span><span class="n">Activity</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;activity should be synapseclient.Activity object&quot;</span><span class="p">)</span>
    <span class="c1"># _before_store hook</span>
    <span class="c1"># give objects a chance to do something before being stored</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;_before_synapse_store&quot;</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_before_synapse_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># _synapse_store hook</span>
    <span class="c1"># for objects that know how to store themselves</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;_synapse_store&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">_synapse_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># Handle all non-Entity objects</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Entity</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Wiki</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storeWiki</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">createOrUpdate</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>  <span class="c1"># If ID is present, update</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">putURI</span><span class="p">(),</span> <span class="n">obj</span><span class="o">.</span><span class="n">json</span><span class="p">()))</span>

        <span class="k">try</span><span class="p">:</span>  <span class="c1"># If no ID is present, attempt to POST the object</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">})</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">postURI</span><span class="p">(),</span> <span class="n">obj</span><span class="o">.</span><span class="n">json</span><span class="p">()))</span>

        <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="c1"># If already present and we want to update attempt to get the object content</span>
            <span class="k">if</span> <span class="n">createOrUpdate</span> <span class="ow">and</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">409</span><span class="p">:</span>
                <span class="n">newObj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getByNameURI</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
                <span class="n">newObj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)(</span><span class="o">**</span><span class="n">newObj</span><span class="p">)</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">putURI</span><span class="p">(),</span> <span class="n">obj</span><span class="o">.</span><span class="n">json</span><span class="p">()))</span>
                <span class="k">return</span> <span class="n">obj</span>
            <span class="k">raise</span>

    <span class="c1"># If the input object is an Entity or a dictionary</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="n">properties</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">local_state</span> <span class="o">=</span> <span class="n">split_entity_namespaces</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Explicitly set an empty versionComment property if none is supplied,</span>
    <span class="c1"># otherwise an existing entity bundle&#39;s versionComment will be copied to the update.</span>
    <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;versionComment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;versionComment&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;versionComment&quot;</span> <span class="ow">in</span> <span class="n">properties</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>

    <span class="c1"># Anything with a path is treated as a cache-able item</span>
    <span class="c1"># Only Files are expected in the following logic</span>
    <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Folder</span><span class="p">):</span>
        <span class="n">local_file_md5_hex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;concreteType&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">File</span><span class="o">.</span><span class="n">_synapse_entity_type</span>
        <span class="c1"># Make sure the path is fully resolved</span>
        <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>

        <span class="c1"># Check if the File already exists in Synapse by fetching metadata on it</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">createOrUpdate</span><span class="p">:</span>
                <span class="c1"># update our properties from the existing bundle so that we have</span>
                <span class="c1"># enough to process this as an entity update.</span>
                <span class="n">properties</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">properties</span><span class="p">}</span>

            <span class="c1"># Check if the file should be uploaded</span>
            <span class="n">fileHandle</span> <span class="o">=</span> <span class="n">find_data_file_handle</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">fileHandle</span>
                <span class="ow">and</span> <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>
                <span class="o">==</span> <span class="s2">&quot;org.sagebionetworks.repo.model.file.ExternalFileHandle&quot;</span>
            <span class="p">):</span>
                <span class="c1"># switching away from ExternalFileHandle or the url was updated</span>
                <span class="n">needs_upload</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;synapseStore&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span>
                    <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;externalURL&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;externalURL&quot;</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">synapse_store_flag</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;synapseStore&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="s2">&quot;synapseStore&quot;</span>
                <span class="p">)</span>
                <span class="c1"># Check if we need to upload a new version of an existing</span>
                <span class="c1"># file. If the file referred to by entity[&#39;path&#39;] has been</span>
                <span class="c1"># modified, we want to upload the new version.</span>
                <span class="c1"># If synapeStore is false then we must upload a ExternalFileHandle</span>
                <span class="n">needs_upload</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">synapse_store_flag</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span>
                    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">],</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
                <span class="p">)</span>

                <span class="n">md5_stored_in_synapse</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="s2">&quot;contentMd5&quot;</span><span class="p">,</span> <span class="kc">None</span>
                <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">fileHandle</span> <span class="ow">or</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

                <span class="c1"># Check if we got an MD5 checksum from Synapse and compare it to the local file</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">synapse_store_flag</span>
                    <span class="ow">and</span> <span class="n">needs_upload</span>
                    <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>
                    <span class="ow">and</span> <span class="n">md5_stored_in_synapse</span>
                    <span class="ow">and</span> <span class="n">md5_stored_in_synapse</span>
                    <span class="o">==</span> <span class="p">(</span>
                        <span class="n">local_file_md5_hex</span> <span class="o">:=</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span>
                            <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
                    <span class="p">)</span>
                <span class="p">):</span>
                    <span class="n">needs_upload</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">needs_upload</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">needs_upload</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">needs_upload</span><span class="p">:</span>
            <span class="n">local_state_fh</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="n">synapseStore</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;synapseStore&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

            <span class="c1"># parent_id_for_upload is allowing `store` to be called on files that have</span>
            <span class="c1"># already been stored to Synapse, but did not specify a parentId in the</span>
            <span class="c1"># FileEntity. This is useful as it prevents the need to specify the</span>
            <span class="c1"># parentId every time a file is stored to Synapse when the ID is</span>
            <span class="c1"># already known.</span>
            <span class="n">parent_id_for_upload</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parentId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parent_id_for_upload</span> <span class="ow">and</span> <span class="n">bundle</span> <span class="ow">and</span> <span class="n">bundle</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entity&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">parent_id_for_upload</span> <span class="o">=</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;parentId&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">parent_id_for_upload</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SynapseMalformedEntityError</span><span class="p">(</span>
                    <span class="s2">&quot;Entities of type File must have a parentId.&quot;</span>
                <span class="p">)</span>

            <span class="n">fileHandle</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
                <span class="n">upload_file_handle_async</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span>
                    <span class="n">parent_id_for_upload</span><span class="p">,</span>
                    <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">synapseStore</span> <span class="ow">or</span> <span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;externalURL&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">else</span> <span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;externalURL&quot;</span><span class="p">),</span>
                    <span class="n">synapse_store</span><span class="o">=</span><span class="n">synapseStore</span><span class="p">,</span>
                    <span class="n">md5</span><span class="o">=</span><span class="n">local_file_md5_hex</span> <span class="ow">or</span> <span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">),</span>
                    <span class="n">file_size</span><span class="o">=</span><span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentSize&quot;</span><span class="p">),</span>
                    <span class="n">mimetype</span><span class="o">=</span><span class="n">local_state_fh</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentType&quot;</span><span class="p">),</span>
                <span class="p">),</span>
                <span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileHandle</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileHandle</span>

        <span class="k">elif</span> <span class="s2">&quot;dataFileHandleId&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
            <span class="c1"># Handle the case where the Entity lacks an ID</span>
            <span class="c1"># But becomes an update() due to conflict</span>
            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">][</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span>

        <span class="c1"># update the file_handle metadata if the FileEntity&#39;s FileHandle id has changed</span>
        <span class="n">local_state_fh_id</span> <span class="o">=</span> <span class="n">local_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">local_state_fh_id</span>
            <span class="ow">and</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">local_state_fh_id</span>
        <span class="p">):</span>
            <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;_file_handle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_data_file_handle</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
                    <span class="n">requestedObjects</span><span class="o">=</span><span class="p">{</span>
                        <span class="s2">&quot;includeEntity&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;includeFileHandles&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># check if we already have the filehandleid cached somewhere</span>
            <span class="n">cached_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;dataFileHandleId&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">cached_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;cacheDir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;files&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cached_path</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;cacheDir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">cached_path</span><span class="p">)</span>
                <span class="n">local_state</span><span class="p">[</span><span class="s2">&quot;files&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">cached_path</span><span class="p">)]</span>

    <span class="c1"># Create or update Entity in Synapse</span>
    <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_updateEntity</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">forceVersion</span><span class="p">,</span> <span class="n">versionLabel</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># If Link, get the target name, version number and concrete type and store in link properties</span>
        <span class="k">if</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;org.sagebionetworks.repo.model.Link&quot;</span><span class="p">:</span>
            <span class="n">target_properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntity</span><span class="p">(</span>
                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">][</span><span class="s2">&quot;targetId&quot;</span><span class="p">],</span>
                <span class="n">version</span><span class="o">=</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targetVersionNumber&quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">target_properties</span><span class="p">[</span><span class="s2">&quot;parentId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;parentId&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot create a Link to an entity under the same parent.&quot;</span>
                <span class="p">)</span>
            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksToClassName&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_properties</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">target_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targetVersionNumber&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;linksTo&quot;</span><span class="p">][</span><span class="s2">&quot;targetVersionNumber&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_properties</span><span class="p">[</span>
                    <span class="s2">&quot;versionNumber&quot;</span>
                <span class="p">]</span>
            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_createEntity</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">createOrUpdate</span> <span class="ow">and</span> <span class="n">ex</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">409</span><span class="p">:</span>
                <span class="c1"># Get the existing Entity&#39;s ID via the name and parent</span>
                <span class="n">existing_entity_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findEntityId</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parentId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">existing_entity_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span>

                <span class="c1"># get existing properties and annotations</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">bundle</span><span class="p">:</span>
                    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntityBundle</span><span class="p">(</span>
                        <span class="n">existing_entity_id</span><span class="p">,</span>
                        <span class="n">requestedObjects</span><span class="o">=</span><span class="p">{</span>
                            <span class="s2">&quot;includeEntity&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;includeAnnotations&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">)</span>

                <span class="n">properties</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;entity&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">properties</span><span class="p">}</span>

                <span class="c1"># we additionally merge the annotations under the assumption that a missing annotation</span>
                <span class="c1"># from a resolved conflict represents an newer annotation that should be preserved</span>
                <span class="c1"># rather than an intentionally deleted annotation.</span>
                <span class="n">annotations</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="o">**</span><span class="n">from_synapse_annotations</span><span class="p">(</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]),</span>
                    <span class="o">**</span><span class="n">annotations</span><span class="p">,</span>
                <span class="p">}</span>

                <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_updateEntity</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">,</span> <span class="n">forceVersion</span><span class="p">,</span> <span class="n">versionLabel</span>
                <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>

    <span class="c1"># Deal with access restrictions</span>
    <span class="k">if</span> <span class="n">isRestricted</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_createAccessRequirementIfNone</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>

    <span class="c1"># Update annotations</span>
    <span class="k">if</span> <span class="n">set_annotations</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="p">(</span><span class="ow">not</span> <span class="n">bundle</span> <span class="ow">and</span> <span class="n">annotations</span><span class="p">)</span>
        <span class="ow">or</span> <span class="p">(</span>
            <span class="n">bundle</span> <span class="ow">and</span> <span class="n">check_annotations_changed</span><span class="p">(</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">],</span> <span class="n">annotations</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">):</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_annotations</span><span class="p">(</span>
            <span class="n">Annotations</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">],</span> <span class="n">annotations</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="n">etag</span>

    <span class="c1"># If the parameters &#39;used&#39; or &#39;executed&#39; are given, create an Activity object</span>
    <span class="k">if</span> <span class="n">used</span> <span class="ow">or</span> <span class="n">executed</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">activity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseProvenanceError</span><span class="p">(</span>
                <span class="s2">&quot;Provenance can be specified as an Activity object or as used/executed&quot;</span>
                <span class="s2">&quot; item(s), but not both.&quot;</span>
            <span class="p">)</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">activityName</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">activityDescription</span><span class="p">,</span>
            <span class="n">used</span><span class="o">=</span><span class="n">used</span><span class="p">,</span>
            <span class="n">executed</span><span class="o">=</span><span class="n">executed</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># If we have an Activity, set it as the Entity&#39;s provenance record</span>
    <span class="k">if</span> <span class="n">activity</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setProvenance</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">activity</span><span class="p">)</span>

        <span class="c1"># &#39;etag&#39; has changed, so get the new Entity</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntity</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>

    <span class="c1"># Return the updated Entity object</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="n">Entity</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">local_state</span><span class="p">)</span>
    <span class="n">return_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">return_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;synapse.concrete_type&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;concreteType&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">return_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.move" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">new_parent</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.move" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Move a Synapse entity to a new container.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A Synapse ID, a Synapse Entity object, or a local file that is stored in Synapse</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>new_parent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The new parent container (Folder or Project) to which the entity should be moved.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The Synapse Entity object that has been moved.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Move a Synapse Entity object to a new parent container</p>
<pre><code>entity = syn.move('syn456', 'syn123')
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">new_parent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Move a Synapse entity to a new container.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity:     A Synapse ID, a Synapse Entity object, or a local file that is stored in Synapse</span>
<span class="sd">        new_parent: The new parent container (Folder or Project) to which the entity should be moved.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The Synapse Entity object that has been moved.</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Move a Synapse Entity object to a new parent container</span>

<span class="sd">            entity = syn.move(&#39;syn456&#39;, &#39;syn123&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">entity</span><span class="o">.</span><span class="n">parentId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">new_parent</span><span class="p">)</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">forceVersion</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;synapse.parent_id&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parentId&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">entity</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.delete" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Removes an object from Synapse.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>obj</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An existing object stored on Synapse such as Evaluation, File, Project, or Wiki</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>For entities, specify a particular version to delete.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span>
<span class="normal">2285</span>
<span class="normal">2286</span>
<span class="normal">2287</span>
<span class="normal">2288</span>
<span class="normal">2289</span>
<span class="normal">2290</span>
<span class="normal">2291</span>
<span class="normal">2292</span>
<span class="normal">2293</span>
<span class="normal">2294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">obj</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes an object from Synapse.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        obj: An existing object stored on Synapse such as Evaluation, File, Project, or Wiki</span>
<span class="sd">        version: For entities, specify a particular version to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Handle all strings as the Entity ID for backward compatibility</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/version/</span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;_synapse_delete&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">_synapse_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Versionable</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">deleteURI</span><span class="p">(</span><span class="n">versionNumber</span><span class="o">=</span><span class="n">version</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">deleteURI</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SynapseError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t delete a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s2">. Please specify a Synapse object or id&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_annotations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_annotations</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get_annotations" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieve annotations for an Entity from the Synapse Repository as a Python dict.</p>
<p>Note that collapsing annotations from the native Synapse format to a Python dict may involve some loss of
information. See <code>_getRawAnnotations</code> to get annotations in the native format.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to lookup</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[str, <a class="autorefs autorefs-internal" title="synapseclient.entity.Entity" href="../entity/#synapseclient.entity.Entity">Entity</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The version of the Entity to retrieve.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[str, int]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.annotations.Annotations" href="../annotations/#synapseclient.annotations.Annotations">Annotations</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../annotations/#synapseclient.annotations.Annotations">synapseclient.annotations.Annotations</a> object, a dict that also has id and etag attributes</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2588</span>
<span class="normal">2589</span>
<span class="normal">2590</span>
<span class="normal">2591</span>
<span class="normal">2592</span>
<span class="normal">2593</span>
<span class="normal">2594</span>
<span class="normal">2595</span>
<span class="normal">2596</span>
<span class="normal">2597</span>
<span class="normal">2598</span>
<span class="normal">2599</span>
<span class="normal">2600</span>
<span class="normal">2601</span>
<span class="normal">2602</span>
<span class="normal">2603</span>
<span class="normal">2604</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_annotations</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">],</span> <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Annotations</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve annotations for an Entity from the Synapse Repository as a Python dict.</span>

<span class="sd">    Note that collapsing annotations from the native Synapse format to a Python dict may involve some loss of</span>
<span class="sd">    information. See `_getRawAnnotations` to get annotations in the native format.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: An Entity or Synapse ID to lookup</span>
<span class="sd">        version: The version of the Entity to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A [synapseclient.annotations.Annotations][] object, a dict that also has id and etag attributes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">from_synapse_annotations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getRawAnnotations</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">version</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.set_annotations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.set_annotations" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Store annotations for an Entity in the Synapse Repository.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>annotations</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../annotations/#synapseclient.annotations.Annotations">synapseclient.annotations.Annotations</a> of annotation names and values,
            with the id and etag attribute set</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="synapseclient.annotations.Annotations" href="../annotations/#synapseclient.annotations.Annotations">Annotations</a></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The updated <a class="autorefs autorefs-internal" href="../annotations/#synapseclient.annotations.Annotations">synapseclient.annotations.Annotations</a> for the entity</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Getting annotations, adding a new annotation, and updating the annotations:</p>
<pre><code>annos = syn.get_annotations('syn123')
</code></pre>
<p><code>annos</code> will contain the id and etag associated with the entity upon retrieval</p>
<pre><code>print(annos.id)
&gt; syn123
print(annos.etag)
&gt; 7bdb83e9-a50a-46e4-987a-4962559f090f   (Usually some UUID in the form of a string)
</code></pre>
<p>Returned <code>annos</code> object from <code>get_annotations()</code> can be used as if it were a dict.
Set key 'foo' to have value of 'bar' and 'baz'</p>
<pre><code>annos['foo'] = ['bar', 'baz']
</code></pre>
<p>Single values will automatically be wrapped in a list once stored</p>
<pre><code>annos['qwerty'] = 'asdf'
</code></pre>
<p>Store the annotations</p>
<pre><code>annos = syn.set_annotations(annos)

print(annos)
&gt; {'foo':['bar','baz], 'qwerty':['asdf']}
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2606</span>
<span class="normal">2607</span>
<span class="normal">2608</span>
<span class="normal">2609</span>
<span class="normal">2610</span>
<span class="normal">2611</span>
<span class="normal">2612</span>
<span class="normal">2613</span>
<span class="normal">2614</span>
<span class="normal">2615</span>
<span class="normal">2616</span>
<span class="normal">2617</span>
<span class="normal">2618</span>
<span class="normal">2619</span>
<span class="normal">2620</span>
<span class="normal">2621</span>
<span class="normal">2622</span>
<span class="normal">2623</span>
<span class="normal">2624</span>
<span class="normal">2625</span>
<span class="normal">2626</span>
<span class="normal">2627</span>
<span class="normal">2628</span>
<span class="normal">2629</span>
<span class="normal">2630</span>
<span class="normal">2631</span>
<span class="normal">2632</span>
<span class="normal">2633</span>
<span class="normal">2634</span>
<span class="normal">2635</span>
<span class="normal">2636</span>
<span class="normal">2637</span>
<span class="normal">2638</span>
<span class="normal">2639</span>
<span class="normal">2640</span>
<span class="normal">2641</span>
<span class="normal">2642</span>
<span class="normal">2643</span>
<span class="normal">2644</span>
<span class="normal">2645</span>
<span class="normal">2646</span>
<span class="normal">2647</span>
<span class="normal">2648</span>
<span class="normal">2649</span>
<span class="normal">2650</span>
<span class="normal">2651</span>
<span class="normal">2652</span>
<span class="normal">2653</span>
<span class="normal">2654</span>
<span class="normal">2655</span>
<span class="normal">2656</span>
<span class="normal">2657</span>
<span class="normal">2658</span>
<span class="normal">2659</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="p">:</span> <span class="n">Annotations</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Store annotations for an Entity in the Synapse Repository.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        annotations: A [synapseclient.annotations.Annotations][] of annotation names and values,</span>
<span class="sd">                        with the id and etag attribute set</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated [synapseclient.annotations.Annotations][] for the entity</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Getting annotations, adding a new annotation, and updating the annotations:</span>

<span class="sd">            annos = syn.get_annotations(&#39;syn123&#39;)</span>

<span class="sd">        `annos` will contain the id and etag associated with the entity upon retrieval</span>

<span class="sd">            print(annos.id)</span>
<span class="sd">            &gt; syn123</span>
<span class="sd">            print(annos.etag)</span>
<span class="sd">            &gt; 7bdb83e9-a50a-46e4-987a-4962559f090f   (Usually some UUID in the form of a string)</span>

<span class="sd">        Returned `annos` object from `get_annotations()` can be used as if it were a dict.</span>
<span class="sd">        Set key &#39;foo&#39; to have value of &#39;bar&#39; and &#39;baz&#39;</span>

<span class="sd">            annos[&#39;foo&#39;] = [&#39;bar&#39;, &#39;baz&#39;]</span>

<span class="sd">        Single values will automatically be wrapped in a list once stored</span>

<span class="sd">            annos[&#39;qwerty&#39;] = &#39;asdf&#39;</span>

<span class="sd">        Store the annotations</span>

<span class="sd">            annos = syn.set_annotations(annos)</span>

<span class="sd">            print(annos)</span>
<span class="sd">            &gt; {&#39;foo&#39;:[&#39;bar&#39;,&#39;baz], &#39;qwerty&#39;:[&#39;asdf&#39;]}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">annotations</span><span class="p">,</span> <span class="n">Annotations</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected a synapseclient.Annotations object&quot;</span><span class="p">)</span>

    <span class="n">synapseAnnos</span> <span class="o">=</span> <span class="n">to_synapse_annotations</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>

    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">from_synapse_annotations</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/annotations2&quot;</span><span class="p">,</span>
            <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">synapseAnnos</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.tableQuery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tableQuery</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">resultsAs</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.tableQuery" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Query a Synapse Table.</p>
<p>You can receive query results either as a generator over rows or as a CSV file. For smallish tables, either
method will work equally well. Use of a "rowset" generator allows rows to be processed one at a time and
processing may be stopped before downloading the entire table.</p>
<p>Optional keyword arguments differ for the two return types of <code>rowset</code> or <code>csv</code></p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Query string in a <a href="https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/web/controller/TableExamples.html">SQL-like syntax</a>, for example: <code>"SELECT * from syn12345"</code></p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>resultsAs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>select whether results are returned as a CSV file ("csv") or incrementally downloaded as sets of rows ("rowset")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;csv&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(rowset only) Specify the maximum number of rows to be returned, defaults to None</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>offset</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(rowset only) Don't return the first n rows, defaults to None</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>quoteCharacter</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(csv only) default double quote</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>escapeCharacter</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(csv only) default backslash</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>lineEnd</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(csv only) defaults to os.linesep</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>separator</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(csv only) defaults to comma</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>header</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(csv only) True by default</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>includeRowIdAndRowVersion</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(csv only) True by default</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>downloadLocation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(csv only) directory path to download the CSV file to</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.TableQueryResult">TableQueryResult</a> or <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.CsvFileTable">CsvFileTable</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>NOTE</summary>
  <p>When performing queries on frequently updated tables, the table can be inaccessible for a period leading
  to a timeout of the query.  Since the results are guaranteed to eventually be returned you can change the
  max timeout by setting the table_query_timeout variable of the Synapse object:</p>
<pre><code>  # Sets the max timeout to 5 minutes.
  syn.table_query_timeout = 300
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5366</span>
<span class="normal">5367</span>
<span class="normal">5368</span>
<span class="normal">5369</span>
<span class="normal">5370</span>
<span class="normal">5371</span>
<span class="normal">5372</span>
<span class="normal">5373</span>
<span class="normal">5374</span>
<span class="normal">5375</span>
<span class="normal">5376</span>
<span class="normal">5377</span>
<span class="normal">5378</span>
<span class="normal">5379</span>
<span class="normal">5380</span>
<span class="normal">5381</span>
<span class="normal">5382</span>
<span class="normal">5383</span>
<span class="normal">5384</span>
<span class="normal">5385</span>
<span class="normal">5386</span>
<span class="normal">5387</span>
<span class="normal">5388</span>
<span class="normal">5389</span>
<span class="normal">5390</span>
<span class="normal">5391</span>
<span class="normal">5392</span>
<span class="normal">5393</span>
<span class="normal">5394</span>
<span class="normal">5395</span>
<span class="normal">5396</span>
<span class="normal">5397</span>
<span class="normal">5398</span>
<span class="normal">5399</span>
<span class="normal">5400</span>
<span class="normal">5401</span>
<span class="normal">5402</span>
<span class="normal">5403</span>
<span class="normal">5404</span>
<span class="normal">5405</span>
<span class="normal">5406</span>
<span class="normal">5407</span>
<span class="normal">5408</span>
<span class="normal">5409</span>
<span class="normal">5410</span>
<span class="normal">5411</span>
<span class="normal">5412</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">tableQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resultsAs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Query a Synapse Table.</span>

<span class="sd">    You can receive query results either as a generator over rows or as a CSV file. For smallish tables, either</span>
<span class="sd">    method will work equally well. Use of a &quot;rowset&quot; generator allows rows to be processed one at a time and</span>
<span class="sd">    processing may be stopped before downloading the entire table.</span>

<span class="sd">    Optional keyword arguments differ for the two return types of `rowset` or `csv`</span>

<span class="sd">    Arguments:</span>
<span class="sd">        query: Query string in a [SQL-like syntax](https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/web/controller/TableExamples.html), for example: `&quot;SELECT * from syn12345&quot;`</span>
<span class="sd">        resultsAs: select whether results are returned as a CSV file (&quot;csv&quot;) or incrementally downloaded as sets of rows (&quot;rowset&quot;)</span>
<span class="sd">        limit: (rowset only) Specify the maximum number of rows to be returned, defaults to None</span>
<span class="sd">        offset: (rowset only) Don&#39;t return the first n rows, defaults to None</span>
<span class="sd">        quoteCharacter: (csv only) default double quote</span>
<span class="sd">        escapeCharacter: (csv only) default backslash</span>
<span class="sd">        lineEnd: (csv only) defaults to os.linesep</span>
<span class="sd">        separator: (csv only) defaults to comma</span>
<span class="sd">        header: (csv only) True by default</span>
<span class="sd">        includeRowIdAndRowVersion: (csv only) True by default</span>
<span class="sd">        downloadLocation: (csv only) directory path to download the CSV file to</span>

<span class="sd">    Returns:</span>
<span class="sd">        A [TableQueryResult][synapseclient.table.TableQueryResult] or [CsvFileTable][synapseclient.table.CsvFileTable] object</span>

<span class="sd">    NOTE:</span>
<span class="sd">        When performing queries on frequently updated tables, the table can be inaccessible for a period leading</span>
<span class="sd">          to a timeout of the query.  Since the results are guaranteed to eventually be returned you can change the</span>
<span class="sd">          max timeout by setting the table_query_timeout variable of the Synapse object:</span>

<span class="sd">              # Sets the max timeout to 5 minutes.</span>
<span class="sd">              syn.table_query_timeout = 300</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">resultsAs</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;rowset&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TableQueryResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">resultsAs</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
        <span class="c1"># TODO: remove isConsistent because it has now been deprecated</span>
        <span class="c1"># from the backend</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;isConsistent&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;isConsistent&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CsvFileTable</span><span class="o">.</span><span class="n">from_table_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Unknown return type requested from tableQuery: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">resultsAs</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.createColumns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">createColumns</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.createColumns" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Creates a batch of <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.Column">synapseclient.table.Column</a>'s within a single request.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>columns</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A list of <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.Column">synapseclient.table.Column</a>'s</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="synapseclient.table.Column" href="../tables/#synapseclient.table.Column">Column</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="synapseclient.table.Column" href="../tables/#synapseclient.table.Column">Column</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A list of <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.Column">synapseclient.table.Column</a>'s that have been created in Synapse</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5681</span>
<span class="normal">5682</span>
<span class="normal">5683</span>
<span class="normal">5684</span>
<span class="normal">5685</span>
<span class="normal">5686</span>
<span class="normal">5687</span>
<span class="normal">5688</span>
<span class="normal">5689</span>
<span class="normal">5690</span>
<span class="normal">5691</span>
<span class="normal">5692</span>
<span class="normal">5693</span>
<span class="normal">5694</span>
<span class="normal">5695</span>
<span class="normal">5696</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">createColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Column</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Column</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a batch of [synapseclient.table.Column][]&#39;s within a single request.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        columns: A list of [synapseclient.table.Column][]&#39;s</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of [synapseclient.table.Column][]&#39;s that have been created in Synapse</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.ListWrapper&quot;</span><span class="p">,</span>
        <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">columns</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="s2">&quot;/column/batch&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request_body</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">]]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getColumn" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getColumn</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getColumn" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Gets a Column object from Synapse by ID.</p>
<p>See: <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.Column">synapseclient.table.Column</a></p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The ID of the column to retrieve</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An object of type <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.Column">synapseclient.table.Column</a></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Getting a column</p>
<pre><code>column = syn.getColumn(123)
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5150</span>
<span class="normal">5151</span>
<span class="normal">5152</span>
<span class="normal">5153</span>
<span class="normal">5154</span>
<span class="normal">5155</span>
<span class="normal">5156</span>
<span class="normal">5157</span>
<span class="normal">5158</span>
<span class="normal">5159</span>
<span class="normal">5160</span>
<span class="normal">5161</span>
<span class="normal">5162</span>
<span class="normal">5163</span>
<span class="normal">5164</span>
<span class="normal">5165</span>
<span class="normal">5166</span>
<span class="normal">5167</span>
<span class="normal">5168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets a Column object from Synapse by ID.</span>

<span class="sd">    See: [synapseclient.table.Column][]</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id: The ID of the column to retrieve</span>

<span class="sd">    Returns:</span>
<span class="sd">        An object of type [synapseclient.table.Column][]</span>


<span class="sd">    Example: Using this function</span>
<span class="sd">        Getting a column</span>

<span class="sd">            column = syn.getColumn(123)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">Column</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="nb">id</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getColumns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getColumns</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getColumns" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get the columns defined in Synapse either (1) corresponding to a set of column headers, (2) those for a given
schema, or (3) those whose names start with a given prefix.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>x</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A list of column headers, a Table Entity object (Schema/EntityViewSchema), a Table's Synapse ID, or a
string prefix</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>maximum number of columns to return (pagination parameter)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>100</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>offset</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>the index of the first column to return (pagination parameter)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>A generator over <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.Column">synapseclient.table.Column</a> objects</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5170</span>
<span class="normal">5171</span>
<span class="normal">5172</span>
<span class="normal">5173</span>
<span class="normal">5174</span>
<span class="normal">5175</span>
<span class="normal">5176</span>
<span class="normal">5177</span>
<span class="normal">5178</span>
<span class="normal">5179</span>
<span class="normal">5180</span>
<span class="normal">5181</span>
<span class="normal">5182</span>
<span class="normal">5183</span>
<span class="normal">5184</span>
<span class="normal">5185</span>
<span class="normal">5186</span>
<span class="normal">5187</span>
<span class="normal">5188</span>
<span class="normal">5189</span>
<span class="normal">5190</span>
<span class="normal">5191</span>
<span class="normal">5192</span>
<span class="normal">5193</span>
<span class="normal">5194</span>
<span class="normal">5195</span>
<span class="normal">5196</span>
<span class="normal">5197</span>
<span class="normal">5198</span>
<span class="normal">5199</span>
<span class="normal">5200</span>
<span class="normal">5201</span>
<span class="normal">5202</span>
<span class="normal">5203</span>
<span class="normal">5204</span>
<span class="normal">5205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the columns defined in Synapse either (1) corresponding to a set of column headers, (2) those for a given</span>
<span class="sd">    schema, or (3) those whose names start with a given prefix.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        x: A list of column headers, a Table Entity object (Schema/EntityViewSchema), a Table&#39;s Synapse ID, or a</span>
<span class="sd">            string prefix</span>
<span class="sd">        limit: maximum number of columns to return (pagination parameter)</span>
<span class="sd">        offset: the index of the first column to return (pagination parameter)</span>

<span class="sd">    Yields:</span>
<span class="sd">        A generator over [synapseclient.table.Column][] objects</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/column&quot;</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># if header is an integer, it&#39;s a columnID, otherwise it&#39;s an aggregate column, like &quot;AVG(Foo)&quot;</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
                <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">getColumn</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="c1"># ignore aggregate column</span>
                <span class="k">pass</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">SchemaBase</span><span class="p">)</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_synapse_id_str</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTableColumns</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">col</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/column?prefix=&quot;</span> <span class="o">+</span> <span class="n">x</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t get columns for a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getTableColumns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getTableColumns</span><span class="p">(</span><span class="n">table</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getTableColumns" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieve the column models used in the given table schema.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The schema of the Table whose columns are to be retrieved</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>A Generator over the Table's <a class="autorefs autorefs-internal" href="../tables/#synapseclient.table.Column">columns</a></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5350</span>
<span class="normal">5351</span>
<span class="normal">5352</span>
<span class="normal">5353</span>
<span class="normal">5354</span>
<span class="normal">5355</span>
<span class="normal">5356</span>
<span class="normal">5357</span>
<span class="normal">5358</span>
<span class="normal">5359</span>
<span class="normal">5360</span>
<span class="normal">5361</span>
<span class="normal">5362</span>
<span class="normal">5363</span>
<span class="normal">5364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getTableColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the column models used in the given table schema.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        table: The schema of the Table whose columns are to be retrieved</span>

<span class="sd">    Yields:</span>
<span class="sd">        A Generator over the Table&#39;s [columns][synapseclient.table.Column]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{id}</span><span class="s2">/column&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
    <span class="c1"># The returned object type for this service, PaginatedColumnModels, is a misnomer.</span>
    <span class="c1"># This service always returns the full list of results so the pagination does not not actually matter.</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)[</span><span class="s2">&quot;results&quot;</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="n">Column</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.downloadTableColumns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">downloadTableColumns</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.downloadTableColumns" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Bulk download of table-associated files.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Table query result</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>columns</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A list of column names as strings</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>downloadLocation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Directory into which to download the files</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dictionary from file handle ID to path in the local file system.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>For example, consider a Synapse table whose ID is "syn12345" with two columns of type FILEHANDLEID named 'foo'
and 'bar'. The associated files are JSON encoded, so we might retrieve the files from Synapse and load for the
second 100 of those rows as shown here:</p>
<pre><code>import json

results = syn.tableQuery('SELECT * FROM syn12345 LIMIT 100 OFFSET 100')
file_map = syn.downloadTableColumns(results, ['foo', 'bar'])

for file_handle_id, path in file_map.items():
    with open(path) as f:
        data[file_handle_id] = f.read()
</code></pre>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5714</span>
<span class="normal">5715</span>
<span class="normal">5716</span>
<span class="normal">5717</span>
<span class="normal">5718</span>
<span class="normal">5719</span>
<span class="normal">5720</span>
<span class="normal">5721</span>
<span class="normal">5722</span>
<span class="normal">5723</span>
<span class="normal">5724</span>
<span class="normal">5725</span>
<span class="normal">5726</span>
<span class="normal">5727</span>
<span class="normal">5728</span>
<span class="normal">5729</span>
<span class="normal">5730</span>
<span class="normal">5731</span>
<span class="normal">5732</span>
<span class="normal">5733</span>
<span class="normal">5734</span>
<span class="normal">5735</span>
<span class="normal">5736</span>
<span class="normal">5737</span>
<span class="normal">5738</span>
<span class="normal">5739</span>
<span class="normal">5740</span>
<span class="normal">5741</span>
<span class="normal">5742</span>
<span class="normal">5743</span>
<span class="normal">5744</span>
<span class="normal">5745</span>
<span class="normal">5746</span>
<span class="normal">5747</span>
<span class="normal">5748</span>
<span class="normal">5749</span>
<span class="normal">5750</span>
<span class="normal">5751</span>
<span class="normal">5752</span>
<span class="normal">5753</span>
<span class="normal">5754</span>
<span class="normal">5755</span>
<span class="normal">5756</span>
<span class="normal">5757</span>
<span class="normal">5758</span>
<span class="normal">5759</span>
<span class="normal">5760</span>
<span class="normal">5761</span>
<span class="normal">5762</span>
<span class="normal">5763</span>
<span class="normal">5764</span>
<span class="normal">5765</span>
<span class="normal">5766</span>
<span class="normal">5767</span>
<span class="normal">5768</span>
<span class="normal">5769</span>
<span class="normal">5770</span>
<span class="normal">5771</span>
<span class="normal">5772</span>
<span class="normal">5773</span>
<span class="normal">5774</span>
<span class="normal">5775</span>
<span class="normal">5776</span>
<span class="normal">5777</span>
<span class="normal">5778</span>
<span class="normal">5779</span>
<span class="normal">5780</span>
<span class="normal">5781</span>
<span class="normal">5782</span>
<span class="normal">5783</span>
<span class="normal">5784</span>
<span class="normal">5785</span>
<span class="normal">5786</span>
<span class="normal">5787</span>
<span class="normal">5788</span>
<span class="normal">5789</span>
<span class="normal">5790</span>
<span class="normal">5791</span>
<span class="normal">5792</span>
<span class="normal">5793</span>
<span class="normal">5794</span>
<span class="normal">5795</span>
<span class="normal">5796</span>
<span class="normal">5797</span>
<span class="normal">5798</span>
<span class="normal">5799</span>
<span class="normal">5800</span>
<span class="normal">5801</span>
<span class="normal">5802</span>
<span class="normal">5803</span>
<span class="normal">5804</span>
<span class="normal">5805</span>
<span class="normal">5806</span>
<span class="normal">5807</span>
<span class="normal">5808</span>
<span class="normal">5809</span>
<span class="normal">5810</span>
<span class="normal">5811</span>
<span class="normal">5812</span>
<span class="normal">5813</span>
<span class="normal">5814</span>
<span class="normal">5815</span>
<span class="normal">5816</span>
<span class="normal">5817</span>
<span class="normal">5818</span>
<span class="normal">5819</span>
<span class="normal">5820</span>
<span class="normal">5821</span>
<span class="normal">5822</span>
<span class="normal">5823</span>
<span class="normal">5824</span>
<span class="normal">5825</span>
<span class="normal">5826</span>
<span class="normal">5827</span>
<span class="normal">5828</span>
<span class="normal">5829</span>
<span class="normal">5830</span>
<span class="normal">5831</span>
<span class="normal">5832</span>
<span class="normal">5833</span>
<span class="normal">5834</span>
<span class="normal">5835</span>
<span class="normal">5836</span>
<span class="normal">5837</span>
<span class="normal">5838</span>
<span class="normal">5839</span>
<span class="normal">5840</span>
<span class="normal">5841</span>
<span class="normal">5842</span>
<span class="normal">5843</span>
<span class="normal">5844</span>
<span class="normal">5845</span>
<span class="normal">5846</span>
<span class="normal">5847</span>
<span class="normal">5848</span>
<span class="normal">5849</span>
<span class="normal">5850</span>
<span class="normal">5851</span>
<span class="normal">5852</span>
<span class="normal">5853</span>
<span class="normal">5854</span>
<span class="normal">5855</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">downloadTableColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Bulk download of table-associated files.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        table: Table query result</span>
<span class="sd">        columns: A list of column names as strings</span>
<span class="sd">        downloadLocation: Directory into which to download the files</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary from file handle ID to path in the local file system.</span>

<span class="sd">    For example, consider a Synapse table whose ID is &quot;syn12345&quot; with two columns of type FILEHANDLEID named &#39;foo&#39;</span>
<span class="sd">    and &#39;bar&#39;. The associated files are JSON encoded, so we might retrieve the files from Synapse and load for the</span>
<span class="sd">    second 100 of those rows as shown here:</span>

<span class="sd">        import json</span>

<span class="sd">        results = syn.tableQuery(&#39;SELECT * FROM syn12345 LIMIT 100 OFFSET 100&#39;)</span>
<span class="sd">        file_map = syn.downloadTableColumns(results, [&#39;foo&#39;, &#39;bar&#39;])</span>

<span class="sd">        for file_handle_id, path in file_map.items():</span>
<span class="sd">            with open(path) as f:</span>
<span class="sd">                data[file_handle_id] = f.read()</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">RETRIABLE_FAILURE_CODES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EXCEEDS_SIZE_LIMIT&quot;</span><span class="p">]</span>
    <span class="n">MAX_DOWNLOAD_TRIES</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">max_files_per_request</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_files_per_request&quot;</span><span class="p">,</span> <span class="mi">2500</span><span class="p">)</span>
    <span class="c1"># Rowset tableQuery result not allowed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">TableQueryResult</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;downloadTableColumn doesn&#39;t work with rowsets. Please use default tableQuery settings.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Columns parameter requires a list of column names&quot;</span><span class="p">)</span>

    <span class="p">(</span>
        <span class="n">file_handle_associations</span><span class="p">,</span>
        <span class="n">file_handle_to_path_map</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_table_download_file_handle_list</span><span class="p">(</span>
        <span class="n">table</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">,</span>
        <span class="n">downloadLocation</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Downloading </span><span class="si">%d</span><span class="s2"> files, </span><span class="si">%d</span><span class="s2"> cached locally&quot;</span>
        <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">file_handle_associations</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_handle_to_path_map</span><span class="p">))</span>
    <span class="p">)</span>

    <span class="n">permanent_failures</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>

    <span class="n">attempts</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_handle_associations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">attempts</span> <span class="o">&lt;</span> <span class="n">MAX_DOWNLOAD_TRIES</span><span class="p">:</span>
        <span class="n">attempts</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">file_handle_associations_batch</span> <span class="o">=</span> <span class="n">file_handle_associations</span><span class="p">[</span>
            <span class="p">:</span><span class="n">max_files_per_request</span>
        <span class="p">]</span>

        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># call async service to build zip file</span>
        <span class="c1"># ------------------------------------------------------------</span>

        <span class="c1"># returns a BulkFileDownloadResponse:</span>
        <span class="c1">#   &lt;https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/file/BulkFileDownloadResponse.html&gt;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">concreteType</span><span class="o">=</span><span class="s2">&quot;org.sagebionetworks.repo.model.file.BulkFileDownloadRequest&quot;</span><span class="p">,</span>
            <span class="n">requestedFiles</span><span class="o">=</span><span class="n">file_handle_associations_batch</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForAsync</span><span class="p">(</span>
            <span class="n">uri</span><span class="o">=</span><span class="s2">&quot;/file/bulk/async&quot;</span><span class="p">,</span>
            <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># download zip file</span>
        <span class="c1"># ------------------------------------------------------------</span>

        <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
        <span class="n">zipfilepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="s2">&quot;table_file_download.zip&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zipfilepath</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
                <span class="n">download_by_file_handle</span><span class="p">(</span>
                    <span class="n">file_handle_id</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;resultZipFileHandleId&quot;</span><span class="p">],</span>
                    <span class="n">synapse_id</span><span class="o">=</span><span class="n">table</span><span class="o">.</span><span class="n">tableId</span><span class="p">,</span>
                    <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;TableEntity&quot;</span><span class="p">,</span>
                    <span class="n">destination</span><span class="o">=</span><span class="n">zipfilepath</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># TODO handle case when no zip file is returned</span>
            <span class="c1"># TODO test case when we give it partial or all bad file handles</span>
            <span class="c1"># TODO test case with deleted fileHandleID</span>
            <span class="c1"># TODO return null for permanent failures</span>

            <span class="c1"># ------------------------------------------------------------</span>
            <span class="c1"># unzip into cache</span>
            <span class="c1"># ------------------------------------------------------------</span>

            <span class="k">if</span> <span class="n">downloadLocation</span><span class="p">:</span>
                <span class="n">download_dir</span> <span class="o">=</span> <span class="n">ensure_download_location_is_directory</span><span class="p">(</span>
                    <span class="n">downloadLocation</span>
                <span class="p">)</span>

            <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zipfilepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">zf</span><span class="p">:</span>
                <span class="c1"># the directory structure within the zip follows that of the cache:</span>
                <span class="c1"># {fileHandleId modulo 1000}/{fileHandleId}/{fileName}</span>
                <span class="k">for</span> <span class="n">summary</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;fileSummary&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;SUCCESS&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">downloadLocation</span><span class="p">:</span>
                            <span class="n">download_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get_cache_dir</span><span class="p">(</span>
                                <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]</span>
                            <span class="p">)</span>

                        <span class="n">filepath</span> <span class="o">=</span> <span class="n">extract_zip_file_to_directory</span><span class="p">(</span>
                            <span class="n">zf</span><span class="p">,</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;zipEntryName&quot;</span><span class="p">],</span> <span class="n">download_dir</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">],</span> <span class="n">filepath</span><span class="p">)</span>
                        <span class="n">file_handle_to_path_map</span><span class="p">[</span><span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">filepath</span>
                    <span class="k">elif</span> <span class="n">summary</span><span class="p">[</span><span class="s2">&quot;failureCode&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RETRIABLE_FAILURE_CODES</span><span class="p">:</span>
                        <span class="n">permanent_failures</span><span class="p">[</span><span class="n">summary</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">summary</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">zipfilepath</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">zipfilepath</span><span class="p">)</span>

        <span class="c1"># Do we have remaining files to download?</span>
        <span class="n">file_handle_associations</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">fha</span>
            <span class="k">for</span> <span class="n">fha</span> <span class="ow">in</span> <span class="n">file_handle_associations</span>
            <span class="k">if</span> <span class="n">fha</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">file_handle_to_path_map</span>
            <span class="ow">and</span> <span class="n">fha</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">permanent_failures</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">]</span>

    <span class="c1"># TODO if there are files we still haven&#39;t downloaded</span>

    <span class="k">return</span> <span class="n">file_handle_to_path_map</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_acl" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_acl</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">principal_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get_acl" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get the <a href="https://rest-docs.synapse.org/rest/org/
sagebionetworks/repo/model/ACCESS_TYPE.html">ACL</a>
that a user or group has on an Entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to lookup</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.entity.Entity" href="../entity/#synapseclient.entity.Entity">Entity</a>, <a class="autorefs autorefs-internal" title="synapseclient.evaluation.Evaluation" href="../evaluation/#synapseclient.evaluation.Evaluation">Evaluation</a>, str, <span title="collections.abc.Mapping">Mapping</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>principal_id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Identifier of a user or group (defaults to PUBLIC users)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[str]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An array containing some combination of
['READ', 'UPDATE', 'CREATE', 'DELETE', 'DOWNLOAD', 'MODERATE',
'CHANGE_PERMISSIONS', 'CHANGE_SETTINGS']
or an empty array</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2847</span>
<span class="normal">2848</span>
<span class="normal">2849</span>
<span class="normal">2850</span>
<span class="normal">2851</span>
<span class="normal">2852</span>
<span class="normal">2853</span>
<span class="normal">2854</span>
<span class="normal">2855</span>
<span class="normal">2856</span>
<span class="normal">2857</span>
<span class="normal">2858</span>
<span class="normal">2859</span>
<span class="normal">2860</span>
<span class="normal">2861</span>
<span class="normal">2862</span>
<span class="normal">2863</span>
<span class="normal">2864</span>
<span class="normal">2865</span>
<span class="normal">2866</span>
<span class="normal">2867</span>
<span class="normal">2868</span>
<span class="normal">2869</span>
<span class="normal">2870</span>
<span class="normal">2871</span>
<span class="normal">2872</span>
<span class="normal">2873</span>
<span class="normal">2874</span>
<span class="normal">2875</span>
<span class="normal">2876</span>
<span class="normal">2877</span>
<span class="normal">2878</span>
<span class="normal">2879</span>
<span class="normal">2880</span>
<span class="normal">2881</span>
<span class="normal">2882</span>
<span class="normal">2883</span>
<span class="normal">2884</span>
<span class="normal">2885</span>
<span class="normal">2886</span>
<span class="normal">2887</span>
<span class="normal">2888</span>
<span class="normal">2889</span>
<span class="normal">2890</span>
<span class="normal">2891</span>
<span class="normal">2892</span>
<span class="normal">2893</span>
<span class="normal">2894</span>
<span class="normal">2895</span>
<span class="normal">2896</span>
<span class="normal">2897</span>
<span class="normal">2898</span>
<span class="normal">2899</span>
<span class="normal">2900</span>
<span class="normal">2901</span>
<span class="normal">2902</span>
<span class="normal">2903</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_acl</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">],</span>
    <span class="n">principal_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the [ACL](https://rest-docs.synapse.org/rest/org/</span>
<span class="sd">    sagebionetworks/repo/model/ACCESS_TYPE.html)</span>
<span class="sd">    that a user or group has on an Entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity:      An Entity or Synapse ID to lookup</span>
<span class="sd">        principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>

<span class="sd">    Returns:</span>
<span class="sd">        An array containing some combination of</span>
<span class="sd">            [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">            &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">            or an empty array</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">principal_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getUserbyPrincipalIdOrName</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span>

    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span> <span class="s2">&quot;synapse.principal_id&quot;</span><span class="p">:</span> <span class="n">principal_id</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="n">acl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getACL</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

    <span class="n">team_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_teams_for_principal</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span>
    <span class="n">team_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">team</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="n">team_list</span><span class="p">]</span>
    <span class="n">effective_permission_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># This user_profile_bundle is being used to verify that the principal_id</span>
    <span class="c1">#  is a registered user of the system</span>
    <span class="n">user_profile_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user_bundle</span><span class="p">(</span><span class="n">principal_id</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Loop over all permissions in the returned ACL and add it to the effective_permission_set</span>
    <span class="c1"># if the principalId in the ACL matches</span>
    <span class="c1"># 1) the one we are looking for,</span>
    <span class="c1"># 2) a team the entity is a member of,</span>
    <span class="c1"># 3) PUBLIC</span>
    <span class="c1"># 4) A user_profile_bundle exists for the principal_id</span>
    <span class="k">for</span> <span class="n">permissions</span> <span class="ow">in</span> <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="s2">&quot;principalId&quot;</span> <span class="ow">in</span> <span class="n">permissions</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">principal_id</span>
            <span class="ow">or</span> <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">team_ids</span>
            <span class="ow">or</span> <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">PUBLIC</span>
            <span class="ow">or</span> <span class="p">(</span>
                <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">AUTHENTICATED_USERS</span>
                <span class="ow">and</span> <span class="n">user_profile_bundle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">):</span>
            <span class="n">effective_permission_set</span> <span class="o">=</span> <span class="n">effective_permission_set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
                <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">effective_permission_set</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_permissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_permissions</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get_permissions" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get the <a href="https://rest-docs.synapse.org/rest/org/
sagebionetworks/repo/model/auth/UserEntityPermissions.html">permissions</a>
that the caller has on an Entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to lookup</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.entity.Entity" href="../entity/#synapseclient.entity.Entity">Entity</a>, <a class="autorefs autorefs-internal" title="synapseclient.evaluation.Evaluation" href="../evaluation/#synapseclient.evaluation.Evaluation">Evaluation</a>, str, <span title="collections.abc.Mapping">Mapping</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.core.models.permission.Permissions" href="../permissions/#synapseclient.Permissions">Permissions</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An Permissions object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function:</summary>
  <p>Getting permissions for a Synapse Entity</p>
<pre><code>permissions = syn.get_permissions(Entity)
</code></pre>
<p>Getting permissions for a Synapse ID</p>
<pre><code>permissions = syn.get_permissions("syn12345")
</code></pre>
<p>Getting access types list from the Permissions object</p>
<pre><code>permissions.access_types
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2933</span>
<span class="normal">2934</span>
<span class="normal">2935</span>
<span class="normal">2936</span>
<span class="normal">2937</span>
<span class="normal">2938</span>
<span class="normal">2939</span>
<span class="normal">2940</span>
<span class="normal">2941</span>
<span class="normal">2942</span>
<span class="normal">2943</span>
<span class="normal">2944</span>
<span class="normal">2945</span>
<span class="normal">2946</span>
<span class="normal">2947</span>
<span class="normal">2948</span>
<span class="normal">2949</span>
<span class="normal">2950</span>
<span class="normal">2951</span>
<span class="normal">2952</span>
<span class="normal">2953</span>
<span class="normal">2954</span>
<span class="normal">2955</span>
<span class="normal">2956</span>
<span class="normal">2957</span>
<span class="normal">2958</span>
<span class="normal">2959</span>
<span class="normal">2960</span>
<span class="normal">2961</span>
<span class="normal">2962</span>
<span class="normal">2963</span>
<span class="normal">2964</span>
<span class="normal">2965</span>
<span class="normal">2966</span>
<span class="normal">2967</span>
<span class="normal">2968</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_permissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Permissions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the [permissions](https://rest-docs.synapse.org/rest/org/</span>
<span class="sd">    sagebionetworks/repo/model/auth/UserEntityPermissions.html)</span>
<span class="sd">    that the caller has on an Entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: An Entity or Synapse ID to lookup</span>

<span class="sd">    Returns:</span>
<span class="sd">        An Permissions object</span>


<span class="sd">    Example: Using this function:</span>
<span class="sd">        Getting permissions for a Synapse Entity</span>

<span class="sd">            permissions = syn.get_permissions(Entity)</span>

<span class="sd">        Getting permissions for a Synapse ID</span>

<span class="sd">            permissions = syn.get_permissions(&quot;syn12345&quot;)</span>

<span class="sd">        Getting access types list from the Permissions object</span>

<span class="sd">            permissions.access_types</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/entity/</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">/permissions&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Permissions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getPermissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getPermissions</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">principal_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getPermissions" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p><strong>Deprecated</strong> and replaced with <a class="autorefs autorefs-internal" href="#synapseclient.Synapse.get_acl">get_acl</a>.</p>
<p>Get the permissions that a user or group has on an Entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to lookup</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.entity.Entity" href="../entity/#synapseclient.entity.Entity">Entity</a>, <a class="autorefs autorefs-internal" title="synapseclient.evaluation.Evaluation" href="../evaluation/#synapseclient.evaluation.Evaluation">Evaluation</a>, str, <span title="collections.abc.Mapping">Mapping</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>principal_id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Identifier of a user or group (defaults to PUBLIC users)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[str]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An array containing some combination of
['READ', 'UPDATE', 'CREATE', 'DELETE', 'DOWNLOAD', 'MODERATE',
'CHANGE_PERMISSIONS', 'CHANGE_SETTINGS']
or an empty array</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2905</span>
<span class="normal">2906</span>
<span class="normal">2907</span>
<span class="normal">2908</span>
<span class="normal">2909</span>
<span class="normal">2910</span>
<span class="normal">2911</span>
<span class="normal">2912</span>
<span class="normal">2913</span>
<span class="normal">2914</span>
<span class="normal">2915</span>
<span class="normal">2916</span>
<span class="normal">2917</span>
<span class="normal">2918</span>
<span class="normal">2919</span>
<span class="normal">2920</span>
<span class="normal">2921</span>
<span class="normal">2922</span>
<span class="normal">2923</span>
<span class="normal">2924</span>
<span class="normal">2925</span>
<span class="normal">2926</span>
<span class="normal">2927</span>
<span class="normal">2928</span>
<span class="normal">2929</span>
<span class="normal">2930</span>
<span class="normal">2931</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.0.0&quot;</span><span class="p">,</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;deprecated and replaced with synapseclient.Synapse.get_acl&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">getPermissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">],</span>
    <span class="n">principal_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **Deprecated** and replaced with [get_acl][synapseclient.Synapse.get_acl].</span>


<span class="sd">    Get the permissions that a user or group has on an Entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity:      An Entity or Synapse ID to lookup</span>
<span class="sd">        principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>

<span class="sd">    Returns:</span>
<span class="sd">        An array containing some combination of</span>
<span class="sd">            [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">            &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">            or an empty array</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl</span><span class="p">(</span><span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span> <span class="n">principal_id</span><span class="o">=</span><span class="n">principal_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.setPermissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setPermissions</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">principalId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">accessType</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;READ&#39;</span><span class="p">,</span> <span class="s1">&#39;DOWNLOAD&#39;</span><span class="p">],</span> <span class="n">modify_benefactor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">warn_if_inherits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.setPermissions" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sets permission that a user or group has on an Entity.
An Entity may have its own ACL or inherit its ACL from a benefactor.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to modify</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>principalId</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Identifier of a user or group. '273948' is for all registered Synapse users
            and '273949' is for public access. None implies public access.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>accessType</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Type of permission to be granted. One or more of CREATE, READ, DOWNLOAD, UPDATE,
            DELETE, CHANGE_PERMISSIONS</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>[&#39;READ&#39;, &#39;DOWNLOAD&#39;]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>modify_benefactor</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Set as True when modifying a benefactor's ACL</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>warn_if_inherits</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Set as False, when creating a new ACL.
                Trying to modify the ACL of an Entity that inherits its ACL will result in a warning</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>overwrite</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>By default this function overwrites existing permissions for the specified user.
        Set this flag to False to add new permissions non-destructively.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An Access Control List object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Setting permissions</summary>
  <p>Grant all registered users download access</p>
<pre><code>syn.setPermissions('syn1234','273948',['READ','DOWNLOAD'])
</code></pre>
<p>Grant the public view access</p>
<pre><code>syn.setPermissions('syn1234','273949',['READ'])
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2970</span>
<span class="normal">2971</span>
<span class="normal">2972</span>
<span class="normal">2973</span>
<span class="normal">2974</span>
<span class="normal">2975</span>
<span class="normal">2976</span>
<span class="normal">2977</span>
<span class="normal">2978</span>
<span class="normal">2979</span>
<span class="normal">2980</span>
<span class="normal">2981</span>
<span class="normal">2982</span>
<span class="normal">2983</span>
<span class="normal">2984</span>
<span class="normal">2985</span>
<span class="normal">2986</span>
<span class="normal">2987</span>
<span class="normal">2988</span>
<span class="normal">2989</span>
<span class="normal">2990</span>
<span class="normal">2991</span>
<span class="normal">2992</span>
<span class="normal">2993</span>
<span class="normal">2994</span>
<span class="normal">2995</span>
<span class="normal">2996</span>
<span class="normal">2997</span>
<span class="normal">2998</span>
<span class="normal">2999</span>
<span class="normal">3000</span>
<span class="normal">3001</span>
<span class="normal">3002</span>
<span class="normal">3003</span>
<span class="normal">3004</span>
<span class="normal">3005</span>
<span class="normal">3006</span>
<span class="normal">3007</span>
<span class="normal">3008</span>
<span class="normal">3009</span>
<span class="normal">3010</span>
<span class="normal">3011</span>
<span class="normal">3012</span>
<span class="normal">3013</span>
<span class="normal">3014</span>
<span class="normal">3015</span>
<span class="normal">3016</span>
<span class="normal">3017</span>
<span class="normal">3018</span>
<span class="normal">3019</span>
<span class="normal">3020</span>
<span class="normal">3021</span>
<span class="normal">3022</span>
<span class="normal">3023</span>
<span class="normal">3024</span>
<span class="normal">3025</span>
<span class="normal">3026</span>
<span class="normal">3027</span>
<span class="normal">3028</span>
<span class="normal">3029</span>
<span class="normal">3030</span>
<span class="normal">3031</span>
<span class="normal">3032</span>
<span class="normal">3033</span>
<span class="normal">3034</span>
<span class="normal">3035</span>
<span class="normal">3036</span>
<span class="normal">3037</span>
<span class="normal">3038</span>
<span class="normal">3039</span>
<span class="normal">3040</span>
<span class="normal">3041</span>
<span class="normal">3042</span>
<span class="normal">3043</span>
<span class="normal">3044</span>
<span class="normal">3045</span>
<span class="normal">3046</span>
<span class="normal">3047</span>
<span class="normal">3048</span>
<span class="normal">3049</span>
<span class="normal">3050</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setPermissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">,</span>
    <span class="n">principalId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">accessType</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;READ&quot;</span><span class="p">,</span> <span class="s2">&quot;DOWNLOAD&quot;</span><span class="p">],</span>
    <span class="n">modify_benefactor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">warn_if_inherits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets permission that a user or group has on an Entity.</span>
<span class="sd">    An Entity may have its own ACL or inherit its ACL from a benefactor.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: An Entity or Synapse ID to modify</span>
<span class="sd">        principalId: Identifier of a user or group. &#39;273948&#39; is for all registered Synapse users</span>
<span class="sd">                        and &#39;273949&#39; is for public access. None implies public access.</span>
<span class="sd">        accessType: Type of permission to be granted. One or more of CREATE, READ, DOWNLOAD, UPDATE,</span>
<span class="sd">                        DELETE, CHANGE_PERMISSIONS</span>
<span class="sd">        modify_benefactor: Set as True when modifying a benefactor&#39;s ACL</span>
<span class="sd">        warn_if_inherits: Set as False, when creating a new ACL.</span>
<span class="sd">                            Trying to modify the ACL of an Entity that inherits its ACL will result in a warning</span>
<span class="sd">        overwrite: By default this function overwrites existing permissions for the specified user.</span>
<span class="sd">                    Set this flag to False to add new permissions non-destructively.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An Access Control List object</span>

<span class="sd">    Example: Setting permissions</span>
<span class="sd">        Grant all registered users download access</span>

<span class="sd">            syn.setPermissions(&#39;syn1234&#39;,&#39;273948&#39;,[&#39;READ&#39;,&#39;DOWNLOAD&#39;])</span>

<span class="sd">        Grant the public view access</span>

<span class="sd">            syn.setPermissions(&#39;syn1234&#39;,&#39;273949&#39;,[&#39;READ&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

    <span class="n">benefactor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getBenefactor</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">entity_id</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">modify_benefactor</span><span class="p">:</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="n">benefactor</span>
        <span class="k">elif</span> <span class="n">warn_if_inherits</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Creating an ACL for entity </span><span class="si">%s</span><span class="s2">, which formerly inherited access control from a&quot;</span>
                <span class="s1">&#39; benefactor entity, &quot;</span><span class="si">%s</span><span class="s1">&quot; (</span><span class="si">%s</span><span class="s1">).</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">benefactor</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
            <span class="p">)</span>

    <span class="n">acl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getACL</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

    <span class="n">principalId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getUserbyPrincipalIdOrName</span><span class="p">(</span><span class="n">principalId</span><span class="p">)</span>

    <span class="c1"># Find existing permissions</span>
    <span class="n">permissions_to_update</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">permissions</span> <span class="ow">in</span> <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="s2">&quot;principalId&quot;</span> <span class="ow">in</span> <span class="n">permissions</span>
            <span class="ow">and</span> <span class="n">permissions</span><span class="p">[</span><span class="s2">&quot;principalId&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">principalId</span>
        <span class="p">):</span>
            <span class="n">permissions_to_update</span> <span class="o">=</span> <span class="n">permissions</span>
            <span class="k">break</span>

    <span class="k">if</span> <span class="n">accessType</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">accessType</span> <span class="o">==</span> <span class="p">[]:</span>
        <span class="c1"># remove permissions</span>
        <span class="k">if</span> <span class="n">permissions_to_update</span> <span class="ow">and</span> <span class="n">overwrite</span><span class="p">:</span>
            <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">permissions_to_update</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># add a &#39;resourceAccess&#39; entry, if necessary</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">permissions_to_update</span><span class="p">:</span>
            <span class="n">permissions_to_update</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;accessType&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;principalId&quot;</span><span class="p">:</span> <span class="n">principalId</span><span class="p">}</span>
            <span class="n">acl</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permissions_to_update</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">overwrite</span><span class="p">:</span>
            <span class="n">permissions_to_update</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">accessType</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">permissions_to_update</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="nb">set</span><span class="p">(</span><span class="n">permissions_to_update</span><span class="p">[</span><span class="s2">&quot;accessType&quot;</span><span class="p">])</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">accessType</span><span class="p">)</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storeACL</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">acl</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getProvenance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getProvenance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getProvenance" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieve provenance information for a Synapse Entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to lookup</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[str, <span title="collections.abc.Mapping">Mapping</span>, <span title="numbers.Number">Number</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The version of the Entity to retrieve. Gets the most recent version if omitted</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.activity.Activity" href="../activity/#synapseclient.activity.Activity">Activity</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An Activity object or raises exception if no provenance record exists</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-internal" title="synapseclient.core.exceptions.SynapseHTTPError" href="../exceptions/#synapseclient.core.exceptions.SynapseHTTPError">SynapseHTTPError</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>if no provenance record exists</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3057</span>
<span class="normal">3058</span>
<span class="normal">3059</span>
<span class="normal">3060</span>
<span class="normal">3061</span>
<span class="normal">3062</span>
<span class="normal">3063</span>
<span class="normal">3064</span>
<span class="normal">3065</span>
<span class="normal">3066</span>
<span class="normal">3067</span>
<span class="normal">3068</span>
<span class="normal">3069</span>
<span class="normal">3070</span>
<span class="normal">3071</span>
<span class="normal">3072</span>
<span class="normal">3073</span>
<span class="normal">3074</span>
<span class="normal">3075</span>
<span class="normal">3076</span>
<span class="normal">3077</span>
<span class="normal">3078</span>
<span class="normal">3079</span>
<span class="normal">3080</span>
<span class="normal">3081</span>
<span class="normal">3082</span>
<span class="normal">3083</span>
<span class="normal">3084</span>
<span class="normal">3085</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getProvenance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">],</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Activity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve provenance information for a Synapse Entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity:  An Entity or Synapse ID to lookup</span>
<span class="sd">        version: The version of the Entity to retrieve. Gets the most recent version if omitted</span>

<span class="sd">    Returns:</span>
<span class="sd">        An Activity object or raises exception if no provenance record exists</span>

<span class="sd">    Raises:</span>
<span class="sd">        SynapseHTTPError: if no provenance record exists</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get versionNumber from Entity</span>
    <span class="k">if</span> <span class="n">version</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;versionNumber&quot;</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">]</span>
    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/version/</span><span class="si">%d</span><span class="s2">/generatedBy&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/generatedBy&quot;</span> <span class="o">%</span> <span class="n">entity_id</span>

    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">Activity</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.setProvenance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setProvenance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">activity</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.setProvenance" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Stores a record of the code and data used to derive a Synapse entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to modify</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[str, <span title="collections.abc.Mapping">Mapping</span>, <span title="numbers.Number">Number</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>activity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../activity/#synapseclient.activity.Activity">synapseclient.activity.Activity</a></p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="synapseclient.activity.Activity" href="../activity/#synapseclient.activity.Activity">Activity</a></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.activity.Activity" href="../activity/#synapseclient.activity.Activity">Activity</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An updated <a class="autorefs autorefs-internal" href="../activity/#synapseclient.activity.Activity">synapseclient.activity.Activity</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3087</span>
<span class="normal">3088</span>
<span class="normal">3089</span>
<span class="normal">3090</span>
<span class="normal">3091</span>
<span class="normal">3092</span>
<span class="normal">3093</span>
<span class="normal">3094</span>
<span class="normal">3095</span>
<span class="normal">3096</span>
<span class="normal">3097</span>
<span class="normal">3098</span>
<span class="normal">3099</span>
<span class="normal">3100</span>
<span class="normal">3101</span>
<span class="normal">3102</span>
<span class="normal">3103</span>
<span class="normal">3104</span>
<span class="normal">3105</span>
<span class="normal">3106</span>
<span class="normal">3107</span>
<span class="normal">3108</span>
<span class="normal">3109</span>
<span class="normal">3110</span>
<span class="normal">3111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setProvenance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">],</span>
    <span class="n">activity</span><span class="p">:</span> <span class="n">Activity</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Activity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stores a record of the code and data used to derive a Synapse entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity:   An Entity or Synapse ID to modify</span>
<span class="sd">        activity: A [synapseclient.activity.Activity][]</span>

<span class="sd">    Returns:</span>
<span class="sd">        An updated [synapseclient.activity.Activity][] object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Assert that the entity was generated by a given Activity.</span>
    <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_saveActivity</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>

    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="c1"># assert that an entity is generated by an activity</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/generatedBy?generatedBy=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
    <span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">activity</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.deleteProvenance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deleteProvenance</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.deleteProvenance" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Removes provenance information from an Entity and deletes the associated Activity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity or Synapse ID to modify</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[str, <span title="collections.abc.Mapping">Mapping</span>, <span title="numbers.Number">Number</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3113</span>
<span class="normal">3114</span>
<span class="normal">3115</span>
<span class="normal">3116</span>
<span class="normal">3117</span>
<span class="normal">3118</span>
<span class="normal">3119</span>
<span class="normal">3120</span>
<span class="normal">3121</span>
<span class="normal">3122</span>
<span class="normal">3123</span>
<span class="normal">3124</span>
<span class="normal">3125</span>
<span class="normal">3126</span>
<span class="normal">3127</span>
<span class="normal">3128</span>
<span class="normal">3129</span>
<span class="normal">3130</span>
<span class="normal">3131</span>
<span class="normal">3132</span>
<span class="normal">3133</span>
<span class="normal">3134</span>
<span class="normal">3135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deleteProvenance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes provenance information from an Entity and deletes the associated Activity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: An Entity or Synapse ID to modify</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getProvenance</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">activity</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">})</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/generatedBy&quot;</span> <span class="o">%</span> <span class="n">entity_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="c1"># If the activity is shared by more than one entity you recieve an HTTP 400 error:</span>
    <span class="c1"># &quot;If you wish to delete this activity, please first delete all Entities generated by this Activity.&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/activity/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.updateActivity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">updateActivity</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.updateActivity" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Modifies an existing Activity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>activity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The Activity to be updated.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.activity.Activity" href="../activity/#synapseclient.activity.Activity">Activity</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An updated Activity object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3155</span>
<span class="normal">3156</span>
<span class="normal">3157</span>
<span class="normal">3158</span>
<span class="normal">3159</span>
<span class="normal">3160</span>
<span class="normal">3161</span>
<span class="normal">3162</span>
<span class="normal">3163</span>
<span class="normal">3164</span>
<span class="normal">3165</span>
<span class="normal">3166</span>
<span class="normal">3167</span>
<span class="normal">3168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">updateActivity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Activity</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modifies an existing Activity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        activity: The Activity to be updated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An updated Activity object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">activity</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The activity you want to update must exist on Synapse&quot;</span><span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.id&quot;</span><span class="p">:</span> <span class="n">activity</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]})</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_saveActivity</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.findEntityId" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">findEntityId</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.findEntityId" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Find an Entity given its name and parent.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the entity to find</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>parent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity object or the Id of an entity as a string. Omit if searching for a Project by name</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The Entity ID or None if not found</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6011</span>
<span class="normal">6012</span>
<span class="normal">6013</span>
<span class="normal">6014</span>
<span class="normal">6015</span>
<span class="normal">6016</span>
<span class="normal">6017</span>
<span class="normal">6018</span>
<span class="normal">6019</span>
<span class="normal">6020</span>
<span class="normal">6021</span>
<span class="normal">6022</span>
<span class="normal">6023</span>
<span class="normal">6024</span>
<span class="normal">6025</span>
<span class="normal">6026</span>
<span class="normal">6027</span>
<span class="normal">6028</span>
<span class="normal">6029</span>
<span class="normal">6030</span>
<span class="normal">6031</span>
<span class="normal">6032</span>
<span class="normal">6033</span>
<span class="normal">6034</span>
<span class="normal">6035</span>
<span class="normal">6036</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">findEntityId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find an Entity given its name and parent.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        name: Name of the entity to find</span>
<span class="sd">        parent: An Entity object or the Id of an entity as a string. Omit if searching for a Project by name</span>

<span class="sd">    Returns:</span>
<span class="sd">        The Entity ID or None if not found</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># when we want to search for a project by name. set parentId as None instead of ROOT_ENTITY</span>
    <span class="n">entity_lookup_request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;parentId&quot;</span><span class="p">:</span> <span class="n">id_of</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;entityName&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/entity/child&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">entity_lookup_request</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span>
        <span class="p">):</span>  <span class="c1"># a 404 error is raised if the entity does not exist</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getChildren" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getChildren</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">includeTypes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;folder&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="s1">&#39;entityview&#39;</span><span class="p">,</span> <span class="s1">&#39;dockerrepo&#39;</span><span class="p">,</span> <span class="s1">&#39;submissionview&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset&#39;</span><span class="p">,</span> <span class="s1">&#39;materializedview&#39;</span><span class="p">],</span> <span class="n">sortBy</span><span class="o">=</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="n">sortDirection</span><span class="o">=</span><span class="s1">&#39;ASC&#39;</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getChildren" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves all of the entities stored within a parent such as folder or project.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>parent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An id or an object of a Synapse container or None to retrieve all projects</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>includeTypes</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Must be a list of entity types (ie. ["folder","file"]) which can be found <a href="http://docs.synapse.org/rest/org/sagebionetworks/repo/model/EntityType.html">here</a></p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>[&#39;folder&#39;, &#39;file&#39;, &#39;table&#39;, &#39;link&#39;, &#39;entityview&#39;, &#39;dockerrepo&#39;, &#39;submissionview&#39;, &#39;dataset&#39;, &#39;materializedview&#39;]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sortBy</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>How results should be sorted. Can be NAME, or CREATED_ON</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;NAME&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sortDirection</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The direction of the result sort. Can be ASC, or DESC</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;ASC&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>An iterator that shows all the children of the container.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Also see:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../synapse_utils/#synapseutils.walk_functions.walk">synapseutils.walk</a></li>
</ul>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2665</span>
<span class="normal">2666</span>
<span class="normal">2667</span>
<span class="normal">2668</span>
<span class="normal">2669</span>
<span class="normal">2670</span>
<span class="normal">2671</span>
<span class="normal">2672</span>
<span class="normal">2673</span>
<span class="normal">2674</span>
<span class="normal">2675</span>
<span class="normal">2676</span>
<span class="normal">2677</span>
<span class="normal">2678</span>
<span class="normal">2679</span>
<span class="normal">2680</span>
<span class="normal">2681</span>
<span class="normal">2682</span>
<span class="normal">2683</span>
<span class="normal">2684</span>
<span class="normal">2685</span>
<span class="normal">2686</span>
<span class="normal">2687</span>
<span class="normal">2688</span>
<span class="normal">2689</span>
<span class="normal">2690</span>
<span class="normal">2691</span>
<span class="normal">2692</span>
<span class="normal">2693</span>
<span class="normal">2694</span>
<span class="normal">2695</span>
<span class="normal">2696</span>
<span class="normal">2697</span>
<span class="normal">2698</span>
<span class="normal">2699</span>
<span class="normal">2700</span>
<span class="normal">2701</span>
<span class="normal">2702</span>
<span class="normal">2703</span>
<span class="normal">2704</span>
<span class="normal">2705</span>
<span class="normal">2706</span>
<span class="normal">2707</span>
<span class="normal">2708</span>
<span class="normal">2709</span>
<span class="normal">2710</span>
<span class="normal">2711</span>
<span class="normal">2712</span>
<span class="normal">2713</span>
<span class="normal">2714</span>
<span class="normal">2715</span>
<span class="normal">2716</span>
<span class="normal">2717</span>
<span class="normal">2718</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getChildren</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">,</span>
    <span class="n">includeTypes</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;folder&quot;</span><span class="p">,</span>
        <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="s2">&quot;table&quot;</span><span class="p">,</span>
        <span class="s2">&quot;link&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entityview&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dockerrepo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;submissionview&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;materializedview&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">sortBy</span><span class="o">=</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span>
    <span class="n">sortDirection</span><span class="o">=</span><span class="s2">&quot;ASC&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves all of the entities stored within a parent such as folder or project.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        parent: An id or an object of a Synapse container or None to retrieve all projects</span>
<span class="sd">        includeTypes: Must be a list of entity types (ie. [&quot;folder&quot;,&quot;file&quot;]) which can be found [here](http://docs.synapse.org/rest/org/sagebionetworks/repo/model/EntityType.html)</span>
<span class="sd">        sortBy: How results should be sorted. Can be NAME, or CREATED_ON</span>
<span class="sd">        sortDirection: The direction of the result sort. Can be ASC, or DESC</span>

<span class="sd">    Yields:</span>
<span class="sd">        An iterator that shows all the children of the container.</span>

<span class="sd">    Also see:</span>

<span class="sd">    - [synapseutils.walk][]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parentId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">({</span><span class="s2">&quot;synapse.parent_id&quot;</span><span class="p">:</span> <span class="n">parentId</span><span class="p">})</span>
    <span class="n">entityChildrenRequest</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;parentId&quot;</span><span class="p">:</span> <span class="n">parentId</span><span class="p">,</span>
        <span class="s2">&quot;includeTypes&quot;</span><span class="p">:</span> <span class="n">includeTypes</span><span class="p">,</span>
        <span class="s2">&quot;sortBy&quot;</span><span class="p">:</span> <span class="n">sortBy</span><span class="p">,</span>
        <span class="s2">&quot;sortDirection&quot;</span><span class="p">:</span> <span class="n">sortDirection</span><span class="p">,</span>
        <span class="s2">&quot;nextPageToken&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">entityChildrenResponse</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">:</span> <span class="s2">&quot;first&quot;</span><span class="p">}</span>
    <span class="k">while</span> <span class="n">entityChildrenResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">entityChildrenResponse</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/entity/children&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">entityChildrenRequest</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">entityChildrenResponse</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]:</span>
            <span class="k">yield</span> <span class="n">child</span>
        <span class="k">if</span> <span class="n">entityChildrenResponse</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">entityChildrenRequest</span><span class="p">[</span><span class="s2">&quot;nextPageToken&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entityChildrenResponse</span><span class="p">[</span>
                <span class="s2">&quot;nextPageToken&quot;</span>
            <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getTeam" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getTeam</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getTeam" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Finds a team with a given ID or name.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The ID or name of the team or a Team object to retrieve.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[int, str]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.team.Team" href="../teams/#synapseclient.team.Team">Team</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An object of type <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4271</span>
<span class="normal">4272</span>
<span class="normal">4273</span>
<span class="normal">4274</span>
<span class="normal">4275</span>
<span class="normal">4276</span>
<span class="normal">4277</span>
<span class="normal">4278</span>
<span class="normal">4279</span>
<span class="normal">4280</span>
<span class="normal">4281</span>
<span class="normal">4282</span>
<span class="normal">4283</span>
<span class="normal">4284</span>
<span class="normal">4285</span>
<span class="normal">4286</span>
<span class="normal">4287</span>
<span class="normal">4288</span>
<span class="normal">4289</span>
<span class="normal">4290</span>
<span class="normal">4291</span>
<span class="normal">4292</span>
<span class="normal">4293</span>
<span class="normal">4294</span>
<span class="normal">4295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getTeam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Team</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds a team with a given ID or name.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id: The ID or name of the team or a Team object to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An object of type [synapseclient.team.Team][]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Retrieves team id</span>
    <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">teamid</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findTeam</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">team</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                    <span class="n">teamid</span> <span class="o">=</span> <span class="n">team</span><span class="o">.</span><span class="n">id</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t find team &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">teamid</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t find team &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">teamid</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">Team</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/team/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">teamid</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getTeamMembers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getTeamMembers</span><span class="p">(</span><span class="n">team</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getTeamMembers" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Lists the members of the given team.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>team</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a> object or a team's ID.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.team.Team" href="../teams/#synapseclient.team.Team">Team</a>, int, str]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-yields-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.team.TeamMember" href="../teams/#synapseclient.team.TeamMember">TeamMember</a></code>
                </span>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>A generator over <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.TeamMember">synapseclient.team.TeamMember</a> objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4297</span>
<span class="normal">4298</span>
<span class="normal">4299</span>
<span class="normal">4300</span>
<span class="normal">4301</span>
<span class="normal">4302</span>
<span class="normal">4303</span>
<span class="normal">4304</span>
<span class="normal">4305</span>
<span class="normal">4306</span>
<span class="normal">4307</span>
<span class="normal">4308</span>
<span class="normal">4309</span>
<span class="normal">4310</span>
<span class="normal">4311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getTeamMembers</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">team</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Team</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n">TeamMember</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Lists the members of the given team.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>

<span class="sd">    Yields:</span>
<span class="sd">        A generator over [synapseclient.team.TeamMember][] objects.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="s2">&quot;/teamMembers/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">))):</span>
        <span class="k">yield</span> <span class="n">TeamMember</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.invite_to_team" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">invite_to_team</span><span class="p">(</span><span class="n">team</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inviteeEmail</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.invite_to_team" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Invite user to a Synapse team via Synapse username or email
(choose one or the other)</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>syn</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Synapse object</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>team</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a> object or a team's ID.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.team.Team" href="../teams/#synapseclient.team.Team">Team</a>, int, str]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>user</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Synapse username or profile id of user</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>inviteeEmail</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Email of user</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Additional message for the user getting invited to the team.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>force</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If an open invitation exists for the invitee, the old invite will be cancelled.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>bool</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>MembershipInvitation or None if user is already a member</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4415</span>
<span class="normal">4416</span>
<span class="normal">4417</span>
<span class="normal">4418</span>
<span class="normal">4419</span>
<span class="normal">4420</span>
<span class="normal">4421</span>
<span class="normal">4422</span>
<span class="normal">4423</span>
<span class="normal">4424</span>
<span class="normal">4425</span>
<span class="normal">4426</span>
<span class="normal">4427</span>
<span class="normal">4428</span>
<span class="normal">4429</span>
<span class="normal">4430</span>
<span class="normal">4431</span>
<span class="normal">4432</span>
<span class="normal">4433</span>
<span class="normal">4434</span>
<span class="normal">4435</span>
<span class="normal">4436</span>
<span class="normal">4437</span>
<span class="normal">4438</span>
<span class="normal">4439</span>
<span class="normal">4440</span>
<span class="normal">4441</span>
<span class="normal">4442</span>
<span class="normal">4443</span>
<span class="normal">4444</span>
<span class="normal">4445</span>
<span class="normal">4446</span>
<span class="normal">4447</span>
<span class="normal">4448</span>
<span class="normal">4449</span>
<span class="normal">4450</span>
<span class="normal">4451</span>
<span class="normal">4452</span>
<span class="normal">4453</span>
<span class="normal">4454</span>
<span class="normal">4455</span>
<span class="normal">4456</span>
<span class="normal">4457</span>
<span class="normal">4458</span>
<span class="normal">4459</span>
<span class="normal">4460</span>
<span class="normal">4461</span>
<span class="normal">4462</span>
<span class="normal">4463</span>
<span class="normal">4464</span>
<span class="normal">4465</span>
<span class="normal">4466</span>
<span class="normal">4467</span>
<span class="normal">4468</span>
<span class="normal">4469</span>
<span class="normal">4470</span>
<span class="normal">4471</span>
<span class="normal">4472</span>
<span class="normal">4473</span>
<span class="normal">4474</span>
<span class="normal">4475</span>
<span class="normal">4476</span>
<span class="normal">4477</span>
<span class="normal">4478</span>
<span class="normal">4479</span>
<span class="normal">4480</span>
<span class="normal">4481</span>
<span class="normal">4482</span>
<span class="normal">4483</span>
<span class="normal">4484</span>
<span class="normal">4485</span>
<span class="normal">4486</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">invite_to_team</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">team</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Team</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">inviteeEmail</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invite user to a Synapse team via Synapse username or email</span>
<span class="sd">    (choose one or the other)</span>

<span class="sd">    Arguments:</span>
<span class="sd">        syn: Synapse object</span>
<span class="sd">        team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>
<span class="sd">        user: Synapse username or profile id of user</span>
<span class="sd">        inviteeEmail: Email of user</span>
<span class="sd">        message: Additional message for the user getting invited to the team.</span>
<span class="sd">        force: If an open invitation exists for the invitee, the old invite will be cancelled.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MembershipInvitation or None if user is already a member</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Throw error if both user and email is specified and if both not</span>
    <span class="c1"># specified</span>
    <span class="n">id_email_specified</span> <span class="o">=</span> <span class="n">inviteeEmail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="n">id_email_notspecified</span> <span class="o">=</span> <span class="n">inviteeEmail</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">id_email_specified</span> <span class="ow">or</span> <span class="n">id_email_notspecified</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Must specify either &#39;user&#39; or &#39;inviteeEmail&#39;&quot;</span><span class="p">)</span>

    <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
    <span class="n">is_member</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">open_invitations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_team_open_invitations</span><span class="p">(</span><span class="n">teamid</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">inviteeId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">(</span><span class="n">user</span><span class="p">)[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
        <span class="n">membership_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_membership_status</span><span class="p">(</span><span class="n">inviteeId</span><span class="p">,</span> <span class="n">teamid</span><span class="p">)</span>
        <span class="n">is_member</span> <span class="o">=</span> <span class="n">membership_status</span><span class="p">[</span><span class="s2">&quot;isMember&quot;</span><span class="p">]</span>
        <span class="n">open_invites_to_user</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">invitation</span>
            <span class="k">for</span> <span class="n">invitation</span> <span class="ow">in</span> <span class="n">open_invitations</span>
            <span class="k">if</span> <span class="n">invitation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inviteeId&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">inviteeId</span>
        <span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">inviteeId</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">open_invites_to_user</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">invitation</span>
            <span class="k">for</span> <span class="n">invitation</span> <span class="ow">in</span> <span class="n">open_invitations</span>
            <span class="k">if</span> <span class="n">invitation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inviteeEmail&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">inviteeEmail</span>
        <span class="p">]</span>
    <span class="c1"># Only invite if the invitee is not a member and</span>
    <span class="c1"># if invitee doesn&#39;t have an open invitation unless force=True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_member</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">open_invites_to_user</span> <span class="ow">or</span> <span class="n">force</span><span class="p">):</span>
        <span class="c1"># Delete all old invitations</span>
        <span class="k">for</span> <span class="n">invite</span> <span class="ow">in</span> <span class="n">open_invites_to_user</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_delete_membership_invitation</span><span class="p">(</span><span class="n">invite</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_membership_invitation</span><span class="p">(</span>
            <span class="n">teamid</span><span class="p">,</span>
            <span class="n">inviteeId</span><span class="o">=</span><span class="n">inviteeId</span><span class="p">,</span>
            <span class="n">inviteeEmail</span><span class="o">=</span><span class="n">inviteeEmail</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">is_member</span><span class="p">:</span>
        <span class="n">not_sent_reason</span> <span class="o">=</span> <span class="s2">&quot;invitee is already a member&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">not_sent_reason</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;invitee already has an open invitation &quot;</span>
            <span class="s2">&quot;Set force=True to send new invite.&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No invitation sent: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">not_sent_reason</span><span class="p">))</span>
    <span class="c1"># Return None if no invite is sent.</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_membership_status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_membership_status</span><span class="p">(</span><span class="n">userid</span><span class="p">,</span> <span class="n">team</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get_membership_status" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieve a user's Team Membership Status bundle.
<a href="https://rest-docs.synapse.org/rest/GET/team/id/member/principalId/membershipStatus.html">https://rest-docs.synapse.org/rest/GET/team/id/member/principalId/membershipStatus.html</a></p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>user</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Synapse user ID</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>team</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a> object or a team's ID.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>dict of TeamMembershipStatus</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4359</span>
<span class="normal">4360</span>
<span class="normal">4361</span>
<span class="normal">4362</span>
<span class="normal">4363</span>
<span class="normal">4364</span>
<span class="normal">4365</span>
<span class="normal">4366</span>
<span class="normal">4367</span>
<span class="normal">4368</span>
<span class="normal">4369</span>
<span class="normal">4370</span>
<span class="normal">4371</span>
<span class="normal">4372</span>
<span class="normal">4373</span>
<span class="normal">4374</span>
<span class="normal">4375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_membership_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="n">team</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a user&#39;s Team Membership Status bundle.</span>
<span class="sd">    &lt;https://rest-docs.synapse.org/rest/GET/team/id/member/principalId/membershipStatus.html&gt;</span>

<span class="sd">    Arguments:</span>
<span class="sd">        user: Synapse user ID</span>
<span class="sd">        team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict of TeamMembershipStatus</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="s2">&quot;/team/</span><span class="si">{team}</span><span class="s2">/member/</span><span class="si">{user}</span><span class="s2">/membershipStatus&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">team</span><span class="o">=</span><span class="n">teamid</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">userid</span>
    <span class="p">)</span>
    <span class="n">membership_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">membership_status</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_team_open_invitations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_team_open_invitations</span><span class="p">(</span><span class="n">team</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get_team_open_invitations" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieve the open requests submitted to a Team
<a href="https://rest-docs.synapse.org/rest/GET/team/id/openInvitation.html">https://rest-docs.synapse.org/rest/GET/team/id/openInvitation.html</a></p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>team</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a> object or a team's ID.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.team.Team" href="../teams/#synapseclient.team.Team">Team</a>, int, str]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-yields-annotation">
                    <code>dict</code>
                </span>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>Generator of MembershipRequest dictionaries</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4342</span>
<span class="normal">4343</span>
<span class="normal">4344</span>
<span class="normal">4345</span>
<span class="normal">4346</span>
<span class="normal">4347</span>
<span class="normal">4348</span>
<span class="normal">4349</span>
<span class="normal">4350</span>
<span class="normal">4351</span>
<span class="normal">4352</span>
<span class="normal">4353</span>
<span class="normal">4354</span>
<span class="normal">4355</span>
<span class="normal">4356</span>
<span class="normal">4357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_team_open_invitations</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">team</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Team</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the open requests submitted to a Team</span>
<span class="sd">    &lt;https://rest-docs.synapse.org/rest/GET/team/id/openInvitation.html&gt;</span>

<span class="sd">    Arguments:</span>
<span class="sd">        team: A [synapseclient.team.Team][] object or a team&#39;s ID.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Generator of MembershipRequest dictionaries</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">teamid</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="s2">&quot;/team/</span><span class="si">{team}</span><span class="s2">/openInvitation&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="n">teamid</span><span class="p">)</span>
    <span class="n">open_requests</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">open_requests</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.send_membership_invitation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_membership_invitation</span><span class="p">(</span><span class="n">teamId</span><span class="p">,</span> <span class="n">inviteeId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inviteeEmail</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.send_membership_invitation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Create a membership invitation and send an email notification
to the invitee.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>teamId</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Synapse teamId</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>inviteeId</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Synapse username or profile id of user</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>inviteeEmail</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Email of user</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Additional message for the user getting invited to the
     team.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>MembershipInvitation</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4387</span>
<span class="normal">4388</span>
<span class="normal">4389</span>
<span class="normal">4390</span>
<span class="normal">4391</span>
<span class="normal">4392</span>
<span class="normal">4393</span>
<span class="normal">4394</span>
<span class="normal">4395</span>
<span class="normal">4396</span>
<span class="normal">4397</span>
<span class="normal">4398</span>
<span class="normal">4399</span>
<span class="normal">4400</span>
<span class="normal">4401</span>
<span class="normal">4402</span>
<span class="normal">4403</span>
<span class="normal">4404</span>
<span class="normal">4405</span>
<span class="normal">4406</span>
<span class="normal">4407</span>
<span class="normal">4408</span>
<span class="normal">4409</span>
<span class="normal">4410</span>
<span class="normal">4411</span>
<span class="normal">4412</span>
<span class="normal">4413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">send_membership_invitation</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">teamId</span><span class="p">,</span> <span class="n">inviteeId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inviteeEmail</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a membership invitation and send an email notification</span>
<span class="sd">    to the invitee.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        teamId: Synapse teamId</span>
<span class="sd">        inviteeId: Synapse username or profile id of user</span>
<span class="sd">        inviteeEmail: Email of user</span>
<span class="sd">        message: Additional message for the user getting invited to the</span>
<span class="sd">                 team.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MembershipInvitation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">invite_request</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;teamId&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">teamId</span><span class="p">),</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">message</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">inviteeEmail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">invite_request</span><span class="p">[</span><span class="s2">&quot;inviteeEmail&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">inviteeEmail</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">inviteeId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">invite_request</span><span class="p">[</span><span class="s2">&quot;inviteeId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">inviteeId</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
        <span class="s2">&quot;/membershipInvitation&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">invite_request</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.submit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">submit</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">submitterAlias</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">teamName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dockerTag</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.submit" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Submit an Entity for <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Evaluation">evaluation</a>.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>evalation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Evaluation queue to submit to</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The Entity containing the Submissions</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A name for this submission. In the absent of this parameter, the entity name will be used.
    (Optional) A <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a> object, ID or name of a Team that is registered for the challenge</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>team</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(optional) A <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a> object, ID or name of a Team that is registered for the challenge</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>silent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Set to True to suppress output.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>submitterAlias</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(optional) A nickname, possibly for display in leaderboards in place of the submitter's name</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>teamName</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(deprecated) A synonym for submitterAlias</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dockerTag</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(optional) The Docker tag must be specified if the entity is a DockerRepository.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;latest&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Submission">synapseclient.evaluation.Submission</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>In the case of challenges, a team can optionally be provided to give credit to members of the team that
contributed to the submission. The team must be registered for the challenge with which the given evaluation is
associated. The caller must be a member of the submitting team.</p>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Getting and submitting an evaluation</p>
<pre><code>evaluation = syn.getEvaluation(123)
entity = syn.get('syn456')
submission = syn.submit(evaluation, entity, name='Our Final Answer', team='Blue Team')
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4488</span>
<span class="normal">4489</span>
<span class="normal">4490</span>
<span class="normal">4491</span>
<span class="normal">4492</span>
<span class="normal">4493</span>
<span class="normal">4494</span>
<span class="normal">4495</span>
<span class="normal">4496</span>
<span class="normal">4497</span>
<span class="normal">4498</span>
<span class="normal">4499</span>
<span class="normal">4500</span>
<span class="normal">4501</span>
<span class="normal">4502</span>
<span class="normal">4503</span>
<span class="normal">4504</span>
<span class="normal">4505</span>
<span class="normal">4506</span>
<span class="normal">4507</span>
<span class="normal">4508</span>
<span class="normal">4509</span>
<span class="normal">4510</span>
<span class="normal">4511</span>
<span class="normal">4512</span>
<span class="normal">4513</span>
<span class="normal">4514</span>
<span class="normal">4515</span>
<span class="normal">4516</span>
<span class="normal">4517</span>
<span class="normal">4518</span>
<span class="normal">4519</span>
<span class="normal">4520</span>
<span class="normal">4521</span>
<span class="normal">4522</span>
<span class="normal">4523</span>
<span class="normal">4524</span>
<span class="normal">4525</span>
<span class="normal">4526</span>
<span class="normal">4527</span>
<span class="normal">4528</span>
<span class="normal">4529</span>
<span class="normal">4530</span>
<span class="normal">4531</span>
<span class="normal">4532</span>
<span class="normal">4533</span>
<span class="normal">4534</span>
<span class="normal">4535</span>
<span class="normal">4536</span>
<span class="normal">4537</span>
<span class="normal">4538</span>
<span class="normal">4539</span>
<span class="normal">4540</span>
<span class="normal">4541</span>
<span class="normal">4542</span>
<span class="normal">4543</span>
<span class="normal">4544</span>
<span class="normal">4545</span>
<span class="normal">4546</span>
<span class="normal">4547</span>
<span class="normal">4548</span>
<span class="normal">4549</span>
<span class="normal">4550</span>
<span class="normal">4551</span>
<span class="normal">4552</span>
<span class="normal">4553</span>
<span class="normal">4554</span>
<span class="normal">4555</span>
<span class="normal">4556</span>
<span class="normal">4557</span>
<span class="normal">4558</span>
<span class="normal">4559</span>
<span class="normal">4560</span>
<span class="normal">4561</span>
<span class="normal">4562</span>
<span class="normal">4563</span>
<span class="normal">4564</span>
<span class="normal">4565</span>
<span class="normal">4566</span>
<span class="normal">4567</span>
<span class="normal">4568</span>
<span class="normal">4569</span>
<span class="normal">4570</span>
<span class="normal">4571</span>
<span class="normal">4572</span>
<span class="normal">4573</span>
<span class="normal">4574</span>
<span class="normal">4575</span>
<span class="normal">4576</span>
<span class="normal">4577</span>
<span class="normal">4578</span>
<span class="normal">4579</span>
<span class="normal">4580</span>
<span class="normal">4581</span>
<span class="normal">4582</span>
<span class="normal">4583</span>
<span class="normal">4584</span>
<span class="normal">4585</span>
<span class="normal">4586</span>
<span class="normal">4587</span>
<span class="normal">4588</span>
<span class="normal">4589</span>
<span class="normal">4590</span>
<span class="normal">4591</span>
<span class="normal">4592</span>
<span class="normal">4593</span>
<span class="normal">4594</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">submit</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">evaluation</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">team</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">submitterAlias</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">teamName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dockerTag</span><span class="o">=</span><span class="s2">&quot;latest&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Submit an Entity for [evaluation][synapseclient.evaluation.Evaluation].</span>

<span class="sd">    Arguments:</span>
<span class="sd">        evalation: Evaluation queue to submit to</span>
<span class="sd">        entity: The Entity containing the Submissions</span>
<span class="sd">        name: A name for this submission. In the absent of this parameter, the entity name will be used.</span>
<span class="sd">                (Optional) A [synapseclient.team.Team][] object, ID or name of a Team that is registered for the challenge</span>
<span class="sd">        team: (optional) A [synapseclient.team.Team][] object, ID or name of a Team that is registered for the challenge</span>
<span class="sd">        silent: Set to True to suppress output.</span>
<span class="sd">        submitterAlias: (optional) A nickname, possibly for display in leaderboards in place of the submitter&#39;s name</span>
<span class="sd">        teamName: (deprecated) A synonym for submitterAlias</span>
<span class="sd">        dockerTag: (optional) The Docker tag must be specified if the entity is a DockerRepository.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A [synapseclient.evaluation.Submission][] object</span>


<span class="sd">    In the case of challenges, a team can optionally be provided to give credit to members of the team that</span>
<span class="sd">    contributed to the submission. The team must be registered for the challenge with which the given evaluation is</span>
<span class="sd">    associated. The caller must be a member of the submitting team.</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Getting and submitting an evaluation</span>

<span class="sd">            evaluation = syn.getEvaluation(123)</span>
<span class="sd">            entity = syn.get(&#39;syn456&#39;)</span>
<span class="sd">            submission = syn.submit(evaluation, entity, name=&#39;Our Final Answer&#39;, team=&#39;Blue Team&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">require_param</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="s2">&quot;evaluation&quot;</span><span class="p">)</span>
    <span class="n">require_param</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;entity&quot;</span><span class="p">)</span>

    <span class="n">evaluation_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>

    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">synapseclient</span><span class="o">.</span><span class="n">DockerRepository</span><span class="p">):</span>
        <span class="c1"># Edge case if dockerTag is specified as None</span>
        <span class="k">if</span> <span class="n">dockerTag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;A dockerTag is required to submit a DockerEntity. Cannot be None&quot;</span>
            <span class="p">)</span>
        <span class="n">docker_repository</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;repositoryName&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">docker_repository</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="s2">&quot;versionNumber&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># version defaults to 1 to hack around required version field and allow submission of files/folders</span>
    <span class="n">entity_version</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># default name of submission to name of entity</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

    <span class="n">team_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">team</span><span class="p">:</span>
        <span class="n">team</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTeam</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>
        <span class="n">team_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">team</span><span class="p">)</span>

    <span class="n">contributors</span><span class="p">,</span> <span class="n">eligibility_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_contributors</span><span class="p">(</span><span class="n">evaluation_id</span><span class="p">,</span> <span class="n">team</span><span class="p">)</span>

    <span class="c1"># for backward compatible until we remove supports for teamName</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">submitterAlias</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">teamName</span><span class="p">:</span>
            <span class="n">submitterAlias</span> <span class="o">=</span> <span class="n">teamName</span>
        <span class="k">elif</span> <span class="n">team</span> <span class="ow">and</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">team</span><span class="p">:</span>
            <span class="n">submitterAlias</span> <span class="o">=</span> <span class="n">team</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">synapseclient</span><span class="o">.</span><span class="n">DockerRepository</span><span class="p">):</span>
        <span class="n">docker_digest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_docker_digest</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">dockerTag</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">docker_digest</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">submission</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;evaluationId&quot;</span><span class="p">:</span> <span class="n">evaluation_id</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;entityId&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">,</span>
        <span class="s2">&quot;versionNumber&quot;</span><span class="p">:</span> <span class="n">entity_version</span><span class="p">,</span>
        <span class="s2">&quot;dockerDigest&quot;</span><span class="p">:</span> <span class="n">docker_digest</span><span class="p">,</span>
        <span class="s2">&quot;dockerRepositoryName&quot;</span><span class="p">:</span> <span class="n">docker_repository</span><span class="p">,</span>
        <span class="s2">&quot;teamId&quot;</span><span class="p">:</span> <span class="n">team_id</span><span class="p">,</span>
        <span class="s2">&quot;contributors&quot;</span><span class="p">:</span> <span class="n">contributors</span><span class="p">,</span>
        <span class="s2">&quot;submitterAlias&quot;</span><span class="p">:</span> <span class="n">submitterAlias</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">submitted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_submit</span><span class="p">(</span><span class="n">submission</span><span class="p">,</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;etag&quot;</span><span class="p">],</span> <span class="n">eligibility_hash</span><span class="p">)</span>

    <span class="c1"># if we want to display the receipt message, we need the full object</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">silent</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">Evaluation</span><span class="p">)):</span>
            <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getEvaluation</span><span class="p">(</span><span class="n">evaluation_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;submissionReceiptMessage&quot;</span> <span class="ow">in</span> <span class="n">evaluation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="s2">&quot;submissionReceiptMessage&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">submitted</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getConfigFile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getConfigFile</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

<a href="#synapseclient.Synapse.getConfigFile" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves the client configuration information.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>configPath</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Path to configuration file on local file system</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="configparser.RawConfigParser">RawConfigParser</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A RawConfigParser populated with properties from the user's configuration file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
    <span class="s2">&quot;Moved to synapseclient/api/configuration_services.py::get_config_file&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">getConfigFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configPath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">configparser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the client configuration information.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        configPath:  Path to configuration file on local file system</span>

<span class="sd">    Returns:</span>
<span class="sd">        A RawConfigParser populated with properties from the user&#39;s configuration file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span>  <span class="c1"># Does not fail if the file does not exist</span>
        <span class="k">return</span> <span class="n">config</span>
    <span class="k">except</span> <span class="n">configparser</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Error parsing Synapse config file: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.setEndpoints" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setEndpoints</span><span class="p">(</span><span class="n">repoEndpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">authEndpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileHandleEndpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">portalEndpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skip_checks</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.setEndpoints" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sets the locations for each of the Synapse services (mostly useful for testing).</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>repoEndpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Location of synapse repository</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>authEndpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Location of authentication service</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>fileHandleEndpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Location of file service</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>portalEndpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Location of the website</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>skip_checks</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Skip version and endpoint checks</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>bool</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Switching endpoints</summary>
  <p>To switch between staging and production endpoints</p>
<pre><code>syn.setEndpoints(**synapseclient.client.STAGING_ENDPOINTS)
syn.setEndpoints(**synapseclient.client.PRODUCTION_ENDPOINTS)
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setEndpoints</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">repoEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">authEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fileHandleEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">portalEndpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">skip_checks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the locations for each of the Synapse services (mostly useful for testing).</span>

<span class="sd">    Arguments:</span>
<span class="sd">        repoEndpoint:          Location of synapse repository</span>
<span class="sd">        authEndpoint:          Location of authentication service</span>
<span class="sd">        fileHandleEndpoint:    Location of file service</span>
<span class="sd">        portalEndpoint:        Location of the website</span>
<span class="sd">        skip_checks:           Skip version and endpoint checks</span>

<span class="sd">    Example: Switching endpoints</span>
<span class="sd">        To switch between staging and production endpoints</span>

<span class="sd">            syn.setEndpoints(**synapseclient.client.STAGING_ENDPOINTS)</span>
<span class="sd">            syn.setEndpoints(**synapseclient.client.PRODUCTION_ENDPOINTS)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">endpoints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;repoEndpoint&quot;</span><span class="p">:</span> <span class="n">repoEndpoint</span><span class="p">,</span>
        <span class="s2">&quot;authEndpoint&quot;</span><span class="p">:</span> <span class="n">authEndpoint</span><span class="p">,</span>
        <span class="s2">&quot;fileHandleEndpoint&quot;</span><span class="p">:</span> <span class="n">fileHandleEndpoint</span><span class="p">,</span>
        <span class="s2">&quot;portalEndpoint&quot;</span><span class="p">:</span> <span class="n">portalEndpoint</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># For unspecified endpoints, first look in the config file</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_config_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configPath</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="s2">&quot;endpoints&quot;</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
            <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;endpoints&quot;</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>

    <span class="c1"># Endpoints default to production</span>
    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">=</span> <span class="n">PRODUCTION_ENDPOINTS</span><span class="p">[</span><span class="n">point</span><span class="p">]</span>

        <span class="c1"># Update endpoints if we get redirected</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_checks</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">],</span>
                <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">synapseclient</span><span class="o">.</span><span class="n">USER_AGENT</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">301</span><span class="p">:</span>
                <span class="n">endpoints</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">repoEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;repoEndpoint&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;authEndpoint&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;fileHandleEndpoint&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">portalEndpoint</span> <span class="o">=</span> <span class="n">endpoints</span><span class="p">[</span><span class="s2">&quot;portalEndpoint&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.invalidateAPIKey" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">invalidateAPIKey</span><span class="p">()</span></code>

<a href="#synapseclient.Synapse.invalidateAPIKey" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p><strong>Deprecated with no replacement.</strong> The client does not support API keys for
authentication. Please use a
<a href="https://python-docs.synapse.org/tutorials/authentication/">personal access token</a>
instead. This method will be removed in a future release.</p>
<p>Invalidates authentication across all clients.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.0.0&quot;</span><span class="p">,</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;deprecated with no replacement. The client does not support API keys for &quot;</span>
    <span class="s2">&quot;authentication. Please use a personal access token instead. This method will &quot;</span>
    <span class="s2">&quot;be removed in a future release.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">invalidateAPIKey</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **Deprecated with no replacement.** The client does not support API keys for</span>
<span class="sd">    authentication. Please use a</span>
<span class="sd">    [personal access token](https://python-docs.synapse.org/tutorials/authentication/)</span>
<span class="sd">    instead. This method will be removed in a future release.</span>


<span class="sd">    Invalidates authentication across all clients.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Logout globally</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="s2">&quot;/secretKey&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authEndpoint</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_user_profile_by_username" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_user_profile_by_username</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sessionToken</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

<a href="#synapseclient.Synapse.get_user_profile_by_username" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get the details about a Synapse user.
Retrieves information on the current user if 'id' is omitted or is empty string.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>username</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The userName of a user</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sessionToken</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The session token to use to find the user profile</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.team.UserProfile" href="../teams/#synapseclient.team.UserProfile">UserProfile</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The user profile for the user of interest.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Getting your own profile</p>
<pre><code>my_profile = syn.get_user_profile_by_username()
</code></pre>
<p>Getting another user's profile</p>
<pre><code>freds_profile = syn.get_user_profile_by_username('fredcommo')
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get_user_profile_by_username</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sessionToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the details about a Synapse user.</span>
<span class="sd">    Retrieves information on the current user if &#39;id&#39; is omitted or is empty string.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        username:     The userName of a user</span>
<span class="sd">        sessionToken: The session token to use to find the user profile</span>

<span class="sd">    Returns:</span>
<span class="sd">        The user profile for the user of interest.</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Getting your own profile</span>

<span class="sd">            my_profile = syn.get_user_profile_by_username()</span>

<span class="sd">        Getting another user&#39;s profile</span>

<span class="sd">            freds_profile = syn.get_user_profile_by_username(&#39;fredcommo&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">is_none</span> <span class="o">=</span> <span class="n">username</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="n">is_str</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_str</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_none</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;username must be string or None&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">is_str</span><span class="p">:</span>
        <span class="n">principals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findPrincipals</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">principal</span> <span class="ow">in</span> <span class="n">principals</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">principal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;userName&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">username</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">principal</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find user &#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/userProfile/</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">UserProfile</span><span class="p">(</span>
        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sessionToken&quot;</span><span class="p">:</span> <span class="n">sessionToken</span><span class="p">}</span> <span class="k">if</span> <span class="n">sessionToken</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_user_profile_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_user_profile_by_id</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sessionToken</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

<a href="#synapseclient.Synapse.get_user_profile_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get the details about a Synapse user.
Retrieves information on the current user if 'id' is omitted.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The ownerId of a user</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sessionToken</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The session token to use to find the user profile</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.team.UserProfile" href="../teams/#synapseclient.team.UserProfile">UserProfile</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The user profile for the user of interest.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Getting your own profile</p>
<pre><code>my_profile = syn.get_user_profile_by_id()
</code></pre>
<p>Getting another user's profile</p>
<pre><code>freds_profile = syn.get_user_profile_by_id(1234567)
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get_user_profile_by_id</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sessionToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the details about a Synapse user.</span>
<span class="sd">    Retrieves information on the current user if &#39;id&#39; is omitted.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id:           The ownerId of a user</span>
<span class="sd">        sessionToken: The session token to use to find the user profile</span>

<span class="sd">    Returns:</span>
<span class="sd">        The user profile for the user of interest.</span>


<span class="sd">    Example: Using this function</span>
<span class="sd">        Getting your own profile</span>

<span class="sd">            my_profile = syn.get_user_profile_by_id()</span>

<span class="sd">        Getting another user&#39;s profile</span>

<span class="sd">            freds_profile = syn.get_user_profile_by_id(1234567)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">id</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;id must be an &#39;ownerId&#39; integer&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/userProfile/</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">UserProfile</span><span class="p">(</span>
        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sessionToken&quot;</span><span class="p">:</span> <span class="n">sessionToken</span><span class="p">}</span> <span class="k">if</span> <span class="n">sessionToken</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getUserProfile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getUserProfile</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sessionToken</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

<a href="#synapseclient.Synapse.getUserProfile" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get the details about a Synapse user.
Retrieves information on the current user if 'id' is omitted.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The 'userId' (aka 'ownerId') of a user or the userName</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[str, int, <a class="autorefs autorefs-internal" title="synapseclient.team.UserProfile" href="../teams/#synapseclient.team.UserProfile">UserProfile</a>, <a class="autorefs autorefs-internal" title="synapseclient.team.TeamMember" href="../teams/#synapseclient.team.TeamMember">TeamMember</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sessionToken</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The session token to use to find the user profile</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.team.UserProfile" href="../teams/#synapseclient.team.UserProfile">UserProfile</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The user profile for the user of interest.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Getting your own profile</p>
<pre><code>my_profile = syn.getUserProfile()
</code></pre>
<p>Getting another user's profile</p>
<pre><code>freds_profile = syn.getUserProfile('fredcommo')
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">getUserProfile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">UserProfile</span><span class="p">,</span> <span class="n">TeamMember</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sessionToken</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserProfile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the details about a Synapse user.</span>
<span class="sd">    Retrieves information on the current user if &#39;id&#39; is omitted.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id:           The &#39;userId&#39; (aka &#39;ownerId&#39;) of a user or the userName</span>
<span class="sd">        sessionToken: The session token to use to find the user profile</span>

<span class="sd">    Returns:</span>
<span class="sd">        The user profile for the user of interest.</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Getting your own profile</span>

<span class="sd">            my_profile = syn.getUserProfile()</span>

<span class="sd">        Getting another user&#39;s profile</span>

<span class="sd">            freds_profile = syn.getUserProfile(&#39;fredcommo&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># if id is unset or a userID, this will succeed</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;ownerId&quot;</span> <span class="ow">in</span> <span class="nb">id</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="o">.</span><span class="n">ownerId</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">TeamMember</span><span class="p">):</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="o">.</span><span class="n">member</span><span class="o">.</span><span class="n">ownerId</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">principals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findPrincipals</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">principals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">principals</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">principal</span> <span class="ow">in</span> <span class="n">principals</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">principal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;userName&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="nb">id</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                        <span class="nb">id</span> <span class="o">=</span> <span class="n">principal</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># no break</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t find user &quot;</span><span class="si">%s</span><span class="s1">&quot;: &#39;</span> <span class="o">%</span> <span class="nb">id</span><span class="p">)</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/userProfile/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">id</span>
    <span class="k">return</span> <span class="n">UserProfile</span><span class="p">(</span>
        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
            <span class="n">uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sessionToken&quot;</span><span class="p">:</span> <span class="n">sessionToken</span><span class="p">}</span> <span class="k">if</span> <span class="n">sessionToken</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.is_certified" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_certified</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.is_certified" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Determines whether a Synapse user is a certified user.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>user</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Synapse username or Id</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[str, int]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>bool</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>True if the Synapse user is certified</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_certified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determines whether a Synapse user is a certified user.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        user: Synapse username or Id</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the Synapse user is certified</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if userid or username exists</span>
    <span class="n">syn_user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserProfile</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="c1"># Get passing record</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">certification_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_certified_passing_record</span><span class="p">(</span>
            <span class="n">syn_user</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">certification_status</span><span class="p">[</span><span class="s2">&quot;passed&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="c1"># user hasn&#39;t taken the quiz</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.is_synapse_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_synapse_id</span><span class="p">(</span><span class="n">syn_id</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.is_synapse_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Checks if given synID is valid (attached to actual entity?)</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>syn_id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A Synapse ID</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>bool</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>True if the Synapse ID is valid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_synapse_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">syn_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if given synID is valid (attached to actual entity?)</span>

<span class="sd">    Arguments:</span>
<span class="sd">        syn_id: A Synapse ID</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the Synapse ID is valid</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">syn_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">syn_id</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">SynapseFileNotFoundError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="p">(</span>
            <span class="n">SynapseHTTPError</span><span class="p">,</span>
            <span class="n">SynapseAuthenticationError</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">err</span><span class="o">.</span><span class="n">__context__</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">or</span> <span class="n">err</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">404</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="c1"># Valid ID but user lacks permission or is not logged in</span>
            <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;synID must be a string&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.onweb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">onweb</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">subpageId</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.onweb" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Opens up a browser window to the entity page or wiki-subpage.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Either an Entity or a Synapse ID</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>subpageId</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(Optional) ID of one of the wiki's sub-pages</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">onweb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">subpageId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Opens up a browser window to the entity page or wiki-subpage.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity:    Either an Entity or a Synapse ID</span>
<span class="sd">        subpageId: (Optional) ID of one of the wiki&#39;s sub-pages</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">synId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">subpageId</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">#!Synapse:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">portalEndpoint</span><span class="p">,</span> <span class="n">synId</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">#!Wiki:</span><span class="si">%s</span><span class="s2">/ENTITY/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">portalEndpoint</span><span class="p">,</span> <span class="n">synId</span><span class="p">,</span> <span class="n">subpageId</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.printEntity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">printEntity</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.printEntity" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Pretty prints an Entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The entity to be printed.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ensure_ascii</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, escapes all non-ASCII characters</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>None</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">printEntity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pretty prints an Entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: The entity to be printed.</span>
<span class="sd">        ensure_ascii: If True, escapes all non-ASCII characters</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_synapse_id_str</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="n">synid</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_synid_and_version</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEntity</span><span class="p">(</span><span class="n">synid</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="n">ensure_ascii</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_available_services" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_available_services</span><span class="p">()</span></code>

<a href="#synapseclient.Synapse.get_available_services" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get available Synapse services
This is a beta feature and is subject to change</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[str]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of available services</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_available_services</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get available Synapse services</span>
<span class="sd">    This is a beta feature and is subject to change</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of available services</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">services</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_services</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">services</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.service" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">service</span><span class="p">(</span><span class="n">service_name</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.service" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get available Synapse services
This is a beta feature and is subject to change</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>service_name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>name of the service</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get available Synapse services</span>
<span class="sd">    This is a beta feature and is subject to change</span>

<span class="sd">    Arguments:</span>
<span class="sd">        service_name: name of the service</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># This is to avoid circular imports</span>
    <span class="c1"># TODO: revisit the import order and method https://stackoverflow.com/a/37126790</span>
    <span class="c1"># To move this to the top</span>
    <span class="kn">import</span> <span class="nn">synapseclient.services</span>

    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">service_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">service_name</span> <span class="o">=</span> <span class="n">service_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">service_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_services</span><span class="p">,</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Unrecognized service (</span><span class="si">{</span><span class="n">service_name</span><span class="si">}</span><span class="s2">). Run the &#39;get_available_&quot;</span>
        <span class="s2">&quot;services()&#39; method to get a list of available services.&quot;</span>
    <span class="p">)</span>
    <span class="n">service_attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_services</span><span class="p">[</span><span class="n">service_name</span><span class="p">]</span>
    <span class="n">service_cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">synapseclient</span><span class="o">.</span><span class="n">services</span><span class="p">,</span> <span class="n">service_attr</span><span class="p">)</span>
    <span class="n">service</span> <span class="o">=</span> <span class="n">service_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">service</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.clear_download_list" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear_download_list</span><span class="p">()</span></code>

<a href="#synapseclient.Synapse.clear_download_list" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Clear all files from download list</p>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2422</span>
<span class="normal">2423</span>
<span class="normal">2424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clear_download_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear all files from download list&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="s2">&quot;/download/list&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.create_external_s3_file_handle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_external_s3_file_handle</span><span class="p">(</span><span class="n">bucket_name</span><span class="p">,</span> <span class="n">s3_file_key</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">storage_location_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">md5</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.create_external_s3_file_handle" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Create an external S3 file handle for e.g. a file that has been uploaded directly to
an external S3 storage location.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>bucket_name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the S3 bucket</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>s3_file_key</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>S3 key of the uploaded object</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>file_path</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Local path of the uploaded file</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>parent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parent entity to create the file handle in, the file handle will be created
    in the default storage location of the parent. Mutually exclusive with
    storage_location_id</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>storage_location_id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Explicit storage location id to create the file handle in, mutually exclusive
    with parent</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>mimetype</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Mimetype of the file, if known</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>md5</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>MD5 of the file, if known</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code>ValueError</code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If neither parent nor storage_location_id is specified, or if both are specified.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3771</span>
<span class="normal">3772</span>
<span class="normal">3773</span>
<span class="normal">3774</span>
<span class="normal">3775</span>
<span class="normal">3776</span>
<span class="normal">3777</span>
<span class="normal">3778</span>
<span class="normal">3779</span>
<span class="normal">3780</span>
<span class="normal">3781</span>
<span class="normal">3782</span>
<span class="normal">3783</span>
<span class="normal">3784</span>
<span class="normal">3785</span>
<span class="normal">3786</span>
<span class="normal">3787</span>
<span class="normal">3788</span>
<span class="normal">3789</span>
<span class="normal">3790</span>
<span class="normal">3791</span>
<span class="normal">3792</span>
<span class="normal">3793</span>
<span class="normal">3794</span>
<span class="normal">3795</span>
<span class="normal">3796</span>
<span class="normal">3797</span>
<span class="normal">3798</span>
<span class="normal">3799</span>
<span class="normal">3800</span>
<span class="normal">3801</span>
<span class="normal">3802</span>
<span class="normal">3803</span>
<span class="normal">3804</span>
<span class="normal">3805</span>
<span class="normal">3806</span>
<span class="normal">3807</span>
<span class="normal">3808</span>
<span class="normal">3809</span>
<span class="normal">3810</span>
<span class="normal">3811</span>
<span class="normal">3812</span>
<span class="normal">3813</span>
<span class="normal">3814</span>
<span class="normal">3815</span>
<span class="normal">3816</span>
<span class="normal">3817</span>
<span class="normal">3818</span>
<span class="normal">3819</span>
<span class="normal">3820</span>
<span class="normal">3821</span>
<span class="normal">3822</span>
<span class="normal">3823</span>
<span class="normal">3824</span>
<span class="normal">3825</span>
<span class="normal">3826</span>
<span class="normal">3827</span>
<span class="normal">3828</span>
<span class="normal">3829</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_external_s3_file_handle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">bucket_name</span><span class="p">,</span>
    <span class="n">s3_file_key</span><span class="p">,</span>
    <span class="n">file_path</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">storage_location_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mimetype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">md5</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an external S3 file handle for e.g. a file that has been uploaded directly to</span>
<span class="sd">    an external S3 storage location.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        bucket_name: Name of the S3 bucket</span>
<span class="sd">        s3_file_key: S3 key of the uploaded object</span>
<span class="sd">        file_path: Local path of the uploaded file</span>
<span class="sd">        parent: Parent entity to create the file handle in, the file handle will be created</span>
<span class="sd">                in the default storage location of the parent. Mutually exclusive with</span>
<span class="sd">                storage_location_id</span>
<span class="sd">        storage_location_id: Explicit storage location id to create the file handle in, mutually exclusive</span>
<span class="sd">                with parent</span>
<span class="sd">        mimetype: Mimetype of the file, if known</span>
<span class="sd">        md5: MD5 of the file, if known</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If neither parent nor storage_location_id is specified, or if both are specified.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">storage_location_id</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parent</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pass parent or storage_location_id, not both&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">parent</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;One of parent or storage_location_id is required&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">upload_destination</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getDefaultUploadDestination</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">storage_location_id</span> <span class="o">=</span> <span class="n">upload_destination</span><span class="p">[</span><span class="s2">&quot;storageLocationId&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mimetype</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">file_handle</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">S3_FILE_HANDLE</span><span class="p">,</span>
        <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">s3_file_key</span><span class="p">,</span>
        <span class="s2">&quot;bucketName&quot;</span><span class="p">:</span> <span class="n">bucket_name</span><span class="p">,</span>
        <span class="s2">&quot;fileName&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
        <span class="s2">&quot;contentMd5&quot;</span><span class="p">:</span> <span class="n">md5</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">md5_for_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(),</span>
        <span class="s2">&quot;contentSize&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span><span class="p">,</span>
        <span class="s2">&quot;storageLocationId&quot;</span><span class="p">:</span> <span class="n">storage_location_id</span><span class="p">,</span>
        <span class="s2">&quot;contentType&quot;</span><span class="p">:</span> <span class="n">mimetype</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
        <span class="s2">&quot;/externalFileHandle/s3&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">file_handle</span><span class="p">),</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fileHandleEndpoint</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getMyStorageLocationSetting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getMyStorageLocationSetting</span><span class="p">(</span><span class="n">storage_location_id</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getMyStorageLocationSetting" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get a StorageLocationSetting by its id.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>storage_location_id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>id of the StorageLocationSetting to retrieve.
                    The corresponding StorageLocationSetting must have been created by this user.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dict describing the StorageLocationSetting retrieved by its id</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3965</span>
<span class="normal">3966</span>
<span class="normal">3967</span>
<span class="normal">3968</span>
<span class="normal">3969</span>
<span class="normal">3970</span>
<span class="normal">3971</span>
<span class="normal">3972</span>
<span class="normal">3973</span>
<span class="normal">3974</span>
<span class="normal">3975</span>
<span class="normal">3976</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getMyStorageLocationSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_location_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a StorageLocationSetting by its id.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        storage_location_id: id of the StorageLocationSetting to retrieve.</span>
<span class="sd">                                The corresponding StorageLocationSetting must have been created by this user.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict describing the StorageLocationSetting retrieved by its id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/storageLocation/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">storage_location_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.createStorageLocationSetting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">createStorageLocationSetting</span><span class="p">(</span><span class="n">storage_type</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.createStorageLocationSetting" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Creates an IMMUTABLE storage location based on the specified type.</p>
<p>For each storage_type, the following kwargs should be specified:</p>
<p><strong>ExternalObjectStorage</strong>: (S3-like (e.g. AWS S3 or Openstack) bucket not accessed by Synapse)</p>
<ul>
<li><code>endpointUrl</code>: endpoint URL of the S3 service (for example: 'https://s3.amazonaws.com')</li>
<li><code>bucket</code>: the name of the bucket to use</li>
</ul>
<p><strong>ExternalS3Storage</strong>: (Amazon S3 bucket accessed by Synapse)</p>
<ul>
<li><code>bucket</code>: the name of the bucket to use</li>
</ul>
<p><strong>ExternalStorage</strong>: (SFTP or FTP storage location not accessed by Synapse)</p>
<ul>
<li><code>url</code>: the base URL for uploading to the external destination</li>
<li><code>supportsSubfolders(optional)</code>: does the destination support creating subfolders under the base url
    (default: false)</li>
</ul>
<p><strong>ProxyStorage</strong>: (a proxy server that controls access to a storage)</p>
<ul>
<li><code>secretKey</code>: The encryption key used to sign all pre-signed URLs used to communicate with the proxy.</li>
<li><code>proxyUrl</code>: The HTTPS URL of the proxy used for upload and download.</li>
</ul>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>storage_type</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The type of the StorageLocationSetting to create</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>banner</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(Optional) The optional banner to show every time a file is uploaded</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>description</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>(Optional) The description to show the user when the user has to choose which upload destination to use</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>fields necessary for creation of the specified storage_type</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dict of the created StorageLocationSetting</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3909</span>
<span class="normal">3910</span>
<span class="normal">3911</span>
<span class="normal">3912</span>
<span class="normal">3913</span>
<span class="normal">3914</span>
<span class="normal">3915</span>
<span class="normal">3916</span>
<span class="normal">3917</span>
<span class="normal">3918</span>
<span class="normal">3919</span>
<span class="normal">3920</span>
<span class="normal">3921</span>
<span class="normal">3922</span>
<span class="normal">3923</span>
<span class="normal">3924</span>
<span class="normal">3925</span>
<span class="normal">3926</span>
<span class="normal">3927</span>
<span class="normal">3928</span>
<span class="normal">3929</span>
<span class="normal">3930</span>
<span class="normal">3931</span>
<span class="normal">3932</span>
<span class="normal">3933</span>
<span class="normal">3934</span>
<span class="normal">3935</span>
<span class="normal">3936</span>
<span class="normal">3937</span>
<span class="normal">3938</span>
<span class="normal">3939</span>
<span class="normal">3940</span>
<span class="normal">3941</span>
<span class="normal">3942</span>
<span class="normal">3943</span>
<span class="normal">3944</span>
<span class="normal">3945</span>
<span class="normal">3946</span>
<span class="normal">3947</span>
<span class="normal">3948</span>
<span class="normal">3949</span>
<span class="normal">3950</span>
<span class="normal">3951</span>
<span class="normal">3952</span>
<span class="normal">3953</span>
<span class="normal">3954</span>
<span class="normal">3955</span>
<span class="normal">3956</span>
<span class="normal">3957</span>
<span class="normal">3958</span>
<span class="normal">3959</span>
<span class="normal">3960</span>
<span class="normal">3961</span>
<span class="normal">3962</span>
<span class="normal">3963</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">createStorageLocationSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_type</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates an IMMUTABLE storage location based on the specified type.</span>

<span class="sd">    For each storage_type, the following kwargs should be specified:</span>

<span class="sd">    **ExternalObjectStorage**: (S3-like (e.g. AWS S3 or Openstack) bucket not accessed by Synapse)</span>

<span class="sd">    - `endpointUrl`: endpoint URL of the S3 service (for example: &#39;https://s3.amazonaws.com&#39;)</span>
<span class="sd">    - `bucket`: the name of the bucket to use</span>

<span class="sd">    **ExternalS3Storage**: (Amazon S3 bucket accessed by Synapse)</span>

<span class="sd">    - `bucket`: the name of the bucket to use</span>

<span class="sd">    **ExternalStorage**: (SFTP or FTP storage location not accessed by Synapse)</span>

<span class="sd">    - `url`: the base URL for uploading to the external destination</span>
<span class="sd">    - `supportsSubfolders(optional)`: does the destination support creating subfolders under the base url</span>
<span class="sd">        (default: false)</span>

<span class="sd">    **ProxyStorage**: (a proxy server that controls access to a storage)</span>

<span class="sd">    - `secretKey`: The encryption key used to sign all pre-signed URLs used to communicate with the proxy.</span>
<span class="sd">    - `proxyUrl`: The HTTPS URL of the proxy used for upload and download.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        storage_type: The type of the StorageLocationSetting to create</span>
<span class="sd">        banner: (Optional) The optional banner to show every time a file is uploaded</span>
<span class="sd">        description: (Optional) The description to show the user when the user has to choose which upload destination to use</span>
<span class="sd">        kwargs: fields necessary for creation of the specified storage_type</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict of the created StorageLocationSetting</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">upload_type_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;ExternalObjectStorage&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ExternalS3Storage&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ExternalStorage&quot;</span><span class="p">:</span> <span class="s2">&quot;SFTP&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ProxyStorage&quot;</span><span class="p">:</span> <span class="s2">&quot;PROXYLOCAL&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">storage_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">upload_type_dict</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown storage_type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">storage_type</span><span class="p">)</span>

    <span class="c1"># ProxyStorageLocationSettings has an extra &#39;s&#39; at the end &gt;:(</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;concreteType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;org.sagebionetworks.repo.model.project.&quot;</span>
        <span class="o">+</span> <span class="n">storage_type</span>
        <span class="o">+</span> <span class="s2">&quot;LocationSetting&quot;</span>
        <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="n">storage_type</span> <span class="o">==</span> <span class="s2">&quot;ProxyStorage&quot;</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;uploadType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">upload_type_dict</span><span class="p">[</span><span class="n">storage_type</span><span class="p">]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="s2">&quot;/storageLocation&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.create_s3_storage_location" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_s3_storage_location</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bucket_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">base_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sts_enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.create_s3_storage_location" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Create a storage location in the given parent, either in the given folder or by creating a new
folder in that parent with the given name. This will both create a StorageLocationSetting,
and a ProjectSetting together, optionally creating a new folder in which to locate it,
and optionally enabling this storage location for access via STS. If enabling an existing folder for STS,
it must be empty.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>parent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The parent in which to locate the storage location (mutually exclusive with folder)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>folder_name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The name of a new folder to create (mutually exclusive with folder)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>folder</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The existing folder in which to create the storage location (mutually exclusive with folder_name)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>bucket_name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The name of an S3 bucket, if this is an external storage location,
            if None will use Synapse S3 storage</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>base_key</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The base key of within the bucket, None to use the bucket root,
            only applicable if bucket_name is passed</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sts_enabled</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether this storage location should be STS enabled</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Tuple">Tuple</span>[<a class="autorefs autorefs-internal" title="synapseclient.entity.Folder" href="../folder/#synapseclient.entity.Folder">Folder</a>, <span title="typing.Dict">Dict</span>[str, str], <span title="typing.Dict">Dict</span>[str, str]]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A 3-tuple of the synapse Folder, a the storage location setting, and the project setting dictionaries.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4074</span>
<span class="normal">4075</span>
<span class="normal">4076</span>
<span class="normal">4077</span>
<span class="normal">4078</span>
<span class="normal">4079</span>
<span class="normal">4080</span>
<span class="normal">4081</span>
<span class="normal">4082</span>
<span class="normal">4083</span>
<span class="normal">4084</span>
<span class="normal">4085</span>
<span class="normal">4086</span>
<span class="normal">4087</span>
<span class="normal">4088</span>
<span class="normal">4089</span>
<span class="normal">4090</span>
<span class="normal">4091</span>
<span class="normal">4092</span>
<span class="normal">4093</span>
<span class="normal">4094</span>
<span class="normal">4095</span>
<span class="normal">4096</span>
<span class="normal">4097</span>
<span class="normal">4098</span>
<span class="normal">4099</span>
<span class="normal">4100</span>
<span class="normal">4101</span>
<span class="normal">4102</span>
<span class="normal">4103</span>
<span class="normal">4104</span>
<span class="normal">4105</span>
<span class="normal">4106</span>
<span class="normal">4107</span>
<span class="normal">4108</span>
<span class="normal">4109</span>
<span class="normal">4110</span>
<span class="normal">4111</span>
<span class="normal">4112</span>
<span class="normal">4113</span>
<span class="normal">4114</span>
<span class="normal">4115</span>
<span class="normal">4116</span>
<span class="normal">4117</span>
<span class="normal">4118</span>
<span class="normal">4119</span>
<span class="normal">4120</span>
<span class="normal">4121</span>
<span class="normal">4122</span>
<span class="normal">4123</span>
<span class="normal">4124</span>
<span class="normal">4125</span>
<span class="normal">4126</span>
<span class="normal">4127</span>
<span class="normal">4128</span>
<span class="normal">4129</span>
<span class="normal">4130</span>
<span class="normal">4131</span>
<span class="normal">4132</span>
<span class="normal">4133</span>
<span class="normal">4134</span>
<span class="normal">4135</span>
<span class="normal">4136</span>
<span class="normal">4137</span>
<span class="normal">4138</span>
<span class="normal">4139</span>
<span class="normal">4140</span>
<span class="normal">4141</span>
<span class="normal">4142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_s3_storage_location</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">folder_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">bucket_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sts_enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Folder</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a storage location in the given parent, either in the given folder or by creating a new</span>
<span class="sd">    folder in that parent with the given name. This will both create a StorageLocationSetting,</span>
<span class="sd">    and a ProjectSetting together, optionally creating a new folder in which to locate it,</span>
<span class="sd">    and optionally enabling this storage location for access via STS. If enabling an existing folder for STS,</span>
<span class="sd">    it must be empty.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        parent: The parent in which to locate the storage location (mutually exclusive with folder)</span>
<span class="sd">        folder_name: The name of a new folder to create (mutually exclusive with folder)</span>
<span class="sd">        folder: The existing folder in which to create the storage location (mutually exclusive with folder_name)</span>
<span class="sd">        bucket_name: The name of an S3 bucket, if this is an external storage location,</span>
<span class="sd">                        if None will use Synapse S3 storage</span>
<span class="sd">        base_key: The base key of within the bucket, None to use the bucket root,</span>
<span class="sd">                        only applicable if bucket_name is passed</span>
<span class="sd">        sts_enabled: Whether this storage location should be STS enabled</span>

<span class="sd">    Returns:</span>
<span class="sd">        A 3-tuple of the synapse Folder, a the storage location setting, and the project setting dictionaries.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">folder_name</span> <span class="ow">and</span> <span class="n">parent</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;folder and  folder_name are mutually exclusive, only one should be passed&quot;</span>
            <span class="p">)</span>

        <span class="n">folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">Folder</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">folder_name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">))</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="n">folder</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;either folder or folder_name should be required&quot;</span><span class="p">)</span>

    <span class="n">storage_location_kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;uploadType&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stsEnabled&quot;</span><span class="p">:</span> <span class="n">sts_enabled</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">bucket_name</span><span class="p">:</span>
        <span class="n">storage_location_kwargs</span><span class="p">[</span>
            <span class="s2">&quot;concreteType&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">EXTERNAL_S3_STORAGE_LOCATION_SETTING</span>
        <span class="n">storage_location_kwargs</span><span class="p">[</span><span class="s2">&quot;bucket&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bucket_name</span>
        <span class="k">if</span> <span class="n">base_key</span><span class="p">:</span>
            <span class="n">storage_location_kwargs</span><span class="p">[</span><span class="s2">&quot;baseKey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_key</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">storage_location_kwargs</span><span class="p">[</span>
            <span class="s2">&quot;concreteType&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">concrete_types</span><span class="o">.</span><span class="n">SYNAPSE_S3_STORAGE_LOCATION_SETTING</span>

    <span class="n">storage_location_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
        <span class="s2">&quot;/storageLocation&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">storage_location_kwargs</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">storage_location_id</span> <span class="o">=</span> <span class="n">storage_location_setting</span><span class="p">[</span><span class="s2">&quot;storageLocationId&quot;</span><span class="p">]</span>
    <span class="n">project_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setStorageLocation</span><span class="p">(</span>
        <span class="n">folder</span><span class="p">,</span>
        <span class="n">storage_location_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">folder</span><span class="p">,</span> <span class="n">storage_location_setting</span><span class="p">,</span> <span class="n">project_setting</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.setStorageLocation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setStorageLocation</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">storage_location_id</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.setStorageLocation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sets the storage location for a Project or Folder</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A Project or Folder to which the StorageLocationSetting is set</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>storage_location_id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A StorageLocation id or a list of StorageLocation ids. Pass in None for the default
                    Synapse storage.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The created or updated settings as a dict.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3978</span>
<span class="normal">3979</span>
<span class="normal">3980</span>
<span class="normal">3981</span>
<span class="normal">3982</span>
<span class="normal">3983</span>
<span class="normal">3984</span>
<span class="normal">3985</span>
<span class="normal">3986</span>
<span class="normal">3987</span>
<span class="normal">3988</span>
<span class="normal">3989</span>
<span class="normal">3990</span>
<span class="normal">3991</span>
<span class="normal">3992</span>
<span class="normal">3993</span>
<span class="normal">3994</span>
<span class="normal">3995</span>
<span class="normal">3996</span>
<span class="normal">3997</span>
<span class="normal">3998</span>
<span class="normal">3999</span>
<span class="normal">4000</span>
<span class="normal">4001</span>
<span class="normal">4002</span>
<span class="normal">4003</span>
<span class="normal">4004</span>
<span class="normal">4005</span>
<span class="normal">4006</span>
<span class="normal">4007</span>
<span class="normal">4008</span>
<span class="normal">4009</span>
<span class="normal">4010</span>
<span class="normal">4011</span>
<span class="normal">4012</span>
<span class="normal">4013</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setStorageLocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">storage_location_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the storage location for a Project or Folder</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: A Project or Folder to which the StorageLocationSetting is set</span>
<span class="sd">        storage_location_id: A StorageLocation id or a list of StorageLocation ids. Pass in None for the default</span>
<span class="sd">                                Synapse storage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created or updated settings as a dict.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">storage_location_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">storage_location_id</span> <span class="o">=</span> <span class="n">DEFAULT_STORAGE_LOCATION_ID</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">storage_location_id</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">storage_location_id</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">[</span><span class="n">storage_location_id</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">existing_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getProjectSetting</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;upload&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">existing_setting</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">existing_setting</span><span class="p">[</span><span class="s2">&quot;locations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">locations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restPUT</span><span class="p">(</span><span class="s2">&quot;/projectSettings&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">existing_setting</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getProjectSetting</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;upload&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">project_destination</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;concreteType&quot;</span><span class="p">:</span> <span class="s2">&quot;org.sagebionetworks.repo.model.project.UploadDestinationListSetting&quot;</span><span class="p">,</span>
            <span class="s2">&quot;settingsType&quot;</span><span class="p">:</span> <span class="s2">&quot;upload&quot;</span><span class="p">,</span>
            <span class="s2">&quot;locations&quot;</span><span class="p">:</span> <span class="n">locations</span><span class="p">,</span>
            <span class="s2">&quot;projectId&quot;</span><span class="p">:</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/projectSettings&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">project_destination</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_sts_storage_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_sts_storage_token</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">output_format</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">min_remaining_life</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get_sts_storage_token" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get STS credentials for the given entity_id and permission, outputting it in the given format</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The entity or entity id whose credentials are being returned</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>permission</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>One of:</p>
<ul>
<li><code>read_only</code></li>
<li><code>read_write</code></li>
</ul>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>output_format</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>One of:</p>
<ul>
<li><code>json</code>: the dictionary returned from the Synapse STS API including expiration</li>
<li><code>boto</code>: a dictionary compatible with a boto session (aws_access_key_id, etc)</li>
<li><code>shell</code>: output commands for exporting credentials appropriate for the detected shell</li>
<li><code>bash</code>: output commands for exporting credentials into a bash shell</li>
<li><code>cmd</code>: output commands for exporting credentials into a windows cmd shell</li>
<li><code>powershell</code>: output commands for exporting credentials into a windows powershell</li>
</ul>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;json&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>min_remaining_life</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The minimum allowable remaining life on a cached token to return. If a cached token
                has left than this amount of time left a fresh token will be fetched</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4042</span>
<span class="normal">4043</span>
<span class="normal">4044</span>
<span class="normal">4045</span>
<span class="normal">4046</span>
<span class="normal">4047</span>
<span class="normal">4048</span>
<span class="normal">4049</span>
<span class="normal">4050</span>
<span class="normal">4051</span>
<span class="normal">4052</span>
<span class="normal">4053</span>
<span class="normal">4054</span>
<span class="normal">4055</span>
<span class="normal">4056</span>
<span class="normal">4057</span>
<span class="normal">4058</span>
<span class="normal">4059</span>
<span class="normal">4060</span>
<span class="normal">4061</span>
<span class="normal">4062</span>
<span class="normal">4063</span>
<span class="normal">4064</span>
<span class="normal">4065</span>
<span class="normal">4066</span>
<span class="normal">4067</span>
<span class="normal">4068</span>
<span class="normal">4069</span>
<span class="normal">4070</span>
<span class="normal">4071</span>
<span class="normal">4072</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_sts_storage_token</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">min_remaining_life</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get STS credentials for the given entity_id and permission, outputting it in the given format</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: The entity or entity id whose credentials are being returned</span>
<span class="sd">        permission: One of:</span>

<span class="sd">            - `read_only`</span>
<span class="sd">            - `read_write`</span>

<span class="sd">        output_format: One of:</span>

<span class="sd">            - `json`: the dictionary returned from the Synapse STS API including expiration</span>
<span class="sd">            - `boto`: a dictionary compatible with a boto session (aws_access_key_id, etc)</span>
<span class="sd">            - `shell`: output commands for exporting credentials appropriate for the detected shell</span>
<span class="sd">            - `bash`: output commands for exporting credentials into a bash shell</span>
<span class="sd">            - `cmd`: output commands for exporting credentials into a windows cmd shell</span>
<span class="sd">            - `powershell`: output commands for exporting credentials into a windows powershell</span>

<span class="sd">        min_remaining_life: The minimum allowable remaining life on a cached token to return. If a cached token</span>
<span class="sd">                            has left than this amount of time left a fresh token will be fetched</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sts_transfer</span><span class="o">.</span><span class="n">get_sts_credentials</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span>
        <span class="n">permission</span><span class="p">,</span>
        <span class="n">output_format</span><span class="o">=</span><span class="n">output_format</span><span class="p">,</span>
        <span class="n">min_remaining_life</span><span class="o">=</span><span class="n">min_remaining_life</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.create_snapshot_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_snapshot_version</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">activity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.create_snapshot_version" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Create a new Table Version, new View version, or new Dataset version.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The schema of the Table/View, or its ID.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.table.EntityViewSchema" href="../view_schema/#synapseclient.table.EntityViewSchema">EntityViewSchema</a>, <a class="autorefs autorefs-internal" title="synapseclient.table.Schema" href="../tables/#synapseclient.table.Schema">Schema</a>, str, <a class="autorefs autorefs-internal" title="synapseclient.table.SubmissionViewSchema" href="../tables/#synapseclient.table.SubmissionViewSchema">SubmissionViewSchema</a>, <a class="autorefs autorefs-internal" title="synapseclient.table.Dataset" href="../tables/#synapseclient.table.Dataset">Dataset</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>comment</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional snapshot comment.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>label</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional snapshot label.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>activity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional activity ID applied to snapshot version.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="synapseclient.activity.Activity" href="../activity/#synapseclient.activity.Activity">Activity</a>, str]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>wait</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>True if this method should return the snapshot version after waiting for any necessary
    asynchronous table updates to complete. If False this method will return
    as soon as any updates are initiated.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>bool</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>int</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The snapshot version number if wait=True, None if wait=False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5207</span>
<span class="normal">5208</span>
<span class="normal">5209</span>
<span class="normal">5210</span>
<span class="normal">5211</span>
<span class="normal">5212</span>
<span class="normal">5213</span>
<span class="normal">5214</span>
<span class="normal">5215</span>
<span class="normal">5216</span>
<span class="normal">5217</span>
<span class="normal">5218</span>
<span class="normal">5219</span>
<span class="normal">5220</span>
<span class="normal">5221</span>
<span class="normal">5222</span>
<span class="normal">5223</span>
<span class="normal">5224</span>
<span class="normal">5225</span>
<span class="normal">5226</span>
<span class="normal">5227</span>
<span class="normal">5228</span>
<span class="normal">5229</span>
<span class="normal">5230</span>
<span class="normal">5231</span>
<span class="normal">5232</span>
<span class="normal">5233</span>
<span class="normal">5234</span>
<span class="normal">5235</span>
<span class="normal">5236</span>
<span class="normal">5237</span>
<span class="normal">5238</span>
<span class="normal">5239</span>
<span class="normal">5240</span>
<span class="normal">5241</span>
<span class="normal">5242</span>
<span class="normal">5243</span>
<span class="normal">5244</span>
<span class="normal">5245</span>
<span class="normal">5246</span>
<span class="normal">5247</span>
<span class="normal">5248</span>
<span class="normal">5249</span>
<span class="normal">5250</span>
<span class="normal">5251</span>
<span class="normal">5252</span>
<span class="normal">5253</span>
<span class="normal">5254</span>
<span class="normal">5255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_snapshot_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
        <span class="n">EntityViewSchema</span><span class="p">,</span> <span class="n">Schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">SubmissionViewSchema</span><span class="p">,</span> <span class="n">Dataset</span>
    <span class="p">],</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">activity</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Activity</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new Table Version, new View version, or new Dataset version.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        table: The schema of the Table/View, or its ID.</span>
<span class="sd">        comment: Optional snapshot comment.</span>
<span class="sd">        label: Optional snapshot label.</span>
<span class="sd">        activity: Optional activity ID applied to snapshot version.</span>
<span class="sd">        wait: True if this method should return the snapshot version after waiting for any necessary</span>
<span class="sd">                asynchronous table updates to complete. If False this method will return</span>
<span class="sd">                as soon as any updates are initiated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The snapshot version number if wait=True, None if wait=False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">id_of</span><span class="p">(</span><span class="n">table</span><span class="p">),</span> <span class="n">downloadFile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ent</span><span class="p">,</span> <span class="p">(</span><span class="n">EntityViewSchema</span><span class="p">,</span> <span class="n">SubmissionViewSchema</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">)):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_async_table_update</span><span class="p">(</span>
            <span class="n">table</span><span class="p">,</span>
            <span class="n">create_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">activity</span><span class="o">=</span><span class="n">activity</span><span class="p">,</span>
            <span class="n">wait</span><span class="o">=</span><span class="n">wait</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ent</span><span class="p">,</span> <span class="n">Schema</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_table_snapshot</span><span class="p">(</span>
            <span class="n">table</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">activity</span><span class="o">=</span><span class="n">activity</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;This function only accepts Synapse ids of Tables or Views&quot;</span>
        <span class="p">)</span>

    <span class="c1"># for consistency we return nothing if wait=False since we can&#39;t</span>
    <span class="c1"># supply the snapshot version on an async table update without waiting</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;snapshotVersionNumber&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">wait</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getConfigFile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getConfigFile</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

<a href="#synapseclient.Synapse.getConfigFile" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves the client configuration information.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>configPath</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Path to configuration file on local file system</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="configparser.RawConfigParser">RawConfigParser</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A RawConfigParser populated with properties from the user's configuration file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;4.4.0&quot;</span><span class="p">,</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;To be removed in 5.0.0. &quot;</span>
    <span class="s2">&quot;Moved to synapseclient/api/configuration_services.py::get_config_file&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">getConfigFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configPath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">configparser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the client configuration information.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        configPath:  Path to configuration file on local file system</span>

<span class="sd">    Returns:</span>
<span class="sd">        A RawConfigParser populated with properties from the user&#39;s configuration file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span>  <span class="c1"># Does not fail if the file does not exist</span>
        <span class="k">return</span> <span class="n">config</span>
    <span class="k">except</span> <span class="n">configparser</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Error parsing Synapse config file: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">configPath</span><span class="p">)</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">ex</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getEvaluation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getEvaluation</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getEvaluation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Gets an Evaluation object from Synapse.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The ID of the <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Evaluation">synapseclient.evaluation.Evaluation</a> to return.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Evaluation">synapseclient.evaluation.Evaluation</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Creating an Evaluation instance</p>
<pre><code>evaluation = syn.getEvaluation(2005090)
</code></pre>
</details>
            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4148</span>
<span class="normal">4149</span>
<span class="normal">4150</span>
<span class="normal">4151</span>
<span class="normal">4152</span>
<span class="normal">4153</span>
<span class="normal">4154</span>
<span class="normal">4155</span>
<span class="normal">4156</span>
<span class="normal">4157</span>
<span class="normal">4158</span>
<span class="normal">4159</span>
<span class="normal">4160</span>
<span class="normal">4161</span>
<span class="normal">4162</span>
<span class="normal">4163</span>
<span class="normal">4164</span>
<span class="normal">4165</span>
<span class="normal">4166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getEvaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets an Evaluation object from Synapse.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id: The ID of the [synapseclient.evaluation.Evaluation][] to return.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An [synapseclient.evaluation.Evaluation][] object</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Creating an Evaluation instance</span>

<span class="sd">            evaluation = syn.getEvaluation(2005090)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">evaluation_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">Evaluation</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="n">evaluation_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Evaluation</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getEvaluationByContentSource" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getEvaluationByContentSource</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getEvaluationByContentSource" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Returns a generator over evaluations that derive their content from the given entity</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>entity</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The <a class="autorefs autorefs-internal" href="../project/#synapseclient.entity.Project">synapseclient.entity.Project</a> whose Evaluations are to be fetched.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>A generator over <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Evaluation">synapseclient.evaluation.Evaluation</a> objects for the given <a class="autorefs autorefs-internal" href="../project/#synapseclient.entity.Project">synapseclient.entity.Project</a>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4182</span>
<span class="normal">4183</span>
<span class="normal">4184</span>
<span class="normal">4185</span>
<span class="normal">4186</span>
<span class="normal">4187</span>
<span class="normal">4188</span>
<span class="normal">4189</span>
<span class="normal">4190</span>
<span class="normal">4191</span>
<span class="normal">4192</span>
<span class="normal">4193</span>
<span class="normal">4194</span>
<span class="normal">4195</span>
<span class="normal">4196</span>
<span class="normal">4197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getEvaluationByContentSource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a generator over evaluations that derive their content from the given entity</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entity: The [synapseclient.entity.Project][] whose Evaluations are to be fetched.</span>

<span class="sd">    Yields:</span>
<span class="sd">        A generator over [synapseclient.evaluation.Evaluation][] objects for the given [synapseclient.entity.Project][].</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">entityId</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/evaluation&quot;</span> <span class="o">%</span> <span class="n">entityId</span>

    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">Evaluation</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getEvaluationByName" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getEvaluationByName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getEvaluationByName" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Gets an Evaluation object from Synapse.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>Name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The name of the <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Evaluation">synapseclient.evaluation.Evaluation</a> to return.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Evaluation">synapseclient.evaluation.Evaluation</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4169</span>
<span class="normal">4170</span>
<span class="normal">4171</span>
<span class="normal">4172</span>
<span class="normal">4173</span>
<span class="normal">4174</span>
<span class="normal">4175</span>
<span class="normal">4176</span>
<span class="normal">4177</span>
<span class="normal">4178</span>
<span class="normal">4179</span>
<span class="normal">4180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getEvaluationByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets an Evaluation object from Synapse.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        Name: The name of the [synapseclient.evaluation.Evaluation][] to return.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An [synapseclient.evaluation.Evaluation][] object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">Evaluation</span><span class="o">.</span><span class="n">getByNameURI</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Evaluation</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.create_team" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_team</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">can_public_join</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">can_request_membership</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.create_team" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Creates a new team.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The name of the team to create.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>description</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A description of the team.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>icon</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The FileHandleID of the icon to be used for the team.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>canPublicJoin</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether the team can be joined by anyone. Defaults to False.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>canRequestMembership</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether the team can request membership. Defaults to True.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="synapseclient.team.Team" href="../teams/#synapseclient.team.Team">Team</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An object of type <a class="autorefs autorefs-internal" href="../teams/#synapseclient.team.Team">synapseclient.team.Team</a></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4226</span>
<span class="normal">4227</span>
<span class="normal">4228</span>
<span class="normal">4229</span>
<span class="normal">4230</span>
<span class="normal">4231</span>
<span class="normal">4232</span>
<span class="normal">4233</span>
<span class="normal">4234</span>
<span class="normal">4235</span>
<span class="normal">4236</span>
<span class="normal">4237</span>
<span class="normal">4238</span>
<span class="normal">4239</span>
<span class="normal">4240</span>
<span class="normal">4241</span>
<span class="normal">4242</span>
<span class="normal">4243</span>
<span class="normal">4244</span>
<span class="normal">4245</span>
<span class="normal">4246</span>
<span class="normal">4247</span>
<span class="normal">4248</span>
<span class="normal">4249</span>
<span class="normal">4250</span>
<span class="normal">4251</span>
<span class="normal">4252</span>
<span class="normal">4253</span>
<span class="normal">4254</span>
<span class="normal">4255</span>
<span class="normal">4256</span>
<span class="normal">4257</span>
<span class="normal">4258</span>
<span class="normal">4259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_team</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">can_public_join</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">can_request_membership</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Team</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new team.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        name: The name of the team to create.</span>
<span class="sd">        description: A description of the team.</span>
<span class="sd">        icon: The FileHandleID of the icon to be used for the team.</span>
<span class="sd">        canPublicJoin: Whether the team can be joined by anyone. Defaults to False.</span>
<span class="sd">        canRequestMembership: Whether the team can request membership. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An object of type [synapseclient.team.Team][]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
        <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="n">icon</span><span class="p">,</span>
        <span class="s2">&quot;canPublicJoin&quot;</span><span class="p">:</span> <span class="n">can_public_join</span><span class="p">,</span>
        <span class="s2">&quot;canRequestMembership&quot;</span><span class="p">:</span> <span class="n">can_request_membership</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">Team</span><span class="p">(</span>
        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
            <span class="s2">&quot;/team&quot;</span><span class="p">,</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request_body</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.delete_team" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_team</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.delete_team" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Deletes a team.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The ID of the team to delete.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>int</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4261</span>
<span class="normal">4262</span>
<span class="normal">4263</span>
<span class="normal">4264</span>
<span class="normal">4265</span>
<span class="normal">4266</span>
<span class="normal">4267</span>
<span class="normal">4268</span>
<span class="normal">4269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">delete_team</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes a team.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id: The ID of the team to delete.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restDELETE</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/team/</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getProjectSetting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getProjectSetting</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">setting_type</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getProjectSetting" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Gets the ProjectSetting for a project.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>project</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Project entity or its id as a string</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>setting_type</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Type of setting. Choose from:</p>
<ul>
<li><code>upload</code></li>
<li><code>external_sync</code></li>
<li><code>requester_pays</code></li>
</ul>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The ProjectSetting as a dict or None if no settings of the specified type exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4015</span>
<span class="normal">4016</span>
<span class="normal">4017</span>
<span class="normal">4018</span>
<span class="normal">4019</span>
<span class="normal">4020</span>
<span class="normal">4021</span>
<span class="normal">4022</span>
<span class="normal">4023</span>
<span class="normal">4024</span>
<span class="normal">4025</span>
<span class="normal">4026</span>
<span class="normal">4027</span>
<span class="normal">4028</span>
<span class="normal">4029</span>
<span class="normal">4030</span>
<span class="normal">4031</span>
<span class="normal">4032</span>
<span class="normal">4033</span>
<span class="normal">4034</span>
<span class="normal">4035</span>
<span class="normal">4036</span>
<span class="normal">4037</span>
<span class="normal">4038</span>
<span class="normal">4039</span>
<span class="normal">4040</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getProjectSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">setting_type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the ProjectSetting for a project.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        project: Project entity or its id as a string</span>
<span class="sd">        setting_type: Type of setting. Choose from:</span>

<span class="sd">            - `upload`</span>
<span class="sd">            - `external_sync`</span>
<span class="sd">            - `requester_pays`</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ProjectSetting as a dict or None if no settings of the specified type exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">setting_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;upload&quot;</span><span class="p">,</span> <span class="s2">&quot;external_sync&quot;</span><span class="p">,</span> <span class="s2">&quot;requester_pays&quot;</span><span class="p">}:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid project_type: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">setting_type</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span>
        <span class="s2">&quot;/projectSettings/</span><span class="si">{projectId}</span><span class="s2">/type/</span><span class="si">{type}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">projectId</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">project</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="n">setting_type</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">response</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>  <span class="c1"># if no project setting, a empty string is returned as the response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getSubmission" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSubmission</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getSubmission" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Gets a <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Submission">synapseclient.evaluation.Submission</a> object by its id.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>id</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The id of the submission to retrieve</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Submission">synapseclient.evaluation.Submission</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>See:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="#synapseclient.Synapse.get">synapseclient.Synapse.get</a> for information
     on the <em>downloadFile</em>, <em>downloadLocation</em>, and <em>ifcollision</em> parameters</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4889</span>
<span class="normal">4890</span>
<span class="normal">4891</span>
<span class="normal">4892</span>
<span class="normal">4893</span>
<span class="normal">4894</span>
<span class="normal">4895</span>
<span class="normal">4896</span>
<span class="normal">4897</span>
<span class="normal">4898</span>
<span class="normal">4899</span>
<span class="normal">4900</span>
<span class="normal">4901</span>
<span class="normal">4902</span>
<span class="normal">4903</span>
<span class="normal">4904</span>
<span class="normal">4905</span>
<span class="normal">4906</span>
<span class="normal">4907</span>
<span class="normal">4908</span>
<span class="normal">4909</span>
<span class="normal">4910</span>
<span class="normal">4911</span>
<span class="normal">4912</span>
<span class="normal">4913</span>
<span class="normal">4914</span>
<span class="normal">4915</span>
<span class="normal">4916</span>
<span class="normal">4917</span>
<span class="normal">4918</span>
<span class="normal">4919</span>
<span class="normal">4920</span>
<span class="normal">4921</span>
<span class="normal">4922</span>
<span class="normal">4923</span>
<span class="normal">4924</span>
<span class="normal">4925</span>
<span class="normal">4926</span>
<span class="normal">4927</span>
<span class="normal">4928</span>
<span class="normal">4929</span>
<span class="normal">4930</span>
<span class="normal">4931</span>
<span class="normal">4932</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getSubmission</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets a [synapseclient.evaluation.Submission][] object by its id.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id: The id of the submission to retrieve</span>

<span class="sd">    Returns:</span>
<span class="sd">        A [synapseclient.evaluation.Submission][] object</span>

<span class="sd">    See:</span>

<span class="sd">    - [synapseclient.Synapse.get][] for information</span>
<span class="sd">         on the *downloadFile*, *downloadLocation*, and *ifcollision* parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">submission_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">Submission</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="n">submission_id</span><span class="p">)</span>
    <span class="n">submission</span> <span class="o">=</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="c1"># Pre-fetch the Entity tied to the Submission, if there is one</span>
    <span class="k">if</span> <span class="s2">&quot;entityId&quot;</span> <span class="ow">in</span> <span class="n">submission</span> <span class="ow">and</span> <span class="n">submission</span><span class="p">[</span><span class="s2">&quot;entityId&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">entityBundleJSON</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">submission</span><span class="p">[</span><span class="s2">&quot;entityBundleJSON&quot;</span><span class="p">])</span>

        <span class="c1"># getWithEntityBundle expects a bundle services v2 style</span>
        <span class="c1"># annotations dict, but the evaluations API may return</span>
        <span class="c1"># an older format annotations object in the encoded JSON</span>
        <span class="c1"># depending on when the original submission was made.</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="n">entityBundleJSON</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;annotations&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">annotations</span><span class="p">:</span>
            <span class="n">entityBundleJSON</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">convert_old_annotation_json</span><span class="p">(</span>
                <span class="n">annotations</span>
            <span class="p">)</span>

        <span class="n">related</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getWithEntityBundle</span><span class="p">(</span>
            <span class="n">entityBundle</span><span class="o">=</span><span class="n">entityBundleJSON</span><span class="p">,</span>
            <span class="n">entity</span><span class="o">=</span><span class="n">submission</span><span class="p">[</span><span class="s2">&quot;entityId&quot;</span><span class="p">],</span>
            <span class="n">submission</span><span class="o">=</span><span class="n">submission_id</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">submission</span><span class="o">.</span><span class="n">entity</span> <span class="o">=</span> <span class="n">related</span>
        <span class="n">submission</span><span class="o">.</span><span class="n">filePath</span> <span class="o">=</span> <span class="n">related</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">submission</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getSubmissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSubmissions</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getSubmissions" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>evaluation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Evaluation to get submissions from.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>status</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optionally filter submissions for a specific status.
    One of:</p>
<ul>
<li><code>OPEN</code></li>
<li><code>CLOSED</code></li>
<li><code>SCORED</code></li>
<li><code>INVALID</code></li>
<li><code>VALIDATED</code></li>
<li><code>EVALUATION_IN_PROGRESS</code></li>
<li><code>RECEIVED</code></li>
<li><code>REJECTED</code></li>
<li><code>ACCEPTED</code></li>
</ul>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>myOwn</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Determines if only your Submissions should be fetched.
     Defaults to False (all Submissions)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Limits the number of submissions in a single response.
        Because this method returns a generator and repeatedly
        fetches submissions, this argument is limiting the
        size of a single request and NOT the number of sub-
        missions returned in total.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>20</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>offset</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Start iterating at a submission offset from the first submission.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>A generator over <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Submission">synapseclient.evaluation.Submission</a> objects for an Evaluation</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Print submissions</p>
<pre><code>for submission in syn.getSubmissions(1234567):
    print(submission['entityId'])
</code></pre>
</details>      <p>See:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation">synapseclient.evaluation</a></li>
</ul>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4694</span>
<span class="normal">4695</span>
<span class="normal">4696</span>
<span class="normal">4697</span>
<span class="normal">4698</span>
<span class="normal">4699</span>
<span class="normal">4700</span>
<span class="normal">4701</span>
<span class="normal">4702</span>
<span class="normal">4703</span>
<span class="normal">4704</span>
<span class="normal">4705</span>
<span class="normal">4706</span>
<span class="normal">4707</span>
<span class="normal">4708</span>
<span class="normal">4709</span>
<span class="normal">4710</span>
<span class="normal">4711</span>
<span class="normal">4712</span>
<span class="normal">4713</span>
<span class="normal">4714</span>
<span class="normal">4715</span>
<span class="normal">4716</span>
<span class="normal">4717</span>
<span class="normal">4718</span>
<span class="normal">4719</span>
<span class="normal">4720</span>
<span class="normal">4721</span>
<span class="normal">4722</span>
<span class="normal">4723</span>
<span class="normal">4724</span>
<span class="normal">4725</span>
<span class="normal">4726</span>
<span class="normal">4727</span>
<span class="normal">4728</span>
<span class="normal">4729</span>
<span class="normal">4730</span>
<span class="normal">4731</span>
<span class="normal">4732</span>
<span class="normal">4733</span>
<span class="normal">4734</span>
<span class="normal">4735</span>
<span class="normal">4736</span>
<span class="normal">4737</span>
<span class="normal">4738</span>
<span class="normal">4739</span>
<span class="normal">4740</span>
<span class="normal">4741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getSubmissions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Arguments:</span>
<span class="sd">        evaluation: Evaluation to get submissions from.</span>
<span class="sd">        status: Optionally filter submissions for a specific status.</span>
<span class="sd">                One of:</span>

<span class="sd">            - `OPEN`</span>
<span class="sd">            - `CLOSED`</span>
<span class="sd">            - `SCORED`</span>
<span class="sd">            - `INVALID`</span>
<span class="sd">            - `VALIDATED`</span>
<span class="sd">            - `EVALUATION_IN_PROGRESS`</span>
<span class="sd">            - `RECEIVED`</span>
<span class="sd">            - `REJECTED`</span>
<span class="sd">            - `ACCEPTED`</span>

<span class="sd">        myOwn: Determines if only your Submissions should be fetched.</span>
<span class="sd">                 Defaults to False (all Submissions)</span>
<span class="sd">        limit: Limits the number of submissions in a single response.</span>
<span class="sd">                    Because this method returns a generator and repeatedly</span>
<span class="sd">                    fetches submissions, this argument is limiting the</span>
<span class="sd">                    size of a single request and NOT the number of sub-</span>
<span class="sd">                    missions returned in total.</span>
<span class="sd">        offset: Start iterating at a submission offset from the first submission.</span>

<span class="sd">    Yields:</span>
<span class="sd">        A generator over [synapseclient.evaluation.Submission][] objects for an Evaluation</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Print submissions</span>

<span class="sd">            for submission in syn.getSubmissions(1234567):</span>
<span class="sd">                print(submission[&#39;entityId&#39;])</span>

<span class="sd">    See:</span>

<span class="sd">    - [synapseclient.evaluation][]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">evaluation_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/evaluation/</span><span class="si">%s</span><span class="s2">/submission</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">myOwn</span> <span class="k">else</span> <span class="s2">&quot;/all&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;?status=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">status</span>

    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getSubmissionBundles" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSubmissionBundles</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getSubmissionBundles" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieve submission bundles (submission and submissions status) for an evaluation queue, optionally filtered by
submission status and/or owner.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>evaluation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Evaluation to get submissions from.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>status</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optionally filter submissions for a specific status.
        One of:</p>
<ul>
<li><code>OPEN</code></li>
<li><code>CLOSED</code></li>
<li><code>SCORED</code></li>
<li><code>INVALID</code></li>
</ul>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>myOwn</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Determines if only your Submissions should be fetched.
        Defaults to False (all Submissions)</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Limits the number of submissions coming back from the
        service in a single response.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>20</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>offset</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Start iterating at a submission offset from the first submission.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">YIELDS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-yields-details">
              <div class="doc-md-description">
                <p>A generator over tuples containing a <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.Submission">synapseclient.evaluation.Submission</a> and a <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.SubmissionStatus">synapseclient.evaluation.SubmissionStatus</a>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function</summary>
  <p>Loop over submissions</p>
<pre><code>for submission, status in syn.getSubmissionBundles(evaluation):
    print(submission.name,
          submission.submitterAlias,
          status.status,
          status.score)
</code></pre>
</details>      <p>This may later be changed to return objects, pending some thought on how submissions along with related status
and annotations should be represented in the clients.</p>
<p>See:
- <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation">synapseclient.evaluation</a></p>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4792</span>
<span class="normal">4793</span>
<span class="normal">4794</span>
<span class="normal">4795</span>
<span class="normal">4796</span>
<span class="normal">4797</span>
<span class="normal">4798</span>
<span class="normal">4799</span>
<span class="normal">4800</span>
<span class="normal">4801</span>
<span class="normal">4802</span>
<span class="normal">4803</span>
<span class="normal">4804</span>
<span class="normal">4805</span>
<span class="normal">4806</span>
<span class="normal">4807</span>
<span class="normal">4808</span>
<span class="normal">4809</span>
<span class="normal">4810</span>
<span class="normal">4811</span>
<span class="normal">4812</span>
<span class="normal">4813</span>
<span class="normal">4814</span>
<span class="normal">4815</span>
<span class="normal">4816</span>
<span class="normal">4817</span>
<span class="normal">4818</span>
<span class="normal">4819</span>
<span class="normal">4820</span>
<span class="normal">4821</span>
<span class="normal">4822</span>
<span class="normal">4823</span>
<span class="normal">4824</span>
<span class="normal">4825</span>
<span class="normal">4826</span>
<span class="normal">4827</span>
<span class="normal">4828</span>
<span class="normal">4829</span>
<span class="normal">4830</span>
<span class="normal">4831</span>
<span class="normal">4832</span>
<span class="normal">4833</span>
<span class="normal">4834</span>
<span class="normal">4835</span>
<span class="normal">4836</span>
<span class="normal">4837</span>
<span class="normal">4838</span>
<span class="normal">4839</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getSubmissionBundles</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve submission bundles (submission and submissions status) for an evaluation queue, optionally filtered by</span>
<span class="sd">    submission status and/or owner.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        evaluation: Evaluation to get submissions from.</span>
<span class="sd">        status:     Optionally filter submissions for a specific status.</span>
<span class="sd">                    One of:</span>

<span class="sd">            - `OPEN`</span>
<span class="sd">            - `CLOSED`</span>
<span class="sd">            - `SCORED`</span>
<span class="sd">            - `INVALID`</span>

<span class="sd">        myOwn:      Determines if only your Submissions should be fetched.</span>
<span class="sd">                    Defaults to False (all Submissions)</span>
<span class="sd">        limit:      Limits the number of submissions coming back from the</span>
<span class="sd">                    service in a single response.</span>
<span class="sd">        offset:     Start iterating at a submission offset from the first submission.</span>

<span class="sd">    Yields:</span>
<span class="sd">        A generator over tuples containing a [synapseclient.evaluation.Submission][] and a [synapseclient.evaluation.SubmissionStatus][].</span>

<span class="sd">    Example: Using this function</span>
<span class="sd">        Loop over submissions</span>

<span class="sd">            for submission, status in syn.getSubmissionBundles(evaluation):</span>
<span class="sd">                print(submission.name,</span>
<span class="sd">                      submission.submitterAlias,</span>
<span class="sd">                      status.status,</span>
<span class="sd">                      status.score)</span>

<span class="sd">    This may later be changed to return objects, pending some thought on how submissions along with related status</span>
<span class="sd">    and annotations should be represented in the clients.</span>

<span class="sd">    See:</span>
<span class="sd">    - [synapseclient.evaluation][]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getSubmissionBundles</span><span class="p">(</span>
        <span class="n">evaluation</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">myOwn</span><span class="o">=</span><span class="n">myOwn</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span>
    <span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span>
            <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;submission&quot;</span><span class="p">]),</span>
            <span class="n">SubmissionStatus</span><span class="p">(</span><span class="o">**</span><span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;submissionStatus&quot;</span><span class="p">]),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getSubmissionStatus" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSubmissionStatus</span><span class="p">(</span><span class="n">submission</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getSubmissionStatus" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Downloads the status of a Submission.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>submission</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The submission to lookup</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../evaluation/#synapseclient.evaluation.SubmissionStatus">synapseclient.evaluation.SubmissionStatus</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4934</span>
<span class="normal">4935</span>
<span class="normal">4936</span>
<span class="normal">4937</span>
<span class="normal">4938</span>
<span class="normal">4939</span>
<span class="normal">4940</span>
<span class="normal">4941</span>
<span class="normal">4942</span>
<span class="normal">4943</span>
<span class="normal">4944</span>
<span class="normal">4945</span>
<span class="normal">4946</span>
<span class="normal">4947</span>
<span class="normal">4948</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getSubmissionStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">submission</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Downloads the status of a Submission.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        submission: The submission to lookup</span>

<span class="sd">    Returns:</span>
<span class="sd">        A [synapseclient.evaluation.SubmissionStatus][] object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">submission_id</span> <span class="o">=</span> <span class="n">id_of</span><span class="p">(</span><span class="n">submission</span><span class="p">)</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">SubmissionStatus</span><span class="o">.</span><span class="n">getURI</span><span class="p">(</span><span class="n">submission_id</span><span class="p">)</span>
    <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">SubmissionStatus</span><span class="p">(</span><span class="o">**</span><span class="n">val</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getWiki" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getWiki</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span> <span class="n">subpageId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getWiki" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get a <a class="autorefs autorefs-internal" href="../wiki/#synapseclient.wiki.Wiki">synapseclient.wiki.Wiki</a> object from Synapse. Uses wiki2 API which supports versioning.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>owner</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The entity to which the Wiki is attached</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>subpageId</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The id of the specific sub-page or None to get the root Wiki page</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The version of the page to retrieve or None to retrieve the latest</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="../wiki/#synapseclient.wiki.Wiki">synapseclient.wiki.Wiki</a> object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4954</span>
<span class="normal">4955</span>
<span class="normal">4956</span>
<span class="normal">4957</span>
<span class="normal">4958</span>
<span class="normal">4959</span>
<span class="normal">4960</span>
<span class="normal">4961</span>
<span class="normal">4962</span>
<span class="normal">4963</span>
<span class="normal">4964</span>
<span class="normal">4965</span>
<span class="normal">4966</span>
<span class="normal">4967</span>
<span class="normal">4968</span>
<span class="normal">4969</span>
<span class="normal">4970</span>
<span class="normal">4971</span>
<span class="normal">4972</span>
<span class="normal">4973</span>
<span class="normal">4974</span>
<span class="normal">4975</span>
<span class="normal">4976</span>
<span class="normal">4977</span>
<span class="normal">4978</span>
<span class="normal">4979</span>
<span class="normal">4980</span>
<span class="normal">4981</span>
<span class="normal">4982</span>
<span class="normal">4983</span>
<span class="normal">4984</span>
<span class="normal">4985</span>
<span class="normal">4986</span>
<span class="normal">4987</span>
<span class="normal">4988</span>
<span class="normal">4989</span>
<span class="normal">4990</span>
<span class="normal">4991</span>
<span class="normal">4992</span>
<span class="normal">4993</span>
<span class="normal">4994</span>
<span class="normal">4995</span>
<span class="normal">4996</span>
<span class="normal">4997</span>
<span class="normal">4998</span>
<span class="normal">4999</span>
<span class="normal">5000</span>
<span class="normal">5001</span>
<span class="normal">5002</span>
<span class="normal">5003</span>
<span class="normal">5004</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getWiki</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">subpageId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a [synapseclient.wiki.Wiki][] object from Synapse. Uses wiki2 API which supports versioning.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        owner: The entity to which the Wiki is attached</span>
<span class="sd">        subpageId: The id of the specific sub-page or None to get the root Wiki page</span>
<span class="sd">        version: The version of the page to retrieve or None to retrieve the latest</span>

<span class="sd">    Returns:</span>
<span class="sd">        A [synapseclient.wiki.Wiki][] object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">{ownerId}</span><span class="s2">/wiki2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ownerId</span><span class="o">=</span><span class="n">id_of</span><span class="p">(</span><span class="n">owner</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">subpageId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;/</span><span class="si">{wikiId}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wikiId</span><span class="o">=</span><span class="n">subpageId</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;?wikiVersion=</span><span class="si">{version}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="n">wiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">owner</span>
    <span class="n">wiki</span> <span class="o">=</span> <span class="n">Wiki</span><span class="p">(</span><span class="o">**</span><span class="n">wiki</span><span class="p">)</span>

    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">markdownFileHandleId</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
        <span class="n">cache_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get_cache_dir</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">markdownFileHandleId</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
            <span class="n">coroutine</span><span class="o">=</span><span class="n">download_by_file_handle</span><span class="p">(</span>
                <span class="n">file_handle_id</span><span class="o">=</span><span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;markdownFileHandleId&quot;</span><span class="p">],</span>
                <span class="n">synapse_id</span><span class="o">=</span><span class="n">wiki</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
                <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;WikiMarkdown&quot;</span><span class="p">,</span>
                <span class="n">destination</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">cache_dir</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">markdownFileHandleId</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.md&quot;</span>
                <span class="p">),</span>
            <span class="p">),</span>
            <span class="n">syn</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">gzip</span>

        <span class="k">with</span> <span class="n">gzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">markdown</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">markdown</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

    <span class="n">wiki</span><span class="o">.</span><span class="n">markdown</span> <span class="o">=</span> <span class="n">markdown</span>
    <span class="n">wiki</span><span class="o">.</span><span class="n">markdown_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">return</span> <span class="n">wiki</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getWikiAttachments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getWikiAttachments</span><span class="p">(</span><span class="n">wiki</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getWikiAttachments" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieve the attachments to a wiki page.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wiki</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The Wiki object for which the attachments are to be returned.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A list of file handles for the files attached to the Wiki.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5081</span>
<span class="normal">5082</span>
<span class="normal">5083</span>
<span class="normal">5084</span>
<span class="normal">5085</span>
<span class="normal">5086</span>
<span class="normal">5087</span>
<span class="normal">5088</span>
<span class="normal">5089</span>
<span class="normal">5090</span>
<span class="normal">5091</span>
<span class="normal">5092</span>
<span class="normal">5093</span>
<span class="normal">5094</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getWikiAttachments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wiki</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the attachments to a wiki page.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        wiki: The Wiki object for which the attachments are to be returned.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of file handles for the files attached to the Wiki.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/wiki/</span><span class="si">%s</span><span class="s2">/attachmenthandles&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wiki</span><span class="o">.</span><span class="n">ownerId</span><span class="p">,</span> <span class="n">wiki</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="n">file_handles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">WikiAttachment</span><span class="p">(</span><span class="o">**</span><span class="n">fh</span><span class="p">)</span> <span class="k">for</span> <span class="n">fh</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">file_handles</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.getWikiHeaders" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getWikiHeaders</span><span class="p">(</span><span class="n">owner</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.getWikiHeaders" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves the headers of all Wikis belonging to the owner (the entity to which the Wiki is attached).</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>owner</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An Entity</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A list of Objects with three fields: id, title and parentId.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5006</span>
<span class="normal">5007</span>
<span class="normal">5008</span>
<span class="normal">5009</span>
<span class="normal">5010</span>
<span class="normal">5011</span>
<span class="normal">5012</span>
<span class="normal">5013</span>
<span class="normal">5014</span>
<span class="normal">5015</span>
<span class="normal">5016</span>
<span class="normal">5017</span>
<span class="normal">5018</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getWikiHeaders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the headers of all Wikis belonging to the owner (the entity to which the Wiki is attached).</span>

<span class="sd">    Arguments:</span>
<span class="sd">        owner: An Entity</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of Objects with three fields: id, title and parentId.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;/entity/</span><span class="si">%s</span><span class="s2">/wikiheadertree&quot;</span> <span class="o">%</span> <span class="n">id_of</span><span class="p">(</span><span class="n">owner</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">DictObject</span><span class="p">(</span><span class="o">**</span><span class="n">header</span><span class="p">)</span> <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GET_paginated</span><span class="p">(</span><span class="n">uri</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_download_list" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_download_list</span><span class="p">(</span><span class="n">downloadLocation</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.get_download_list" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Download all files from your Synapse download list</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>downloadLocation</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Directory to download files to.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>str</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Manifest file with file paths</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2502</span>
<span class="normal">2503</span>
<span class="normal">2504</span>
<span class="normal">2505</span>
<span class="normal">2506</span>
<span class="normal">2507</span>
<span class="normal">2508</span>
<span class="normal">2509</span>
<span class="normal">2510</span>
<span class="normal">2511</span>
<span class="normal">2512</span>
<span class="normal">2513</span>
<span class="normal">2514</span>
<span class="normal">2515</span>
<span class="normal">2516</span>
<span class="normal">2517</span>
<span class="normal">2518</span>
<span class="normal">2519</span>
<span class="normal">2520</span>
<span class="normal">2521</span>
<span class="normal">2522</span>
<span class="normal">2523</span>
<span class="normal">2524</span>
<span class="normal">2525</span>
<span class="normal">2526</span>
<span class="normal">2527</span>
<span class="normal">2528</span>
<span class="normal">2529</span>
<span class="normal">2530</span>
<span class="normal">2531</span>
<span class="normal">2532</span>
<span class="normal">2533</span>
<span class="normal">2534</span>
<span class="normal">2535</span>
<span class="normal">2536</span>
<span class="normal">2537</span>
<span class="normal">2538</span>
<span class="normal">2539</span>
<span class="normal">2540</span>
<span class="normal">2541</span>
<span class="normal">2542</span>
<span class="normal">2543</span>
<span class="normal">2544</span>
<span class="normal">2545</span>
<span class="normal">2546</span>
<span class="normal">2547</span>
<span class="normal">2548</span>
<span class="normal">2549</span>
<span class="normal">2550</span>
<span class="normal">2551</span>
<span class="normal">2552</span>
<span class="normal">2553</span>
<span class="normal">2554</span>
<span class="normal">2555</span>
<span class="normal">2556</span>
<span class="normal">2557</span>
<span class="normal">2558</span>
<span class="normal">2559</span>
<span class="normal">2560</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_download_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">downloadLocation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Download all files from your Synapse download list</span>

<span class="sd">    Arguments:</span>
<span class="sd">        downloadLocation: Directory to download files to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Manifest file with file paths</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dl_list_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_download_list_manifest</span><span class="p">()</span>
    <span class="n">downloaded_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">new_manifest_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;manifest_</span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">()</span><span class="si">}</span><span class="s2">.csv&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dl_list_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">manifest_f</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span>
        <span class="n">new_manifest_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">write_obj</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">manifest_f</span><span class="p">)</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">fieldnames</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">])</span>
        <span class="c1"># Write the downloaded paths to a new manifest file</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">write_obj</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
            <span class="c1"># You can add things to the download list that you don&#39;t have access to</span>
            <span class="c1"># So there must be a try catch here</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span> <span class="n">downloadLocation</span><span class="o">=</span><span class="n">downloadLocation</span><span class="p">)</span>
                <span class="c1"># Must include version number because you can have multiple versions of a</span>
                <span class="c1"># file in the download list</span>
                <span class="n">downloaded_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;fileEntityId&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;versionNumber&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;versionNumber&quot;</span><span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">)</span>
                <span class="n">row</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">path</span>
                <span class="n">row</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">row</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">row</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;DOWNLOAD FAILED&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unable to download file&quot;</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

    <span class="c1"># Don&#39;t want to clear all the download list because you can add things</span>
    <span class="c1"># to the download list after initiating this command.</span>
    <span class="c1"># Files that failed to download should not be removed from download list</span>
    <span class="c1"># Remove all files from download list after the entire download is complete.</span>
    <span class="c1"># This is because if download fails midway, we want to return the full manifest</span>
    <span class="k">if</span> <span class="n">downloaded_files</span><span class="p">:</span>
        <span class="c1"># Only want to invoke this if there is a list of files to remove</span>
        <span class="c1"># or the API call will error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_download_list</span><span class="p">(</span><span class="n">list_of_files</span><span class="o">=</span><span class="n">downloaded_files</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;A manifest was created, but no files were downloaded&quot;</span><span class="p">)</span>

    <span class="c1"># Always remove original manifest file</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">dl_list_path</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">new_manifest_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.get_download_list_manifest" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_download_list_manifest</span><span class="p">()</span></code>

<a href="#synapseclient.Synapse.get_download_list_manifest" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Get the path of the download list manifest file</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Path of download list manifest file</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2476</span>
<span class="normal">2477</span>
<span class="normal">2478</span>
<span class="normal">2479</span>
<span class="normal">2480</span>
<span class="normal">2481</span>
<span class="normal">2482</span>
<span class="normal">2483</span>
<span class="normal">2484</span>
<span class="normal">2485</span>
<span class="normal">2486</span>
<span class="normal">2487</span>
<span class="normal">2488</span>
<span class="normal">2489</span>
<span class="normal">2490</span>
<span class="normal">2491</span>
<span class="normal">2492</span>
<span class="normal">2493</span>
<span class="normal">2494</span>
<span class="normal">2495</span>
<span class="normal">2496</span>
<span class="normal">2497</span>
<span class="normal">2498</span>
<span class="normal">2499</span>
<span class="normal">2500</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_download_list_manifest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the path of the download list manifest file</span>

<span class="sd">    Returns:</span>
<span class="sd">        Path of download list manifest file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">manifest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_manifest_from_download_list</span><span class="p">()</span>
    <span class="c1"># Get file handle download link</span>
    <span class="n">file_result</span> <span class="o">=</span> <span class="n">get_file_handle_for_download</span><span class="p">(</span>
        <span class="n">file_handle_id</span><span class="o">=</span><span class="n">manifest</span><span class="p">[</span><span class="s2">&quot;resultFileHandleId&quot;</span><span class="p">],</span>
        <span class="n">synapse_id</span><span class="o">=</span><span class="n">manifest</span><span class="p">[</span><span class="s2">&quot;resultFileHandleId&quot;</span><span class="p">],</span>
        <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;FileEntity&quot;</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Download the manifest</span>
    <span class="n">downloaded_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_from_URL</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;preSignedURL&quot;</span><span class="p">],</span>
        <span class="n">destination</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
        <span class="n">fileHandleId</span><span class="o">=</span><span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">],</span>
        <span class="n">expected_md5</span><span class="o">=</span><span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;fileHandle&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;contentMd5&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;synapse.file_handle_id&quot;</span><span class="p">:</span> <span class="n">file_result</span><span class="p">[</span><span class="s2">&quot;fileHandleId&quot;</span><span class="p">]}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">downloaded_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.remove_from_download_list" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_from_download_list</span><span class="p">(</span><span class="n">list_of_files</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.remove_from_download_list" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Remove a batch of files from download list</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>list_of_files</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Array of files in the format of a mapping {fileEntityId: synid, versionNumber: version}</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>int</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Number of files removed from download list</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2426</span>
<span class="normal">2427</span>
<span class="normal">2428</span>
<span class="normal">2429</span>
<span class="normal">2430</span>
<span class="normal">2431</span>
<span class="normal">2432</span>
<span class="normal">2433</span>
<span class="normal">2434</span>
<span class="normal">2435</span>
<span class="normal">2436</span>
<span class="normal">2437</span>
<span class="normal">2438</span>
<span class="normal">2439</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_from_download_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_files</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove a batch of files from download list</span>

<span class="sd">    Arguments:</span>
<span class="sd">        list_of_files: Array of files in the format of a mapping {fileEntityId: synid, versionNumber: version}</span>

<span class="sd">    Returns:</span>
<span class="sd">        Number of files removed from download list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;batchToRemove&quot;</span><span class="p">:</span> <span class="n">list_of_files</span><span class="p">}</span>
    <span class="n">num_files_removed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span>
        <span class="s2">&quot;/download/list/remove&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request_body</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">num_files_removed</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.md5Query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">md5Query</span><span class="p">(</span><span class="n">md5</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.md5Query" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Find the Entities which have attached file(s) which have the given MD5 hash.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>md5</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The MD5 to query for (hexadecimal string)</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A list of Entity headers</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2720</span>
<span class="normal">2721</span>
<span class="normal">2722</span>
<span class="normal">2723</span>
<span class="normal">2724</span>
<span class="normal">2725</span>
<span class="normal">2726</span>
<span class="normal">2727</span>
<span class="normal">2728</span>
<span class="normal">2729</span>
<span class="normal">2730</span>
<span class="normal">2731</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">md5Query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the Entities which have attached file(s) which have the given MD5 hash.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        md5: The MD5 to query for (hexadecimal string)</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of Entity headers</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restGET</span><span class="p">(</span><span class="s2">&quot;/entity/md5/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">md5</span><span class="p">)[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.sendMessage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sendMessage</span><span class="p">(</span><span class="n">userIds</span><span class="p">,</span> <span class="n">messageSubject</span><span class="p">,</span> <span class="n">messageBody</span><span class="p">,</span> <span class="n">contentType</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.sendMessage" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>send a message via Synapse.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>userIds</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A list of user IDs to which the message is to be sent</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>messageSubject</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The subject for the message</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>messageBody</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The body of the message</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>contentType</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>optional contentType of message body (default="text/plain")
            Should be one of "text/plain" or "text/html"</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;text/plain&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The metadata of the created message</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6041</span>
<span class="normal">6042</span>
<span class="normal">6043</span>
<span class="normal">6044</span>
<span class="normal">6045</span>
<span class="normal">6046</span>
<span class="normal">6047</span>
<span class="normal">6048</span>
<span class="normal">6049</span>
<span class="normal">6050</span>
<span class="normal">6051</span>
<span class="normal">6052</span>
<span class="normal">6053</span>
<span class="normal">6054</span>
<span class="normal">6055</span>
<span class="normal">6056</span>
<span class="normal">6057</span>
<span class="normal">6058</span>
<span class="normal">6059</span>
<span class="normal">6060</span>
<span class="normal">6061</span>
<span class="normal">6062</span>
<span class="normal">6063</span>
<span class="normal">6064</span>
<span class="normal">6065</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">sendMessage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">userIds</span><span class="p">,</span> <span class="n">messageSubject</span><span class="p">,</span> <span class="n">messageBody</span><span class="p">,</span> <span class="n">contentType</span><span class="o">=</span><span class="s2">&quot;text/plain&quot;</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    send a message via Synapse.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        userIds: A list of user IDs to which the message is to be sent</span>
<span class="sd">        messageSubject: The subject for the message</span>
<span class="sd">        messageBody: The body of the message</span>
<span class="sd">        contentType: optional contentType of message body (default=&quot;text/plain&quot;)</span>
<span class="sd">                        Should be one of &quot;text/plain&quot; or &quot;text/html&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        The metadata of the created message</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fileHandleId</span> <span class="o">=</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
        <span class="n">multipart_upload_string_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messageBody</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">contentType</span><span class="p">),</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">recipients</span><span class="o">=</span><span class="n">userIds</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">messageSubject</span><span class="p">,</span> <span class="n">fileHandleId</span><span class="o">=</span><span class="n">fileHandleId</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;/message&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.uploadFileHandle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">uploadFileHandle</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">synapseStore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">md5</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_size</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.uploadFileHandle" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Uploads the file in the provided path (if necessary) to a storage location based on project settings.
Returns a new FileHandle as a dict to represent the stored file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>parent</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Parent of the entity to which we upload.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>File path to the file being uploaded</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>synapseStore</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If False, will not upload the file, but instead create an ExternalFileHandle that references
            the file on the local machine.
            If True, will upload the file based on StorageLocation determined by the entity_parent_id</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>mimetype</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The MIME type metadata for the uploaded file</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>md5</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The MD5 checksum for the file, if known. Otherwise if the file is a local file, it will be calculated
    automatically.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>file_size</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The size the file, if known. Otherwise if the file is a local file, it will be calculated
        automatically.</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>file_type</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The MIME type the file, if known. Otherwise if the file is a local file, it will be calculated
        automatically.</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dict of a new FileHandle as a dict that represents the uploaded file</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2389</span>
<span class="normal">2390</span>
<span class="normal">2391</span>
<span class="normal">2392</span>
<span class="normal">2393</span>
<span class="normal">2394</span>
<span class="normal">2395</span>
<span class="normal">2396</span>
<span class="normal">2397</span>
<span class="normal">2398</span>
<span class="normal">2399</span>
<span class="normal">2400</span>
<span class="normal">2401</span>
<span class="normal">2402</span>
<span class="normal">2403</span>
<span class="normal">2404</span>
<span class="normal">2405</span>
<span class="normal">2406</span>
<span class="normal">2407</span>
<span class="normal">2408</span>
<span class="normal">2409</span>
<span class="normal">2410</span>
<span class="normal">2411</span>
<span class="normal">2412</span>
<span class="normal">2413</span>
<span class="normal">2414</span>
<span class="normal">2415</span>
<span class="normal">2416</span>
<span class="normal">2417</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">uploadFileHandle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">synapseStore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">md5</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_size</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Uploads the file in the provided path (if necessary) to a storage location based on project settings.</span>
<span class="sd">    Returns a new FileHandle as a dict to represent the stored file.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        parent: Parent of the entity to which we upload.</span>
<span class="sd">        path:   File path to the file being uploaded</span>
<span class="sd">        synapseStore: If False, will not upload the file, but instead create an ExternalFileHandle that references</span>
<span class="sd">                        the file on the local machine.</span>
<span class="sd">                        If True, will upload the file based on StorageLocation determined by the entity_parent_id</span>
<span class="sd">        mimetype: The MIME type metadata for the uploaded file</span>
<span class="sd">        md5: The MD5 checksum for the file, if known. Otherwise if the file is a local file, it will be calculated</span>
<span class="sd">                automatically.</span>
<span class="sd">        file_size: The size the file, if known. Otherwise if the file is a local file, it will be calculated</span>
<span class="sd">                    automatically.</span>
<span class="sd">        file_type: The MIME type the file, if known. Otherwise if the file is a local file, it will be calculated</span>
<span class="sd">                    automatically.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict of a new FileHandle as a dict that represents the uploaded file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">wrap_async_to_sync</span><span class="p">(</span>
        <span class="n">upload_file_handle_async</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">synapseStore</span><span class="p">,</span> <span class="n">md5</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mimetype</span>
        <span class="p">),</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.restGET" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restGET</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.restGET" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP GET request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI on which get is performed</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use rather than the API-key-signed default set of headers</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An external <a href="https://requests.readthedocs.io/en/latest/user/advanced/">requests.Session object</a> to use when making this specific call</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a <a href="http://docs.python-requests.org/en/latest/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>JSON encoding of response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6229</span>
<span class="normal">6230</span>
<span class="normal">6231</span>
<span class="normal">6232</span>
<span class="normal">6233</span>
<span class="normal">6234</span>
<span class="normal">6235</span>
<span class="normal">6236</span>
<span class="normal">6237</span>
<span class="normal">6238</span>
<span class="normal">6239</span>
<span class="normal">6240</span>
<span class="normal">6241</span>
<span class="normal">6242</span>
<span class="normal">6243</span>
<span class="normal">6244</span>
<span class="normal">6245</span>
<span class="normal">6246</span>
<span class="normal">6247</span>
<span class="normal">6248</span>
<span class="normal">6249</span>
<span class="normal">6250</span>
<span class="normal">6251</span>
<span class="normal">6252</span>
<span class="normal">6253</span>
<span class="normal">6254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">restGET</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP GET request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI on which get is performed</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">        requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">        kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">    Returns:</span>
<span class="sd">        JSON encoding of response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
        <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">retryPolicy</span><span class="p">,</span> <span class="n">requests_session</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.restPOST" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restPOST</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.restPOST" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP POST request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI on which get is performed</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>body</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The payload to be delivered</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use rather than the API-key-signed default set of headers</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An external <a href="https://requests.readthedocs.io/en/latest/user/advanced/">requests.Session object</a> to use when making this specific call</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a <a href="http://docs.python-requests.org/en/latest/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>JSON encoding of response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6256</span>
<span class="normal">6257</span>
<span class="normal">6258</span>
<span class="normal">6259</span>
<span class="normal">6260</span>
<span class="normal">6261</span>
<span class="normal">6262</span>
<span class="normal">6263</span>
<span class="normal">6264</span>
<span class="normal">6265</span>
<span class="normal">6266</span>
<span class="normal">6267</span>
<span class="normal">6268</span>
<span class="normal">6269</span>
<span class="normal">6270</span>
<span class="normal">6271</span>
<span class="normal">6272</span>
<span class="normal">6273</span>
<span class="normal">6274</span>
<span class="normal">6275</span>
<span class="normal">6276</span>
<span class="normal">6277</span>
<span class="normal">6278</span>
<span class="normal">6279</span>
<span class="normal">6280</span>
<span class="normal">6281</span>
<span class="normal">6282</span>
<span class="normal">6283</span>
<span class="normal">6284</span>
<span class="normal">6285</span>
<span class="normal">6286</span>
<span class="normal">6287</span>
<span class="normal">6288</span>
<span class="normal">6289</span>
<span class="normal">6290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">restPOST</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">,</span>
    <span class="n">body</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP POST request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI on which get is performed</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        body: The payload to be delivered</span>
<span class="sd">        headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">        requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">        kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">    Returns:</span>
<span class="sd">        JSON encoding of response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
        <span class="s2">&quot;post&quot;</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">body</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="p">,</span>
        <span class="n">requests_session</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.restPUT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restPUT</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.restPUT" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP PUT request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI on which get is performed</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>body</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The payload to be delivered</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use rather than the API-key-signed default set of headers</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An external <a href="https://requests.readthedocs.io/en/latest/user/advanced/">requests.Session object</a> to use when making this specific call</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a <a href="http://docs.python-requests.org/en/latest/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns
    JSON encoding of response</p>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6292</span>
<span class="normal">6293</span>
<span class="normal">6294</span>
<span class="normal">6295</span>
<span class="normal">6296</span>
<span class="normal">6297</span>
<span class="normal">6298</span>
<span class="normal">6299</span>
<span class="normal">6300</span>
<span class="normal">6301</span>
<span class="normal">6302</span>
<span class="normal">6303</span>
<span class="normal">6304</span>
<span class="normal">6305</span>
<span class="normal">6306</span>
<span class="normal">6307</span>
<span class="normal">6308</span>
<span class="normal">6309</span>
<span class="normal">6310</span>
<span class="normal">6311</span>
<span class="normal">6312</span>
<span class="normal">6313</span>
<span class="normal">6314</span>
<span class="normal">6315</span>
<span class="normal">6316</span>
<span class="normal">6317</span>
<span class="normal">6318</span>
<span class="normal">6319</span>
<span class="normal">6320</span>
<span class="normal">6321</span>
<span class="normal">6322</span>
<span class="normal">6323</span>
<span class="normal">6324</span>
<span class="normal">6325</span>
<span class="normal">6326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">restPUT</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">,</span>
    <span class="n">body</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP PUT request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI on which get is performed</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        body: The payload to be delivered</span>
<span class="sd">        headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">        requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">        kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">    Returns</span>
<span class="sd">        JSON encoding of response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
        <span class="s2">&quot;put&quot;</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">body</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="p">,</span>
        <span class="n">requests_session</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.restDELETE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restDELETE</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#synapseclient.Synapse.restDELETE" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP DELETE request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI of resource to be deleted</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use rather than the API-key-signed default set of headers</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>An external <a href="https://requests.readthedocs.io/en/latest/user/advanced/">requests.Session object</a> to use when making this specific call</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a <a href="http://docs.python-requests.org/en/latest/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6328</span>
<span class="normal">6329</span>
<span class="normal">6330</span>
<span class="normal">6331</span>
<span class="normal">6332</span>
<span class="normal">6333</span>
<span class="normal">6334</span>
<span class="normal">6335</span>
<span class="normal">6336</span>
<span class="normal">6337</span>
<span class="normal">6338</span>
<span class="normal">6339</span>
<span class="normal">6340</span>
<span class="normal">6341</span>
<span class="normal">6342</span>
<span class="normal">6343</span>
<span class="normal">6344</span>
<span class="normal">6345</span>
<span class="normal">6346</span>
<span class="normal">6347</span>
<span class="normal">6348</span>
<span class="normal">6349</span>
<span class="normal">6350</span>
<span class="normal">6351</span>
<span class="normal">6352</span>
<span class="normal">6353</span>
<span class="normal">6354</span>
<span class="normal">6355</span>
<span class="normal">6356</span>
<span class="normal">6357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">restDELETE</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">retryPolicy</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">requests_session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP DELETE request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI of resource to be deleted</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        headers: Dictionary of headers to use rather than the API-key-signed default set of headers</span>
<span class="sd">        requests_session: An external [requests.Session object](https://requests.readthedocs.io/en/latest/user/advanced/) to use when making this specific call</span>
<span class="sd">        kwargs: Any other arguments taken by a [request](http://docs.python-requests.org/en/latest/) method</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call</span><span class="p">(</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">,</span>
        <span class="n">retryPolicy</span><span class="p">,</span>
        <span class="n">requests_session</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.rest_get_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rest_get_async</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry_policy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session_async_synapse</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.Synapse.rest_get_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP GET request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI on which get is performed</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.Headers">Headers</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>retry_policy</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A retry policy that matches the arguments of
<a class="autorefs autorefs-internal" href="../core/#synapseclient.core.retry.with_retry_time_based_async">synapseclient.core.retry.with_retry_time_based_async</a>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session_async_synapse</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The async client to use when making this
specific call.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.AsyncClient">AsyncClient</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a
<a href="https://www.python-httpx.org/api/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Union">Union</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>], str, None]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>JSON encoding of response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6477</span>
<span class="normal">6478</span>
<span class="normal">6479</span>
<span class="normal">6480</span>
<span class="normal">6481</span>
<span class="normal">6482</span>
<span class="normal">6483</span>
<span class="normal">6484</span>
<span class="normal">6485</span>
<span class="normal">6486</span>
<span class="normal">6487</span>
<span class="normal">6488</span>
<span class="normal">6489</span>
<span class="normal">6490</span>
<span class="normal">6491</span>
<span class="normal">6492</span>
<span class="normal">6493</span>
<span class="normal">6494</span>
<span class="normal">6495</span>
<span class="normal">6496</span>
<span class="normal">6497</span>
<span class="normal">6498</span>
<span class="normal">6499</span>
<span class="normal">6500</span>
<span class="normal">6501</span>
<span class="normal">6502</span>
<span class="normal">6503</span>
<span class="normal">6504</span>
<span class="normal">6505</span>
<span class="normal">6506</span>
<span class="normal">6507</span>
<span class="normal">6508</span>
<span class="normal">6509</span>
<span class="normal">6510</span>
<span class="normal">6511</span>
<span class="normal">6512</span>
<span class="normal">6513</span>
<span class="normal">6514</span>
<span class="normal">6515</span>
<span class="normal">6516</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">rest_get_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP GET request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI on which get is performed</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        headers: Dictionary of headers to use.</span>
<span class="sd">        retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">            [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">        requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">            specific call.</span>
<span class="sd">        kwargs: Any other arguments taken by a</span>
<span class="sd">            [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">    Returns:</span>
<span class="sd">        JSON encoding of response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
            <span class="s2">&quot;get&quot;</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span>
            <span class="n">retry_policy</span><span class="p">,</span>
            <span class="n">requests_session_async_synapse</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error in rest_get_async&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.rest_post_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rest_post_async</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry_policy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session_async_synapse</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.Synapse.rest_post_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP POST request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI on which get is performed</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>body</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The payload to be delivered</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Any">Any</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.Headers">Headers</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>retry_policy</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A retry policy that matches the arguments of
<a class="autorefs autorefs-internal" href="../core/#synapseclient.core.retry.with_retry_time_based_async">synapseclient.core.retry.with_retry_time_based_async</a>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session_async_synapse</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The async client to use when making this
specific call.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.AsyncClient">AsyncClient</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a
<a href="https://www.python-httpx.org/api/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Union">Union</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>], str]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>JSON encoding of response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6518</span>
<span class="normal">6519</span>
<span class="normal">6520</span>
<span class="normal">6521</span>
<span class="normal">6522</span>
<span class="normal">6523</span>
<span class="normal">6524</span>
<span class="normal">6525</span>
<span class="normal">6526</span>
<span class="normal">6527</span>
<span class="normal">6528</span>
<span class="normal">6529</span>
<span class="normal">6530</span>
<span class="normal">6531</span>
<span class="normal">6532</span>
<span class="normal">6533</span>
<span class="normal">6534</span>
<span class="normal">6535</span>
<span class="normal">6536</span>
<span class="normal">6537</span>
<span class="normal">6538</span>
<span class="normal">6539</span>
<span class="normal">6540</span>
<span class="normal">6541</span>
<span class="normal">6542</span>
<span class="normal">6543</span>
<span class="normal">6544</span>
<span class="normal">6545</span>
<span class="normal">6546</span>
<span class="normal">6547</span>
<span class="normal">6548</span>
<span class="normal">6549</span>
<span class="normal">6550</span>
<span class="normal">6551</span>
<span class="normal">6552</span>
<span class="normal">6553</span>
<span class="normal">6554</span>
<span class="normal">6555</span>
<span class="normal">6556</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">rest_post_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">body</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP POST request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI on which get is performed</span>
<span class="sd">        body: The payload to be delivered</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        headers: Dictionary of headers to use.</span>
<span class="sd">        retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">            [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">        requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">            specific call.</span>
<span class="sd">        kwargs: Any other arguments taken by a</span>
<span class="sd">            [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">    Returns:</span>
<span class="sd">        JSON encoding of response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
        <span class="s2">&quot;post&quot;</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">body</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">,</span>
        <span class="n">retry_policy</span><span class="p">,</span>
        <span class="n">requests_session_async_synapse</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.rest_put_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rest_put_async</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry_policy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session_async_synapse</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.Synapse.rest_put_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP PUT request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI on which get is performed</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>body</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The payload to be delivered.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Any">Any</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.Headers">Headers</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>retry_policy</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A retry policy that matches the arguments of
<a class="autorefs autorefs-internal" href="../core/#synapseclient.core.retry.with_retry_time_based_async">synapseclient.core.retry.with_retry_time_based_async</a>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session_async_synapse</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The async client to use when making this
specific call.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.AsyncClient">AsyncClient</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a
<a href="https://www.python-httpx.org/api/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns
    JSON encoding of response</p>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6558</span>
<span class="normal">6559</span>
<span class="normal">6560</span>
<span class="normal">6561</span>
<span class="normal">6562</span>
<span class="normal">6563</span>
<span class="normal">6564</span>
<span class="normal">6565</span>
<span class="normal">6566</span>
<span class="normal">6567</span>
<span class="normal">6568</span>
<span class="normal">6569</span>
<span class="normal">6570</span>
<span class="normal">6571</span>
<span class="normal">6572</span>
<span class="normal">6573</span>
<span class="normal">6574</span>
<span class="normal">6575</span>
<span class="normal">6576</span>
<span class="normal">6577</span>
<span class="normal">6578</span>
<span class="normal">6579</span>
<span class="normal">6580</span>
<span class="normal">6581</span>
<span class="normal">6582</span>
<span class="normal">6583</span>
<span class="normal">6584</span>
<span class="normal">6585</span>
<span class="normal">6586</span>
<span class="normal">6587</span>
<span class="normal">6588</span>
<span class="normal">6589</span>
<span class="normal">6590</span>
<span class="normal">6591</span>
<span class="normal">6592</span>
<span class="normal">6593</span>
<span class="normal">6594</span>
<span class="normal">6595</span>
<span class="normal">6596</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">rest_put_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">body</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP PUT request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI on which get is performed</span>
<span class="sd">        body: The payload to be delivered.</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        headers: Dictionary of headers to use.</span>
<span class="sd">        retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">            [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">        requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">            specific call.</span>
<span class="sd">        kwargs: Any other arguments taken by a</span>
<span class="sd">            [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">    Returns</span>
<span class="sd">        JSON encoding of response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
        <span class="s2">&quot;put&quot;</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="n">body</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">,</span>
        <span class="n">retry_policy</span><span class="p">,</span>
        <span class="n">requests_session_async_synapse</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_rest_body</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.Synapse.rest_delete_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rest_delete_async</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry_policy</span><span class="o">=</span><span class="p">{},</span> <span class="n">requests_session_async_synapse</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.Synapse.rest_delete_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Sends an HTTP DELETE request to the Synapse server.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>uri</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>URI of resource to be deleted</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>endpoint</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Server endpoint, defaults to self.repoEndpoint</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code>str</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary of headers to use.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.Headers">Headers</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>retry_policy</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A retry policy that matches the arguments of
<a class="autorefs autorefs-internal" href="../core/#synapseclient.core.retry.with_retry_time_based_async">synapseclient.core.retry.with_retry_time_based_async</a>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requests_session_async_synapse</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The async client to use when making this
specific call</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="httpx.AsyncClient">AsyncClient</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Any other arguments taken by a <a href="https://www.python-httpx.org/api/">request</a> method</p>
              </div>
              <p>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>{}</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>synapseclient/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6598</span>
<span class="normal">6599</span>
<span class="normal">6600</span>
<span class="normal">6601</span>
<span class="normal">6602</span>
<span class="normal">6603</span>
<span class="normal">6604</span>
<span class="normal">6605</span>
<span class="normal">6606</span>
<span class="normal">6607</span>
<span class="normal">6608</span>
<span class="normal">6609</span>
<span class="normal">6610</span>
<span class="normal">6611</span>
<span class="normal">6612</span>
<span class="normal">6613</span>
<span class="normal">6614</span>
<span class="normal">6615</span>
<span class="normal">6616</span>
<span class="normal">6617</span>
<span class="normal">6618</span>
<span class="normal">6619</span>
<span class="normal">6620</span>
<span class="normal">6621</span>
<span class="normal">6622</span>
<span class="normal">6623</span>
<span class="normal">6624</span>
<span class="normal">6625</span>
<span class="normal">6626</span>
<span class="normal">6627</span>
<span class="normal">6628</span>
<span class="normal">6629</span>
<span class="normal">6630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">rest_delete_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Headers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">retry_policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">requests_session_async_synapse</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends an HTTP DELETE request to the Synapse server.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        uri: URI of resource to be deleted</span>
<span class="sd">        endpoint: Server endpoint, defaults to self.repoEndpoint</span>
<span class="sd">        headers: Dictionary of headers to use.</span>
<span class="sd">        retry_policy: A retry policy that matches the arguments of</span>
<span class="sd">            [synapseclient.core.retry.with_retry_time_based_async][].</span>
<span class="sd">        requests_session_async_synapse: The async client to use when making this</span>
<span class="sd">            specific call</span>
<span class="sd">        kwargs: Any other arguments taken by a [request](https://www.python-httpx.org/api/) method</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_call_async</span><span class="p">(</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
        <span class="n">uri</span><span class="p">,</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">,</span>
        <span class="n">retry_policy</span><span class="p">,</span>
        <span class="n">requests_session_async_synapse</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="more-information">More information<a class="headerlink" href="#more-information" title="Permanent link">&para;</a></h2>
<p>See also the <a href="https://rest-docs.synapse.org/">Synapse API documentation</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../guides/validate_annotations/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Validating Annotations">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Validating Annotations
              </div>
            </div>
          </a>
        
        
          
          <a href="../synapse_utils/" class="md-footer__link md-footer__link--next" aria-label="Next: Synapse Utils">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Synapse Utils
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Sage-Bionetworks/synapsePythonClient" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Sage-Bionetworks/synapsePythonClient/pkgs/container/synapsepythonclient" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/synapseclient/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.footer", "navigation.sections", "search.highlight", "search.share", "search.suggest", "toc.follow", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../termynal.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>