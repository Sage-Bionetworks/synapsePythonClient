
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python client for Sage Bionetworks' Synapse, a collaborative, open-source research platform that allows teams to share data, track analyses, and collaborate. The Python client can be used as a library for development of software that communicates with Synapse or as a command-line utility.">
      
      
        <meta name="author" content="Bryan Fauble">
      
      
      
        <link rel="prev" href="../../async/form/">
      
      
        <link rel="next" href="../storable_container/">
      
      
        
      
      
      <link rel="icon" href="../../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>AccessControllable - Synapse Python/Command Line Client Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../css/custom.css">
    
      <link rel="stylesheet" href="../../../../termynal.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#accesscontrollable" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Synapse Python/Command Line Client Documentation" class="md-header__button md-logo" aria-label="Synapse Python/Command Line Client Documentation" data-md-component="logo">
      
  <img src="../../../../assets/synapse_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Synapse Python/Command Line Client Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AccessControllable
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Sage-Bionetworks/synapsePythonClient" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    synapsePythonClient
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../.." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../tutorials/home/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../guides/home/" class="md-tabs__link">
          
  
  
  How-To Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../client/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../explanations/home/" class="md-tabs__link">
          
  
  
  Further Reading

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../news/" class="md-tabs__link">
          
  
  
  News

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://sagebionetworks.jira.com/servicedesk/customer/portal/9/group/16/create/206" class="md-tabs__link">
        
  
  
    
  
  Contact Us

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Synapse Python/Command Line Client Documentation" class="md-nav__button md-logo" aria-label="Synapse Python/Command Line Client Documentation" data-md-component="logo">
      
  <img src="../../../../assets/synapse_logo.png" alt="logo">

    </a>
    Synapse Python/Command Line Client Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Sage-Bionetworks/synapsePythonClient" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    synapsePythonClient
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Setup
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Setup
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/home/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Working with the Python client
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Working with the Python client
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python_client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Folder
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    File
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/submission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Submission
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/annotation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annotation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/entityview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity View
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Table
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/virtualtable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VirtualTable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/dataset_collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset Collection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/materializedview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Materialized View
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/submissionview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Submission View
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/sharing_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sharing Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/wiki/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wiki
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/upload_data_in_bulk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Upload data in bulk
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/download_data_in_bulk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Download data in bulk
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/schema_operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating JSON Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/python/json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with JSON Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/command_line_client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with the Command Line Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorials/reticulate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synapseclient with R through reticulate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    How-To Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-To Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../guides/home/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../guides/data_storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../guides/accessing_the_rest_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Access the REST API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Extensions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Extensions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../guides/extensions/curator/metadata_curation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Curator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../synapse_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synapse Utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../entity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Folder
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    File
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annotations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../table_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Table Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../view_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity View Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../activity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activity/Provenance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../teams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Teams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../wiki/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wiki
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../link/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Link
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../docker_repository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DockerRepository
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JSON Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Permissions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rest_apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    REST Apis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_22" checked>
        
          
          <label class="md-nav__link" for="__nav_4_22" id="__nav_4_22_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Experimental
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_22_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_22">
            <span class="md-nav__icon md-icon"></span>
            
  
    Experimental
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/factory_operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Factory Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Folder
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    File
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/submission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Submission
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/submission_status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SubmissionStatus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/submission_bundle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SubmissionBundle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Table
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/virtualtable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VirtualTable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/dataset_collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset Collection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/entityview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EntityView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/materializedview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MaterializedView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/submissionview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SubmissionView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/activity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/team/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Team
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/user_profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UserProfile
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/curator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Curator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/link_entity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Link
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functional_interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional Interfaces
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/schema_organization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaOrganization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JSONSchema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/wiki/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wiki
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/form/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FormGroup and Form
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_22_27" >
        
          
          <label class="md-nav__link" for="__nav_4_22_27" id="__nav_4_22_27_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Extensions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_22_27_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_22_27">
            <span class="md-nav__icon md-icon"></span>
            
  
    Extensions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extensions/curator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Curator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_22_28" >
        
          
          <label class="md-nav__link" for="__nav_4_22_28" id="__nav_4_22_28_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Asynchronous
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_22_28_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_22_28">
            <span class="md-nav__icon md-icon"></span>
            
  
    Asynchronous
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/factory_operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Factory Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Folder
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    File
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/submission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Submission
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/submission_status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SubmissionStatus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/submission_bundle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SubmissionBundle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Table
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/virtualtable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VirtualTable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/dataset_collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset Collection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/entityview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EntityView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/materializedview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MaterializedView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/submissionview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SubmissionView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/activity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/team/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Team
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/user_profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UserProfile
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/curator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Curator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/link_entity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Link
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/schema_organization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SchemaOrganization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JSONSchema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/wiki/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wiki
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/form/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FormGroup and Form
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_22_29" checked>
        
          
          <label class="md-nav__link" for="__nav_4_22_29" id="__nav_4_22_29_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Mixins
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_22_29_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_22_29">
            <span class="md-nav__icon md-icon"></span>
            
  
    Mixins
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    AccessControllable
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    AccessControllable
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#delete_permissions-flow-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        delete_permissions Flow Diagram
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="delete_permissions Flow Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Components:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flow-highlights" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flow Highlights:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AccessControllable
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccessControllable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.id" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;id
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.get_permissions_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_permissions_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.get_acl_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_acl_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.set_permissions_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_permissions_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.delete_permissions_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delete_permissions_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.list_acl_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_acl_async
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AccessControllableSynchronousProtocol
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccessControllableSynchronousProtocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_permissions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_acl" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_acl
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.set_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_permissions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.delete_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delete_permissions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.list_acl" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_acl
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storable_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    StorableContainer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asynchronous_communicator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AsynchronousCommunicator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../failure_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FailureStrategy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../base_json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BaseJSONSchema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../container_json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ContainerEntityJSONSchema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../form_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FormData
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../form_group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FormGroup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Further Reading
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Further Reading
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/home/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/domain_models_of_synapse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Models of Synapse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/access_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Access Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/properties_vs_annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Properties vs Annotations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/manifest_tsv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manifest TSV
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmarking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/structuring_your_project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structuring Your Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/asyncio_in_python_3_14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Asyncio Changes in Python 3.14
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../explanations/curator_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Curator Data model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    News
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    News
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../news/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://sagebionetworks.jira.com/servicedesk/customer/portal/9/group/16/create/206" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contact Us
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#delete_permissions-flow-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        delete_permissions Flow Diagram
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="delete_permissions Flow Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Components:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flow-highlights" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flow Highlights:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AccessControllable
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccessControllable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.id" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;id
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.get_permissions_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_permissions_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.get_acl_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_acl_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.set_permissions_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_permissions_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.delete_permissions_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delete_permissions_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.mixins.AccessControllable.list_acl_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_acl_async
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AccessControllableSynchronousProtocol
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccessControllableSynchronousProtocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_permissions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_acl" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_acl
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.set_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_permissions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.delete_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delete_permissions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.list_acl" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_acl
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="accesscontrollable">AccessControllable<a class="headerlink" href="#accesscontrollable" title="Permanent link">&para;</a></h1>
<h2 id="delete_permissions-flow-diagram">delete_permissions Flow Diagram<a class="headerlink" href="#delete_permissions-flow-diagram" title="Permanent link">&para;</a></h2>
<p>The following sequence diagram illustrates the complete flow and function calls of the <code>delete_permissions</code> method:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant User as User/Client
    participant Entity as Entity (File/Folder/Project)
    participant Tracker as BenefactorTracker
    participant SynClient as Synapse Client
    participant API as Synapse API
    participant Logger as Logger

    User-&gt;&gt;Entity: delete_permissions(params)

    Note over Entity: Parameter Validation &amp; Setup
    Entity-&gt;&gt;Entity: Validate entity.id exists
    Entity-&gt;&gt;SynClient: get_client()

    alt Project Entity
        Entity-&gt;&gt;Logger: warn("Project ACL cannot be deleted")
        Entity-&gt;&gt;Entity: set include_self=False
    end

    Entity-&gt;&gt;Entity: _normalize_target_entity_types()
    Entity-&gt;&gt;Tracker: create BenefactorTracker()

    alt Recursive or Container Content Processing
        Entity-&gt;&gt;Entity: _collect_entities()
        Note over Entity: Gather all entities to process

        Entity-&gt;&gt;Tracker: track_entity_benefactor(entity_ids)

        loop For each entity_id
            Tracker-&gt;&gt;API: get_entity_benefactor(entity_id)
            API--&gt;&gt;Tracker: benefactor_result
        end

        Note over Tracker: Build benefactor relationships
        Tracker-&gt;&gt;Tracker: Update entity_benefactors mapping
        Tracker-&gt;&gt;Tracker: Update benefactor_children mapping
    end

    alt Dry Run Mode
        Entity-&gt;&gt;Entity: _build_and_log_dry_run_tree()
        Entity-&gt;&gt;Logger: Log what would be deleted
        Entity--&gt;&gt;User: Return (no actual deletion)
    else Actual Deletion

        alt Include Self
            Entity-&gt;&gt;Entity: _delete_current_entity_acl()

            Entity-&gt;&gt;Tracker: track_entity_benefactor([self.id])
            Tracker-&gt;&gt;API: get_entity_benefactor(self.id)
            API--&gt;&gt;Tracker: benefactor_result

            Entity-&gt;&gt;Tracker: will_acl_deletion_affect_others(self.id)
            Tracker--&gt;&gt;Entity: boolean result

            alt Will Affect Others
                Entity-&gt;&gt;Logger: info("Deleting ACL will affect X entities")
            end

            Entity-&gt;&gt;API: delete_entity_acl(self.id)

            alt Success
                API--&gt;&gt;Entity: Success
                Entity-&gt;&gt;Logger: debug("Deleted ACL for entity")
                Entity-&gt;&gt;Tracker: mark_acl_deleted(self.id)
                Tracker-&gt;&gt;Tracker: Update benefactor relationships
                Tracker--&gt;&gt;Entity: affected_entities list

                alt Has Affected Entities
                    Entity-&gt;&gt;Logger: info("ACL deletion caused X entities to inherit from new benefactor")
                end
            else HTTP Error
                API--&gt;&gt;Entity: SynapseHTTPError
                alt Already Inherits (403)
                    Entity-&gt;&gt;Logger: debug("Entity already inherits permissions")
                else Other Error
                    Entity-&gt;&gt;Entity: raise exception
                end
            end
        end

        alt Process Container Contents
            Entity-&gt;&gt;Entity: _process_container_contents()

            alt Process Files
                loop For each file
                    Entity-&gt;&gt;Entity: file.delete_permissions_async(recursive=False)
                    Note right of Entity: Recursive call for each file
                end
            end

            alt Process Folders
                Entity-&gt;&gt;Entity: _process_folder_permission_deletion()

                loop For each folder
                    alt Recursive Mode
                        Entity-&gt;&gt;Entity: folder.delete_permissions_async(recursive=True)
                    else Direct Mode
                        Entity-&gt;&gt;Entity: folder.delete_permissions_async(recursive=False)
                    end
                    Note right of Entity: Recursive calls for folders
                end
            end
        end
    end

    Entity--&gt;&gt;User: Complete

    Note over User,Logger: Key Features:
    Note over User,Logger:  Async operations with asyncio.gather()
    Note over User,Logger:  Benefactor relationship tracking
    Note over User,Logger:  Recursive processing capabilities
    Note over User,Logger:  Dry run mode for preview
    Note over User,Logger:  Error handling for inheritance conflicts
    Note over User,Logger:  Cascading permission updates</code></pre>
<h3 id="key-components">Key Components:<a class="headerlink" href="#key-components" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Entity</strong>: The primary object (File, Folder, Project) whose permissions are being deleted</li>
<li><strong>BenefactorTracker</strong>: Manages benefactor relationships and tracks cascading changes</li>
<li><strong>Synapse Client</strong>: Handles API communication and logging</li>
<li><strong>Synapse API</strong>: REST endpoints for ACL operations (<code>delete_entity_acl</code>, <code>get_entity_benefactor</code>)</li>
<li><strong>Logger</strong>: Records operations, warnings, and debug information</li>
</ul>
<h3 id="flow-highlights">Flow Highlights:<a class="headerlink" href="#flow-highlights" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Validation Phase</strong>: Parameter validation and client setup</li>
<li><strong>Collection Phase</strong>: Gathering entities for recursive operations</li>
<li><strong>Tracking Phase</strong>: Parallel benefactor relationship discovery</li>
<li><strong>Preview Phase</strong>: Dry run mode shows what would be deleted</li>
<li><strong>Deletion Phase</strong>: Actual ACL deletions with error handling</li>
<li><strong>Cascading Phase</strong>: Updates benefactor relationships for affected entities</li>
</ol>


<div class="doc doc-object doc-class">



<h2 id="synapseclient.models.mixins.AccessControllable" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">synapseclient.models.mixins.AccessControllable</span>


<a href="#synapseclient.models.mixins.AccessControllable" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol" href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol">AccessControllableSynchronousProtocol</a></code></p>



        <p>Mixin for objects that can be controlled by an Access Control List (ACL).</p>
<p>In order to use this mixin, the class must have an <code>id</code> attribute.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>synapseclient/models/mixins/access_control.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span>
<span class="normal">2146</span>
<span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span>
<span class="normal">2180</span>
<span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span>
<span class="normal">2184</span>
<span class="normal">2185</span>
<span class="normal">2186</span>
<span class="normal">2187</span>
<span class="normal">2188</span>
<span class="normal">2189</span>
<span class="normal">2190</span>
<span class="normal">2191</span>
<span class="normal">2192</span>
<span class="normal">2193</span>
<span class="normal">2194</span>
<span class="normal">2195</span>
<span class="normal">2196</span>
<span class="normal">2197</span>
<span class="normal">2198</span>
<span class="normal">2199</span>
<span class="normal">2200</span>
<span class="normal">2201</span>
<span class="normal">2202</span>
<span class="normal">2203</span>
<span class="normal">2204</span>
<span class="normal">2205</span>
<span class="normal">2206</span>
<span class="normal">2207</span>
<span class="normal">2208</span>
<span class="normal">2209</span>
<span class="normal">2210</span>
<span class="normal">2211</span>
<span class="normal">2212</span>
<span class="normal">2213</span>
<span class="normal">2214</span>
<span class="normal">2215</span>
<span class="normal">2216</span>
<span class="normal">2217</span>
<span class="normal">2218</span>
<span class="normal">2219</span>
<span class="normal">2220</span>
<span class="normal">2221</span>
<span class="normal">2222</span>
<span class="normal">2223</span>
<span class="normal">2224</span>
<span class="normal">2225</span>
<span class="normal">2226</span>
<span class="normal">2227</span>
<span class="normal">2228</span>
<span class="normal">2229</span>
<span class="normal">2230</span>
<span class="normal">2231</span>
<span class="normal">2232</span>
<span class="normal">2233</span>
<span class="normal">2234</span>
<span class="normal">2235</span>
<span class="normal">2236</span>
<span class="normal">2237</span>
<span class="normal">2238</span>
<span class="normal">2239</span>
<span class="normal">2240</span>
<span class="normal">2241</span>
<span class="normal">2242</span>
<span class="normal">2243</span>
<span class="normal">2244</span>
<span class="normal">2245</span>
<span class="normal">2246</span>
<span class="normal">2247</span>
<span class="normal">2248</span>
<span class="normal">2249</span>
<span class="normal">2250</span>
<span class="normal">2251</span>
<span class="normal">2252</span>
<span class="normal">2253</span>
<span class="normal">2254</span>
<span class="normal">2255</span>
<span class="normal">2256</span>
<span class="normal">2257</span>
<span class="normal">2258</span>
<span class="normal">2259</span>
<span class="normal">2260</span>
<span class="normal">2261</span>
<span class="normal">2262</span>
<span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span>
<span class="normal">2285</span>
<span class="normal">2286</span>
<span class="normal">2287</span>
<span class="normal">2288</span>
<span class="normal">2289</span>
<span class="normal">2290</span>
<span class="normal">2291</span>
<span class="normal">2292</span>
<span class="normal">2293</span>
<span class="normal">2294</span>
<span class="normal">2295</span>
<span class="normal">2296</span>
<span class="normal">2297</span>
<span class="normal">2298</span>
<span class="normal">2299</span>
<span class="normal">2300</span>
<span class="normal">2301</span>
<span class="normal">2302</span>
<span class="normal">2303</span>
<span class="normal">2304</span>
<span class="normal">2305</span>
<span class="normal">2306</span>
<span class="normal">2307</span>
<span class="normal">2308</span>
<span class="normal">2309</span>
<span class="normal">2310</span>
<span class="normal">2311</span>
<span class="normal">2312</span>
<span class="normal">2313</span>
<span class="normal">2314</span>
<span class="normal">2315</span>
<span class="normal">2316</span>
<span class="normal">2317</span>
<span class="normal">2318</span>
<span class="normal">2319</span>
<span class="normal">2320</span>
<span class="normal">2321</span>
<span class="normal">2322</span>
<span class="normal">2323</span>
<span class="normal">2324</span>
<span class="normal">2325</span>
<span class="normal">2326</span>
<span class="normal">2327</span>
<span class="normal">2328</span>
<span class="normal">2329</span>
<span class="normal">2330</span>
<span class="normal">2331</span>
<span class="normal">2332</span>
<span class="normal">2333</span>
<span class="normal">2334</span>
<span class="normal">2335</span>
<span class="normal">2336</span>
<span class="normal">2337</span>
<span class="normal">2338</span>
<span class="normal">2339</span>
<span class="normal">2340</span>
<span class="normal">2341</span>
<span class="normal">2342</span>
<span class="normal">2343</span>
<span class="normal">2344</span>
<span class="normal">2345</span>
<span class="normal">2346</span>
<span class="normal">2347</span>
<span class="normal">2348</span>
<span class="normal">2349</span>
<span class="normal">2350</span>
<span class="normal">2351</span>
<span class="normal">2352</span>
<span class="normal">2353</span>
<span class="normal">2354</span>
<span class="normal">2355</span>
<span class="normal">2356</span>
<span class="normal">2357</span>
<span class="normal">2358</span>
<span class="normal">2359</span>
<span class="normal">2360</span>
<span class="normal">2361</span>
<span class="normal">2362</span>
<span class="normal">2363</span>
<span class="normal">2364</span>
<span class="normal">2365</span>
<span class="normal">2366</span>
<span class="normal">2367</span>
<span class="normal">2368</span>
<span class="normal">2369</span>
<span class="normal">2370</span>
<span class="normal">2371</span>
<span class="normal">2372</span>
<span class="normal">2373</span>
<span class="normal">2374</span>
<span class="normal">2375</span>
<span class="normal">2376</span>
<span class="normal">2377</span>
<span class="normal">2378</span>
<span class="normal">2379</span>
<span class="normal">2380</span>
<span class="normal">2381</span>
<span class="normal">2382</span>
<span class="normal">2383</span>
<span class="normal">2384</span>
<span class="normal">2385</span>
<span class="normal">2386</span>
<span class="normal">2387</span>
<span class="normal">2388</span>
<span class="normal">2389</span>
<span class="normal">2390</span>
<span class="normal">2391</span>
<span class="normal">2392</span>
<span class="normal">2393</span>
<span class="normal">2394</span>
<span class="normal">2395</span>
<span class="normal">2396</span>
<span class="normal">2397</span>
<span class="normal">2398</span>
<span class="normal">2399</span>
<span class="normal">2400</span>
<span class="normal">2401</span>
<span class="normal">2402</span>
<span class="normal">2403</span>
<span class="normal">2404</span>
<span class="normal">2405</span>
<span class="normal">2406</span>
<span class="normal">2407</span>
<span class="normal">2408</span>
<span class="normal">2409</span>
<span class="normal">2410</span>
<span class="normal">2411</span>
<span class="normal">2412</span>
<span class="normal">2413</span>
<span class="normal">2414</span>
<span class="normal">2415</span>
<span class="normal">2416</span>
<span class="normal">2417</span>
<span class="normal">2418</span>
<span class="normal">2419</span>
<span class="normal">2420</span>
<span class="normal">2421</span>
<span class="normal">2422</span>
<span class="normal">2423</span>
<span class="normal">2424</span>
<span class="normal">2425</span>
<span class="normal">2426</span>
<span class="normal">2427</span>
<span class="normal">2428</span>
<span class="normal">2429</span>
<span class="normal">2430</span>
<span class="normal">2431</span>
<span class="normal">2432</span>
<span class="normal">2433</span>
<span class="normal">2434</span>
<span class="normal">2435</span>
<span class="normal">2436</span>
<span class="normal">2437</span>
<span class="normal">2438</span>
<span class="normal">2439</span>
<span class="normal">2440</span>
<span class="normal">2441</span>
<span class="normal">2442</span>
<span class="normal">2443</span>
<span class="normal">2444</span>
<span class="normal">2445</span>
<span class="normal">2446</span>
<span class="normal">2447</span>
<span class="normal">2448</span>
<span class="normal">2449</span>
<span class="normal">2450</span>
<span class="normal">2451</span>
<span class="normal">2452</span>
<span class="normal">2453</span>
<span class="normal">2454</span>
<span class="normal">2455</span>
<span class="normal">2456</span>
<span class="normal">2457</span>
<span class="normal">2458</span>
<span class="normal">2459</span>
<span class="normal">2460</span>
<span class="normal">2461</span>
<span class="normal">2462</span>
<span class="normal">2463</span>
<span class="normal">2464</span>
<span class="normal">2465</span>
<span class="normal">2466</span>
<span class="normal">2467</span>
<span class="normal">2468</span>
<span class="normal">2469</span>
<span class="normal">2470</span>
<span class="normal">2471</span>
<span class="normal">2472</span>
<span class="normal">2473</span>
<span class="normal">2474</span>
<span class="normal">2475</span>
<span class="normal">2476</span>
<span class="normal">2477</span>
<span class="normal">2478</span>
<span class="normal">2479</span>
<span class="normal">2480</span>
<span class="normal">2481</span>
<span class="normal">2482</span>
<span class="normal">2483</span>
<span class="normal">2484</span>
<span class="normal">2485</span>
<span class="normal">2486</span>
<span class="normal">2487</span>
<span class="normal">2488</span>
<span class="normal">2489</span>
<span class="normal">2490</span>
<span class="normal">2491</span>
<span class="normal">2492</span>
<span class="normal">2493</span>
<span class="normal">2494</span>
<span class="normal">2495</span>
<span class="normal">2496</span>
<span class="normal">2497</span>
<span class="normal">2498</span>
<span class="normal">2499</span>
<span class="normal">2500</span>
<span class="normal">2501</span>
<span class="normal">2502</span>
<span class="normal">2503</span>
<span class="normal">2504</span>
<span class="normal">2505</span>
<span class="normal">2506</span>
<span class="normal">2507</span>
<span class="normal">2508</span>
<span class="normal">2509</span>
<span class="normal">2510</span>
<span class="normal">2511</span>
<span class="normal">2512</span>
<span class="normal">2513</span>
<span class="normal">2514</span>
<span class="normal">2515</span>
<span class="normal">2516</span>
<span class="normal">2517</span>
<span class="normal">2518</span>
<span class="normal">2519</span>
<span class="normal">2520</span>
<span class="normal">2521</span>
<span class="normal">2522</span>
<span class="normal">2523</span>
<span class="normal">2524</span>
<span class="normal">2525</span>
<span class="normal">2526</span>
<span class="normal">2527</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@async_to_sync</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AccessControllable</span><span class="p">(</span><span class="n">AccessControllableSynchronousProtocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mixin for objects that can be controlled by an Access Control List (ACL).</span>

<span class="sd">    In order to use this mixin, the class must have an `id` attribute.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The unique immutable ID for this entity. A new ID will be generated for new Files.</span>
<span class="sd">    Once issued, this ID is guaranteed to never change or be re-issued.&quot;&quot;&quot;</span>

    <span class="n">files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">folders</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Folder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Table&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># links: List[&quot;Link&quot;] = None</span>
    <span class="n">entityviews</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;EntityView&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># dockerrepos: List[&quot;DockerRepo&quot;] = None</span>
    <span class="n">submissionviews</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;SubmissionView&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">datasets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">datasetcollections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;DatasetCollection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">materializedviews</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;MaterializedView&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">virtualtables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;VirtualTable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_permissions_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Permissions&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the [permissions][synapseclient.core.models.permission.Permissions]</span>
<span class="sd">        that the caller has on an Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Permissions object</span>


<span class="sd">        Example: Using this function:</span>
<span class="sd">            Getting permissions for a Synapse Entity</span>

<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                permissions = await File(id=&quot;syn123&quot;).get_permissions_async()</span>

<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>

<span class="sd">            Getting access types list from the Permissions object</span>

<span class="sd">            ```</span>
<span class="sd">            permissions.access_types</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.core.models.permission</span><span class="w"> </span><span class="kn">import</span> <span class="n">Permissions</span>

        <span class="n">permissions_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_entity_permissions</span><span class="p">(</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">Permissions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">permissions_dict</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_acl_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">check_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the [ACL][synapseclient.core.models.permission.Permissions.access_types]</span>
<span class="sd">        that a user or group has on an Entity.</span>

<span class="sd">        Note: If the entity does not have local sharing settings, or ACL set directly</span>
<span class="sd">        on it, this will look up the ACL on the benefactor of the entity. The</span>
<span class="sd">        benefactor is the entity that the current entity inherits its permissions from.</span>
<span class="sd">        The benefactor is usually the parent entity, but it can be any ancestor in the</span>
<span class="sd">        hierarchy. For example, a newly created Project will be its own benefactor,</span>
<span class="sd">        while a new FileEntity&#39;s benefactor will start off as its containing Project or</span>
<span class="sd">        Folder. If the entity already has local sharing settings, the benefactor would</span>
<span class="sd">        be itself.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>
<span class="sd">            check_benefactor: If True (default), check the benefactor for the entity</span>
<span class="sd">                to get the ACL. If False, only check the entity itself.</span>
<span class="sd">                This is useful for checking the ACL of an entity that has local sharing</span>
<span class="sd">                settings, but you want to check the ACL of the entity itself and not</span>
<span class="sd">                the benefactor it may inherit from.</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An array containing some combination of</span>
<span class="sd">                [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">                &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">                or an empty array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">get_entity_acl_list</span><span class="p">(</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">principal_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">principal_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">check_benefactor</span><span class="o">=</span><span class="n">check_benefactor</span><span class="p">,</span>
            <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_permissions_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">access_type</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modify_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">warn_if_inherits</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets permission that a user or group has on an Entity.</span>
<span class="sd">        An Entity may have its own ACL or inherit its ACL from a benefactor.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            principal_id: Identifier of a user or group. `273948` is for all</span>
<span class="sd">                registered Synapse users and `273949` is for public access.</span>
<span class="sd">                None implies public access.</span>
<span class="sd">            access_type: Type of permission to be granted. One or more of CREATE,</span>
<span class="sd">                READ, DOWNLOAD, UPDATE, DELETE, CHANGE_PERMISSIONS.</span>

<span class="sd">                **Defaults to [&#39;READ&#39;, &#39;DOWNLOAD&#39;]**</span>
<span class="sd">            modify_benefactor: Set as True when modifying a benefactor&#39;s ACL. The term</span>
<span class="sd">                &#39;benefactor&#39; is used to indicate which Entity an Entity inherits its</span>
<span class="sd">                ACL from. For example, a newly created Project will be its own</span>
<span class="sd">                benefactor, while a new FileEntity&#39;s benefactor will start off as its</span>
<span class="sd">                containing Project. If the entity already has local sharing settings</span>
<span class="sd">                the benefactor would be itself. It may also be the immediate parent,</span>
<span class="sd">                somewhere in the parent tree, or the project itself.</span>
<span class="sd">            warn_if_inherits: When `modify_benefactor` is True, this does not have any</span>
<span class="sd">                effect. When `modify_benefactor` is False, and `warn_if_inherits` is</span>
<span class="sd">                True, a warning log message is produced if the benefactor for the</span>
<span class="sd">                entity you passed into the function is not itself, i.e., it&#39;s the</span>
<span class="sd">                parent folder, or another entity in the parent tree.</span>
<span class="sd">            overwrite: By default this function overwrites existing permissions for</span>
<span class="sd">                the specified user. Set this flag to False to add new permissions</span>
<span class="sd">                non-destructively.</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An Access Control List object matching &lt;https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/AccessControlList.html&gt;.</span>

<span class="sd">        Example: Setting permissions</span>
<span class="sd">            Grant all registered users download access</span>

<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                await File(id=&quot;syn123&quot;).set_permissions_async(principal_id=273948, access_type=[&#39;READ&#39;,&#39;DOWNLOAD&#39;])</span>

<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>

<span class="sd">            Grant the public view access</span>

<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                await File(id=&quot;syn123&quot;).set_permissions_async(principal_id=273949, access_type=[&#39;READ&#39;])</span>

<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">access_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">access_type</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;READ&quot;</span><span class="p">,</span> <span class="s2">&quot;DOWNLOAD&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="k">await</span> <span class="n">set_entity_permissions</span><span class="p">(</span>
            <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">principal_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">principal_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">access_type</span><span class="o">=</span><span class="n">access_type</span><span class="p">,</span>
            <span class="n">modify_benefactor</span><span class="o">=</span><span class="n">modify_benefactor</span><span class="p">,</span>
            <span class="n">warn_if_inherits</span><span class="o">=</span><span class="n">warn_if_inherits</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
            <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_permissions_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">show_acl_details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">_benefactor_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BenefactorTracker</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the entire Access Control List (ACL) for a given Entity. This is not</span>
<span class="sd">        scoped to a specific user or group, but rather removes all permissions</span>
<span class="sd">        associated with the Entity. After this operation, the Entity will inherit</span>
<span class="sd">        permissions from its benefactor, which is typically its parent entity or</span>
<span class="sd">        the Project it belongs to.</span>

<span class="sd">        In order to remove permissions for a specific user or group, you</span>
<span class="sd">        should use the `set_permissions_async` method with the `access_type` set to</span>
<span class="sd">        an empty list.</span>

<span class="sd">        By default, Entities such as FileEntity and Folder inherit their permission from</span>
<span class="sd">        their containing Project. For such Entities the Project is the Entity&#39;s &#39;benefactor&#39;.</span>
<span class="sd">        This permission inheritance can be overridden by creating an ACL for the Entity.</span>
<span class="sd">        When this occurs the Entity becomes its own benefactor and all permission are</span>
<span class="sd">        determined by its own ACL.</span>

<span class="sd">        If the ACL of an Entity is deleted, then its benefactor will automatically be set</span>
<span class="sd">        to its parent&#39;s benefactor.</span>

<span class="sd">        **Special notice for Projects:** The ACL for a Project cannot be deleted, you</span>
<span class="sd">        must individually update or revoke the permissions for each user or group.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            include_self: If True (default), delete the ACL of the current entity.</span>
<span class="sd">                If False, skip deleting the ACL of the current entity.</span>
<span class="sd">            include_container_content: If True, delete ACLs from contents directly within</span>
<span class="sd">                containers (files and folders inside self). This must be set to</span>
<span class="sd">                True for recursive to have any effect. Defaults to False.</span>
<span class="sd">            recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">                recursively process child containers. Note that this must be used with</span>
<span class="sd">                include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">                with include_container_content=False will raise a ValueError.</span>
<span class="sd">                Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">            target_entity_types: Specify which entity types to process when deleting ACLs.</span>
<span class="sd">                Allowed values are &quot;folder&quot;, &quot;file&quot;, &quot;project&quot;, &quot;table&quot;, &quot;entityview&quot;,</span>
<span class="sd">                &quot;materializedview&quot;, &quot;virtualtable&quot;, &quot;dataset&quot;, &quot;datasetcollection&quot;,</span>
<span class="sd">                &quot;submissionview&quot; (case-insensitive). If None, defaults to [&quot;folder&quot;, &quot;file&quot;].</span>
<span class="sd">                This does not affect the entity type of the current entity, which is always</span>
<span class="sd">                processed if `include_self=True`.</span>
<span class="sd">            dry_run: If True, log the changes that would be made instead of actually</span>
<span class="sd">                performing the deletions. When enabled, all ACL deletion operations are</span>
<span class="sd">                simulated and logged at info level. Defaults to False.</span>
<span class="sd">            show_acl_details: When dry_run=True, controls whether current ACL details are</span>
<span class="sd">                displayed for entities that will have their permissions changed. If True (default),</span>
<span class="sd">                shows detailed ACL information. If False, hides ACL details for cleaner output.</span>
<span class="sd">                Has no effect when dry_run=False.</span>
<span class="sd">            show_files_in_containers: When dry_run=True, controls whether files within containers</span>
<span class="sd">                are displayed in the preview. If True (default), shows all files. If False, hides</span>
<span class="sd">                files when their only change is benefactor inheritance (but still shows files with</span>
<span class="sd">                local ACLs being deleted). Has no effect when dry_run=False.</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>
<span class="sd">            _benefactor_tracker: Internal use tracker for managing benefactor relationships.</span>
<span class="sd">                Used for recursive functionality to track which entities will be affected</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">            SynapseHTTPError: If there are permission issues or if the entity already inherits permissions.</span>
<span class="sd">            Exception: For any other errors that may occur during the process.</span>

<span class="sd">        Note: The caller must be granted ACCESS_TYPE.CHANGE_PERMISSIONS on the Entity to</span>
<span class="sd">        call this method.</span>

<span class="sd">        Example: Delete permissions for a single entity</span>
<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                await File(id=&quot;syn123&quot;).delete_permissions_async()</span>

<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>

<span class="sd">        Example: Delete permissions recursively for a folder and all its children</span>
<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import Folder</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                # Delete permissions for this folder only (does not affect children)</span>
<span class="sd">                await Folder(id=&quot;syn123&quot;).delete_permissions_async()</span>

<span class="sd">                # Delete permissions for all files and folders directly within this folder,</span>
<span class="sd">                # but not the folder itself</span>
<span class="sd">                await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                    include_self=False,</span>
<span class="sd">                    include_container_content=True</span>
<span class="sd">                )</span>

<span class="sd">                # Delete permissions for all items in the entire hierarchy (folders and their files)</span>
<span class="sd">                # Both recursive and include_container_content must be True</span>
<span class="sd">                await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True</span>
<span class="sd">                )</span>

<span class="sd">                # Delete permissions only for folder entities within this folder recursively</span>
<span class="sd">                # and their contents</span>
<span class="sd">                await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True,</span>
<span class="sd">                    target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">                )</span>

<span class="sd">                # Delete permissions only for files within this folder and all subfolders</span>
<span class="sd">                await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                    include_self=False,</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True,</span>
<span class="sd">                    target_entity_types=[&quot;file&quot;]</span>
<span class="sd">                )</span>

<span class="sd">                # Delete permissions for specific entity types (e.g., tables and views)</span>
<span class="sd">                await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True,</span>
<span class="sd">                    target_entity_types=[&quot;table&quot;, &quot;entityview&quot;, &quot;materializedview&quot;]</span>
<span class="sd">                )</span>

<span class="sd">                # Dry run example: Log what would be deleted without making changes</span>
<span class="sd">                await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True,</span>
<span class="sd">                    dry_run=True</span>
<span class="sd">                )</span>
<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The entity must have an ID to delete permissions.&quot;</span><span class="p">)</span>

        <span class="n">client</span> <span class="o">=</span> <span class="n">Synapse</span><span class="o">.</span><span class="n">get_client</span><span class="p">(</span><span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include_self</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;project&quot;</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;The ACL for a Project cannot be deleted, you must individually update or &quot;</span>
                <span class="s2">&quot;revoke the permissions for each user or group. Continuing without deleting &quot;</span>
                <span class="s2">&quot;the Project&#39;s ACL.&quot;</span>
            <span class="p">)</span>
            <span class="n">include_self</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">normalized_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_target_entity_types</span><span class="p">(</span><span class="n">target_entity_types</span><span class="p">)</span>

        <span class="n">is_top_level</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">_benefactor_tracker</span>
        <span class="n">benefactor_tracker</span> <span class="o">=</span> <span class="n">_benefactor_tracker</span> <span class="ow">or</span> <span class="n">BenefactorTracker</span><span class="p">()</span>

        <span class="n">should_process_children</span> <span class="o">=</span> <span class="p">(</span><span class="n">recursive</span> <span class="ow">or</span> <span class="n">include_container_content</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sync_from_synapse_async&quot;</span>
        <span class="p">)</span>
        <span class="n">all_entities</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="k">if</span> <span class="n">include_self</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="n">custom_message</span> <span class="o">=</span> <span class="s2">&quot;Deleting ACLs [Dry Run]...&quot;</span> <span class="k">if</span> <span class="n">dry_run</span> <span class="k">else</span> <span class="s2">&quot;Deleting ACLs...&quot;</span>
        <span class="k">with</span> <span class="n">shared_download_progress_bar</span><span class="p">(</span>
            <span class="n">file_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span> <span class="n">custom_message</span><span class="o">=</span><span class="n">custom_message</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">progress_bar</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Initial setup complete</span>

            <span class="k">if</span> <span class="n">should_process_children</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">recursive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">include_container_content</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;When recursive=True, include_container_content must also be True. &quot;</span>
                        <span class="s2">&quot;Setting recursive=True with include_container_content=False has no effect.&quot;</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

                <span class="n">all_entities</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_entities</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">target_entity_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
                    <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                    <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                    <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

                <span class="n">entity_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">entity</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">all_entities</span> <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">entity_ids</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                    <span class="k">await</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">track_entity_benefactor</span><span class="p">(</span>
                        <span class="n">entity_ids</span><span class="o">=</span><span class="n">entity_ids</span><span class="p">,</span>
                        <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                        <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">is_top_level</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_and_log_run_tree</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                    <span class="n">collected_entities</span><span class="o">=</span><span class="n">all_entities</span><span class="p">,</span>
                    <span class="n">include_self</span><span class="o">=</span><span class="n">include_self</span><span class="p">,</span>
                    <span class="n">show_acl_details</span><span class="o">=</span><span class="n">show_acl_details</span><span class="p">,</span>
                    <span class="n">show_files_in_containers</span><span class="o">=</span><span class="n">show_files_in_containers</span><span class="p">,</span>
                    <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                    <span class="n">dry_run</span><span class="o">=</span><span class="n">dry_run</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">dry_run</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="k">if</span> <span class="n">include_self</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete_current_entity_acl</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                    <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">should_process_children</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">include_container_content</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_container_contents</span><span class="p">(</span>
                        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                        <span class="n">target_entity_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
                        <span class="n">benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                        <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                        <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                        <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Process container contents complete</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_normalize_target_entity_types</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Normalize and validate the target entity types.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            target_entity_types: A list of entity types to validate. If None, returns default types.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: A normalized list (lowercase) of valid entity types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">default_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;folder&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">target_entity_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default_types</span>

        <span class="n">normalized_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">target_entity_types</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">normalized_types</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_delete_current_entity_acl</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">BenefactorTracker</span><span class="p">,</span>
        <span class="n">progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the ACL for the current entity with benefactor relationship tracking.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>
<span class="sd">            benefactor_tracker: Tracker for managing benefactor relationships.</span>
<span class="sd">            progress_bar: Progress bar to update after operation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">await</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">track_entity_benefactor</span><span class="p">(</span>
            <span class="n">entity_ids</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">],</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span> <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">delete_entity_acl</span><span class="p">(</span><span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted ACL for entity </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">benefactor_tracker</span><span class="p">:</span>
                <span class="n">affected_entities</span> <span class="o">=</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">mark_acl_deleted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">affected_entities</span><span class="p">:</span>
                    <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;ACL deletion for entity </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> caused </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">affected_entities</span><span class="p">)</span><span class="si">}</span><span class="s2"> &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;entities to inherit from a new benefactor: </span><span class="si">{</span><span class="n">affected_entities</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span>
                <span class="ow">and</span> <span class="s2">&quot;Resource already inherits its permissions.&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span>
            <span class="p">):</span>
                <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> already inherits permissions from its parent.&quot;</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_container_contents</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">BenefactorTracker</span><span class="p">,</span>
        <span class="n">progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process the contents of a container entity, optionally recursively.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>
<span class="sd">            target_entity_types: A list of normalized entity types to process.</span>
<span class="sd">            benefactor_tracker: Tracker for managing benefactor relationships.</span>
<span class="sd">            progress_bar: Optional progress bar to update as tasks complete.</span>
<span class="sd">            recursive: If True, process folders recursively; if False, process only direct contents.</span>
<span class="sd">            include_container_content: Whether to include the content of containers in processing.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">entity_type</span><span class="p">,</span> <span class="n">plural_attr</span> <span class="ow">in</span> <span class="n">ENTITY_TYPE_MAPPING</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="n">target_entity_types</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plural_attr</span><span class="p">):</span>
                <span class="n">entities</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plural_attr</span><span class="p">,</span> <span class="p">[])</span>

                <span class="k">if</span> <span class="n">benefactor_tracker</span> <span class="ow">and</span> <span class="n">entities</span><span class="p">:</span>
                    <span class="n">track_tasks</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">track_entity_benefactor</span><span class="p">(</span>
                            <span class="n">entity_ids</span><span class="o">=</span><span class="p">[</span><span class="n">entity</span><span class="o">.</span><span class="n">id</span><span class="p">],</span>
                            <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                            <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span>
                    <span class="p">]</span>

                    <span class="k">if</span> <span class="n">progress_bar</span> <span class="ow">and</span> <span class="n">track_tasks</span><span class="p">:</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">track_tasks</span><span class="p">)</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

                    <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">track_tasks</span><span class="p">):</span>
                        <span class="k">await</span> <span class="n">completed_task</span>
                        <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                            <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

                <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_single_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">target_type</span><span class="p">):</span>
                    <span class="k">await</span> <span class="n">entity</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
                        <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">include_self</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="n">target_type</span><span class="p">],</span>
                        <span class="n">dry_run</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">_benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                        <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="n">entity_tasks</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">process_single_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">)</span> <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span>
                <span class="p">]</span>

                <span class="k">if</span> <span class="n">progress_bar</span> <span class="ow">and</span> <span class="n">entity_tasks</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">entity_tasks</span><span class="p">)</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">entity_tasks</span><span class="p">):</span>
                    <span class="k">await</span> <span class="n">completed_task</span>
                    <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;folders&quot;</span><span class="p">):</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_folder_permission_deletion</span><span class="p">(</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                <span class="n">benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="n">target_entity_types</span><span class="o">=</span><span class="n">target_entity_types</span><span class="p">,</span>
                <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_folder_permission_deletion</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">BenefactorTracker</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process folder permission deletion either directly or recursively.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>
<span class="sd">            recursive: If True, process folders recursively; if False, process only direct folders.</span>
<span class="sd">            benefactor_tracker: Tracker for managing benefactor relationships.</span>
<span class="sd">                Only used for non-recursive processing.</span>
<span class="sd">            target_entity_types: A list of normalized entity types to process.</span>
<span class="sd">            progress_bar: Optional progress bar to update as tasks complete.</span>
<span class="sd">            include_container_content: Whether to include the content of containers in processing.</span>
<span class="sd">                Only used for recursive processing.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: For any errors that may occur during processing, which are caught and logged.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recursive</span> <span class="ow">and</span> <span class="n">benefactor_tracker</span><span class="p">:</span>
            <span class="n">track_tasks</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">track_entity_benefactor</span><span class="p">(</span>
                    <span class="n">entity_ids</span><span class="o">=</span><span class="p">[</span><span class="n">folder</span><span class="o">.</span><span class="n">id</span><span class="p">],</span>
                    <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">folders</span>
            <span class="p">]</span>

            <span class="k">if</span> <span class="n">progress_bar</span> <span class="ow">and</span> <span class="n">track_tasks</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">track_tasks</span><span class="p">)</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">track_tasks</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">completed_task</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Each tracking task complete</span>

        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_single_folder</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
            <span class="n">should_delete_folder_acl</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;folder&quot;</span> <span class="ow">in</span> <span class="n">target_entity_types</span> <span class="ow">and</span> <span class="n">include_container_content</span>
            <span class="p">)</span>

            <span class="k">await</span> <span class="n">folder</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
                <span class="n">include_self</span><span class="o">=</span><span class="n">should_delete_folder_acl</span><span class="p">,</span>
                <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                <span class="c1"># This is needed to ensure we do not delete children ACLs when not</span>
                <span class="c1"># recursive, but still allow us to delete the ACL on the folder</span>
                <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span> <span class="ow">and</span> <span class="n">recursive</span><span class="p">,</span>
                <span class="n">target_entity_types</span><span class="o">=</span><span class="n">target_entity_types</span><span class="p">,</span>
                <span class="n">dry_run</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">_benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">folder_tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">process_single_folder</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span> <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">folders</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">progress_bar</span> <span class="ow">and</span> <span class="n">folder_tasks</span><span class="p">:</span>
            <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">folder_tasks</span><span class="p">)</span>
            <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">folder_tasks</span><span class="p">):</span>
            <span class="k">await</span> <span class="n">completed_task</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Each folder task complete</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_acl_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">log_tree</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">_progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Internal parameter for recursive calls</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AclListResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List the Access Control Lists (ACLs) for this entity and optionally its children.</span>

<span class="sd">        This function returns the local sharing settings for the entity and optionally</span>
<span class="sd">        its children. It provides a mapping of all ACLs for the given container/entity.</span>

<span class="sd">        **Important Note:** This function returns the LOCAL sharing settings only, not</span>
<span class="sd">        the effective permissions that each Synapse User ID/Team has on the entities.</span>
<span class="sd">        More permissive permissions could be granted via a Team that the user has access</span>
<span class="sd">        to that has permissions on the entity, or through inheritance from parent entities.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">                recursively process child containers. Note that this must be used with</span>
<span class="sd">                include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">                with include_container_content=False will raise a ValueError.</span>
<span class="sd">                Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">            include_container_content: If True, include ACLs from contents directly within</span>
<span class="sd">                containers (files and folders inside self). This must be set to</span>
<span class="sd">                True for recursive to have any effect. Defaults to False.</span>
<span class="sd">            target_entity_types: Specify which entity types to process when listing ACLs.</span>
<span class="sd">                Allowed values are &quot;folder&quot;, &quot;file&quot;, &quot;project&quot;, &quot;table&quot;, &quot;entityview&quot;,</span>
<span class="sd">                &quot;materializedview&quot;, &quot;virtualtable&quot;, &quot;dataset&quot;, &quot;datasetcollection&quot;,</span>
<span class="sd">                &quot;submissionview&quot; (case-insensitive). If None, defaults to [&quot;folder&quot;, &quot;file&quot;].</span>
<span class="sd">            log_tree: If True, logs the ACL results to console in ASCII tree format showing</span>
<span class="sd">                entity hierarchies and their ACL permissions in a tree-like structure.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>
<span class="sd">            _progress_bar: Internal parameter. Progress bar instance to use for updates</span>
<span class="sd">                when called recursively. Should not be used by external callers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An AclListResult object containing a structured representation of ACLs where:</span>
<span class="sd">            - entity_acls: A list of EntityAcl objects, each representing one entity&#39;s ACL</span>
<span class="sd">            - Each EntityAcl contains acl_entries (a list of AclEntry objects)</span>
<span class="sd">            - Each AclEntry contains the principal_id and their list of permissions</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">            SynapseHTTPError: If there are permission issues accessing ACLs.</span>
<span class="sd">            Exception: For any other errors that may occur during the process.</span>

<span class="sd">        Example: List ACLs for a single entity</span>
<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                acl_result = await File(id=&quot;syn123&quot;).list_acl_async()</span>
<span class="sd">                print(acl_result)</span>

<span class="sd">                # Access entity ACLs (entity_acls is a list, not a dict)</span>
<span class="sd">                for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">                    if entity_acl.entity_id == &quot;syn123&quot;:</span>
<span class="sd">                        # Access individual ACL entries</span>
<span class="sd">                        for acl_entry in entity_acl.acl_entries:</span>
<span class="sd">                            if acl_entry.principal_id == &quot;273948&quot;:</span>
<span class="sd">                                print(f&quot;Principal 273948 has permissions: {acl_entry.permissions}&quot;)</span>

<span class="sd">                # I can also access the ACL for the file itself</span>
<span class="sd">                print(acl_result.entity_acl)</span>

<span class="sd">                print(acl_result)</span>

<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>

<span class="sd">        Example: List ACLs recursively for a folder and all its children</span>
<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import Folder</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True</span>
<span class="sd">                )</span>

<span class="sd">                # Access each entity&#39;s ACL (entity_acls is a list)</span>
<span class="sd">                for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">                    print(f&quot;Entity {entity_acl.entity_id} has ACL with {len(entity_acl.acl_entries)} principals&quot;)</span>

<span class="sd">                # I can also access the ACL for the folder itself</span>
<span class="sd">                print(acl_result.entity_acl)</span>

<span class="sd">                # List ACLs for only folder entities</span>
<span class="sd">                folder_acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True,</span>
<span class="sd">                    target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">                )</span>

<span class="sd">                # List ACLs for specific entity types (e.g., tables and views)</span>
<span class="sd">                table_view_acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True,</span>
<span class="sd">                    target_entity_types=[&quot;table&quot;, &quot;entityview&quot;, &quot;materializedview&quot;]</span>
<span class="sd">                )</span>

<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>

<span class="sd">        Example: List ACLs with ASCII tree visualization</span>
<span class="sd">            When `log_tree=True`, the ACLs will be logged in a tree format. Additionally,</span>
<span class="sd">            the `ascii_tree` attribute of the AclListResult will contain the ASCII tree</span>
<span class="sd">            representation of the ACLs.</span>

<span class="sd">            ```python</span>
<span class="sd">            import asyncio</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import Folder</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            async def main():</span>
<span class="sd">                acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                    recursive=True,</span>
<span class="sd">                    include_container_content=True,</span>
<span class="sd">                    log_tree=True, # Enable ASCII tree logging</span>
<span class="sd">                )</span>

<span class="sd">                # The ASCII tree representation of the ACLs will also be available</span>
<span class="sd">                # in acl_result.ascii_tree</span>
<span class="sd">                print(acl_result.ascii_tree)</span>

<span class="sd">            asyncio.run(main())</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The entity must have an ID to list ACLs.&quot;</span><span class="p">)</span>

        <span class="n">normalized_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_target_entity_types</span><span class="p">(</span><span class="n">target_entity_types</span><span class="p">)</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">Synapse</span><span class="o">.</span><span class="n">get_client</span><span class="p">(</span><span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">)</span>

        <span class="n">all_acls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">all_entities</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Only update progress bar for self ACL if we&#39;re the top-level call (not recursive)</span>
        <span class="c1"># When _progress_bar is passed, it means this is a recursive call and the parent</span>
        <span class="c1"># is managing progress updates</span>
        <span class="n">update_progress_for_self</span> <span class="o">=</span> <span class="n">_progress_bar</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="n">acl</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_entity_acl</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="n">progress_bar</span><span class="o">=</span><span class="n">_progress_bar</span> <span class="k">if</span> <span class="n">update_progress_for_self</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">acl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">all_acls</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">acl</span>
        <span class="n">all_entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">should_process_children</span> <span class="o">=</span> <span class="p">(</span><span class="n">recursive</span> <span class="ow">or</span> <span class="n">include_container_content</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sync_from_synapse_async&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">should_process_children</span> <span class="ow">and</span> <span class="p">(</span><span class="n">recursive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">include_container_content</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;When recursive=True, include_container_content must also be True. &quot;</span>
                <span class="s2">&quot;Setting recursive=True with include_container_content=False has no effect.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">should_process_children</span> <span class="ow">and</span> <span class="n">_progress_bar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">shared_download_progress_bar</span><span class="p">(</span>
                <span class="n">file_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="n">custom_message</span><span class="o">=</span><span class="s2">&quot;Collecting ACLs...&quot;</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span> <span class="k">as</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_children_with_progress</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">normalized_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
                    <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                    <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                    <span class="n">all_entities</span><span class="o">=</span><span class="n">all_entities</span><span class="p">,</span>
                    <span class="n">all_acls</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span>
                    <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="c1"># Ensure progress bar reaches 100% completion</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">remaining</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">n</span>
                        <span class="k">if</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">&gt;</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">n</span>
                        <span class="k">else</span> <span class="mi">0</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">should_process_children</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_children_with_progress</span><span class="p">(</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="n">normalized_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
                <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                <span class="n">all_entities</span><span class="o">=</span><span class="n">all_entities</span><span class="p">,</span>
                <span class="n">all_acls</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span>
                <span class="n">progress_bar</span><span class="o">=</span><span class="n">_progress_bar</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">current_acl</span> <span class="o">=</span> <span class="n">all_acls</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">acl_result</span> <span class="o">=</span> <span class="n">AclListResult</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span>
            <span class="n">all_acl_dict</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span> <span class="n">current_acl_dict</span><span class="o">=</span><span class="n">current_acl</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">log_tree</span><span class="p">:</span>
            <span class="n">logged_tree</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_acl_tree</span><span class="p">(</span><span class="n">acl_result</span><span class="p">,</span> <span class="n">all_entities</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>
            <span class="n">acl_result</span><span class="o">.</span><span class="n">ascii_tree</span> <span class="o">=</span> <span class="n">logged_tree</span>

        <span class="k">return</span> <span class="n">acl_result</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_get_current_entity_acl</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span> <span class="n">progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the ACL for the current entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>
<span class="sd">            progress_bar: Progress bar to update after operation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary mapping principal IDs to permission lists, or None if no ACL exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">acl_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_entity_acl</span><span class="p">(</span>
                <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span>
            <span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_acl_response</span><span class="p">(</span><span class="n">acl_response</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> inherits permissions from its parent (no local ACL).&quot;</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_acl_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">acl_response</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse the ACL response from the API into the expected format.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            acl_response: The raw ACL response from the API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary mapping principal IDs to permission lists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parsed_acl</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="s2">&quot;resourceAccess&quot;</span> <span class="ow">in</span> <span class="n">acl_response</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">resource_access</span> <span class="ow">in</span> <span class="n">acl_response</span><span class="p">[</span><span class="s2">&quot;resourceAccess&quot;</span><span class="p">]:</span>
                <span class="n">principal_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource_access</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;principalId&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="n">access_types</span> <span class="o">=</span> <span class="n">resource_access</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;accessType&quot;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="n">principal_id</span> <span class="ow">and</span> <span class="n">access_types</span><span class="p">:</span>
                    <span class="n">parsed_acl</span><span class="p">[</span><span class="n">principal_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">access_types</span>

        <span class="k">return</span> <span class="n">parsed_acl</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_collect_entities</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">collect_acls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">collect_self</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">all_acls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span>
        <span class="n">Union</span><span class="p">[</span>
            <span class="s2">&quot;File&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Folder&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EntityView&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Table&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MaterializedView&quot;</span><span class="p">,</span>
            <span class="s2">&quot;VirtualTable&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DatasetCollection&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SubmissionView&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unified method to collect entities, their ACLs, or both based on parameters.</span>

<span class="sd">        This method replaces multiple specialized collection methods with a single,</span>
<span class="sd">        configurable approach that can:</span>
<span class="sd">        1. Collect entity objects</span>
<span class="sd">        2. Collect ACLs from entities (collect_acls=True)</span>
<span class="sd">        3. Handle both direct container contents and recursive collection</span>
<span class="sd">        4. Filter by entity types</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>
<span class="sd">            target_entity_types: A list of normalized entity types to process.</span>
<span class="sd">            progress_bar: Progress bar instance to update as tasks complete.</span>
<span class="sd">            include_container_content: Whether to include the content of containers.</span>
<span class="sd">            recursive: Whether to process recursively.</span>
<span class="sd">            collect_acls: Whether to collect ACLs from entities.</span>
<span class="sd">            collect_self: If True, include the current entity in the results.</span>
<span class="sd">            all_acls: Dictionary to accumulate ACL results if collecting ACLs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Returns a list of entity objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">collect_self</span><span class="p">:</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">collect_acls</span> <span class="ow">and</span> <span class="n">all_acls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

                <span class="n">entity_acls</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_acl_async</span><span class="p">(</span>
                    <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">target_entity_types</span><span class="o">=</span><span class="n">target_entity_types</span><span class="p">,</span>
                    <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">_progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">all_acls</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">entity_acls</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">should_process_children</span> <span class="o">=</span> <span class="p">(</span><span class="n">recursive</span> <span class="ow">or</span> <span class="n">include_container_content</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sync_from_synapse_async&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">should_process_children</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synced_from_synapse</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_from_synapse_async</span><span class="p">(</span>
                    <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">download_file</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">include_activity</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">include_container_content</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">entity_type</span><span class="p">,</span> <span class="n">plural_attr</span> <span class="ow">in</span> <span class="n">ENTITY_TYPE_MAPPING</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="n">target_entity_types</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="n">plural_attr</span>
                    <span class="p">):</span>
                        <span class="n">entities_list</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plural_attr</span><span class="p">,</span> <span class="p">[])</span>

                        <span class="k">if</span> <span class="n">collect_acls</span> <span class="ow">and</span> <span class="n">all_acls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">progress_bar</span><span class="p">:</span>
                            <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">entities_list</span><span class="p">)</span>
                            <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

                        <span class="k">if</span> <span class="n">collect_acls</span> <span class="ow">and</span> <span class="n">all_acls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">entity_acl_tasks</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities_list</span><span class="p">:</span>
                                <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
                                <span class="n">entity_acl_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                    <span class="n">entity</span><span class="o">.</span><span class="n">list_acl_async</span><span class="p">(</span>
                                        <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                        <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="n">entity_type</span><span class="p">],</span>
                                        <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                                        <span class="n">_progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                                    <span class="p">)</span>
                                <span class="p">)</span>

                            <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span>
                                <span class="n">entity_acl_tasks</span>
                            <span class="p">):</span>
                                <span class="n">entity_acls</span> <span class="o">=</span> <span class="k">await</span> <span class="n">completed_task</span>
                                <span class="n">all_acls</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">entity_acls</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
                                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities_list</span><span class="p">:</span>
                                <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">recursive</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;folders&quot;</span><span class="p">):</span>
                <span class="n">collect_tasks</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">folders</span><span class="p">:</span>
                    <span class="n">collect_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">folder</span><span class="o">.</span><span class="n">_collect_entities</span><span class="p">(</span>
                            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                            <span class="n">target_entity_types</span><span class="o">=</span><span class="n">target_entity_types</span><span class="p">,</span>
                            <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                            <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                            <span class="n">collect_acls</span><span class="o">=</span><span class="n">collect_acls</span><span class="p">,</span>
                            <span class="n">collect_self</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">all_acls</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span>
                            <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>

                <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">collect_tasks</span><span class="p">):</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">completed_task</span>
                    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">entities</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">entities</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_build_and_log_run_tree</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">BenefactorTracker</span><span class="p">,</span>
        <span class="n">progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">collected_entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;AccessControllable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_acl_details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build and log comprehensive tree showing ACL deletion impacts.</span>

<span class="sd">        Creates a detailed visualization of which entities will have ACLs deleted,</span>
<span class="sd">        how inheritance will change, and which permissions will be affected.</span>
<span class="sd">        The tree uses visual indicators to show current vs future state.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>
<span class="sd">            benefactor_tracker: Tracker containing all entity relationships.</span>
<span class="sd">            progress_bar: Optional progress bar to update during dry run analysis.</span>
<span class="sd">            collected_entities: List of entity objects that have been collected.</span>
<span class="sd">            include_self: Whether to include self in the deletion analysis.</span>
<span class="sd">            show_acl_details: Whether to display current ACL details for entities that will change.</span>
<span class="sd">            show_files_in_containers: Whether to show files within containers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tree_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_tree_data</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span> <span class="n">collected_entities</span><span class="o">=</span><span class="n">collected_entities</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tree_data</span><span class="p">[</span><span class="s2">&quot;entities_by_id&quot;</span><span class="p">]:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;[DRY RUN] No entities available for deletion impact analysis.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">tree_output</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_dry_run_tree_async</span><span class="p">(</span>
            <span class="n">tree_data</span><span class="p">[</span><span class="s2">&quot;tree_structure&quot;</span><span class="p">],</span>
            <span class="n">benefactor_tracker</span><span class="p">,</span>
            <span class="n">include_self</span><span class="p">,</span>
            <span class="n">tree_data</span><span class="p">[</span><span class="s2">&quot;entities_by_id&quot;</span><span class="p">],</span>
            <span class="n">show_acl_details</span><span class="o">=</span><span class="n">show_acl_details</span><span class="p">,</span>
            <span class="n">show_files_in_containers</span><span class="o">=</span><span class="n">show_files_in_containers</span><span class="p">,</span>
            <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">dry_run</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;=== DRY RUN: Permission Deletion Impact Analysis ===&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;=== Permission Deletion Impact Analysis ===&quot;</span><span class="p">)</span>
        <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">tree_output</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">dry_run</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;=== End of Dry Run Analysis ===&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;=== End of Permission Deletion Analysis ===&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
            <span class="n">remaining</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">n</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">&gt;</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">n</span>
                <span class="k">else</span> <span class="mi">0</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_build_tree_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
        <span class="n">collected_entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;AccessControllable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build comprehensive tree data including entities and ACL structure.</span>

<span class="sd">        Consolidates entity preparation, ACL fetching, and tree structure building</span>
<span class="sd">        into a single operation that can be reused by different tree formatting functions.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>
<span class="sd">            collected_entities: List of entity objects that have been collected.</span>
<span class="sd">            benefactor_tracker: Optional tracker for managing benefactor relationships.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary containing entities_by_id, acl_result, and tree_structure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entities_by_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_entities_for_tree</span><span class="p">(</span>
            <span class="n">collected_entities</span><span class="o">=</span><span class="n">collected_entities</span>
        <span class="p">)</span>
        <span class="n">acl_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_acl_result_from_entities</span><span class="p">(</span>
            <span class="n">entities_by_id</span><span class="o">=</span><span class="n">entities_by_id</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span>
        <span class="p">)</span>
        <span class="n">tree_structure</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_acl_tree_structure</span><span class="p">(</span>
            <span class="n">acl_result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">entities_by_id</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;entities_by_id&quot;</span><span class="p">:</span> <span class="n">entities_by_id</span><span class="p">,</span>
            <span class="s2">&quot;acl_result&quot;</span><span class="p">:</span> <span class="n">acl_result</span><span class="p">,</span>
            <span class="s2">&quot;tree_structure&quot;</span><span class="p">:</span> <span class="n">tree_structure</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_prepare_entities_for_tree</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">collected_entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span>
                <span class="s2">&quot;File&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Folder&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EntityView&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Table&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MaterializedView&quot;</span><span class="p">,</span>
                <span class="s2">&quot;VirtualTable&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DatasetCollection&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SubmissionView&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">Union</span><span class="p">[</span>
            <span class="s2">&quot;File&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Folder&quot;</span><span class="p">,</span>
            <span class="s2">&quot;EntityView&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Table&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MaterializedView&quot;</span><span class="p">,</span>
            <span class="s2">&quot;VirtualTable&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DatasetCollection&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SubmissionView&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare entity dictionary for tree building operations.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            collected_entities: List of entity objects that have been collected.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary mapping entity IDs to entity objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">collected_entities</span><span class="p">:</span>
            <span class="n">entities_by_id</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">entity</span>
                <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">collected_entities</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">id</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entities_by_id</span><span class="p">:</span>
                <span class="n">entities_by_id</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">entities_by_id</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="n">entities_by_id</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="k">return</span> <span class="n">entities_by_id</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_build_acl_result_from_entities</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entities_by_id</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Union</span><span class="p">[</span>
                <span class="s2">&quot;File&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Folder&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EntityView&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Table&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MaterializedView&quot;</span><span class="p">,</span>
                <span class="s2">&quot;VirtualTable&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DatasetCollection&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SubmissionView&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">],</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AclListResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build AclListResult from a dictionary of entities by fetching their ACL information.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entities_by_id: Dictionary mapping entity IDs to entity objects.</span>
<span class="sd">            client: The Synapse client instance to use for API calls.</span>

<span class="sd">        Returns:</span>
<span class="sd">            AclListResult containing ACL information for all entities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.core.models.acl</span><span class="w"> </span><span class="kn">import</span> <span class="n">AclEntry</span><span class="p">,</span> <span class="n">EntityAcl</span>

        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">fetch_entity_acl</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EntityAcl</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Helper function to fetch ACL for a single entity.&quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">acl_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_entity_acl</span><span class="p">(</span>
                    <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span>
                <span class="p">)</span>
                <span class="n">acl_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_acl_response</span><span class="p">(</span><span class="n">acl_response</span><span class="p">)</span>

                <span class="n">acl_entries</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">principal_id</span><span class="p">,</span> <span class="n">permissions</span> <span class="ow">in</span> <span class="n">acl_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">acl_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">AclEntry</span><span class="p">(</span>
                            <span class="n">principal_id</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">principal_id</span><span class="p">),</span> <span class="n">permissions</span><span class="o">=</span><span class="n">permissions</span>
                        <span class="p">)</span>
                    <span class="p">)</span>

                <span class="k">return</span> <span class="n">EntityAcl</span><span class="p">(</span><span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">acl_entries</span><span class="o">=</span><span class="n">acl_entries</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">404</span><span class="p">:</span>
                    <span class="k">raise</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="n">entity_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">entities_by_id</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">acl_tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">fetch_entity_acl</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">entity_ids</span><span class="p">]</span>

        <span class="n">entity_acls</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">acl_tasks</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">completed_task</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">entity_acls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">SynapseHTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">404</span><span class="p">:</span>
                    <span class="k">raise</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>

        <span class="k">return</span> <span class="n">AclListResult</span><span class="p">(</span><span class="n">all_entity_acls</span><span class="o">=</span><span class="n">entity_acls</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_fetch_user_group_info_from_tree</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">tree_structure</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="s2">&quot;Synapse&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch user and group information for all principals found in a tree structure.</span>

<span class="sd">        Extracts all principal IDs from ACL entries within the tree structure and</span>
<span class="sd">        fetches their corresponding user/group names in a single batch operation.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            tree_structure: Tree structure containing entity metadata with ACL information.</span>
<span class="sd">            synapse_client: Synapse client for API calls.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary mapping principal IDs to user/group names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entity_metadata</span> <span class="o">=</span> <span class="n">tree_structure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entity_metadata&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_user_group_info</span><span class="p">(</span><span class="n">entity_metadata</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_fetch_user_group_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="s2">&quot;Synapse&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch user and group information for all principals found in ACLs.</span>

<span class="sd">        Scans through entity metadata to collect all unique principal IDs from</span>
<span class="sd">        ACL entries, then fetches their user/group information in a single batch call.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity_metadata: Dictionary containing entity metadata with ACL information.</span>
<span class="sd">            synapse_client: Synapse client for API calls.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary mapping principal IDs to user/group names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_principal_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_principal_ids_from_metadata</span><span class="p">(</span><span class="n">entity_metadata</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">all_principal_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">user_group_header_batch</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_user_group_headers_batch</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">all_principal_ids</span><span class="p">),</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">user_group_header_batch</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">user_group_header</span><span class="p">[</span><span class="s2">&quot;ownerId&quot;</span><span class="p">]:</span> <span class="n">user_group_header</span><span class="p">[</span><span class="s2">&quot;userName&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">user_group_header</span> <span class="ow">in</span> <span class="n">user_group_header_batch</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_extract_principal_ids_from_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract all unique principal IDs from entity metadata ACL entries.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity_metadata: Dictionary containing entity metadata with ACL information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Set of principal ID strings found in the metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_principal_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">acl</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">acl</span><span class="p">,</span> <span class="s2">&quot;acl_entries&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">acl_entry</span> <span class="ow">in</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">principal_id</span><span class="p">:</span>
                        <span class="n">all_principal_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">acl_entry</span><span class="o">.</span><span class="n">principal_id</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">all_principal_ids</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_format_dry_run_tree_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tree_structure</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">BenefactorTracker</span><span class="p">,</span>
        <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">entities_by_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Dict</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span>
                <span class="n">Union</span><span class="p">[</span>
                    <span class="s2">&quot;File&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Folder&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;EntityView&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Table&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;MaterializedView&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;VirtualTable&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;DatasetCollection&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;SubmissionView&quot;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">show_acl_details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Synapse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format tree structure for dry run analysis showing ACL deletion impacts.</span>

<span class="sd">        Creates a comprehensive visualization showing which entities will have ACLs deleted,</span>
<span class="sd">        how inheritance will change, and which permissions will be affected. Uses icons</span>
<span class="sd">        and status indicators to clearly show current vs future state.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            tree_structure: The tree structure dictionary from _build_acl_tree_structure.</span>
<span class="sd">            benefactor_tracker: Tracker containing benefactor relationships.</span>
<span class="sd">            include_self: Whether to include self in the deletion analysis.</span>
<span class="sd">            entities_by_id: Dictionary mapping entity IDs to entity objects.</span>
<span class="sd">            show_acl_details: Whether to display current ACL details for entities that will change.</span>
<span class="sd">            show_files_in_containers: Whether to show files within containers.</span>
<span class="sd">            synapse_client: Synapse client for API calls.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Formatted ASCII tree string showing deletion impact analysis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entity_metadata</span> <span class="o">=</span> <span class="n">tree_structure</span><span class="p">[</span><span class="s2">&quot;entity_metadata&quot;</span><span class="p">]</span>
        <span class="n">children_map</span> <span class="o">=</span> <span class="n">tree_structure</span><span class="p">[</span><span class="s2">&quot;children_map&quot;</span><span class="p">]</span>
        <span class="n">root_entities</span> <span class="o">=</span> <span class="n">tree_structure</span><span class="p">[</span><span class="s2">&quot;root_entities&quot;</span><span class="p">]</span>

        <span class="n">user_group_info_map</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_user_group_info_from_tree</span><span class="p">(</span>
            <span class="n">tree_structure</span><span class="p">,</span> <span class="n">synapse_client</span>
        <span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_augment_tree_with_missing_entities</span><span class="p">(</span>
            <span class="n">entity_metadata</span><span class="p">,</span>
            <span class="n">children_map</span><span class="p">,</span>
            <span class="n">benefactor_tracker</span><span class="p">,</span>
            <span class="n">include_self</span><span class="p">,</span>
            <span class="n">entities_by_id</span><span class="p">,</span>
            <span class="n">synapse_client</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dry_run_tree_lines</span><span class="p">(</span>
            <span class="n">entity_metadata</span><span class="p">,</span>
            <span class="n">children_map</span><span class="p">,</span>
            <span class="n">root_entities</span><span class="p">,</span>
            <span class="n">benefactor_tracker</span><span class="p">,</span>
            <span class="n">include_self</span><span class="p">,</span>
            <span class="n">show_acl_details</span><span class="p">,</span>
            <span class="n">show_files_in_containers</span><span class="p">,</span>
            <span class="n">user_group_info_map</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_augment_tree_with_missing_entities</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">children_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">BenefactorTracker</span><span class="p">,</span>
        <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">entities_by_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Dict</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span>
                <span class="n">Union</span><span class="p">[</span>
                    <span class="s2">&quot;File&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Folder&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;EntityView&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Table&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;MaterializedView&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;VirtualTable&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;DatasetCollection&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;SubmissionView&quot;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">]</span>
        <span class="p">],</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Synapse&quot;</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add missing entity information needed for comprehensive tree display.</span>

<span class="sd">        Fetches metadata for entities that are affected by ACL deletions but not</span>
<span class="sd">        already present in the tree structure, ensuring complete impact visualization.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity_metadata: Dictionary to augment with missing entity information.</span>
<span class="sd">            children_map: Dictionary mapping parent entities to their children.</span>
<span class="sd">            benefactor_tracker: Tracker containing benefactor relationships.</span>
<span class="sd">            include_self: Whether to include self in the deletion analysis.</span>
<span class="sd">            entities_by_id: Dictionary mapping entity IDs to entity objects.</span>
<span class="sd">            synapse_client: Synapse client for API calls.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_missing_entity_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">has_local_acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">is_self_entity</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
            <span class="n">will_be_deleted</span> <span class="o">=</span> <span class="n">has_local_acl</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_self_entity</span> <span class="ow">or</span> <span class="n">include_self</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">will_be_deleted</span><span class="p">:</span>
                <span class="n">affected_children</span> <span class="o">=</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">benefactor_children</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="n">entity_id</span><span class="p">,</span> <span class="p">[]</span>
                <span class="p">)</span>
                <span class="n">children</span> <span class="o">=</span> <span class="n">children_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">[])</span>
                <span class="n">children_not_in_tree</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">child_id</span>
                    <span class="k">for</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="n">affected_children</span>
                    <span class="k">if</span> <span class="n">child_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">children</span>
                <span class="p">]</span>
                <span class="n">all_missing_entity_ids</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">children_not_in_tree</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">all_missing_entity_ids</span><span class="p">:</span>
            <span class="n">missing_entity_details</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_missing_entity_details</span><span class="p">(</span>
                <span class="nb">list</span><span class="p">(</span><span class="n">all_missing_entity_ids</span><span class="p">),</span>
                <span class="n">entity_metadata</span><span class="p">,</span>
                <span class="n">entities_by_id</span><span class="p">,</span>
                <span class="n">synapse_client</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">entity_metadata</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">missing_entity_details</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_fetch_missing_entity_details</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">entity_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">entities_by_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Dict</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span>
                <span class="n">Union</span><span class="p">[</span>
                    <span class="s2">&quot;File&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Folder&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;EntityView&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Table&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;MaterializedView&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;VirtualTable&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;DatasetCollection&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;SubmissionView&quot;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">]</span>
        <span class="p">],</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Synapse&quot;</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch entity details for entities not already in metadata.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity_ids: List of entity IDs to fetch details for.</span>
<span class="sd">            entity_metadata: Existing entity metadata to check against.</span>
<span class="sd">            entities_by_id: Dictionary mapping entity IDs to entity objects.</span>
<span class="sd">            synapse_client: Synapse client for API calls.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary mapping entity IDs to their metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing_entities</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">entity_id_to_task</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">entity_ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entity_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">entities_by_id</span> <span class="ow">and</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">entities_by_id</span><span class="p">:</span>
                    <span class="n">entity</span> <span class="o">=</span> <span class="n">entities_by_id</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
                    <span class="n">missing_entities</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                        <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                        <span class="s2">&quot;acl&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">task</span> <span class="o">=</span> <span class="n">get_entity_benefactor</span><span class="p">(</span>
                        <span class="n">entity_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span>
                    <span class="p">)</span>
                    <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                    <span class="n">entity_id_to_task</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">task</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">tasks</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">missing_entities</span>

        <span class="k">for</span> <span class="n">completed_task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">tasks</span><span class="p">):</span>
            <span class="n">header</span> <span class="o">=</span> <span class="k">await</span> <span class="n">completed_task</span>

            <span class="n">entity_id</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">entity_id_to_task</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">task</span> <span class="o">==</span> <span class="n">completed_task</span><span class="p">:</span>
                    <span class="n">entity_id</span> <span class="o">=</span> <span class="n">eid</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="n">entity_id</span><span class="p">:</span>
                <span class="n">entity_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_entity_type</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
                <span class="n">missing_entities</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">header</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="p">,</span>
                    <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;acl&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="p">}</span>

        <span class="k">return</span> <span class="n">missing_entities</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_normalize_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Normalize entity type string to a readable format.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity_type: Raw entity type string from API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Normalized entity type string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">entity_type</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Unknown&quot;</span>

        <span class="k">if</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;org.sagebionetworks.repo.model.&quot;</span><span class="p">):</span>
            <span class="n">entity_type</span> <span class="o">=</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;FileEntity&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;File&quot;</span>

        <span class="k">return</span> <span class="n">entity_type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_build_dry_run_tree_lines</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">children_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">root_entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">BenefactorTracker</span><span class="p">,</span>
        <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">show_acl_details</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">user_group_info_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build the lines for the dry run tree display.</span>

<span class="sd">        Creates the actual tree visualization with all status indicators,</span>
<span class="sd">        benefactor changes, and impact analysis.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity_metadata: Dictionary containing entity metadata with ACL information.</span>
<span class="sd">            children_map: Dictionary mapping parent entities to their children.</span>
<span class="sd">            root_entities: List of root entity IDs for the tree.</span>
<span class="sd">            benefactor_tracker: Tracker containing benefactor relationships.</span>
<span class="sd">            include_self: Whether to include self in the deletion analysis.</span>
<span class="sd">            show_acl_details: Whether to display current ACL details.</span>
<span class="sd">            show_files_in_containers: Whether to show files within containers.</span>
<span class="sd">            user_group_info_map: Dictionary mapping principal IDs to user/group names.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of strings representing the tree lines.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">find_ultimate_benefactor_for_affected</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Recursively find the ultimate benefactor for an affected entity.&quot;&quot;&quot;</span>
            <span class="n">parent_id</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parent_id&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parent_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">entity_id</span>

            <span class="k">if</span> <span class="n">parent_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="p">:</span>
                <span class="n">parent_metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">parent_id</span><span class="p">]</span>
                <span class="n">parent_has_local_acl</span> <span class="o">=</span> <span class="n">parent_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="n">parent_is_self</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">parent_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
                <span class="n">parent_will_be_deleted</span> <span class="o">=</span> <span class="n">parent_has_local_acl</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="n">parent_is_self</span> <span class="ow">or</span> <span class="n">include_self</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">parent_will_be_deleted</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">find_ultimate_benefactor_for_affected</span><span class="p">(</span><span class="n">parent_id</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">parent_has_local_acl</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">parent_id</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">find_ultimate_benefactor_for_affected</span><span class="p">(</span><span class="n">parent_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">parent_id</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">format_entity_with_benefactor_info</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Format entity information with benefactor and impact details.&quot;&quot;&quot;</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="n">entity_type</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

            <span class="n">current_benefactor</span> <span class="o">=</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">entity_benefactors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">entity_id</span><span class="p">,</span> <span class="n">entity_id</span>
            <span class="p">)</span>
            <span class="n">affected_children</span> <span class="o">=</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">benefactor_children</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">entity_id</span><span class="p">,</span> <span class="p">[]</span>
            <span class="p">)</span>

            <span class="n">has_local_acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">is_self_entity</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
            <span class="n">will_be_deleted</span> <span class="o">=</span> <span class="n">has_local_acl</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_self_entity</span> <span class="ow">or</span> <span class="n">include_self</span><span class="p">)</span>

            <span class="n">base_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">) [</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">]&quot;</span>

            <span class="k">if</span> <span class="n">will_be_deleted</span><span class="p">:</span>
                <span class="n">status_info</span> <span class="o">=</span> <span class="s2">&quot;   WILL DELETE LOCAL ACL&quot;</span>
                <span class="n">ultimate_benefactor</span> <span class="o">=</span> <span class="n">find_ultimate_benefactor_for_affected</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ultimate_benefactor</span> <span class="ow">and</span> <span class="n">ultimate_benefactor</span> <span class="o">!=</span> <span class="n">entity_id</span><span class="p">:</span>
                    <span class="n">status_info</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Will inherit from </span><span class="si">{</span><span class="n">ultimate_benefactor</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="n">affected_children</span><span class="p">:</span>
                    <span class="n">status_info</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  Affects </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">affected_children</span><span class="p">)</span><span class="si">}</span><span class="s2"> children&quot;</span>
            <span class="k">elif</span> <span class="n">has_local_acl</span> <span class="ow">and</span> <span class="n">is_self_entity</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">include_self</span><span class="p">:</span>
                <span class="n">status_info</span> <span class="o">=</span> <span class="s2">&quot;  LOCAL ACL WILL NOT BE DELETED&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">will_benefactor_change</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">new_benefactor</span> <span class="o">=</span> <span class="n">current_benefactor</span>

                <span class="k">for</span> <span class="n">ancestor_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">ancestor_metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">ancestor_id</span><span class="p">]</span>
                    <span class="n">ancestor_has_local_acl</span> <span class="o">=</span> <span class="n">ancestor_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="n">ancestor_is_self</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ancestor_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
                    <span class="n">ancestor_will_be_deleted</span> <span class="o">=</span> <span class="n">ancestor_has_local_acl</span> <span class="ow">and</span> <span class="p">(</span>
                        <span class="ow">not</span> <span class="n">ancestor_is_self</span> <span class="ow">or</span> <span class="n">include_self</span>
                    <span class="p">)</span>

                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">ancestor_will_be_deleted</span>
                        <span class="ow">and</span> <span class="n">entity_id</span>
                        <span class="ow">in</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">benefactor_children</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ancestor_id</span><span class="p">,</span> <span class="p">[])</span>
                    <span class="p">):</span>
                        <span class="n">will_benefactor_change</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">new_benefactor</span> <span class="o">=</span> <span class="n">find_ultimate_benefactor_for_affected</span><span class="p">(</span>
                            <span class="n">entity_id</span>
                        <span class="p">)</span>
                        <span class="k">break</span>

                <span class="k">if</span> <span class="n">will_benefactor_change</span><span class="p">:</span>
                    <span class="n">status_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;  Will inherit from </span><span class="si">{</span><span class="n">new_benefactor</span><span class="si">}</span><span class="s2"> (currently </span><span class="si">{</span><span class="n">current_benefactor</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">current_benefactor</span> <span class="o">!=</span> <span class="n">entity_id</span><span class="p">:</span>
                        <span class="n">status_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;   Inherits from </span><span class="si">{</span><span class="n">current_benefactor</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">status_info</span> <span class="o">=</span> <span class="s2">&quot;  No local ACL&quot;</span>

            <span class="k">return</span> <span class="n">base_info</span> <span class="o">+</span> <span class="n">status_info</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">format_principal_with_impact</span><span class="p">(</span>
            <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">principal_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">permissions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Format principal information with permission impact.&quot;&quot;&quot;</span>
            <span class="n">permission_list</span> <span class="o">=</span> <span class="n">permissions</span> <span class="k">if</span> <span class="n">permissions</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;None&quot;</span><span class="p">]</span>

            <span class="n">team_name</span> <span class="o">=</span> <span class="n">user_group_info_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">principal_id</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">team_name</span><span class="p">:</span>
                <span class="n">principal_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">team_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">principal_id</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">principal_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Principal </span><span class="si">{</span><span class="n">principal_id</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="n">is_self_entity</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
            <span class="n">will_be_deleted</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">is_self_entity</span> <span class="ow">or</span> <span class="n">include_self</span>

            <span class="k">if</span> <span class="n">will_be_deleted</span><span class="p">:</span>
                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">principal_info</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">permission_list</span><span class="si">}</span><span class="s2">  WILL BE REMOVED&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">is_entity_relevant</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Determine if an entity should be included in the trimmed tree.&quot;&quot;&quot;</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">has_local_acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">is_self_entity</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
            <span class="n">will_be_deleted</span> <span class="o">=</span> <span class="n">has_local_acl</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_self_entity</span> <span class="ow">or</span> <span class="n">include_self</span><span class="p">)</span>
            <span class="n">entity_type</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">will_be_deleted</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

            <span class="n">will_benefactor_change</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">ancestor_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">ancestor_metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">ancestor_id</span><span class="p">]</span>
                <span class="n">ancestor_has_local_acl</span> <span class="o">=</span> <span class="n">ancestor_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="n">ancestor_is_self</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ancestor_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
                <span class="n">ancestor_will_be_deleted</span> <span class="o">=</span> <span class="n">ancestor_has_local_acl</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="n">ancestor_is_self</span> <span class="ow">or</span> <span class="n">include_self</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">ancestor_will_be_deleted</span>
                    <span class="ow">and</span> <span class="n">entity_id</span>
                    <span class="ow">in</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">benefactor_children</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ancestor_id</span><span class="p">,</span> <span class="p">[])</span>
                <span class="p">):</span>
                    <span class="n">will_benefactor_change</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">show_files_in_containers</span> <span class="ow">and</span> <span class="s2">&quot;file&quot;</span> <span class="ow">in</span> <span class="n">entity_type</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">will_be_deleted</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">will_benefactor_change</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_relevant_children</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Get only the children that are relevant for the trimmed tree.&quot;&quot;&quot;</span>
            <span class="n">all_children</span> <span class="o">=</span> <span class="n">children_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">relevant_children</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="n">all_children</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_entity_relevant</span><span class="p">(</span><span class="n">child_id</span><span class="p">):</span>
                    <span class="n">relevant_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_id</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">has_relevant_descendants</span><span class="p">(</span><span class="n">child_id</span><span class="p">):</span>
                    <span class="n">relevant_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_id</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">relevant_children</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">has_relevant_descendants</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Check if an entity has any relevant descendants.&quot;&quot;&quot;</span>
            <span class="n">children</span> <span class="o">=</span> <span class="n">children_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">for</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_entity_relevant</span><span class="p">(</span><span class="n">child_id</span><span class="p">)</span> <span class="ow">or</span> <span class="n">has_relevant_descendants</span><span class="p">(</span><span class="n">child_id</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">build_tree_recursive</span><span class="p">(</span>
            <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">is_last</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">is_root</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Recursively build the enhanced dry run tree.&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="n">is_root</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">format_entity_with_benefactor_info</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">extension_prefix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current_prefix</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s2">&quot; &quot;</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">current_prefix</span><span class="si">}{</span><span class="n">format_entity_with_benefactor_info</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">extension_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;    &quot;</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s2">&quot;   &quot;</span><span class="p">)</span>

            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span>
            <span class="n">acl_principals</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">show_acl_details</span>
                <span class="ow">and</span> <span class="n">acl</span>
                <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">acl</span><span class="p">,</span> <span class="s2">&quot;acl_entries&quot;</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span>
            <span class="p">):</span>
                <span class="k">for</span> <span class="n">acl_entry</span> <span class="ow">in</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
                    <span class="n">principal_id</span> <span class="o">=</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">principal_id</span>
                    <span class="n">permissions</span> <span class="o">=</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">permissions</span> <span class="k">if</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">permissions</span> <span class="k">else</span> <span class="p">[]</span>
                    <span class="n">acl_principals</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">principal_id</span><span class="p">,</span> <span class="n">permissions</span><span class="p">))</span>

                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">principal_id</span><span class="p">,</span> <span class="n">permissions</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">acl_principals</span><span class="p">):</span>
                    <span class="n">is_last_principal</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">acl_principals</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">get_relevant_children</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span>
                    <span class="n">principal_prefix</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="k">if</span> <span class="n">is_last_principal</span> <span class="k">else</span> <span class="s2">&quot; &quot;</span>
                    <span class="n">formatted_principal</span> <span class="o">=</span> <span class="n">format_principal_with_impact</span><span class="p">(</span>
                        <span class="n">entity_id</span><span class="p">,</span> <span class="n">principal_id</span><span class="p">,</span> <span class="n">permissions</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">formatted_principal</span><span class="p">:</span>
                        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">extension_prefix</span><span class="si">}{</span><span class="n">principal_prefix</span><span class="si">}{</span><span class="n">formatted_principal</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

            <span class="n">affected_children</span> <span class="o">=</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">benefactor_children</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">entity_id</span><span class="p">,</span> <span class="p">[]</span>
            <span class="p">)</span>
            <span class="n">relevant_children</span> <span class="o">=</span> <span class="n">get_relevant_children</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span>

            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">has_local_acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">is_self_entity</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
            <span class="n">will_be_deleted</span> <span class="o">=</span> <span class="n">has_local_acl</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_self_entity</span> <span class="ow">or</span> <span class="n">include_self</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">will_be_deleted</span> <span class="ow">and</span> <span class="n">affected_children</span><span class="p">:</span>
                <span class="n">children_not_in_tree</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">child_id</span>
                    <span class="k">for</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="n">affected_children</span>
                    <span class="k">if</span> <span class="n">child_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">relevant_children</span>
                    <span class="ow">and</span> <span class="n">is_entity_relevant</span><span class="p">(</span><span class="n">child_id</span><span class="p">)</span>
                <span class="p">]</span>

                <span class="k">if</span> <span class="n">children_not_in_tree</span><span class="p">:</span>
                    <span class="n">all_children</span> <span class="o">=</span> <span class="n">relevant_children</span> <span class="o">+</span> <span class="n">children_not_in_tree</span>
                    <span class="n">all_children</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
                        <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">child_id</span><span class="p">:</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">child_id</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">child_id</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                    <span class="p">)</span>

                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_children</span><span class="p">):</span>
                        <span class="n">is_last_child</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_children</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>

                        <span class="k">if</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="n">children_not_in_tree</span><span class="p">:</span>
                            <span class="n">child_metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">child_id</span><span class="p">,</span> <span class="p">{})</span>
                            <span class="n">child_name</span> <span class="o">=</span> <span class="n">child_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">child_id</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                            <span class="n">child_type</span> <span class="o">=</span> <span class="n">child_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>
                            <span class="n">change_prefix</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="k">if</span> <span class="n">is_last_child</span> <span class="k">else</span> <span class="s2">&quot; &quot;</span>

                            <span class="n">new_benefactor</span> <span class="o">=</span> <span class="n">find_ultimate_benefactor_for_affected</span><span class="p">(</span>
                                <span class="n">child_id</span>
                            <span class="p">)</span>
                            <span class="n">current_benefactor</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">entity_benefactors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                    <span class="n">child_id</span><span class="p">,</span> <span class="n">child_id</span>
                                <span class="p">)</span>
                            <span class="p">)</span>

                            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">extension_prefix</span><span class="si">}{</span><span class="n">change_prefix</span><span class="si">}{</span><span class="n">child_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">child_id</span><span class="si">}</span><span class="s2">) &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">child_type</span><span class="si">}</span><span class="s2">]  Will inherit from </span><span class="si">{</span><span class="n">new_benefactor</span><span class="si">}</span><span class="s2"> (currently </span><span class="si">{</span><span class="n">current_benefactor</span><span class="si">}</span><span class="s2">)&quot;</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">build_tree_recursive</span><span class="p">(</span>
                                <span class="n">child_id</span><span class="p">,</span> <span class="n">extension_prefix</span><span class="p">,</span> <span class="n">is_last_child</span><span class="p">,</span> <span class="kc">False</span>
                            <span class="p">)</span>
                    <span class="k">return</span>

            <span class="k">if</span> <span class="n">relevant_children</span><span class="p">:</span>
                <span class="n">relevant_children</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
                    <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">child_id</span><span class="p">:</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">child_id</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">relevant_children</span><span class="p">):</span>
                    <span class="n">is_last_child</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">relevant_children</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="n">build_tree_recursive</span><span class="p">(</span>
                        <span class="n">child_id</span><span class="p">,</span> <span class="n">extension_prefix</span><span class="p">,</span> <span class="n">is_last_child</span><span class="p">,</span> <span class="kc">False</span>
                    <span class="p">)</span>

        <span class="n">entities_with_acls</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total_affected_children</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">has_local_acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">is_self_entity</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
            <span class="n">will_be_deleted</span> <span class="o">=</span> <span class="n">has_local_acl</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_self_entity</span> <span class="ow">or</span> <span class="n">include_self</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">will_be_deleted</span><span class="p">:</span>
                <span class="n">entities_with_acls</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">affected_children_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
                    <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">benefactor_children</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">[])</span>
                <span class="p">)</span>
                <span class="n">total_affected_children</span> <span class="o">+=</span> <span class="n">affected_children_count</span>

        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot; Summary: </span><span class="si">{</span><span class="n">entities_with_acls</span><span class="si">}</span><span class="s2"> entities with local ACLs to delete, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">total_affected_children</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entities_with_acls</span><span class="si">}</span><span class="s2"> entities will change inheritance&quot;</span>
        <span class="p">)</span>

        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; Legend:&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;    = Local ACL will be deleted&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;   = Local ACL will NOT be deleted&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;   = Currently inherits permissions&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;   = No local ACL (inherits from parent)&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;   = Permission that will be removed&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;   = New inheritance after deletion&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="n">relevant_roots</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">root_id</span>
            <span class="k">for</span> <span class="n">root_id</span> <span class="ow">in</span> <span class="n">root_entities</span>
            <span class="k">if</span> <span class="n">is_entity_relevant</span><span class="p">(</span><span class="n">root_id</span><span class="p">)</span> <span class="ow">or</span> <span class="n">has_relevant_descendants</span><span class="p">(</span><span class="n">root_id</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">relevant_roots</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">build_tree_recursive</span><span class="p">(</span><span class="n">relevant_roots</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">relevant_roots</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">entity_id</span><span class="p">:</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">root_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">relevant_roots</span><span class="p">):</span>
                <span class="n">is_last_root</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">relevant_roots</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="n">build_tree_recursive</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">is_last_root</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">lines</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_log_acl_tree</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">acl_result</span><span class="p">:</span> <span class="n">AclListResult</span><span class="p">,</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="s2">&quot;Folder&quot;</span><span class="p">]],</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate and log an ASCII tree representation of ACL results.</span>

<span class="sd">        Creates a hierarchical tree structure from the ACL results and displays</span>
<span class="sd">        entity hierarchies with their ACL permissions in a tree-like format using</span>
<span class="sd">        ASCII characters. This provides a clear view of the current permission</span>
<span class="sd">        structure across the entity hierarchy.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            acl_result: The ACL list result containing entity ACL information.</span>
<span class="sd">            entities: List of entity objects that have been processed.</span>
<span class="sd">            client: The Synapse client instance for API calls and logging.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">acl_result</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;No ACL results to display in tree format.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">tree_structure</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_acl_tree_structure</span><span class="p">(</span><span class="n">acl_result</span><span class="p">,</span> <span class="n">entities</span><span class="p">)</span>
        <span class="n">tree_output</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_ascii_tree_async</span><span class="p">(</span>
            <span class="n">tree_structure</span><span class="p">,</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span>
        <span class="p">)</span>

        <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ACL Tree Structure:&quot;</span><span class="p">)</span>
        <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">tree_output</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tree_output</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_build_acl_tree_structure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">acl_result</span><span class="p">:</span> <span class="n">AclListResult</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="s2">&quot;Folder&quot;</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build a hierarchical tree structure from ACL results.</span>

<span class="sd">        Creates a comprehensive tree structure that includes entity metadata,</span>
<span class="sd">        parent-child relationships, and ACL information. This structure can be</span>
<span class="sd">        used by different formatting functions to display trees in various ways.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            acl_result: The ACL list result containing entity ACL information.</span>
<span class="sd">            entities: List of entity objects to use for metadata instead of API calls.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary containing entity_metadata, children_map, and root_entities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entity_metadata</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">children_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">all_entity_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">entity_acl</span> <span class="ow">in</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entity_acl</span><span class="o">.</span><span class="n">entity_id</span><span class="p">:</span>
                <span class="n">all_entity_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entity_acl</span><span class="o">.</span><span class="n">entity_id</span><span class="p">)</span>

        <span class="n">entities_by_id</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">entities</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                    <span class="n">entities_by_id</span><span class="p">[</span><span class="n">entity</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span>
                    <span class="n">all_entity_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">all_entity_ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">entities_by_id</span><span class="p">:</span>
                <span class="n">entity</span> <span class="o">=</span> <span class="n">entities_by_id</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
                <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                    <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                    <span class="s2">&quot;acl&quot;</span><span class="p">:</span> <span class="nb">next</span><span class="p">(</span>
                        <span class="p">(</span>
                            <span class="n">acl</span>
                            <span class="k">for</span> <span class="n">acl</span> <span class="ow">in</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span>
                            <span class="k">if</span> <span class="n">acl</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">==</span> <span class="n">entity_id</span>
                        <span class="p">),</span>
                        <span class="kc">None</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;acl&quot;</span><span class="p">:</span> <span class="nb">next</span><span class="p">(</span>
                        <span class="p">(</span>
                            <span class="n">acl</span>
                            <span class="k">for</span> <span class="n">acl</span> <span class="ow">in</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span>
                            <span class="k">if</span> <span class="n">acl</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">==</span> <span class="n">entity_id</span>
                        <span class="p">),</span>
                        <span class="kc">None</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">}</span>

        <span class="n">entities_needing_parents</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">all_entity_ids</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">entities_needing_parents</span><span class="p">:</span>
            <span class="n">current_entity_id</span> <span class="o">=</span> <span class="n">entities_needing_parents</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">current_entity_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="p">:</span>
                <span class="n">parent_id</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">current_entity_id</span><span class="p">][</span><span class="s2">&quot;parent_id&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">parent_id</span> <span class="ow">and</span> <span class="n">parent_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">parent_id</span> <span class="ow">in</span> <span class="n">entities_by_id</span><span class="p">:</span>
                        <span class="n">parent_entity</span> <span class="o">=</span> <span class="n">entities_by_id</span><span class="p">[</span><span class="n">parent_id</span><span class="p">]</span>
                        <span class="n">entity_metadata</span><span class="p">[</span><span class="n">parent_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span>
                                <span class="n">parent_entity</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">parent_id</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">),</span>
                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">parent_entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parent_entity</span><span class="p">,</span> <span class="s2">&quot;parent_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                            <span class="s2">&quot;acl&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="p">}</span>
                        <span class="n">all_entity_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parent_id</span><span class="p">)</span>
                        <span class="n">entities_needing_parents</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parent_id</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">all_entity_ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="p">:</span>
                <span class="n">parent_id</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">][</span><span class="s2">&quot;parent_id&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">parent_id</span> <span class="ow">and</span> <span class="n">parent_id</span> <span class="ow">in</span> <span class="n">entity_metadata</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">parent_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">children_map</span><span class="p">:</span>
                        <span class="n">children_map</span><span class="p">[</span><span class="n">parent_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">children_map</span><span class="p">[</span><span class="n">parent_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span>

        <span class="n">root_entities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">entity_id</span> <span class="ow">in</span> <span class="n">all_entity_ids</span><span class="p">:</span>
            <span class="n">parent_id</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">][</span><span class="s2">&quot;parent_id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parent_id</span> <span class="ow">or</span> <span class="n">parent_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_entity_ids</span><span class="p">:</span>
                <span class="n">root_entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">root_entities</span><span class="p">:</span>
            <span class="n">root_entities</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_entity_ids</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">all_entity_ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">root_entities</span><span class="p">:</span>
                <span class="n">root_entities</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">root_entities</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;entity_metadata&quot;</span><span class="p">:</span> <span class="n">entity_metadata</span><span class="p">,</span>
            <span class="s2">&quot;children_map&quot;</span><span class="p">:</span> <span class="n">children_map</span><span class="p">,</span>
            <span class="s2">&quot;root_entities&quot;</span><span class="p">:</span> <span class="n">root_entities</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_format_ascii_tree_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tree_structure</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Synapse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the tree structure as ASCII art with ACL status icons.</span>

<span class="sd">        Creates a visual tree representation showing entity hierarchies with</span>
<span class="sd">        ACL status indicators. Uses ASCII art characters to show parent-child</span>
<span class="sd">        relationships and displays permission information for each entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            tree_structure: The tree structure dictionary.</span>
<span class="sd">            synapse_client: Synapse client for fetching user/group information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string containing the ASCII tree representation with ACL status indicators.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entity_metadata</span> <span class="o">=</span> <span class="n">tree_structure</span><span class="p">[</span><span class="s2">&quot;entity_metadata&quot;</span><span class="p">]</span>
        <span class="n">children_map</span> <span class="o">=</span> <span class="n">tree_structure</span><span class="p">[</span><span class="s2">&quot;children_map&quot;</span><span class="p">]</span>
        <span class="n">root_entities</span> <span class="o">=</span> <span class="n">tree_structure</span><span class="p">[</span><span class="s2">&quot;root_entities&quot;</span><span class="p">]</span>

        <span class="n">user_group_info_map</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_user_group_info_from_tree</span><span class="p">(</span>
            <span class="n">tree_structure</span><span class="p">,</span>
            <span class="n">synapse_client</span> <span class="ow">or</span> <span class="n">Synapse</span><span class="o">.</span><span class="n">get_client</span><span class="p">(</span><span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; Legend:&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;   = No local ACL (inherits from parent)&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;   = Local ACL (custom permissions)&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_acl_status_icon</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Get the appropriate ACL status icon for an entity.&quot;&quot;&quot;</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="s2">&quot;&quot;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">acl</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">acl</span><span class="p">,</span> <span class="s2">&quot;acl_entries&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">)</span>
                <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">should_show_entity</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Determine if an entity should be shown in the tree.&quot;&quot;&quot;</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">acl</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">acl</span><span class="p">,</span> <span class="s2">&quot;acl_entries&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

            <span class="n">children</span> <span class="o">=</span> <span class="n">children_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">should_show_entity</span><span class="p">(</span><span class="n">child_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="n">children</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">format_entity_info</span><span class="p">(</span><span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Format entity information with ACL status icon.&quot;&quot;&quot;</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="n">entity_type</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="n">acl_icon</span> <span class="o">=</span> <span class="n">get_acl_status_icon</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">acl_icon</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">entity_id</span><span class="si">}</span><span class="s2">) [</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">]&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">format_principal_info</span><span class="p">(</span><span class="n">principal_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">permissions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Format principal information with permissions.&quot;&quot;&quot;</span>
            <span class="n">permission_list</span> <span class="o">=</span> <span class="n">permissions</span> <span class="k">if</span> <span class="n">permissions</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;None&quot;</span><span class="p">]</span>
            <span class="n">team_name</span> <span class="o">=</span> <span class="n">user_group_info_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">principal_id</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">team_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">team_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">principal_id</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">permission_list</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;    Principal </span><span class="si">{</span><span class="n">principal_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">permission_list</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">build_tree_recursive</span><span class="p">(</span>
            <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">is_last</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Recursively build the ASCII tree.&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">should_show_entity</span><span class="p">(</span><span class="n">entity_id</span><span class="p">):</span>
                <span class="k">return</span>

            <span class="n">current_prefix</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s2">&quot; &quot;</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">current_prefix</span><span class="si">}{</span><span class="n">format_entity_info</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">metadata</span> <span class="o">=</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">]</span>
            <span class="n">acl</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;acl&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">acl</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">acl</span><span class="p">,</span> <span class="s2">&quot;acl_entries&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
                <span class="n">extension_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;    &quot;</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s2">&quot;   &quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">acl_entry</span> <span class="ow">in</span> <span class="n">acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
                    <span class="n">principal_id</span> <span class="o">=</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">principal_id</span>
                    <span class="n">permissions</span> <span class="o">=</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">permissions</span> <span class="k">if</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">permissions</span> <span class="k">else</span> <span class="p">[]</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">extension_prefix</span><span class="si">}{</span><span class="n">format_principal_info</span><span class="p">(</span><span class="n">principal_id</span><span class="p">,</span><span class="w"> </span><span class="n">permissions</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

            <span class="n">children</span> <span class="o">=</span> <span class="n">children_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">children</span><span class="p">:</span>
                <span class="n">visible_children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">child_id</span> <span class="k">for</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="n">children</span> <span class="k">if</span> <span class="n">should_show_entity</span><span class="p">(</span><span class="n">child_id</span><span class="p">)</span>
                <span class="p">]</span>
                <span class="n">visible_children</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
                    <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">child_id</span><span class="p">:</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">child_id</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">extension_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;    &quot;</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s2">&quot;   &quot;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">visible_children</span><span class="p">):</span>
                    <span class="n">is_last_child</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">visible_children</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="n">build_tree_recursive</span><span class="p">(</span><span class="n">child_id</span><span class="p">,</span> <span class="n">extension_prefix</span><span class="p">,</span> <span class="n">is_last_child</span><span class="p">)</span>

        <span class="n">visible_roots</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">root_id</span> <span class="k">for</span> <span class="n">root_id</span> <span class="ow">in</span> <span class="n">root_entities</span> <span class="k">if</span> <span class="n">should_show_entity</span><span class="p">(</span><span class="n">root_id</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_roots</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;No entities with local ACLs found.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">visible_roots</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">build_tree_recursive</span><span class="p">(</span><span class="n">visible_roots</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">visible_roots</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">entity_id</span><span class="p">:</span> <span class="n">entity_metadata</span><span class="p">[</span><span class="n">entity_id</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">root_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">visible_roots</span><span class="p">):</span>
                <span class="n">is_last_root</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">visible_roots</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="n">build_tree_recursive</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">is_last_root</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_children_with_progress</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Synapse</span><span class="p">,</span>
        <span class="n">normalized_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">all_entities</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span>
        <span class="n">all_acls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]],</span>
        <span class="n">progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process children entities with optional progress tracking.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            client: The Synapse client instance</span>
<span class="sd">            normalized_types: List of normalized entity types to process</span>
<span class="sd">            include_container_content: Whether to include container content</span>
<span class="sd">            recursive: Whether to process recursively</span>
<span class="sd">            all_entities: List to append entities to</span>
<span class="sd">            all_acls: Dictionary to store ACL results</span>
<span class="sd">            progress_bar: Progress bar for tracking</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">operations_completed</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synced_from_synapse</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_from_synapse_async</span><span class="p">(</span>
                <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">download_file</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">include_activity</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">operations_completed</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
            <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

        <span class="n">child_entities</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_entities</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="n">target_entity_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
            <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
            <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
            <span class="n">collect_acls</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">collect_self</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">all_acls</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span>
            <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">operations_completed</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
            <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">child_entities</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entity</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">all_entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">





<h3 id="synapseclient.models.mixins.AccessControllable-attributes">Attributes<a href="#synapseclient.models.mixins.AccessControllable-attributes" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-attribute">



<h4 id="synapseclient.models.mixins.AccessControllable.id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#synapseclient.models.mixins.AccessControllable.id" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">id</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The unique immutable ID for this entity. A new ID will be generated for new Files.
Once issued, this ID is guaranteed to never change or be re-issued.</p>

    </div>

</div>


<h3 id="synapseclient.models.mixins.AccessControllable-functions">Functions<a href="#synapseclient.models.mixins.AccessControllable-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.mixins.AccessControllable.get_permissions_async" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_permissions_async</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.models.mixins.AccessControllable.get_permissions_async" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_permissions_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Permissions


  
      dataclass
   (synapseclient.core.models.permission.Permissions)" href="../../../permissions/#synapseclient.Permissions">Permissions</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the <a class="autorefs autorefs-internal" title="            synapseclient.Permissions


  
      dataclass
  " href="../../../permissions/#synapseclient.Permissions">permissions</a>
that the caller has on an Entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="            synapseclient.Permissions


  
      dataclass
   (synapseclient.core.models.permission.Permissions)" href="../../../permissions/#synapseclient.Permissions">Permissions</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A Permissions object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function:</summary>
  <p>Getting permissions for a Synapse Entity</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">permissions</span> <span class="o">=</span> <span class="k">await</span> <span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_permissions_async</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
<p>Getting access types list from the Permissions object</p>
<div class="highlight"><pre><span></span><code>permissions.access_types
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/mixins/access_control.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_permissions_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Permissions&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the [permissions][synapseclient.core.models.permission.Permissions]</span>
<span class="sd">    that the caller has on an Entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Permissions object</span>


<span class="sd">    Example: Using this function:</span>
<span class="sd">        Getting permissions for a Synapse Entity</span>

<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            permissions = await File(id=&quot;syn123&quot;).get_permissions_async()</span>

<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>

<span class="sd">        Getting access types list from the Permissions object</span>

<span class="sd">        ```</span>
<span class="sd">        permissions.access_types</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.core.models.permission</span><span class="w"> </span><span class="kn">import</span> <span class="n">Permissions</span>

    <span class="n">permissions_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_entity_permissions</span><span class="p">(</span>
        <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">Permissions</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">permissions_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.mixins.AccessControllable.get_acl_async" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_acl_async</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.models.mixins.AccessControllable.get_acl_async" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_acl_async</span><span class="p">(</span><span class="n">principal_id</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">check_benefactor</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the <a class="autorefs autorefs-internal" title="            access_types


  
      property
  " href="../../../permissions/#synapseclient.Permissions.access_types">ACL</a>
that a user or group has on an Entity.</p>
<p>Note: If the entity does not have local sharing settings, or ACL set directly
on it, this will look up the ACL on the benefactor of the entity. The
benefactor is the entity that the current entity inherits its permissions from.
The benefactor is usually the parent entity, but it can be any ancestor in the
hierarchy. For example, a newly created Project will be its own benefactor,
while a new FileEntity's benefactor will start off as its containing Project or
Folder. If the entity already has local sharing settings, the benefactor would
be itself.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>principal_id</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Identifier of a user or group (defaults to PUBLIC users)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>check_benefactor</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True (default), check the benefactor for the entity
to get the ACL. If False, only check the entity itself.
This is useful for checking the ACL of an entity that has local sharing
settings, but you want to check the ACL of the entity itself and not
the benefactor it may inherit from.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An array containing some combination of
['READ', 'UPDATE', 'CREATE', 'DELETE', 'DOWNLOAD', 'MODERATE',
'CHANGE_PERMISSIONS', 'CHANGE_SETTINGS']
or an empty array</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/mixins/access_control.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_acl_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">check_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the [ACL][synapseclient.core.models.permission.Permissions.access_types]</span>
<span class="sd">    that a user or group has on an Entity.</span>

<span class="sd">    Note: If the entity does not have local sharing settings, or ACL set directly</span>
<span class="sd">    on it, this will look up the ACL on the benefactor of the entity. The</span>
<span class="sd">    benefactor is the entity that the current entity inherits its permissions from.</span>
<span class="sd">    The benefactor is usually the parent entity, but it can be any ancestor in the</span>
<span class="sd">    hierarchy. For example, a newly created Project will be its own benefactor,</span>
<span class="sd">    while a new FileEntity&#39;s benefactor will start off as its containing Project or</span>
<span class="sd">    Folder. If the entity already has local sharing settings, the benefactor would</span>
<span class="sd">    be itself.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>
<span class="sd">        check_benefactor: If True (default), check the benefactor for the entity</span>
<span class="sd">            to get the ACL. If False, only check the entity itself.</span>
<span class="sd">            This is useful for checking the ACL of an entity that has local sharing</span>
<span class="sd">            settings, but you want to check the ACL of the entity itself and not</span>
<span class="sd">            the benefactor it may inherit from.</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An array containing some combination of</span>
<span class="sd">            [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">            &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">            or an empty array</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">get_entity_acl_list</span><span class="p">(</span>
        <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">principal_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">principal_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">check_benefactor</span><span class="o">=</span><span class="n">check_benefactor</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.mixins.AccessControllable.set_permissions_async" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_permissions_async</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.models.mixins.AccessControllable.set_permissions_async" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_permissions_async</span><span class="p">(</span><span class="n">principal_id</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">access_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">modify_benefactor</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">warn_if_inherits</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../tutorials/command_line_client/#list">list</a></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Sets permission that a user or group has on an Entity.
An Entity may have its own ACL or inherit its ACL from a benefactor.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>principal_id</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Identifier of a user or group. <code>273948</code> is for all
registered Synapse users and <code>273949</code> is for public access.
None implies public access.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>access_type</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Type of permission to be granted. One or more of CREATE,
READ, DOWNLOAD, UPDATE, DELETE, CHANGE_PERMISSIONS.</p>
<p><strong>Defaults to ['READ', 'DOWNLOAD']</strong></p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>modify_benefactor</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Set as True when modifying a benefactor's ACL. The term
'benefactor' is used to indicate which Entity an Entity inherits its
ACL from. For example, a newly created Project will be its own
benefactor, while a new FileEntity's benefactor will start off as its
containing Project. If the entity already has local sharing settings
the benefactor would be itself. It may also be the immediate parent,
somewhere in the parent tree, or the project itself.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>warn_if_inherits</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>When <code>modify_benefactor</code> is True, this does not have any
effect. When <code>modify_benefactor</code> is False, and <code>warn_if_inherits</code> is
True, a warning log message is produced if the benefactor for the
entity you passed into the function is not itself, i.e., it's the
parent folder, or another entity in the parent tree.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>By default this function overwrites existing permissions for
the specified user. Set this flag to False to add new permissions
non-destructively.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-internal" href="../../../../tutorials/command_line_client/#list">list</a>]]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An Access Control List object matching <a href="https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/AccessControlList.html">https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/AccessControlList.html</a>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Setting permissions</summary>
  <p>Grant all registered users download access</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_permissions_async</span><span class="p">(</span><span class="n">principal_id</span><span class="o">=</span><span class="mi">273948</span><span class="p">,</span> <span class="n">access_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;READ&#39;</span><span class="p">,</span><span class="s1">&#39;DOWNLOAD&#39;</span><span class="p">])</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
<p>Grant the public view access</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_permissions_async</span><span class="p">(</span><span class="n">principal_id</span><span class="o">=</span><span class="mi">273949</span><span class="p">,</span> <span class="n">access_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;READ&#39;</span><span class="p">])</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/mixins/access_control.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_permissions_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">access_type</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">modify_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">warn_if_inherits</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets permission that a user or group has on an Entity.</span>
<span class="sd">    An Entity may have its own ACL or inherit its ACL from a benefactor.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        principal_id: Identifier of a user or group. `273948` is for all</span>
<span class="sd">            registered Synapse users and `273949` is for public access.</span>
<span class="sd">            None implies public access.</span>
<span class="sd">        access_type: Type of permission to be granted. One or more of CREATE,</span>
<span class="sd">            READ, DOWNLOAD, UPDATE, DELETE, CHANGE_PERMISSIONS.</span>

<span class="sd">            **Defaults to [&#39;READ&#39;, &#39;DOWNLOAD&#39;]**</span>
<span class="sd">        modify_benefactor: Set as True when modifying a benefactor&#39;s ACL. The term</span>
<span class="sd">            &#39;benefactor&#39; is used to indicate which Entity an Entity inherits its</span>
<span class="sd">            ACL from. For example, a newly created Project will be its own</span>
<span class="sd">            benefactor, while a new FileEntity&#39;s benefactor will start off as its</span>
<span class="sd">            containing Project. If the entity already has local sharing settings</span>
<span class="sd">            the benefactor would be itself. It may also be the immediate parent,</span>
<span class="sd">            somewhere in the parent tree, or the project itself.</span>
<span class="sd">        warn_if_inherits: When `modify_benefactor` is True, this does not have any</span>
<span class="sd">            effect. When `modify_benefactor` is False, and `warn_if_inherits` is</span>
<span class="sd">            True, a warning log message is produced if the benefactor for the</span>
<span class="sd">            entity you passed into the function is not itself, i.e., it&#39;s the</span>
<span class="sd">            parent folder, or another entity in the parent tree.</span>
<span class="sd">        overwrite: By default this function overwrites existing permissions for</span>
<span class="sd">            the specified user. Set this flag to False to add new permissions</span>
<span class="sd">            non-destructively.</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An Access Control List object matching &lt;https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/AccessControlList.html&gt;.</span>

<span class="sd">    Example: Setting permissions</span>
<span class="sd">        Grant all registered users download access</span>

<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            await File(id=&quot;syn123&quot;).set_permissions_async(principal_id=273948, access_type=[&#39;READ&#39;,&#39;DOWNLOAD&#39;])</span>

<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>

<span class="sd">        Grant the public view access</span>

<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            await File(id=&quot;syn123&quot;).set_permissions_async(principal_id=273949, access_type=[&#39;READ&#39;])</span>

<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">access_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">access_type</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;READ&quot;</span><span class="p">,</span> <span class="s2">&quot;DOWNLOAD&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">set_entity_permissions</span><span class="p">(</span>
        <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">principal_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">principal_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">principal_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">access_type</span><span class="o">=</span><span class="n">access_type</span><span class="p">,</span>
        <span class="n">modify_benefactor</span><span class="o">=</span><span class="n">modify_benefactor</span><span class="p">,</span>
        <span class="n">warn_if_inherits</span><span class="o">=</span><span class="n">warn_if_inherits</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.mixins.AccessControllable.delete_permissions_async" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">delete_permissions_async</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.models.mixins.AccessControllable.delete_permissions_async" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_permissions_async</span><span class="p">(</span><span class="n">include_self</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">include_container_content</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">recursive</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">target_entity_types</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">dry_run</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">show_acl_details</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_benefactor_tracker</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><span title="synapseclient.models.mixins.access_control.BenefactorTracker">BenefactorTracker</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Delete the entire Access Control List (ACL) for a given Entity. This is not
scoped to a specific user or group, but rather removes all permissions
associated with the Entity. After this operation, the Entity will inherit
permissions from its benefactor, which is typically its parent entity or
the Project it belongs to.</p>
<p>In order to remove permissions for a specific user or group, you
should use the <code>set_permissions_async</code> method with the <code>access_type</code> set to
an empty list.</p>
<p>By default, Entities such as FileEntity and Folder inherit their permission from
their containing Project. For such Entities the Project is the Entity's 'benefactor'.
This permission inheritance can be overridden by creating an ACL for the Entity.
When this occurs the Entity becomes its own benefactor and all permission are
determined by its own ACL.</p>
<p>If the ACL of an Entity is deleted, then its benefactor will automatically be set
to its parent's benefactor.</p>
<p><strong>Special notice for Projects:</strong> The ACL for a Project cannot be deleted, you
must individually update or revoke the permissions for each user or group.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>include_self</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True (default), delete the ACL of the current entity.
If False, skip deleting the ACL of the current entity.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_container_content</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, delete ACLs from contents directly within
containers (files and folders inside self). This must be set to
True for recursive to have any effect. Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>recursive</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True and the entity is a container (e.g., Project or Folder),
recursively process child containers. Note that this must be used with
include_container_content=True to have any effect. Setting recursive=True
with include_container_content=False will raise a ValueError.
Only works on classes that support the <code>sync_from_synapse_async</code> method.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_entity_types</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Specify which entity types to process when deleting ACLs.
Allowed values are "folder", "file", "project", "table", "entityview",
"materializedview", "virtualtable", "dataset", "datasetcollection",
"submissionview" (case-insensitive). If None, defaults to ["folder", "file"].
This does not affect the entity type of the current entity, which is always
processed if <code>include_self=True</code>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dry_run</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, log the changes that would be made instead of actually
performing the deletions. When enabled, all ACL deletion operations are
simulated and logged at info level. Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_acl_details</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>When dry_run=True, controls whether current ACL details are
displayed for entities that will have their permissions changed. If True (default),
shows detailed ACL information. If False, hides ACL details for cleaner output.
Has no effect when dry_run=False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_files_in_containers</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>When dry_run=True, controls whether files within containers
are displayed in the preview. If True (default), shows all files. If False, hides
files when their only change is benefactor inheritance (but still shows files with
local ACLs being deleted). Has no effect when dry_run=False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_benefactor_tracker</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Internal use tracker for managing benefactor relationships.
Used for recursive functionality to track which entities will be affected</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<span title="synapseclient.models.mixins.access_control.BenefactorTracker">BenefactorTracker</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>None</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If the entity does not have an ID or if an invalid entity type is provided.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-internal" title="            SynapseHTTPError (synapseclient.core.exceptions.SynapseHTTPError)" href="../../../exceptions/#synapseclient.core.exceptions.SynapseHTTPError">SynapseHTTPError</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If there are permission issues or if the entity already inherits permissions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#Exception">Exception</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>For any other errors that may occur during the process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Note: The caller must be granted ACCESS_TYPE.CHANGE_PERMISSIONS on the Entity to
call this method.</p>


<details class="example" open>
  <summary>Delete permissions for a single entity</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
</details>

<details class="example" open>
  <summary>Delete permissions recursively for a folder and all its children</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Folder</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Delete permissions for this folder only (does not affect children)</span>
    <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">()</span>

    <span class="c1"># Delete permissions for all files and folders directly within this folder,</span>
    <span class="c1"># but not the folder itself</span>
    <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
        <span class="n">include_self</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="c1"># Delete permissions for all items in the entire hierarchy (folders and their files)</span>
    <span class="c1"># Both recursive and include_container_content must be True</span>
    <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="c1"># Delete permissions only for folder entities within this folder recursively</span>
    <span class="c1"># and their contents</span>
    <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;folder&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Delete permissions only for files within this folder and all subfolders</span>
    <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
        <span class="n">include_self</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Delete permissions for specific entity types (e.g., tables and views)</span>
    <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="s2">&quot;entityview&quot;</span><span class="p">,</span> <span class="s2">&quot;materializedview&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Dry run example: Log what would be deleted without making changes</span>
    <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dry_run</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/mixins/access_control.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_permissions_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show_acl_details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_benefactor_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BenefactorTracker</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete the entire Access Control List (ACL) for a given Entity. This is not</span>
<span class="sd">    scoped to a specific user or group, but rather removes all permissions</span>
<span class="sd">    associated with the Entity. After this operation, the Entity will inherit</span>
<span class="sd">    permissions from its benefactor, which is typically its parent entity or</span>
<span class="sd">    the Project it belongs to.</span>

<span class="sd">    In order to remove permissions for a specific user or group, you</span>
<span class="sd">    should use the `set_permissions_async` method with the `access_type` set to</span>
<span class="sd">    an empty list.</span>

<span class="sd">    By default, Entities such as FileEntity and Folder inherit their permission from</span>
<span class="sd">    their containing Project. For such Entities the Project is the Entity&#39;s &#39;benefactor&#39;.</span>
<span class="sd">    This permission inheritance can be overridden by creating an ACL for the Entity.</span>
<span class="sd">    When this occurs the Entity becomes its own benefactor and all permission are</span>
<span class="sd">    determined by its own ACL.</span>

<span class="sd">    If the ACL of an Entity is deleted, then its benefactor will automatically be set</span>
<span class="sd">    to its parent&#39;s benefactor.</span>

<span class="sd">    **Special notice for Projects:** The ACL for a Project cannot be deleted, you</span>
<span class="sd">    must individually update or revoke the permissions for each user or group.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        include_self: If True (default), delete the ACL of the current entity.</span>
<span class="sd">            If False, skip deleting the ACL of the current entity.</span>
<span class="sd">        include_container_content: If True, delete ACLs from contents directly within</span>
<span class="sd">            containers (files and folders inside self). This must be set to</span>
<span class="sd">            True for recursive to have any effect. Defaults to False.</span>
<span class="sd">        recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">            recursively process child containers. Note that this must be used with</span>
<span class="sd">            include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">            with include_container_content=False will raise a ValueError.</span>
<span class="sd">            Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">        target_entity_types: Specify which entity types to process when deleting ACLs.</span>
<span class="sd">            Allowed values are &quot;folder&quot;, &quot;file&quot;, &quot;project&quot;, &quot;table&quot;, &quot;entityview&quot;,</span>
<span class="sd">            &quot;materializedview&quot;, &quot;virtualtable&quot;, &quot;dataset&quot;, &quot;datasetcollection&quot;,</span>
<span class="sd">            &quot;submissionview&quot; (case-insensitive). If None, defaults to [&quot;folder&quot;, &quot;file&quot;].</span>
<span class="sd">            This does not affect the entity type of the current entity, which is always</span>
<span class="sd">            processed if `include_self=True`.</span>
<span class="sd">        dry_run: If True, log the changes that would be made instead of actually</span>
<span class="sd">            performing the deletions. When enabled, all ACL deletion operations are</span>
<span class="sd">            simulated and logged at info level. Defaults to False.</span>
<span class="sd">        show_acl_details: When dry_run=True, controls whether current ACL details are</span>
<span class="sd">            displayed for entities that will have their permissions changed. If True (default),</span>
<span class="sd">            shows detailed ACL information. If False, hides ACL details for cleaner output.</span>
<span class="sd">            Has no effect when dry_run=False.</span>
<span class="sd">        show_files_in_containers: When dry_run=True, controls whether files within containers</span>
<span class="sd">            are displayed in the preview. If True (default), shows all files. If False, hides</span>
<span class="sd">            files when their only change is benefactor inheritance (but still shows files with</span>
<span class="sd">            local ACLs being deleted). Has no effect when dry_run=False.</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>
<span class="sd">        _benefactor_tracker: Internal use tracker for managing benefactor relationships.</span>
<span class="sd">            Used for recursive functionality to track which entities will be affected</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">        SynapseHTTPError: If there are permission issues or if the entity already inherits permissions.</span>
<span class="sd">        Exception: For any other errors that may occur during the process.</span>

<span class="sd">    Note: The caller must be granted ACCESS_TYPE.CHANGE_PERMISSIONS on the Entity to</span>
<span class="sd">    call this method.</span>

<span class="sd">    Example: Delete permissions for a single entity</span>
<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            await File(id=&quot;syn123&quot;).delete_permissions_async()</span>

<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>

<span class="sd">    Example: Delete permissions recursively for a folder and all its children</span>
<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import Folder</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            # Delete permissions for this folder only (does not affect children)</span>
<span class="sd">            await Folder(id=&quot;syn123&quot;).delete_permissions_async()</span>

<span class="sd">            # Delete permissions for all files and folders directly within this folder,</span>
<span class="sd">            # but not the folder itself</span>
<span class="sd">            await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                include_self=False,</span>
<span class="sd">                include_container_content=True</span>
<span class="sd">            )</span>

<span class="sd">            # Delete permissions for all items in the entire hierarchy (folders and their files)</span>
<span class="sd">            # Both recursive and include_container_content must be True</span>
<span class="sd">            await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True</span>
<span class="sd">            )</span>

<span class="sd">            # Delete permissions only for folder entities within this folder recursively</span>
<span class="sd">            # and their contents</span>
<span class="sd">            await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            # Delete permissions only for files within this folder and all subfolders</span>
<span class="sd">            await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                include_self=False,</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;file&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            # Delete permissions for specific entity types (e.g., tables and views)</span>
<span class="sd">            await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;table&quot;, &quot;entityview&quot;, &quot;materializedview&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            # Dry run example: Log what would be deleted without making changes</span>
<span class="sd">            await Folder(id=&quot;syn123&quot;).delete_permissions_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                dry_run=True</span>
<span class="sd">            )</span>
<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The entity must have an ID to delete permissions.&quot;</span><span class="p">)</span>

    <span class="n">client</span> <span class="o">=</span> <span class="n">Synapse</span><span class="o">.</span><span class="n">get_client</span><span class="p">(</span><span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">include_self</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;project&quot;</span><span class="p">:</span>
        <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;The ACL for a Project cannot be deleted, you must individually update or &quot;</span>
            <span class="s2">&quot;revoke the permissions for each user or group. Continuing without deleting &quot;</span>
            <span class="s2">&quot;the Project&#39;s ACL.&quot;</span>
        <span class="p">)</span>
        <span class="n">include_self</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">normalized_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_target_entity_types</span><span class="p">(</span><span class="n">target_entity_types</span><span class="p">)</span>

    <span class="n">is_top_level</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">_benefactor_tracker</span>
    <span class="n">benefactor_tracker</span> <span class="o">=</span> <span class="n">_benefactor_tracker</span> <span class="ow">or</span> <span class="n">BenefactorTracker</span><span class="p">()</span>

    <span class="n">should_process_children</span> <span class="o">=</span> <span class="p">(</span><span class="n">recursive</span> <span class="ow">or</span> <span class="n">include_container_content</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sync_from_synapse_async&quot;</span>
    <span class="p">)</span>
    <span class="n">all_entities</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="k">if</span> <span class="n">include_self</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="n">custom_message</span> <span class="o">=</span> <span class="s2">&quot;Deleting ACLs [Dry Run]...&quot;</span> <span class="k">if</span> <span class="n">dry_run</span> <span class="k">else</span> <span class="s2">&quot;Deleting ACLs...&quot;</span>
    <span class="k">with</span> <span class="n">shared_download_progress_bar</span><span class="p">(</span>
        <span class="n">file_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span> <span class="n">custom_message</span><span class="o">=</span><span class="n">custom_message</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">progress_bar</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
            <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Initial setup complete</span>

        <span class="k">if</span> <span class="n">should_process_children</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">recursive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">include_container_content</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;When recursive=True, include_container_content must also be True. &quot;</span>
                    <span class="s2">&quot;Setting recursive=True with include_container_content=False has no effect.&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

            <span class="n">all_entities</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_entities</span><span class="p">(</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="n">target_entity_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
                <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

            <span class="n">entity_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">entity</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">all_entities</span> <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">entity_ids</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                <span class="k">await</span> <span class="n">benefactor_tracker</span><span class="o">.</span><span class="n">track_entity_benefactor</span><span class="p">(</span>
                    <span class="n">entity_ids</span><span class="o">=</span><span class="n">entity_ids</span><span class="p">,</span>
                    <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_top_level</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_and_log_run_tree</span><span class="p">(</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="n">benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                <span class="n">collected_entities</span><span class="o">=</span><span class="n">all_entities</span><span class="p">,</span>
                <span class="n">include_self</span><span class="o">=</span><span class="n">include_self</span><span class="p">,</span>
                <span class="n">show_acl_details</span><span class="o">=</span><span class="n">show_acl_details</span><span class="p">,</span>
                <span class="n">show_files_in_containers</span><span class="o">=</span><span class="n">show_files_in_containers</span><span class="p">,</span>
                <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                <span class="n">dry_run</span><span class="o">=</span><span class="n">dry_run</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">dry_run</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">include_self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_delete_current_entity_acl</span><span class="p">(</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="n">benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">should_process_children</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">include_container_content</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_container_contents</span><span class="p">(</span>
                    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                    <span class="n">target_entity_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
                    <span class="n">benefactor_tracker</span><span class="o">=</span><span class="n">benefactor_tracker</span><span class="p">,</span>
                    <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
                    <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                    <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Process container contents complete</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.mixins.AccessControllable.list_acl_async" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">list_acl_async</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#synapseclient.models.mixins.AccessControllable.list_acl_async" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_acl_async</span><span class="p">(</span><span class="n">recursive</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_container_content</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">target_entity_types</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">log_tree</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_progress_bar</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><span title="tqdm.tqdm">tqdm</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="synapseclient.core.models.acl.AclListResult">AclListResult</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List the Access Control Lists (ACLs) for this entity and optionally its children.</p>
<p>This function returns the local sharing settings for the entity and optionally
its children. It provides a mapping of all ACLs for the given container/entity.</p>
<p><strong>Important Note:</strong> This function returns the LOCAL sharing settings only, not
the effective permissions that each Synapse User ID/Team has on the entities.
More permissive permissions could be granted via a Team that the user has access
to that has permissions on the entity, or through inheritance from parent entities.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>recursive</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True and the entity is a container (e.g., Project or Folder),
recursively process child containers. Note that this must be used with
include_container_content=True to have any effect. Setting recursive=True
with include_container_content=False will raise a ValueError.
Only works on classes that support the <code>sync_from_synapse_async</code> method.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_container_content</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, include ACLs from contents directly within
containers (files and folders inside self). This must be set to
True for recursive to have any effect. Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_entity_types</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Specify which entity types to process when listing ACLs.
Allowed values are "folder", "file", "project", "table", "entityview",
"materializedview", "virtualtable", "dataset", "datasetcollection",
"submissionview" (case-insensitive). If None, defaults to ["folder", "file"].</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_tree</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, logs the ACL results to console in ASCII tree format showing
entity hierarchies and their ACL permissions in a tree-like structure.
Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_progress_bar</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Internal parameter. Progress bar instance to use for updates
when called recursively. Should not be used by external callers.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<span title="tqdm.tqdm">tqdm</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.core.models.acl.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An AclListResult object containing a structured representation of ACLs where:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.core.models.acl.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <ul>
<li>entity_acls: A list of EntityAcl objects, each representing one entity's ACL</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.core.models.acl.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <ul>
<li>Each EntityAcl contains acl_entries (a list of AclEntry objects)</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.core.models.acl.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <ul>
<li>Each AclEntry contains the principal_id and their list of permissions</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If the entity does not have an ID or if an invalid entity type is provided.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-internal" title="            SynapseHTTPError (synapseclient.core.exceptions.SynapseHTTPError)" href="../../../exceptions/#synapseclient.core.exceptions.SynapseHTTPError">SynapseHTTPError</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If there are permission issues accessing ACLs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#Exception">Exception</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>For any other errors that may occur during the process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>List ACLs for a single entity</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">acl_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl_async</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="p">)</span>

    <span class="c1"># Access entity ACLs (entity_acls is a list, not a dict)</span>
    <span class="k">for</span> <span class="n">entity_acl</span> <span class="ow">in</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">entity_acl</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">==</span> <span class="s2">&quot;syn123&quot;</span><span class="p">:</span>
            <span class="c1"># Access individual ACL entries</span>
            <span class="k">for</span> <span class="n">acl_entry</span> <span class="ow">in</span> <span class="n">entity_acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">principal_id</span> <span class="o">==</span> <span class="s2">&quot;273948&quot;</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Principal 273948 has permissions: </span><span class="si">{</span><span class="n">acl_entry</span><span class="o">.</span><span class="n">permissions</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># I can also access the ACL for the file itself</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="o">.</span><span class="n">entity_acl</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
</details>

<details class="example" open>
  <summary>List ACLs recursively for a folder and all its children</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Folder</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">acl_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="c1"># Access each entity&#39;s ACL (entity_acls is a list)</span>
    <span class="k">for</span> <span class="n">entity_acl</span> <span class="ow">in</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">entity_acl</span><span class="o">.</span><span class="n">entity_id</span><span class="si">}</span><span class="s2"> has ACL with </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">entity_acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">)</span><span class="si">}</span><span class="s2"> principals&quot;</span><span class="p">)</span>

    <span class="c1"># I can also access the ACL for the folder itself</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="o">.</span><span class="n">entity_acl</span><span class="p">)</span>

    <span class="c1"># List ACLs for only folder entities</span>
    <span class="n">folder_acl_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;folder&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># List ACLs for specific entity types (e.g., tables and views)</span>
    <span class="n">table_view_acl_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="s2">&quot;entityview&quot;</span><span class="p">,</span> <span class="s2">&quot;materializedview&quot;</span><span class="p">]</span>
    <span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
</details>

<details class="example" open>
  <summary>List ACLs with ASCII tree visualization</summary>
  <p>When <code>log_tree=True</code>, the ACLs will be logged in a tree format. Additionally,
the <code>ascii_tree</code> attribute of the AclListResult will contain the ASCII tree
representation of the ACLs.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Folder</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">acl_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl_async</span><span class="p">(</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">log_tree</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># Enable ASCII tree logging</span>
    <span class="p">)</span>

    <span class="c1"># The ASCII tree representation of the ACLs will also be available</span>
    <span class="c1"># in acl_result.ascii_tree</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="o">.</span><span class="n">ascii_tree</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/mixins/access_control.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_acl_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_tree</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Internal parameter for recursive calls</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AclListResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    List the Access Control Lists (ACLs) for this entity and optionally its children.</span>

<span class="sd">    This function returns the local sharing settings for the entity and optionally</span>
<span class="sd">    its children. It provides a mapping of all ACLs for the given container/entity.</span>

<span class="sd">    **Important Note:** This function returns the LOCAL sharing settings only, not</span>
<span class="sd">    the effective permissions that each Synapse User ID/Team has on the entities.</span>
<span class="sd">    More permissive permissions could be granted via a Team that the user has access</span>
<span class="sd">    to that has permissions on the entity, or through inheritance from parent entities.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">            recursively process child containers. Note that this must be used with</span>
<span class="sd">            include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">            with include_container_content=False will raise a ValueError.</span>
<span class="sd">            Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">        include_container_content: If True, include ACLs from contents directly within</span>
<span class="sd">            containers (files and folders inside self). This must be set to</span>
<span class="sd">            True for recursive to have any effect. Defaults to False.</span>
<span class="sd">        target_entity_types: Specify which entity types to process when listing ACLs.</span>
<span class="sd">            Allowed values are &quot;folder&quot;, &quot;file&quot;, &quot;project&quot;, &quot;table&quot;, &quot;entityview&quot;,</span>
<span class="sd">            &quot;materializedview&quot;, &quot;virtualtable&quot;, &quot;dataset&quot;, &quot;datasetcollection&quot;,</span>
<span class="sd">            &quot;submissionview&quot; (case-insensitive). If None, defaults to [&quot;folder&quot;, &quot;file&quot;].</span>
<span class="sd">        log_tree: If True, logs the ACL results to console in ASCII tree format showing</span>
<span class="sd">            entity hierarchies and their ACL permissions in a tree-like structure.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>
<span class="sd">        _progress_bar: Internal parameter. Progress bar instance to use for updates</span>
<span class="sd">            when called recursively. Should not be used by external callers.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An AclListResult object containing a structured representation of ACLs where:</span>
<span class="sd">        - entity_acls: A list of EntityAcl objects, each representing one entity&#39;s ACL</span>
<span class="sd">        - Each EntityAcl contains acl_entries (a list of AclEntry objects)</span>
<span class="sd">        - Each AclEntry contains the principal_id and their list of permissions</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">        SynapseHTTPError: If there are permission issues accessing ACLs.</span>
<span class="sd">        Exception: For any other errors that may occur during the process.</span>

<span class="sd">    Example: List ACLs for a single entity</span>
<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            acl_result = await File(id=&quot;syn123&quot;).list_acl_async()</span>
<span class="sd">            print(acl_result)</span>

<span class="sd">            # Access entity ACLs (entity_acls is a list, not a dict)</span>
<span class="sd">            for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">                if entity_acl.entity_id == &quot;syn123&quot;:</span>
<span class="sd">                    # Access individual ACL entries</span>
<span class="sd">                    for acl_entry in entity_acl.acl_entries:</span>
<span class="sd">                        if acl_entry.principal_id == &quot;273948&quot;:</span>
<span class="sd">                            print(f&quot;Principal 273948 has permissions: {acl_entry.permissions}&quot;)</span>

<span class="sd">            # I can also access the ACL for the file itself</span>
<span class="sd">            print(acl_result.entity_acl)</span>

<span class="sd">            print(acl_result)</span>

<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>

<span class="sd">    Example: List ACLs recursively for a folder and all its children</span>
<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import Folder</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True</span>
<span class="sd">            )</span>

<span class="sd">            # Access each entity&#39;s ACL (entity_acls is a list)</span>
<span class="sd">            for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">                print(f&quot;Entity {entity_acl.entity_id} has ACL with {len(entity_acl.acl_entries)} principals&quot;)</span>

<span class="sd">            # I can also access the ACL for the folder itself</span>
<span class="sd">            print(acl_result.entity_acl)</span>

<span class="sd">            # List ACLs for only folder entities</span>
<span class="sd">            folder_acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            # List ACLs for specific entity types (e.g., tables and views)</span>
<span class="sd">            table_view_acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;table&quot;, &quot;entityview&quot;, &quot;materializedview&quot;]</span>
<span class="sd">            )</span>

<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>

<span class="sd">    Example: List ACLs with ASCII tree visualization</span>
<span class="sd">        When `log_tree=True`, the ACLs will be logged in a tree format. Additionally,</span>
<span class="sd">        the `ascii_tree` attribute of the AclListResult will contain the ASCII tree</span>
<span class="sd">        representation of the ACLs.</span>

<span class="sd">        ```python</span>
<span class="sd">        import asyncio</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import Folder</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        async def main():</span>
<span class="sd">            acl_result = await Folder(id=&quot;syn123&quot;).list_acl_async(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                log_tree=True, # Enable ASCII tree logging</span>
<span class="sd">            )</span>

<span class="sd">            # The ASCII tree representation of the ACLs will also be available</span>
<span class="sd">            # in acl_result.ascii_tree</span>
<span class="sd">            print(acl_result.ascii_tree)</span>

<span class="sd">        asyncio.run(main())</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The entity must have an ID to list ACLs.&quot;</span><span class="p">)</span>

    <span class="n">normalized_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_target_entity_types</span><span class="p">(</span><span class="n">target_entity_types</span><span class="p">)</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">Synapse</span><span class="o">.</span><span class="n">get_client</span><span class="p">(</span><span class="n">synapse_client</span><span class="o">=</span><span class="n">synapse_client</span><span class="p">)</span>

    <span class="n">all_acls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">all_entities</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Only update progress bar for self ACL if we&#39;re the top-level call (not recursive)</span>
    <span class="c1"># When _progress_bar is passed, it means this is a recursive call and the parent</span>
    <span class="c1"># is managing progress updates</span>
    <span class="n">update_progress_for_self</span> <span class="o">=</span> <span class="n">_progress_bar</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="n">acl</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_entity_acl</span><span class="p">(</span>
        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
        <span class="n">progress_bar</span><span class="o">=</span><span class="n">_progress_bar</span> <span class="k">if</span> <span class="n">update_progress_for_self</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">acl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">all_acls</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">acl</span>
    <span class="n">all_entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="n">should_process_children</span> <span class="o">=</span> <span class="p">(</span><span class="n">recursive</span> <span class="ow">or</span> <span class="n">include_container_content</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sync_from_synapse_async&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">should_process_children</span> <span class="ow">and</span> <span class="p">(</span><span class="n">recursive</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">include_container_content</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;When recursive=True, include_container_content must also be True. &quot;</span>
            <span class="s2">&quot;Setting recursive=True with include_container_content=False has no effect.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">should_process_children</span> <span class="ow">and</span> <span class="n">_progress_bar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">shared_download_progress_bar</span><span class="p">(</span>
            <span class="n">file_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">synapse_client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="n">custom_message</span><span class="o">=</span><span class="s2">&quot;Collecting ACLs...&quot;</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">progress_bar</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_children_with_progress</span><span class="p">(</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="n">normalized_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
                <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
                <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                <span class="n">all_entities</span><span class="o">=</span><span class="n">all_entities</span><span class="p">,</span>
                <span class="n">all_acls</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span>
                <span class="n">progress_bar</span><span class="o">=</span><span class="n">progress_bar</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># Ensure progress bar reaches 100% completion</span>
            <span class="k">if</span> <span class="n">progress_bar</span><span class="p">:</span>
                <span class="n">remaining</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">n</span>
                    <span class="k">if</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">&gt;</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">n</span>
                    <span class="k">else</span> <span class="mi">0</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">should_process_children</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_children_with_progress</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="n">normalized_types</span><span class="o">=</span><span class="n">normalized_types</span><span class="p">,</span>
            <span class="n">include_container_content</span><span class="o">=</span><span class="n">include_container_content</span><span class="p">,</span>
            <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
            <span class="n">all_entities</span><span class="o">=</span><span class="n">all_entities</span><span class="p">,</span>
            <span class="n">all_acls</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span>
            <span class="n">progress_bar</span><span class="o">=</span><span class="n">_progress_bar</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="n">current_acl</span> <span class="o">=</span> <span class="n">all_acls</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">acl_result</span> <span class="o">=</span> <span class="n">AclListResult</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span>
        <span class="n">all_acl_dict</span><span class="o">=</span><span class="n">all_acls</span><span class="p">,</span> <span class="n">current_acl_dict</span><span class="o">=</span><span class="n">current_acl</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">log_tree</span><span class="p">:</span>
        <span class="n">logged_tree</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_acl_tree</span><span class="p">(</span><span class="n">acl_result</span><span class="p">,</span> <span class="n">all_entities</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>
        <span class="n">acl_result</span><span class="o">.</span><span class="n">ascii_tree</span> <span class="o">=</span> <span class="n">logged_tree</span>

    <span class="k">return</span> <span class="n">acl_result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol</span>


<a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-external" title="typing.Protocol" href="https://docs.python.org/3/library/typing.html#typing.Protocol">Protocol</a></code></p>



        <p>The protocol for methods that are asynchronous but also
have a synchronous counterpart that may also be called.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>synapseclient/models/protocols/access_control_protocol.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccessControllableSynchronousProtocol</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The protocol for methods that are asynchronous but also</span>
<span class="sd">    have a synchronous counterpart that may also be called.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Permissions&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the [permissions][synapseclient.core.models.permission.Permissions]</span>
<span class="sd">        that the caller has on an Entity.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Permissions object</span>


<span class="sd">        Example: Using this function:</span>
<span class="sd">            Getting permissions for a Synapse Entity</span>

<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            permissions = File(id=&quot;syn123&quot;).get_permissions()</span>
<span class="sd">            ```</span>

<span class="sd">            Getting access types list from the Permissions object</span>

<span class="sd">            ```</span>
<span class="sd">            permissions.access_types</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_acl</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">check_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the [ACL][synapseclient.core.models.permission.Permissions.access_types]</span>
<span class="sd">        that a user or group has on an Entity.</span>

<span class="sd">        Note: If the entity does not have local sharing settings, or ACL set directly</span>
<span class="sd">        on it, this will look up the ACL on the benefactor of the entity. The</span>
<span class="sd">        benefactor is the entity that the current entity inherits its permissions from.</span>
<span class="sd">        The benefactor is usually the parent entity, but it can be any ancestor in the</span>
<span class="sd">        hierarchy. For example, a newly created Project will be its own benefactor,</span>
<span class="sd">        while a new FileEntity&#39;s benefactor will start off as its containing Project or</span>
<span class="sd">        Folder. If the entity already has local sharing settings, the benefactor would</span>
<span class="sd">        be itself.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>
<span class="sd">            check_benefactor: If True (default), check the benefactor for the entity</span>
<span class="sd">                to get the ACL. If False, only check the entity itself.</span>
<span class="sd">                This is useful for checking the ACL of an entity that has local sharing</span>
<span class="sd">                settings, but you want to check the ACL of the entity itself and not</span>
<span class="sd">                the benefactor it may inherit from.</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An array containing some combination of</span>
<span class="sd">                [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">                &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">                or an empty array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">access_type</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modify_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">warn_if_inherits</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets permission that a user or group has on an Entity.</span>
<span class="sd">        An Entity may have its own ACL or inherit its ACL from a benefactor.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            principal_id: Identifier of a user or group. `273948` is for all</span>
<span class="sd">                registered Synapse users and `273949` is for public access.</span>
<span class="sd">                None implies public access.</span>
<span class="sd">            access_type: Type of permission to be granted. One or more of CREATE,</span>
<span class="sd">                READ, DOWNLOAD, UPDATE, DELETE, CHANGE_PERMISSIONS.</span>

<span class="sd">                **Defaults to [&#39;READ&#39;, &#39;DOWNLOAD&#39;]**</span>
<span class="sd">            modify_benefactor: Set as True when modifying a benefactor&#39;s ACL. The term</span>
<span class="sd">                &#39;benefactor&#39; is used to indicate which Entity an Entity inherits its</span>
<span class="sd">                ACL from. For example, a newly created Project will be its own</span>
<span class="sd">                benefactor, while a new FileEntity&#39;s benefactor will start off as its</span>
<span class="sd">                containing Project. If the entity already has local sharing settings</span>
<span class="sd">                the benefactor would be itself. It may also be the immediate parent,</span>
<span class="sd">                somewhere in the parent tree, or the project itself.</span>
<span class="sd">            warn_if_inherits: When `modify_benefactor` is True, this does not have any</span>
<span class="sd">                effect. When `modify_benefactor` is False, and `warn_if_inherits` is</span>
<span class="sd">                True, a warning log message is produced if the benefactor for the</span>
<span class="sd">                entity you passed into the function is not itself, i.e., it&#39;s the</span>
<span class="sd">                parent folder, or another entity in the parent tree.</span>
<span class="sd">            overwrite: By default this function overwrites existing permissions for</span>
<span class="sd">                the specified user. Set this flag to False to add new permissions</span>
<span class="sd">                non-destructively.</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An Access Control List object</span>

<span class="sd">        Example: Setting permissions</span>
<span class="sd">            Grant all registered users download access</span>

<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            File(id=&quot;syn123&quot;).set_permissions(principal_id=273948, access_type=[&#39;READ&#39;,&#39;DOWNLOAD&#39;])</span>
<span class="sd">            ```</span>

<span class="sd">            Grant the public view access</span>

<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            File(id=&quot;syn123&quot;).set_permissions(principal_id=273949, access_type=[&#39;READ&#39;])</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">show_acl_details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;BenefactorTracker&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the entire Access Control List (ACL) for a given Entity. This is not</span>
<span class="sd">        scoped to a specific user or group, but rather removes all permissions</span>
<span class="sd">        associated with the Entity. After this operation, the Entity will inherit</span>
<span class="sd">        permissions from its benefactor, which is typically its parent entity or</span>
<span class="sd">        the Project it belongs to.</span>

<span class="sd">        In order to remove permissions for a specific user or group, you</span>
<span class="sd">        should use the `set_permissions` method with the `access_type` set to</span>
<span class="sd">        an empty list.</span>

<span class="sd">        By default, Entities such as FileEntity and Folder inherit their permission from</span>
<span class="sd">        their containing Project. For such Entities the Project is the Entity&#39;s &#39;benefactor&#39;.</span>
<span class="sd">        This permission inheritance can be overridden by creating an ACL for the Entity.</span>
<span class="sd">        When this occurs the Entity becomes its own benefactor and all permission are</span>
<span class="sd">        determined by its own ACL.</span>

<span class="sd">        If the ACL of an Entity is deleted, then its benefactor will automatically be set</span>
<span class="sd">        to its parent&#39;s benefactor.</span>

<span class="sd">        **Special notice for Projects:** The ACL for a Project cannot be deleted, you</span>
<span class="sd">        must individually update or revoke the permissions for each user or group.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            include_self: If True (default), delete the ACL of the current entity.</span>
<span class="sd">                If False, skip deleting the ACL of the current entity.</span>
<span class="sd">            include_container_content: If True, delete ACLs from contents directly within</span>
<span class="sd">                containers (files and folders inside self). This must be set to</span>
<span class="sd">                True for recursive to have any effect. Defaults to False.</span>
<span class="sd">            recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">                recursively process child containers. Note that this must be used with</span>
<span class="sd">                include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">                with include_container_content=False will raise a ValueError.</span>
<span class="sd">                Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">            target_entity_types: Specify which entity types to process when deleting ACLs.</span>
<span class="sd">                Allowed values are &quot;folder&quot; and &quot;file&quot; (case-insensitive).</span>
<span class="sd">                If None, defaults to [&quot;folder&quot;, &quot;file&quot;]. This does not affect the</span>
<span class="sd">                entity type of the current entity, which is always processed if</span>
<span class="sd">                `include_self=True`.</span>
<span class="sd">            dry_run: If True, log the changes that would be made instead of actually</span>
<span class="sd">                performing the deletions. When enabled, all ACL deletion operations are</span>
<span class="sd">                simulated and logged at info level. Defaults to False.</span>
<span class="sd">            show_acl_details: When dry_run=True, controls whether current ACL details are</span>
<span class="sd">                displayed for entities that will have their permissions changed. If True (default),</span>
<span class="sd">                shows detailed ACL information. If False, hides ACL details for cleaner output.</span>
<span class="sd">                Has no effect when dry_run=False.</span>
<span class="sd">            show_files_in_containers: When dry_run=True, controls whether files within containers</span>
<span class="sd">                are displayed in the preview. If True (default), shows all files. If False, hides</span>
<span class="sd">                files when their only change is benefactor inheritance (but still shows files with</span>
<span class="sd">                local ACLs being deleted). Has no effect when dry_run=False.</span>
<span class="sd">            benefactor_tracker: Optional tracker for managing benefactor relationships.</span>
<span class="sd">                Used for recursive functionality to track which entities will be affected</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">            SynapseHTTPError: If there are permission issues or if the entity already inherits permissions.</span>
<span class="sd">            Exception: For any other errors that may occur during the process.</span>

<span class="sd">        Note: The caller must be granted ACCESS_TYPE.CHANGE_PERMISSIONS on the Entity to</span>
<span class="sd">        call this method.</span>

<span class="sd">        Example: Delete permissions for a single entity</span>
<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            File(id=&quot;syn123&quot;).delete_permissions()</span>

<span class="sd">            ```</span>

<span class="sd">        Example: Delete permissions recursively for a folder and all its children</span>
<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import Folder</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            # Delete permissions for this folder only (does not affect children)</span>
<span class="sd">            Folder(id=&quot;syn123&quot;).delete_permissions()</span>

<span class="sd">            # Delete permissions for all files and folders directly within this folder,</span>
<span class="sd">            # but not the folder itself</span>
<span class="sd">            Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">                include_self=False,</span>
<span class="sd">                include_container_content=True</span>
<span class="sd">            )</span>

<span class="sd">            # Delete permissions for all items in the entire hierarchy (folders and their files)</span>
<span class="sd">            # Both recursive and include_container_content must be True</span>
<span class="sd">            Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True</span>
<span class="sd">            )</span>

<span class="sd">            # Delete permissions only for folder entities within this folder recursively</span>
<span class="sd">            # and their contents</span>
<span class="sd">            Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            # Delete permissions only for files within this folder and all subfolders</span>
<span class="sd">            Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">                include_self=False,</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;file&quot;]</span>
<span class="sd">            )</span>

<span class="sd">            # Dry run example: Log what would be deleted without making changes</span>
<span class="sd">            Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                dry_run=True</span>
<span class="sd">            )</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list_acl</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">log_tree</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">_progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Internal parameter for recursive calls</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AclListResult&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List the Access Control Lists (ACLs) for this entity and optionally its children.</span>

<span class="sd">        This function returns the local sharing settings for the entity and optionally</span>
<span class="sd">        its children. It provides a mapping of all ACLs for the given container/entity.</span>

<span class="sd">        **Important Note:** This function returns the LOCAL sharing settings only, not</span>
<span class="sd">        the effective permissions that each Synapse User ID/Team has on the entities.</span>
<span class="sd">        More permissive permissions could be granted via a Team that the user has access</span>
<span class="sd">        to that has permissions on the entity, or through inheritance from parent entities.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">                recursively process child containers. Note that this must be used with</span>
<span class="sd">                include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">                with include_container_content=False will raise a ValueError.</span>
<span class="sd">                Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">            include_container_content: If True, include ACLs from contents directly within</span>
<span class="sd">                containers (files and folders inside self). This must be set to</span>
<span class="sd">                True for recursive to have any effect. Defaults to False.</span>
<span class="sd">            target_entity_types: Specify which entity types to process when listing ACLs.</span>
<span class="sd">                Allowed values are &quot;folder&quot; and &quot;file&quot; (case-insensitive).</span>
<span class="sd">                If None, defaults to [&quot;folder&quot;, &quot;file&quot;].</span>
<span class="sd">            log_tree: If True, logs the ACL results to console in ASCII tree format showing</span>
<span class="sd">                entity hierarchies and their ACL permissions in a tree-like structure.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">                `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">                instance from the Synapse class constructor.</span>
<span class="sd">            _progress_bar: Internal parameter. Progress bar instance to use for updates</span>
<span class="sd">                when called recursively. Should not be used by external callers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An AclListResult object containing a structured representation of ACLs where:</span>
<span class="sd">            - entity_acls: A list of EntityAcl objects, each representing one entity&#39;s ACL</span>
<span class="sd">            - Each EntityAcl contains acl_entries (a list of AclEntry objects)</span>
<span class="sd">            - Each AclEntry contains the principal_id and their list of permissions</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">            SynapseHTTPError: If there are permission issues accessing ACLs.</span>
<span class="sd">            Exception: For any other errors that may occur during the process.</span>

<span class="sd">        Example: List ACLs for a single entity</span>
<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import File</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            acl_result = File(id=&quot;syn123&quot;).list_acl()</span>
<span class="sd">            print(acl_result)</span>

<span class="sd">            # Access entity ACLs (entity_acls is a list, not a dict)</span>
<span class="sd">            for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">                if entity_acl.entity_id == &quot;syn123&quot;:</span>
<span class="sd">                    # Access individual ACL entries</span>
<span class="sd">                    for acl_entry in entity_acl.acl_entries:</span>
<span class="sd">                        if acl_entry.principal_id == &quot;273948&quot;:</span>
<span class="sd">                            print(f&quot;Principal 273948 has permissions: {acl_entry.permissions}&quot;)</span>

<span class="sd">            # I can also access the ACL for the file itself</span>
<span class="sd">            print(acl_result.entity_acl)</span>

<span class="sd">            print(acl_result)</span>

<span class="sd">            ```</span>

<span class="sd">        Example: List ACLs recursively for a folder and all its children</span>
<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import Folder</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            acl_result = Folder(id=&quot;syn123&quot;).list_acl(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True</span>
<span class="sd">            )</span>

<span class="sd">            # Access each entity&#39;s ACL (entity_acls is a list)</span>
<span class="sd">            for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">                print(f&quot;Entity {entity_acl.entity_id} has ACL with {len(entity_acl.acl_entries)} principals&quot;)</span>

<span class="sd">            # I can also access the ACL for the folder itself</span>
<span class="sd">            print(acl_result.entity_acl)</span>

<span class="sd">            # List ACLs for only folder entities</span>
<span class="sd">            folder_acl_result = Folder(id=&quot;syn123&quot;).list_acl(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">            )</span>
<span class="sd">            ```</span>

<span class="sd">        Example: List ACLs with ASCII tree visualization</span>
<span class="sd">            When `log_tree=True`, the ACLs will be logged in a tree format. Additionally,</span>
<span class="sd">            the `ascii_tree` attribute of the AclListResult will contain the ASCII tree</span>
<span class="sd">            representation of the ACLs.</span>

<span class="sd">            ```python</span>
<span class="sd">            from synapseclient import Synapse</span>
<span class="sd">            from synapseclient.models import Folder</span>

<span class="sd">            syn = Synapse()</span>
<span class="sd">            syn.login()</span>

<span class="sd">            acl_result = Folder(id=&quot;syn123&quot;).list_acl(</span>
<span class="sd">                recursive=True,</span>
<span class="sd">                include_container_content=True,</span>
<span class="sd">                log_tree=True, # Enable ASCII tree logging</span>
<span class="sd">            )</span>

<span class="sd">            # The ASCII tree representation of the ACLs will also be available</span>
<span class="sd">            # in acl_result.ascii_tree</span>
<span class="sd">            print(acl_result.ascii_tree)</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AclListResult</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">








<h3 id="synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol-functions">Functions<a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_permissions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_permissions</span>


<a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_permissions" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_permissions</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Permissions


  
      dataclass
   (synapseclient.core.models.permission.Permissions)" href="../../../permissions/#synapseclient.Permissions">Permissions</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the <a class="autorefs autorefs-internal" title="            synapseclient.Permissions


  
      dataclass
  " href="../../../permissions/#synapseclient.Permissions">permissions</a>
that the caller has on an Entity.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="            synapseclient.Permissions


  
      dataclass
   (synapseclient.core.models.permission.Permissions)" href="../../../permissions/#synapseclient.Permissions">Permissions</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A Permissions object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Using this function:</summary>
  <p>Getting permissions for a Synapse Entity</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">permissions</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_permissions</span><span class="p">()</span>
</code></pre></div>
<p>Getting access types list from the Permissions object</p>
<div class="highlight"><pre><span></span><code>permissions.access_types
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/protocols/access_control_protocol.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_permissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Permissions&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the [permissions][synapseclient.core.models.permission.Permissions]</span>
<span class="sd">    that the caller has on an Entity.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Permissions object</span>


<span class="sd">    Example: Using this function:</span>
<span class="sd">        Getting permissions for a Synapse Entity</span>

<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        permissions = File(id=&quot;syn123&quot;).get_permissions()</span>
<span class="sd">        ```</span>

<span class="sd">        Getting access types list from the Permissions object</span>

<span class="sd">        ```</span>
<span class="sd">        permissions.access_types</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_acl" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_acl</span>


<a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.get_acl" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_acl</span><span class="p">(</span><span class="n">principal_id</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">check_benefactor</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the <a class="autorefs autorefs-internal" title="            access_types


  
      property
  " href="../../../permissions/#synapseclient.Permissions.access_types">ACL</a>
that a user or group has on an Entity.</p>
<p>Note: If the entity does not have local sharing settings, or ACL set directly
on it, this will look up the ACL on the benefactor of the entity. The
benefactor is the entity that the current entity inherits its permissions from.
The benefactor is usually the parent entity, but it can be any ancestor in the
hierarchy. For example, a newly created Project will be its own benefactor,
while a new FileEntity's benefactor will start off as its containing Project or
Folder. If the entity already has local sharing settings, the benefactor would
be itself.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>principal_id</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Identifier of a user or group (defaults to PUBLIC users)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>check_benefactor</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True (default), check the benefactor for the entity
to get the ACL. If False, only check the entity itself.
This is useful for checking the ACL of an entity that has local sharing
settings, but you want to check the ACL of the entity itself and not
the benefactor it may inherit from.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An array containing some combination of
['READ', 'UPDATE', 'CREATE', 'DELETE', 'DOWNLOAD', 'MODERATE',
'CHANGE_PERMISSIONS', 'CHANGE_SETTINGS']
or an empty array</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/protocols/access_control_protocol.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_acl</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">check_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the [ACL][synapseclient.core.models.permission.Permissions.access_types]</span>
<span class="sd">    that a user or group has on an Entity.</span>

<span class="sd">    Note: If the entity does not have local sharing settings, or ACL set directly</span>
<span class="sd">    on it, this will look up the ACL on the benefactor of the entity. The</span>
<span class="sd">    benefactor is the entity that the current entity inherits its permissions from.</span>
<span class="sd">    The benefactor is usually the parent entity, but it can be any ancestor in the</span>
<span class="sd">    hierarchy. For example, a newly created Project will be its own benefactor,</span>
<span class="sd">    while a new FileEntity&#39;s benefactor will start off as its containing Project or</span>
<span class="sd">    Folder. If the entity already has local sharing settings, the benefactor would</span>
<span class="sd">    be itself.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        principal_id: Identifier of a user or group (defaults to PUBLIC users)</span>
<span class="sd">        check_benefactor: If True (default), check the benefactor for the entity</span>
<span class="sd">            to get the ACL. If False, only check the entity itself.</span>
<span class="sd">            This is useful for checking the ACL of an entity that has local sharing</span>
<span class="sd">            settings, but you want to check the ACL of the entity itself and not</span>
<span class="sd">            the benefactor it may inherit from.</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An array containing some combination of</span>
<span class="sd">            [&#39;READ&#39;, &#39;UPDATE&#39;, &#39;CREATE&#39;, &#39;DELETE&#39;, &#39;DOWNLOAD&#39;, &#39;MODERATE&#39;,</span>
<span class="sd">            &#39;CHANGE_PERMISSIONS&#39;, &#39;CHANGE_SETTINGS&#39;]</span>
<span class="sd">            or an empty array</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.set_permissions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_permissions</span>


<a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.set_permissions" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_permissions</span><span class="p">(</span><span class="n">principal_id</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">access_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">modify_benefactor</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">warn_if_inherits</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../tutorials/command_line_client/#list">list</a></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Sets permission that a user or group has on an Entity.
An Entity may have its own ACL or inherit its ACL from a benefactor.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>principal_id</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Identifier of a user or group. <code>273948</code> is for all
registered Synapse users and <code>273949</code> is for public access.
None implies public access.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>access_type</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Type of permission to be granted. One or more of CREATE,
READ, DOWNLOAD, UPDATE, DELETE, CHANGE_PERMISSIONS.</p>
<p><strong>Defaults to ['READ', 'DOWNLOAD']</strong></p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>modify_benefactor</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Set as True when modifying a benefactor's ACL. The term
'benefactor' is used to indicate which Entity an Entity inherits its
ACL from. For example, a newly created Project will be its own
benefactor, while a new FileEntity's benefactor will start off as its
containing Project. If the entity already has local sharing settings
the benefactor would be itself. It may also be the immediate parent,
somewhere in the parent tree, or the project itself.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>warn_if_inherits</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>When <code>modify_benefactor</code> is True, this does not have any
effect. When <code>modify_benefactor</code> is False, and <code>warn_if_inherits</code> is
True, a warning log message is produced if the benefactor for the
entity you passed into the function is not itself, i.e., it's the
parent folder, or another entity in the parent tree.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>By default this function overwrites existing permissions for
the specified user. Set this flag to False to add new permissions
non-destructively.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-internal" href="../../../../tutorials/command_line_client/#list">list</a>]]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An Access Control List object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Setting permissions</summary>
  <p>Grant all registered users download access</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_permissions</span><span class="p">(</span><span class="n">principal_id</span><span class="o">=</span><span class="mi">273948</span><span class="p">,</span> <span class="n">access_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;READ&#39;</span><span class="p">,</span><span class="s1">&#39;DOWNLOAD&#39;</span><span class="p">])</span>
</code></pre></div>
<p>Grant the public view access</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_permissions</span><span class="p">(</span><span class="n">principal_id</span><span class="o">=</span><span class="mi">273949</span><span class="p">,</span> <span class="n">access_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;READ&#39;</span><span class="p">])</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/protocols/access_control_protocol.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_permissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">principal_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">access_type</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">modify_benefactor</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">warn_if_inherits</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets permission that a user or group has on an Entity.</span>
<span class="sd">    An Entity may have its own ACL or inherit its ACL from a benefactor.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        principal_id: Identifier of a user or group. `273948` is for all</span>
<span class="sd">            registered Synapse users and `273949` is for public access.</span>
<span class="sd">            None implies public access.</span>
<span class="sd">        access_type: Type of permission to be granted. One or more of CREATE,</span>
<span class="sd">            READ, DOWNLOAD, UPDATE, DELETE, CHANGE_PERMISSIONS.</span>

<span class="sd">            **Defaults to [&#39;READ&#39;, &#39;DOWNLOAD&#39;]**</span>
<span class="sd">        modify_benefactor: Set as True when modifying a benefactor&#39;s ACL. The term</span>
<span class="sd">            &#39;benefactor&#39; is used to indicate which Entity an Entity inherits its</span>
<span class="sd">            ACL from. For example, a newly created Project will be its own</span>
<span class="sd">            benefactor, while a new FileEntity&#39;s benefactor will start off as its</span>
<span class="sd">            containing Project. If the entity already has local sharing settings</span>
<span class="sd">            the benefactor would be itself. It may also be the immediate parent,</span>
<span class="sd">            somewhere in the parent tree, or the project itself.</span>
<span class="sd">        warn_if_inherits: When `modify_benefactor` is True, this does not have any</span>
<span class="sd">            effect. When `modify_benefactor` is False, and `warn_if_inherits` is</span>
<span class="sd">            True, a warning log message is produced if the benefactor for the</span>
<span class="sd">            entity you passed into the function is not itself, i.e., it&#39;s the</span>
<span class="sd">            parent folder, or another entity in the parent tree.</span>
<span class="sd">        overwrite: By default this function overwrites existing permissions for</span>
<span class="sd">            the specified user. Set this flag to False to add new permissions</span>
<span class="sd">            non-destructively.</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An Access Control List object</span>

<span class="sd">    Example: Setting permissions</span>
<span class="sd">        Grant all registered users download access</span>

<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        File(id=&quot;syn123&quot;).set_permissions(principal_id=273948, access_type=[&#39;READ&#39;,&#39;DOWNLOAD&#39;])</span>
<span class="sd">        ```</span>

<span class="sd">        Grant the public view access</span>

<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        File(id=&quot;syn123&quot;).set_permissions(principal_id=273949, access_type=[&#39;READ&#39;])</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.delete_permissions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">delete_permissions</span>


<a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.delete_permissions" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_permissions</span><span class="p">(</span><span class="n">include_self</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">include_container_content</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">recursive</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">target_entity_types</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">dry_run</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">show_acl_details</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><span title="synapseclient.models.mixins.access_control.BenefactorTracker">BenefactorTracker</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Delete the entire Access Control List (ACL) for a given Entity. This is not
scoped to a specific user or group, but rather removes all permissions
associated with the Entity. After this operation, the Entity will inherit
permissions from its benefactor, which is typically its parent entity or
the Project it belongs to.</p>
<p>In order to remove permissions for a specific user or group, you
should use the <code>set_permissions</code> method with the <code>access_type</code> set to
an empty list.</p>
<p>By default, Entities such as FileEntity and Folder inherit their permission from
their containing Project. For such Entities the Project is the Entity's 'benefactor'.
This permission inheritance can be overridden by creating an ACL for the Entity.
When this occurs the Entity becomes its own benefactor and all permission are
determined by its own ACL.</p>
<p>If the ACL of an Entity is deleted, then its benefactor will automatically be set
to its parent's benefactor.</p>
<p><strong>Special notice for Projects:</strong> The ACL for a Project cannot be deleted, you
must individually update or revoke the permissions for each user or group.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>include_self</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True (default), delete the ACL of the current entity.
If False, skip deleting the ACL of the current entity.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_container_content</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, delete ACLs from contents directly within
containers (files and folders inside self). This must be set to
True for recursive to have any effect. Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>recursive</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True and the entity is a container (e.g., Project or Folder),
recursively process child containers. Note that this must be used with
include_container_content=True to have any effect. Setting recursive=True
with include_container_content=False will raise a ValueError.
Only works on classes that support the <code>sync_from_synapse_async</code> method.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_entity_types</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Specify which entity types to process when deleting ACLs.
Allowed values are "folder" and "file" (case-insensitive).
If None, defaults to ["folder", "file"]. This does not affect the
entity type of the current entity, which is always processed if
<code>include_self=True</code>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dry_run</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, log the changes that would be made instead of actually
performing the deletions. When enabled, all ACL deletion operations are
simulated and logged at info level. Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_acl_details</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>When dry_run=True, controls whether current ACL details are
displayed for entities that will have their permissions changed. If True (default),
shows detailed ACL information. If False, hides ACL details for cleaner output.
Has no effect when dry_run=False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show_files_in_containers</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>When dry_run=True, controls whether files within containers
are displayed in the preview. If True (default), shows all files. If False, hides
files when their only change is benefactor inheritance (but still shows files with
local ACLs being deleted). Has no effect when dry_run=False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>benefactor_tracker</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional tracker for managing benefactor relationships.
Used for recursive functionality to track which entities will be affected</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<span title="synapseclient.models.mixins.access_control.BenefactorTracker">BenefactorTracker</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code>None</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If the entity does not have an ID or if an invalid entity type is provided.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="SynapseHTTPError">SynapseHTTPError</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If there are permission issues or if the entity already inherits permissions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#Exception">Exception</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>For any other errors that may occur during the process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Note: The caller must be granted ACCESS_TYPE.CHANGE_PERMISSIONS on the Entity to
call this method.</p>


<details class="example" open>
  <summary>Delete permissions for a single entity</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions</span><span class="p">()</span>
</code></pre></div>
</details>

<details class="example" open>
  <summary>Delete permissions recursively for a folder and all its children</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Folder</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="c1"># Delete permissions for this folder only (does not affect children)</span>
<span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions</span><span class="p">()</span>

<span class="c1"># Delete permissions for all files and folders directly within this folder,</span>
<span class="c1"># but not the folder itself</span>
<span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions</span><span class="p">(</span>
    <span class="n">include_self</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Delete permissions for all items in the entire hierarchy (folders and their files)</span>
<span class="c1"># Both recursive and include_container_content must be True</span>
<span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions</span><span class="p">(</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Delete permissions only for folder entities within this folder recursively</span>
<span class="c1"># and their contents</span>
<span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions</span><span class="p">(</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;folder&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Delete permissions only for files within this folder and all subfolders</span>
<span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions</span><span class="p">(</span>
    <span class="n">include_self</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Dry run example: Log what would be deleted without making changes</span>
<span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete_permissions</span><span class="p">(</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">dry_run</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/protocols/access_control_protocol.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_permissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">include_self</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show_acl_details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">show_files_in_containers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">benefactor_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;BenefactorTracker&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete the entire Access Control List (ACL) for a given Entity. This is not</span>
<span class="sd">    scoped to a specific user or group, but rather removes all permissions</span>
<span class="sd">    associated with the Entity. After this operation, the Entity will inherit</span>
<span class="sd">    permissions from its benefactor, which is typically its parent entity or</span>
<span class="sd">    the Project it belongs to.</span>

<span class="sd">    In order to remove permissions for a specific user or group, you</span>
<span class="sd">    should use the `set_permissions` method with the `access_type` set to</span>
<span class="sd">    an empty list.</span>

<span class="sd">    By default, Entities such as FileEntity and Folder inherit their permission from</span>
<span class="sd">    their containing Project. For such Entities the Project is the Entity&#39;s &#39;benefactor&#39;.</span>
<span class="sd">    This permission inheritance can be overridden by creating an ACL for the Entity.</span>
<span class="sd">    When this occurs the Entity becomes its own benefactor and all permission are</span>
<span class="sd">    determined by its own ACL.</span>

<span class="sd">    If the ACL of an Entity is deleted, then its benefactor will automatically be set</span>
<span class="sd">    to its parent&#39;s benefactor.</span>

<span class="sd">    **Special notice for Projects:** The ACL for a Project cannot be deleted, you</span>
<span class="sd">    must individually update or revoke the permissions for each user or group.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        include_self: If True (default), delete the ACL of the current entity.</span>
<span class="sd">            If False, skip deleting the ACL of the current entity.</span>
<span class="sd">        include_container_content: If True, delete ACLs from contents directly within</span>
<span class="sd">            containers (files and folders inside self). This must be set to</span>
<span class="sd">            True for recursive to have any effect. Defaults to False.</span>
<span class="sd">        recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">            recursively process child containers. Note that this must be used with</span>
<span class="sd">            include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">            with include_container_content=False will raise a ValueError.</span>
<span class="sd">            Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">        target_entity_types: Specify which entity types to process when deleting ACLs.</span>
<span class="sd">            Allowed values are &quot;folder&quot; and &quot;file&quot; (case-insensitive).</span>
<span class="sd">            If None, defaults to [&quot;folder&quot;, &quot;file&quot;]. This does not affect the</span>
<span class="sd">            entity type of the current entity, which is always processed if</span>
<span class="sd">            `include_self=True`.</span>
<span class="sd">        dry_run: If True, log the changes that would be made instead of actually</span>
<span class="sd">            performing the deletions. When enabled, all ACL deletion operations are</span>
<span class="sd">            simulated and logged at info level. Defaults to False.</span>
<span class="sd">        show_acl_details: When dry_run=True, controls whether current ACL details are</span>
<span class="sd">            displayed for entities that will have their permissions changed. If True (default),</span>
<span class="sd">            shows detailed ACL information. If False, hides ACL details for cleaner output.</span>
<span class="sd">            Has no effect when dry_run=False.</span>
<span class="sd">        show_files_in_containers: When dry_run=True, controls whether files within containers</span>
<span class="sd">            are displayed in the preview. If True (default), shows all files. If False, hides</span>
<span class="sd">            files when their only change is benefactor inheritance (but still shows files with</span>
<span class="sd">            local ACLs being deleted). Has no effect when dry_run=False.</span>
<span class="sd">        benefactor_tracker: Optional tracker for managing benefactor relationships.</span>
<span class="sd">            Used for recursive functionality to track which entities will be affected</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">        SynapseHTTPError: If there are permission issues or if the entity already inherits permissions.</span>
<span class="sd">        Exception: For any other errors that may occur during the process.</span>

<span class="sd">    Note: The caller must be granted ACCESS_TYPE.CHANGE_PERMISSIONS on the Entity to</span>
<span class="sd">    call this method.</span>

<span class="sd">    Example: Delete permissions for a single entity</span>
<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        File(id=&quot;syn123&quot;).delete_permissions()</span>

<span class="sd">        ```</span>

<span class="sd">    Example: Delete permissions recursively for a folder and all its children</span>
<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import Folder</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        # Delete permissions for this folder only (does not affect children)</span>
<span class="sd">        Folder(id=&quot;syn123&quot;).delete_permissions()</span>

<span class="sd">        # Delete permissions for all files and folders directly within this folder,</span>
<span class="sd">        # but not the folder itself</span>
<span class="sd">        Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">            include_self=False,</span>
<span class="sd">            include_container_content=True</span>
<span class="sd">        )</span>

<span class="sd">        # Delete permissions for all items in the entire hierarchy (folders and their files)</span>
<span class="sd">        # Both recursive and include_container_content must be True</span>
<span class="sd">        Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">            recursive=True,</span>
<span class="sd">            include_container_content=True</span>
<span class="sd">        )</span>

<span class="sd">        # Delete permissions only for folder entities within this folder recursively</span>
<span class="sd">        # and their contents</span>
<span class="sd">        Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">            recursive=True,</span>
<span class="sd">            include_container_content=True,</span>
<span class="sd">            target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">        )</span>

<span class="sd">        # Delete permissions only for files within this folder and all subfolders</span>
<span class="sd">        Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">            include_self=False,</span>
<span class="sd">            recursive=True,</span>
<span class="sd">            include_container_content=True,</span>
<span class="sd">            target_entity_types=[&quot;file&quot;]</span>
<span class="sd">        )</span>

<span class="sd">        # Dry run example: Log what would be deleted without making changes</span>
<span class="sd">        Folder(id=&quot;syn123&quot;).delete_permissions(</span>
<span class="sd">            recursive=True,</span>
<span class="sd">            include_container_content=True,</span>
<span class="sd">            dry_run=True</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.list_acl" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">list_acl</span>


<a href="#synapseclient.models.protocols.access_control_protocol.AccessControllableSynchronousProtocol.list_acl" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_acl</span><span class="p">(</span><span class="n">recursive</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_container_content</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">target_entity_types</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">log_tree</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">synapse_client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_progress_bar</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a></span><span class="p">[</span><span class="n"><span title="tqdm.tqdm">tqdm</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="synapseclient.models.mixins.access_control.AclListResult">AclListResult</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List the Access Control Lists (ACLs) for this entity and optionally its children.</p>
<p>This function returns the local sharing settings for the entity and optionally
its children. It provides a mapping of all ACLs for the given container/entity.</p>
<p><strong>Important Note:</strong> This function returns the LOCAL sharing settings only, not
the effective permissions that each Synapse User ID/Team has on the entities.
More permissive permissions could be granted via a Team that the user has access
to that has permissions on the entity, or through inheritance from parent entities.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>recursive</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True and the entity is a container (e.g., Project or Folder),
recursively process child containers. Note that this must be used with
include_container_content=True to have any effect. Setting recursive=True
with include_container_content=False will raise a ValueError.
Only works on classes that support the <code>sync_from_synapse_async</code> method.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_container_content</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, include ACLs from contents directly within
containers (files and folders inside self). This must be set to
True for recursive to have any effect. Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_entity_types</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Specify which entity types to process when listing ACLs.
Allowed values are "folder" and "file" (case-insensitive).
If None, defaults to ["folder", "file"].</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_tree</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, logs the ACL results to console in ASCII tree format showing
entity hierarchies and their ACL permissions in a tree-like structure.
Defaults to False.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synapse_client</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If not passed in and caching was not disabled by
<code>Synapse.allow_client_caching(False)</code> this will use the last created
instance from the Synapse class constructor.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="            synapseclient.Synapse" href="../../../client/#synapseclient.Synapse">Synapse</a>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_progress_bar</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Internal parameter. Progress bar instance to use for updates
when called recursively. Should not be used by external callers.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<span title="tqdm.tqdm">tqdm</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.models.mixins.access_control.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An AclListResult object containing a structured representation of ACLs where:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.models.mixins.access_control.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <ul>
<li>entity_acls: A list of EntityAcl objects, each representing one entity's ACL</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.models.mixins.access_control.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <ul>
<li>Each EntityAcl contains acl_entries (a list of AclEntry objects)</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="synapseclient.models.mixins.access_control.AclListResult">AclListResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <ul>
<li>Each AclEntry contains the principal_id and their list of permissions</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If the entity does not have an ID or if an invalid entity type is provided.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="SynapseHTTPError">SynapseHTTPError</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If there are permission issues accessing ACLs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#Exception">Exception</a></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>For any other errors that may occur during the process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>List ACLs for a single entity</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">acl_result</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="p">)</span>

<span class="c1"># Access entity ACLs (entity_acls is a list, not a dict)</span>
<span class="k">for</span> <span class="n">entity_acl</span> <span class="ow">in</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">entity_acl</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">==</span> <span class="s2">&quot;syn123&quot;</span><span class="p">:</span>
        <span class="c1"># Access individual ACL entries</span>
        <span class="k">for</span> <span class="n">acl_entry</span> <span class="ow">in</span> <span class="n">entity_acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">acl_entry</span><span class="o">.</span><span class="n">principal_id</span> <span class="o">==</span> <span class="s2">&quot;273948&quot;</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Principal 273948 has permissions: </span><span class="si">{</span><span class="n">acl_entry</span><span class="o">.</span><span class="n">permissions</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># I can also access the ACL for the file itself</span>
<span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="o">.</span><span class="n">entity_acl</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="p">)</span>
</code></pre></div>
</details>

<details class="example" open>
  <summary>List ACLs recursively for a folder and all its children</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Folder</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">acl_result</span> <span class="o">=</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl</span><span class="p">(</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Access each entity&#39;s ACL (entity_acls is a list)</span>
<span class="k">for</span> <span class="n">entity_acl</span> <span class="ow">in</span> <span class="n">acl_result</span><span class="o">.</span><span class="n">all_entity_acls</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">entity_acl</span><span class="o">.</span><span class="n">entity_id</span><span class="si">}</span><span class="s2"> has ACL with </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">entity_acl</span><span class="o">.</span><span class="n">acl_entries</span><span class="p">)</span><span class="si">}</span><span class="s2"> principals&quot;</span><span class="p">)</span>

<span class="c1"># I can also access the ACL for the folder itself</span>
<span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="o">.</span><span class="n">entity_acl</span><span class="p">)</span>

<span class="c1"># List ACLs for only folder entities</span>
<span class="n">folder_acl_result</span> <span class="o">=</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl</span><span class="p">(</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">target_entity_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;folder&quot;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>
</details>

<details class="example" open>
  <summary>List ACLs with ASCII tree visualization</summary>
  <p>When <code>log_tree=True</code>, the ACLs will be logged in a tree format. Additionally,
the <code>ascii_tree</code> attribute of the AclListResult will contain the ASCII tree
representation of the ACLs.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Synapse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">synapseclient.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Folder</span>

<span class="n">syn</span> <span class="o">=</span> <span class="n">Synapse</span><span class="p">()</span>
<span class="n">syn</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">acl_result</span> <span class="o">=</span> <span class="n">Folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;syn123&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">list_acl</span><span class="p">(</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">log_tree</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># Enable ASCII tree logging</span>
<span class="p">)</span>

<span class="c1"># The ASCII tree representation of the ACLs will also be available</span>
<span class="c1"># in acl_result.ascii_tree</span>
<span class="nb">print</span><span class="p">(</span><span class="n">acl_result</span><span class="o">.</span><span class="n">ascii_tree</span><span class="p">)</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>synapseclient/models/protocols/access_control_protocol.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_acl</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_container_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">target_entity_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_tree</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">synapse_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Synapse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_progress_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">tqdm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Internal parameter for recursive calls</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AclListResult&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    List the Access Control Lists (ACLs) for this entity and optionally its children.</span>

<span class="sd">    This function returns the local sharing settings for the entity and optionally</span>
<span class="sd">    its children. It provides a mapping of all ACLs for the given container/entity.</span>

<span class="sd">    **Important Note:** This function returns the LOCAL sharing settings only, not</span>
<span class="sd">    the effective permissions that each Synapse User ID/Team has on the entities.</span>
<span class="sd">    More permissive permissions could be granted via a Team that the user has access</span>
<span class="sd">    to that has permissions on the entity, or through inheritance from parent entities.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        recursive: If True and the entity is a container (e.g., Project or Folder),</span>
<span class="sd">            recursively process child containers. Note that this must be used with</span>
<span class="sd">            include_container_content=True to have any effect. Setting recursive=True</span>
<span class="sd">            with include_container_content=False will raise a ValueError.</span>
<span class="sd">            Only works on classes that support the `sync_from_synapse_async` method.</span>
<span class="sd">        include_container_content: If True, include ACLs from contents directly within</span>
<span class="sd">            containers (files and folders inside self). This must be set to</span>
<span class="sd">            True for recursive to have any effect. Defaults to False.</span>
<span class="sd">        target_entity_types: Specify which entity types to process when listing ACLs.</span>
<span class="sd">            Allowed values are &quot;folder&quot; and &quot;file&quot; (case-insensitive).</span>
<span class="sd">            If None, defaults to [&quot;folder&quot;, &quot;file&quot;].</span>
<span class="sd">        log_tree: If True, logs the ACL results to console in ASCII tree format showing</span>
<span class="sd">            entity hierarchies and their ACL permissions in a tree-like structure.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        synapse_client: If not passed in and caching was not disabled by</span>
<span class="sd">            `Synapse.allow_client_caching(False)` this will use the last created</span>
<span class="sd">            instance from the Synapse class constructor.</span>
<span class="sd">        _progress_bar: Internal parameter. Progress bar instance to use for updates</span>
<span class="sd">            when called recursively. Should not be used by external callers.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An AclListResult object containing a structured representation of ACLs where:</span>
<span class="sd">        - entity_acls: A list of EntityAcl objects, each representing one entity&#39;s ACL</span>
<span class="sd">        - Each EntityAcl contains acl_entries (a list of AclEntry objects)</span>
<span class="sd">        - Each AclEntry contains the principal_id and their list of permissions</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the entity does not have an ID or if an invalid entity type is provided.</span>
<span class="sd">        SynapseHTTPError: If there are permission issues accessing ACLs.</span>
<span class="sd">        Exception: For any other errors that may occur during the process.</span>

<span class="sd">    Example: List ACLs for a single entity</span>
<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import File</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        acl_result = File(id=&quot;syn123&quot;).list_acl()</span>
<span class="sd">        print(acl_result)</span>

<span class="sd">        # Access entity ACLs (entity_acls is a list, not a dict)</span>
<span class="sd">        for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">            if entity_acl.entity_id == &quot;syn123&quot;:</span>
<span class="sd">                # Access individual ACL entries</span>
<span class="sd">                for acl_entry in entity_acl.acl_entries:</span>
<span class="sd">                    if acl_entry.principal_id == &quot;273948&quot;:</span>
<span class="sd">                        print(f&quot;Principal 273948 has permissions: {acl_entry.permissions}&quot;)</span>

<span class="sd">        # I can also access the ACL for the file itself</span>
<span class="sd">        print(acl_result.entity_acl)</span>

<span class="sd">        print(acl_result)</span>

<span class="sd">        ```</span>

<span class="sd">    Example: List ACLs recursively for a folder and all its children</span>
<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import Folder</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        acl_result = Folder(id=&quot;syn123&quot;).list_acl(</span>
<span class="sd">            recursive=True,</span>
<span class="sd">            include_container_content=True</span>
<span class="sd">        )</span>

<span class="sd">        # Access each entity&#39;s ACL (entity_acls is a list)</span>
<span class="sd">        for entity_acl in acl_result.all_entity_acls:</span>
<span class="sd">            print(f&quot;Entity {entity_acl.entity_id} has ACL with {len(entity_acl.acl_entries)} principals&quot;)</span>

<span class="sd">        # I can also access the ACL for the folder itself</span>
<span class="sd">        print(acl_result.entity_acl)</span>

<span class="sd">        # List ACLs for only folder entities</span>
<span class="sd">        folder_acl_result = Folder(id=&quot;syn123&quot;).list_acl(</span>
<span class="sd">            recursive=True,</span>
<span class="sd">            include_container_content=True,</span>
<span class="sd">            target_entity_types=[&quot;folder&quot;]</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>

<span class="sd">    Example: List ACLs with ASCII tree visualization</span>
<span class="sd">        When `log_tree=True`, the ACLs will be logged in a tree format. Additionally,</span>
<span class="sd">        the `ascii_tree` attribute of the AclListResult will contain the ASCII tree</span>
<span class="sd">        representation of the ACLs.</span>

<span class="sd">        ```python</span>
<span class="sd">        from synapseclient import Synapse</span>
<span class="sd">        from synapseclient.models import Folder</span>

<span class="sd">        syn = Synapse()</span>
<span class="sd">        syn.login()</span>

<span class="sd">        acl_result = Folder(id=&quot;syn123&quot;).list_acl(</span>
<span class="sd">            recursive=True,</span>
<span class="sd">            include_container_content=True,</span>
<span class="sd">            log_tree=True, # Enable ASCII tree logging</span>
<span class="sd">        )</span>

<span class="sd">        # The ASCII tree representation of the ACLs will also be available</span>
<span class="sd">        # in acl_result.ascii_tree</span>
<span class="sd">        print(acl_result.ascii_tree)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">AclListResult</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../async/form/" class="md-footer__link md-footer__link--prev" aria-label="Previous: FormGroup and Form">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                FormGroup and Form
              </div>
            </div>
          </a>
        
        
          
          <a href="../storable_container/" class="md-footer__link md-footer__link--next" aria-label="Next: StorableContainer">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                StorableContainer
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Sage-Bionetworks/synapsePythonClient" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Sage-Bionetworks/synapsePythonClient/pkgs/container/synapsepythonclient" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/synapseclient/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["content.code.copy", "navigation.footer", "navigation.sections", "search.highlight", "search.share", "search.suggest", "toc.follow", "navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.instant.progress"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../../termynal.js"></script>
      
        <script src="../../../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>